#include "inc/flag.h"
#include "inc/def.h"
#include "inc/scr_inc.h"
#include "inc/3dicon.h"
#include "inc/music.h"
#include "inc/se.h"
#include "inc/efx.h"
#include "inc/mons.h"
#include "inc/skilldef.h"
#include "inc/temp/mp1201.h"
#include "inc/vo.h"
//---------------------------------------------------------------
//
//mp1215　迎撃戦イベント用 丘マップ
//
//---------------------------------------------------------------
//初期化用
function "init"
{
	//遠景不必要ノード削除◆マップ作業者用
	MapHide( "@BG2_mp1101" , 0 )
	MapHide( "@BG2_mp1102_alpha" , 0 )
	MapHide( "@BG2_mp1201" , 0 )
	MapHide( "@BG2_mp3101_1" , 0 )
	MapHide( "norosi" , 0 )
	MapHide( "BG2_groundfog_S1" , 0 )	//遠景の板フォグを消す
	MapHide( "BG2_groundfog_SW1" , 0 )	//遠景の板フォグを消す
	MapHide( "BG2_groundfog_SW2" , 0 )	//遠景の板フォグを消す

	SetFlag( TF_NPC_NOLOAD ,0)	//NpcPosition読み込み判定用：念のためクリアしておく
	
	UseFood(FOODEFFID_EXPUP2)
	//データ破棄対象の指定（イベント用データは個別指定）
	CallFunc("system:ReleaseChr_NPCALL")
	ReleaseChr(ev_b154  )
	ReleaseChr(ev_m1021_1)

	if( FLAG[SF_EVENT_ON] ){	
	//イベント発生
		if( FLAG[GF_03MP1201_ALARM_INTERCEPT] && !FLAG[GF_TBOX_DUMMY073]){		// 初めて古代種を打倒する
			//SetFlag( TF_NPC_NOLOAD,1 )	//NpcPositionを呼び出さない
			//EventCue("mp1215:EV_M03S250")
		}
		if(FLAG[GF_06MP1215_APPEAR_ANCIENT] && !FLAG[GF_TBOX_DUMMY087]){	//迎撃戦で新種に遭遇する
			//SetFlag( TF_NPC_NOLOAD,1 )	//NpcPositionを呼び出さない
			//EventCue("mp1215:EV_M06S011")
		}
	}

	//一般キャラ読み込み
	if( !FLAG[TF_NPC_NOLOAD] ){
		CallFunc("talk:NpcPosition")
	}
	SetFlag( TF_NPC_NOLOAD ,0)	//NpcPosition読み込み判定用：念のためクリアしておく
	
	//破棄対象に指定したキャラit3を破棄実行
	ReleaseChrGo()
}


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//■メインイベントクション

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function "EV_M03S250"			//初めて古代種を打倒する
{
	//開始処理ここから-----------------------------------------------
	SetStopFlag(STOPFLAG_EVENTIMPOSE)
	ResetStopFlag(STOPFLAG_CINEMA)

	FadeOut(FADE_BLACK, 0)
	WaitFade()

	LoadChr("Dina"	)
	LoadChr("Dogi"	)
	LoadChr("Kuina"	)
	LoadChr("Aaron"	)
	LoadChr("Katrin")
	CallFunc("system:Load_Miralda_Event")		//LoadChr("Miralda")
	CallFunc("system:Load_Reja_Event")		//LoadChr("Reja")
	CallFunc("system:Load_Austen_Event") 		//LoadChr("Austen")
	LoadChr("ev_b154" )

	//イベント開始前情報の保存
	SaveEventState()
	CallFunc("system:event_chrinfoflag_set")
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")
	
	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	MapHide("smoke" , 0 )

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )

	//キャラ初期状態の設定				
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL",-51.32f,-1374.73f,48.60f)
	Turn("ADOL",-141.83f,360.0f)
	ChangeAnimation("ADOL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_ANGER, 1)
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("ADOL")
	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("RICOTTA",-46.88f,-1376.72f,48.60f)
	Turn("RICOTTA",-160.51f,360.0f)
	ChangeAnimation("RICOTTA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_ANGER, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("RICOTTA")
	SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD",-49.75f,-1377.81f,48.60f)
	Turn("SAHAD",-163.42f,360.0f)
	PitchChr("SAHAD", 0.00f, 0)
	RollChr("SAHAD", 0.00f, 0)
	ChangeAnimation("SAHAD", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_SAD, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("SAHAD")
	SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA",-52.55f,-1372.17f,48.60f)
	Turn("LAXIA",-142.66f,360.0f)
	PitchChr("LAXIA", -2.41f, 0)
	RollChr("LAXIA", 0.00f, 0)
	ChangeAnimation("LAXIA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_ANGER, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("LAXIA")
	SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)

	// 古代種
	SetChrPos("ev_b154",-43.84f,-1365.36f,48.60f)
	Turn("ev_b154",38.18f,360.0f)
	ChangeSubAnimation("ev_b154",SUBMOT_EXT2,ANI_SCAR_2,1)
//	SetChrWork("ev_b154",CWK_TEMP_INT2,2)	//傷状態

//	ChangeAnimation("ADOL", "ANI_EV_SETARM", -1, 1)	// 武器構え
//	ChangeAnimation("LAXIA", "ANI_EV_SETARM", -1, 1)	// 武器構え
//	ChangeAnimation("SAHAD", "ANI_EV_SETARM", -1, 1)	// 武器構え
//	ChangeAnimation("RICOTTA", "ANI_EV_SETARM", -1, 1)	// 武器構え
	SetChrWork("ADOL",CWK_BATTLEMODE,1)
	SetChrWork("LAXIA",CWK_BATTLEMODE,1)
	SetChrWork("SAHAD",CWK_BATTLEMODE,1)
	SetChrWork("RICOTTA",CWK_BATTLEMODE,1)


	SetChrInfoFlag("Dina",INFOFLAG_INVISIBLE)
	SetChrInfoFlag("Dogi",INFOFLAG_INVISIBLE)	
	SetChrInfoFlag("Kuina"	,INFOFLAG_INVISIBLE)
	SetChrInfoFlag("Aaron"	,INFOFLAG_INVISIBLE)
	SetChrInfoFlag("Katrin",INFOFLAG_INVISIBLE)
	SetChrInfoFlag("Miralda",INFOFLAG_INVISIBLE)
	SetChrInfoFlag("Reja"	,INFOFLAG_INVISIBLE)
	SetChrInfoFlag("Austen"   ,INFOFLAG_INVISIBLE)

	SetChrPos("Katrin",-65.95f,-1395.39f,48.56f)
	Turn("Katrin",-144.32f,360.0f)
	ChangeAnimation( "Katrin" , "ANI_EV_UDEGUMI", -1 , 1 )
	LookReset("Katrin")
	SetChrInfoFlag( "Katrin" , INFOFLAG_NOCHRATARI)

	SetChrWork("Aaron", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Aaron",-66.39f,-1392.36f,48.58f)
	Turn("Aaron",-144.32f,360.0f)
	ChangeAnimation( "Aaron" , "ANI_EV_RYOTEKOSI", -1 , 1 )
	ChangeSubAnimation("Aaron",SUBMOT_MOUTH,ANI_M_SMILE,1)
	LookReset("Aaron")
	SetChrInfoFlag( "Aaron" , INFOFLAG_NOCHRATARI)

	SetChrWork("Dogi", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Dogi",-65.84f,-1393.56f,48.58f)
	Turn("Dogi",-133.86f,360.0f)
	ChangeAnimation( "Dogi" , "ANI_EV_HIRA", -1 , 1 )
	ChangeSubAnimation("Dogi",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("Dogi",SUBMOT_MOUTH,ANI_M_SMILE,1)
	ChangeSubAnimation("Dogi",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("Dogi")
	SetChrInfoFlag( "Dogi" , INFOFLAG_NOCHRATARI)

	SetChrPos("Dina",-67.53f,-1394.13f,48.55f)
	Turn("Dina",-137.41f,360.0f)
	ChangeAnimation( "Dina" , "ANI_WAIT", -1 , 1 )
	LookReset("Dina")
	SetChrInfoFlag( "Dina" , INFOFLAG_NOCHRATARI)

	SetChrWork("Kuina", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Kuina",-68.23f,-1392.30f,48.56f)
	Turn("Kuina",-114.27f,360.0f)
	ChangeAnimation( "Kuina" , "ANI_EV_HASHAGU", -1 , 1 )
	ChangeSubAnimation("Kuina",SUBMOT_EYE,ANI_E_LAUGH,1)
	ChangeSubAnimation("Kuina",SUBMOT_MOUTH,ANI_M_LAUGH,1)
	ChangeSubAnimation("Kuina",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("Kuina")
	SetChrInfoFlag( "Kuina" , INFOFLAG_NOCHRATARI)

	//条件次第でいる
	if( FLAG[GF_SUBEV_JOIN_MIRALDA] )			// ミラルダと合流した
	{
		SetChrPos("Miralda",-67.51f,-1396.36f,48.53f)
		Turn("Miralda",-132.51f,360.0f)
		ChangeAnimation( "Miralda" , "ANI_EV_GUTSPOSE", -1 , 1 )
		SetChrInfoFlag( "Miralda" , INFOFLAG_NOCHRATARI)
	}


	if( FLAG[GF_SUBEV_JOIN_AUSTEN] )			// オースティンと合流した
	{
		SetChrPos("Austen",-68.32f,-1395.50f,48.53f)
		Turn("Austen",-131.34f,360.0f)
		ChangeAnimation( "Austen" , "ANI_EV_RYOTEKOSI", -1 , 1 )
		SetChrInfoFlag( "Austen" , INFOFLAG_NOCHRATARI)
	}

	if( FLAG[GF_SUBEV_JOIN_REJA] )				// レーヤと合流した
	{
		SetChrPos("Reja",-68.60f,-1394.06f,48.54f)
		Turn("Reja",-124.01f,360.0f)
		ChangeAnimation( "Reja" , "ANI_EV_YARUKI", -1 , 1 )
		SetChrInfoFlag( "Reja" , INFOFLAG_NOCHRATARI)
	}

	SetFlag(SF_CHARANORECVSHADOW,1)	//キャラ影受けない

	Wait(10)

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	//カメラ設定
	MoveCameraAt( 0 , -45.461f , -1368.315f , 55.088f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 6.852f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -25.947f , 0 )	// 基本仰角
	RotateCamera( 0 , 8.506f , 0 )				// 角度
	ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -27.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 100.000, 1.000, 0.550, 0.500)					//イベント毎に調整
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp1215:EV_M03S250_ED")

	//開始処理ここまで-----------------------------------------------

	//　　迎撃戦最終ラウンドで古代種を倒すとイベント開始。
	//　　弱って体勢を崩しそうになっている古代種。
	//　　その周囲を囲むアドル、ラクシャ、サハド、リコッタ。

	SetMotSpd("ev_b154" , -1 , 0.7f)
	ChangeAnimation( "ev_b154" , "ANI_EV_PAIN_S", -1 , 1 )	
	PlaySE(SE_M03S250_01, 80, 0, 0, 0, 1.0f, 0)	//ぎゃーす

	//カメラに干渉するのでハイド
	SetChrInfoFlag("LAXIA", INFOFLAG_INVISIBLE)
	SetChrInfoFlag("ADOL", INFOFLAG_INVISIBLE)

	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , -44.746f , -1365.708f , 50.623f, 140 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 12.553f , 140 )				// 基本距離
	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , -4.755f , 140 )				// 基本仰角
	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE , 261.864f , 140 )						// 角度
	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE ,  8.9f  , 140 )				// ロール回転

	//MoveCameraAt( 0 , -44.746f , -1365.708f , 50.623f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 12.553f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -4.755f , 0 )	// 基本仰角
	//RotateCamera( 0 , 261.864f , 0 )				// 角度
	//ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 8.9f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()


	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)

	Wait(45)

	StopBGM(180)

	CrossFade(FADE_CROSS)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	MoveCameraAt( 0 , -47.652f , -1377.127f , 49.960f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.853f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -11.208f , 0 )	// 基本仰角
	RotateCamera( 0 , 125.480f , 0 )				// 角度
	ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 7.1f , 0 )				// ロール回転

	ResetChrInfoFlag("LAXIA", INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("ADOL", INFOFLAG_INVISIBLE)

	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , -47.730f , -1377.018f , 49.960f , 160 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 2.153f , 160 )				// 基本距離
	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , -11.208f , 160 )				// 基本仰角
	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE ,  125.477f , 160 )						// 角度
//	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE ,  2.1f  , 160 )				// ロール回転

	//MoveCameraAt( 0 , -47.730f , -1377.018f , 49.960f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.153f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -11.208f , 0 )	// 基本仰角
	//RotateCamera( 0 , 125.477f , 0 )				// 角度
	//ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 7.1f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	TalkMes("RICOTTA","#2681V#000m手応えあり！","","")
	WaitPrompt()
	WaitCloseWindow()

	//	"SAHAD"
	TalkMes("SAHAD","#1761V#050e#000mや、やったのか？","","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)

	CrossFade(FADE_CROSS)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	MoveCameraAt( 0 , -52.489f , -1372.267f , 49.811f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.253f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 0.782f , 0 )	// 基本仰角
	RotateCamera( 0 , 232.826f , 0 )				// 角度
	ChangeCameraPers( 0 , 34.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -1.8f , 0 )				// ロール回転

	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , -52.696f , -1372.540f , 49.811f , 100 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE ,2.253f , 100 )				// 基本距離
	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , 0.782f , 100 )				// 基本仰角
	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE ,  232.826f , 100 )						// 角度
//	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE ,  2.1f  , 100 )				// ロール回転

	//MoveCameraAt( 0 , -52.696f , -1372.540f , 49.811f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.253f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 0.782f , 0 )	// 基本仰角
	//RotateCamera( 0 , 232.826f , 0 )				// 角度
	//ChangeCameraPers( 0 , 34.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -1.8f , 0 )				// ロール回転

	Wait(FADE_CROSS)

	//	"LAXIA"
	TalkMes("LAXIA","#0924V#000e#000mまだ……油断はできません！","","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(20)

	CrossFade(FADE_NORMAL)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	MoveCameraAt( 0 , -44.393f , -1366.138f , 51.597f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 16.956f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -9.247f , 0 )	// 基本仰角
	RotateCamera( 0 , 334.689f , 0 )				// 角度
	ChangeCameraPers( 0 , 42.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -6.1f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	TurnTo("LAXIA", -49.19f,-1369.16f,48.60f,360.0f)

	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , -44.393f , -1366.138f , 51.597f , 320 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE ,  15.107f  , 320 )				// 基本距離
	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , -10.455f , 320 )				// 基本仰角
	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE , 314.102f , 320 )						// 角度
	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE ,  2.1f  , 320 )				// ロール回転

	//MoveCameraAt( 0 , -44.393f , -1366.138f , 51.597f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 15.107f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -10.455f , 0 )	// 基本仰角
	//RotateCamera( 0 , 314.102f , 0 )				// 角度
	//ChangeCameraPers( 0 , 42.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 2.1f , 0 )				// ロール回転

	SetMotSpd("ev_b154" , -1 , 0.8f)
	ChangeAnimation( "ev_b154" , "ANI_EV_DEAD", -1 , 1 )	

	//　　やがて弱々しく断末魔の啼き声をあげて、
	//　　ゆっくりと崩れるように倒れ伏す古代種。

	TalkMes("SAHAD","#1762V#000m#0L……………………………………","","")
	Wait(90)
	ClosePrompt()
	WaitCloseWindow()

	//PlaySE(SE_M03S250_02, 80, 0, 0, 0, 1.0f, 0)
	Wait(40)

	//	"LAXIA"
	TalkMes("LAXIA","#0925V#000m#0L……………………………………","","")
	Wait(90)
	ClosePrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)

	ExecuteCmd( 2, MoveTo, "LAXIA", -49.19f,-1369.16f,48.60f, 0.1f, 0.145f )
	//SetChrPos("LAXIA",-49.19f,-1369.16f,48.60f)
	//Turn("LAXIA",-142.66f,360.0f)

	Wait(20)

	CrossFade(FADE_NORMAL)

	MoveCameraAt( 0 , -48.551f , -1366.192f , 49.439f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.807f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -1.274f , 0 )	// 基本仰角
	RotateCamera( 0 , 262.720f , 0 )				// 角度
	ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転

	DestroyObj(-48.005f , -1367.501f , 48.645f , 1.5f , 0, 0, 0 )

	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , -48.278f , -1367.608f , 49.439f  , 140 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 5.037f, 150 )				// 基本距離
	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , 7.622f , 150 )				// 基本仰角
	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE , 315.682f  , 150 )						// 角度
	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE ,  2.1f  , 150 )				// ロール回転

	//MoveCameraAt( 0 , -48.278f , -1367.608f , 49.439f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 5.037f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 7.622f , 0 )	// 基本仰角
	//RotateCamera( 0 , 315.682f , 0 )				// 角度
	//ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -0.0f , 0 )				// ロール回転

	WaitThread(2)
	Look("LAXIA" , 0 , -7)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)

	Wait(20)

	CrossFade(FADE_NORMAL)
	MoveCameraAt( 0 , -49.079f , -1369.236f , 50.084f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.478f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -12.327f , 0 )	// 基本仰角
	RotateCamera( 0 , 157.007f , 0 )				// 角度
	ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -5.7f , 0 )				// ロール回転

	SetChrPos("LAXIA",-49.26f,-1369.22f,48.60f)
	Turn("LAXIA",-131.94f,360.0f)

	ChangeAnimation( "RICOTTA" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_SMILE,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_MOUTH,ANI_M_SMILE,1)

	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , -49.110f , -1369.243f , 49.910f  , 200 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE ,  2.177f, 200 )				// 基本距離
//	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , 7.622f , 200 )				// 基本仰角
//	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE , 315.682f  , 200 )						// 角度
//	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE ,  2.1f  , 200 )				// ロール回転

	//MoveCameraAt( 0 , -49.110f , -1369.243f , 49.910f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.177f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -12.327f , 0 )	// 基本仰角
	//RotateCamera( 0 , 157.008f , 0 )				// 角度
	//ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -5.7f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(10)

	EmotionEx("LAXIA", 0.02f,EMO_3DOT,0,3.8f,1,1,0.7f )
	Wait(80)

	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_CLOSE_S,1)
	LookReset("LAXIA")
	ChangeAnimation( "LAXIA" , "ANI_DISARM", -1 , 1 )
	WaitAnimation2( "LAXIA" , -1, 1, "ANI_DISARM",  0)
	Wait(20)


	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	ChangeAnimation( "LAXIA" , "ANI_EV_WAIT2_S", -1 , 1 )
	Look("LAXIA" , 25 , 0 )
	TalkMes("LAXIA","#0926V#010l#080e#080mどうやら……完全に沈黙したようです。","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(20)

	PlayBGM(BGM_EVENT_003, 0)
	FadeBGM(70, 0)

	CrossFade(FADE_CROSS)
	MoveCameraAt( 0 , -46.853f , -1376.713f , 49.836f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.968f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -17.436f , 0 )	// 基本仰角
	RotateCamera( 0 , 181.800f , 0 )				// 角度
	ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 3.9f , 0 )				// ロール回転

	Blur(BLUR_TYPE_AFTERIMAGE,0.3f , 20)
	ChangeAnimation("RICOTTA","ANI_EV_GUTSPOSE_S", -1 , 1 )
	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_LAUGH_S,1)

//	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , -49.190f , -1369.209f , 49.910f  , 200 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 1.268f , 20 )				// 基本距離
//	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , 7.622f , 200 )				// 基本仰角
//	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE , 315.682f  , 200 )						// 角度
//	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE ,  2.1f  , 200 )				// ロール回転

	//MoveCameraAt( 0 , -46.853f , -1376.713f , 49.836f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.268f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -17.434f , 0 )	// 基本仰角
	//RotateCamera( 0 , 181.800f , 0 )				// 角度
	//ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 3.9f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)

	Wait(20)

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE ,  -46.853f , -1376.713f , 49.836f , 15 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 2.288f, 15 )				// 基本距離
	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , -17.433f , 15 )				// 基本仰角
	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE , 155.227f , 15 )						// 角度
//	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE ,  2.1f  , 15 )				// ロール回転

//終点カメラ
	//MoveCameraAt( 0 , -46.853f , -1376.713f , 49.836f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.288f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -17.433f , 0 )	// 基本仰角
	//RotateCamera( 0 , 155.227f , 0 )				// 角度
	//ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 3.9f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Blur( BLUR_TYPE_EXPAND , 0.35f , 15 )

	ChangeAnimation("RICOTTA","ANI_EV_GUTSPOSE2_S", -1 , 1 )

	EarthQuake(0.08f,0.08f,10)


	TalkMes("RICOTTA","#2682V#020e#020m#20S討ち取ったりーっ！","","")		//（大文字）
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	//　　ガッツポーズをとるリコッタ。
	//　　リコッタの声とともに背後からワッと歓声が上がる。


	//PlaySE("◆歓声")
//	TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
//	{
//		"#7C◆歓声SE"
//	}
//	WaitPrompt()
//	WaitCloseWindow()

//	PlaySE(SE_M03S250_05, 100, 0, 0, 0, 1.0f, 0)	//ボイス有りキャラ少数の歓声をSEでやるのは厳しい
//	PlayVoice(Y8V_5840, "VOCHR_EVENT", 100)			//ガヤボイス
	PlayVoice(Y8V_3568, "Dogi", 50)
	PlayVoice(Y8V_4062, "Katrin", 60)
	Wait(5)
	PlayVoice(Y8V_4605, "Kuina", 50)
	PlayVoice(Y8V_3844, "Aaron", 50)
	PlayVoice(Y8V_4348, "Dina", 50)

	//　　カメラ切り替えて柵付近でドギ、エアランをはじめ、
	//　　漂流者たちが見守っていたのを見せる。

	CrossFade(FADE_FAST)
	ResetChrInfoFlag("Dina",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("Dogi",INFOFLAG_INVISIBLE)	
	ResetChrInfoFlag("Kuina"	,INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("Aaron"	,INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("Katrin",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("Miralda",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("Reja"	,INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("Austen"   ,INFOFLAG_INVISIBLE)

	MoveCameraAt( 0 , -67.723f , -1392.989f , 49.439f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.188f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -0.779f , 0 )	// 基本仰角
	RotateCamera( 0 , 305.094f , 0 )				// 角度
	ChangeCameraPers( 0 , 49.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転

	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_COS , -67.126f , -1394.094f , 49.244f , 120 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_COS , 8.088f, 120 )				// 基本距離
	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_COS , 29.193f , 120 )				// 基本仰角
	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_COS , 353.414f , 120 )						// 角度
	ExecuteCmd( 1005,RollCamera, INTERPOLATE_COS ,  -1.5f  , 120 )				// ロール回転

	//MoveCameraAt( 0 , -67.126f , -1394.094f , 49.244f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 8.088f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 29.193f , 0 )	// 基本仰角
	//RotateCamera( 0 , 353.414f , 0 )				// 角度
	//ChangeCameraPers( 0 , 49.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -1.5f , 0 )				// ロール回転

	ChangeAnimation( "Dogi" , "ANI_EV_YARUKI_S", -1 , 1 )

	ChangeAnimation( "Kuina" , "ANI_EV_HASHAGU", -1 , 1 )
	WaitAnimation2( "Kuina" , -1, 1, "ANI_EV_HASHAGU",  0)
	ChangeAnimation( "Kuina" , "ANI_EV_HASHAGU", -1 , 1 )

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)

	CrossFade(FADE_CROSS)
	MoveCameraAt( 0 , -68.992f , -1392.133f , 50.831f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 5.018f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -8.520f , 0 )	// 基本仰角
	RotateCamera( 0 , 73.039f , 0 )				// 角度
	ChangeCameraPers( 0 , 41.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -1.5f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ChangeAnimation( "Dogi" , "ANI_WAIT", -1 , 1 )

	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , -68.992f , -1392.133f , 50.658f , 80 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 5.538f, 80 )				// 基本距離
	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , -8.519f , 80 )				// 基本仰角
	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE , 73.036f  , 80 )						// 角度
//	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE ,  2.1f  , 80 )				// ロール回転

	//MoveCameraAt( 0 , -68.992f , -1392.133f , 50.658f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 5.538f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -8.519f , 0 )	// 基本仰角
	//RotateCamera( 0 , 73.036f , 0 )				// 角度
	//ChangeCameraPers( 0 , 41.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -1.5f , 0 )				// ロール回転

	ChangeAnimation( "Dogi" , "ANI_EV_GUTSPOSE_S", -1 , 1 )

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	//	ドギの声
	TalkMes("Dogi","#17S#3682V#080mおーい、やったじゃねぇか！！","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(20)

	//　　画面フェードアウト。
	//　　暗転のまま以下のメッセージ。

	SetEnvSEPlayState(-1, 0)	//環境SE全停止
	FadeBGM(100, 30)

	// フェードアウト
	FadeOut(FADE_BLACK, FADE_SLOW)
	WaitFade()
	// カメラ停止
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	//	テキスト
	TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
	{
		"#7Cその後、漂流村ではささやかながら"
		"#7C迎撃戦の祝勝会が催された。\p"
		"#7C最大の脅威である古代種への勝利が"
		"#7C漂流者たちを大いに勇気づけたのだ。\p"
		"#7C大きな歓喜の声とともに"
		"#7C漂流者たちにもみくちゃにされるアドル。\p"
		"#7Cやや手荒な祝福に不満をこぼしつつも、"
		"#7Cまんざらでもない様子のラクシャ。\p"
		"#7C互いに手を取り合って"
		"#7C踊りながら喜ぶサハドとリコッタ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	name2()
	TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
	{
		"#7Cだが、まだ島から脱出できるわけではない。"
		"#7C本当の試練はこれからかもしれないのだ……\p"
		"#7Cそう考えつつ寝床に潜り込んだアドルは、"
		"#7C久しぶりに深い眠りへと落ちていくのだった。"
	}
	WaitPrompt()
	WaitCloseWindow()

	StopBGM(120)
	Wait(90)

//終了処理ここから----------------------------------------------------
	CallFunc("mp1215:EV_M03S250_ED")
}

function "EV_M03S250_ED"									
{
	SetSkipScript("")
	
	//イベント前のキャラ情報を復帰							
	RestoreEventState()
									
	//隠したものを復帰										
	//ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化								
	CallFunc("system:reset_chrmot_ADOL")
	CallFunc("system:reset_chrmot_LAXIA")
	CallFunc("system:reset_chrmot_SAHAD")
	CallFunc("system:reset_chrmot_RICOTTA")
	CallFunc("system:reset_chrmot_Dogi")

	//WORK関連（RestoreEventStateで戻せないもの）
	SetChrWork("ADOL", CWK_BATTLEMODE, 0)
	SetChrWork("LAXIA", CWK_BATTLEMODE, 0)	
	SetChrWork("SAHAD", CWK_BATTLEMODE, 0)
	SetChrWork("RICOTTA", CWK_BATTLEMODE, 0)	

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam( -1 )

	SetFlag(SF_CHARANORECVSHADOW,0)	//キャラ影受ける

	//フラグ処理
	SetFlag(SF_ALLMUTEKI,0)		//無敵OFF

	// 通常
	if ( !FLAG[SF_GALLERY_EVENT] )
	{
		SetFlag( SF_TOWNMODE , 1)
		SetFlag(TF_LOADING_TIPS_OFF, 1)	//NowLoading 時の Tips 表示をカット

		SetFlag( GF_GALL_EV_03_07, 1 )		// M03S250:初めて古代種を打倒する

		StopBGM(30)
		SetFlag(SF_NOCHANGEBGM, 1)

		LoadArg("map/mp1201/mp1201.arg")
		EventCue("mp1201:EV_M03S260")

		ResetStopFlag(STOPFLAG_EVENTIMPOSE)
	}
	// イベントギャラリー中
	else
	{
		FadeBGM(100,15)
		SoundEfx( SEFX_DEFAULT, 15 )
		SetEnvSEPlayState(-1, 0)	//環境SE全停止
		GalleryEvEnd(0)		// イベントギャラリー終了（スクリプトから強制的に抜けていろいろ処理してくれる）
		ResetStopFlag(STOPFLAG_EVENTIMPOSE)
	}


//終了処理ここまで----------------------------------------------------
}


function "EV_M05S010"		//ダーナが迎撃戦に参加する
{
//開始処理ここから----------------------------------------------------

	SetStopFlag(STOPFLAG_EVENTIMPOSE)
	ResetStopFlag(STOPFLAG_CINEMA)	//字幕背景非表示

	FadeOut(FADE_BLACK,0)
	WaitFade()

	//イベントに登場するキャラをロード＆破棄対象から除外
	LoadChr("ev_m1001_1")
	LoadChr("ev_m1001_2")
	LoadChr("ev_m1007_1")
	LoadChr("ev_m1007_2")

	SaveCamera()
	SaveEventState()
	CallFunc("system:event_chrinfoflag_set")
	
	//▼▼▼▼▼▼　ステータス設定：ダーナ　▼▼▼▼▼▼	
	//SetFlag(SF_DANA_JOINOK,1)	// ダーナ参加

	if(!FLAG[GF_05MP1213_CHECK_DANA]){		//ダーナステータス設定済ならスルーする
		if ( !FLAG[SF_2NDSTART] ) {		// 2周目判定
			//SetLevel( DANA, 42)

			//GetSkill(PARTY_DANA, SKILL_DANA_SP_C4, 1)		//竜気
			//GetSkill(PARTY_DANA, SKILL_DANA_SP_C3, 1)		//エレメンタルシュート
			//GetSkill(PARTY_DANA, SKILL_DANA_SP_B5, 1)		//ミストラルブロウ
			//GetSkill(PARTY_DANA, SKILL_DANA_SP_A2, 1)		//奏輪舞踏
			//SetSkillShortCut(PARTY_DANA,	ATKSKILL_CIRCLE,	SKILL_DANA_SP_C3)	//ウォーターシュート
			//SetSkillShortCut(PARTY_DANA,	ATKSKILL_CROSS,		SKILL_DANA_SP_B5)	//ミストラルエッジ
			//SetSkillShortCut(PARTY_DANA,	ATKSKILL_SQUARE,	SKILL_DANA_SP_A2)	//蒼輪舞踏
			//SetSkillShortCut(PARTY_DANA,	ATKSKILL_TRIANGLE,	SKILL_DANA_SP_C4)	//竜気
		}
		else
		{
			if(!FLAG[SF_2ND_TAKEOVER_LV])
			{
				//SetLevel( DANA, 42)
			}
			if(!FLAG[SF_2ND_TAKEOVER_SKILL])
			{
				//GetSkill(PARTY_DANA, SKILL_DANA_SP_C4, 1)		//竜気
				//GetSkill(PARTY_DANA, SKILL_DANA_SP_C3, 1)		//エレメンタルシュート
				//GetSkill(PARTY_DANA, SKILL_DANA_SP_B5, 1)		//ミストラルブロウ
				//GetSkill(PARTY_DANA, SKILL_DANA_SP_A2, 1)		//奏輪舞踏
				//SetSkillShortCut(PARTY_DANA,	ATKSKILL_CIRCLE,	SKILL_DANA_SP_C3)	//ウォーターシュート
				//SetSkillShortCut(PARTY_DANA,	ATKSKILL_CROSS,		SKILL_DANA_SP_B5)	//ミストラルエッジ
				//SetSkillShortCut(PARTY_DANA,	ATKSKILL_SQUARE,	SKILL_DANA_SP_A2)	//蒼輪舞踏
				//SetSkillShortCut(PARTY_DANA,	ATKSKILL_TRIANGLE,	SKILL_DANA_SP_C4)	//竜気
			}
		}

		//GetItem(ICON3D_WP_DANA_000, 1)
		//GetItem(ICON3D_AM_023, 1)	//メディウムクロス

		//EquipWeapon(DANA,		ICON3D_WP_DANA_000		)
		//EquipArmor(DANA,		ICON3D_AM_023			)	//メディウムクロス
	}

	SetFlag( SF_TOWNMODE , 0)
	SetChrWork("ADOL",CWK_BATTLEMODE,1)		
	SetChrWork("SAHAD",CWK_BATTLEMODE,1)	
	SetChrWork("LAXIA",CWK_BATTLEMODE,1)	
	SetChrWork("HUMMEL",CWK_BATTLEMODE,1)	
	SetChrWork("RICOTTA",CWK_BATTLEMODE,1)	

	//パーティ状態のリセット
	CallFunc("system:party_reset")
	
	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))
	
	//キャラ初期状態の設定				
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
SetChrPos("ADOL",-40.11f,-1361.89f,48.60f)
Turn("ADOL",-139.51f,360.0f)
PitchChr("ADOL", 0.00f, 0)
RollChr("ADOL", 0.00f, 0)
	ChangeAnimation("ADOL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_ANGER, 1)
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_OPEN, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("ADOL")
	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
SetChrPos("RICOTTA",-40.12f,-1360.16f,48.60f)
Turn("RICOTTA",-138.60f,360.0f)
PitchChr("RICOTTA", 0.00f, 0)
RollChr("RICOTTA", 0.00f, 0)
	ChangeAnimation("RICOTTA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_SAD, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_TAME, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("RICOTTA")
	SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD",-42.16f,-1359.74f,48.60f)
	Turn("SAHAD",-143.70f,360.0f)
	PitchChr("SAHAD", 0.00f, 0)
	RollChr("SAHAD", 0.00f, 0)
	ChangeAnimation("SAHAD", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_SAD_CLOSE, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_TAME, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("SAHAD")
	SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
SetChrPos("LAXIA",-38.66f,-1362.76f,48.60f)
Turn("LAXIA",-140.48f,360.0f)
PitchChr("LAXIA", 0.00f, 0)
RollChr("LAXIA", 0.00f, 0)
	ChangeAnimation("LAXIA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_ANGER, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("LAXIA")
	SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)

	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
SetChrPos("HUMMEL",-42.22f,-1361.85f,48.60f)
Turn("HUMMEL",-145.32f,360.0f)
PitchChr("HUMMEL", 0.00f, 0)
RollChr("HUMMEL", 0.00f, 0)
	ChangeAnimation("HUMMEL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("HUMMEL")
	SetChrInfoFlag("HUMMEL", INFOFLAG_NOCHRATARI)

	SetChrInfoFlag( "DANA",INFOFLAG_INVISIBLE)
	SetChrInfoFlag( "DANA" , INFOFLAG_NOCHRATARI )
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA",-5.71f,-1370.95f,63.50f)
	Turn("DANA",137.28f,360.0f)
	PitchChr("DANA", -0.31f, 0)
	RollChr("DANA", 0.00f, 0)
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_ANGER_CLOSE,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)

	ChangeAnimation( "ADOL" , "ANI_EV_ZEEWAIT", -1 , 1 )
	ChangeAnimation( "LAXIA" , "ANI_EV_ZEEWAIT", -1 , 1 )
	ChangeAnimation( "SAHAD" , "ANI_EV_ZEEWAIT", -1 , 1 )
	ChangeAnimation( "HUMMEL" , "ANI_EV_ZEEWAIT", -1 , 1 )
	ChangeAnimation( "RICOTTA" , "ANI_EV_ZEEWAIT", -1 , 1 )
	ChangeAnimation( "DANA" , "ANI_EV_SWORDWAIT", -1 , 1 )

	SetChrInfoFlag( "ev_m1001_1" , INFOFLAG_NOCHRATARI )
	SetChrInfoFlag( "ev_m1001_2" , INFOFLAG_NOCHRATARI )
	SetChrInfoFlag( "ev_m1007_1" , INFOFLAG_NOCHRATARI )
	SetChrInfoFlag( "ev_m1007_2" , INFOFLAG_NOCHRATARI )
	SetChrInfoFlag( "ev_m1001_1",INFOFLAG_INVISIBLE)
	SetChrInfoFlag( "ev_m1001_2",INFOFLAG_INVISIBLE)
	SetChrInfoFlag( "ev_m1007_1",INFOFLAG_INVISIBLE)
	SetChrInfoFlag( "ev_m1007_2",INFOFLAG_INVISIBLE)

	SetChrPos("ev_m1001_1",-7.08f,-1308.67f,50.83f)
	TurnTo("ev_m1001_1",-40.11f,-1361.89f,48.60f,360.0f)
	SetChrPos("ev_m1001_2",-5.15f,-1315.10f,50.67f)
	TurnTo("ev_m1001_2",-40.11f,-1361.89f,48.60f,360.0f)

	SetChrPos("ev_m1007_1",4.23f,-1337.73f,49.87f)
	TurnTo("ev_m1007_1",-25.040f , -1347.177f , 48.586f,360.0f)
	SetChrPos("ev_m1007_2",12.07f,-1343.52f,51.82f)
	TurnTo("ev_m1007_2",-25.040f , -1347.177f , 48.586f,360.0f)

	SetFlag(SF_CHARANORECVSHADOW,1)	//キャラ影受けない

	LoadEffect( "efx_ev05.ite" )

	//カメラ設定
	MoveCameraAt( 0 , -41.335f , -1361.837f , 49.667f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.280f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -5.271f , 0 )	// 基本仰角
	RotateCamera( 0 , 325.287f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 180.000, 0.000, 0.450, 0.500)					//イベント毎に調整
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	SetSkipScript("mp1215:EV_M05S010_ED")

//開始処理ここまで-----------------------------------------------

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,-41.086f , -1362.010f , 49.816f  , 150 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.881f  , 150 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE ,  -5.270f  , 150 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,  325.294f, 150 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,2.5f , 150 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 150 )		// 視野角

	//MoveCameraAt( 0 , -41.086f , -1362.010f , 49.816f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 4.881f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -5.270f , 0 )	// 基本仰角
	//RotateCamera( 0 , 325.294f , 0 )				// 角度
	//ChangeCameraPers( 0 , 43.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転


	//──────────────────────────────
	//▼ダーナが迎撃戦に参加する(迎撃戦用マップ)
	//──────────────────────────────
	//　　本迎撃戦ではWAVE1から古代種が多く登場する。
	//　　WAVE2終了後、画面フェードインすると
	//　　アドル班メンバーが膝をついている状態

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	Wait(35)

	FadeBGM(70,10)

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	HeadNo("HUMMEL" , 1 , 35)
	TalkMes("HUMMEL","#2313V#041e#000m……一体どうなっている？","","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)

	CrossFade(FADE_FAST)

	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	MoveCameraAt( 0 , -40.894f , -1360.383f , 49.841f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.481f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -11.991f , 0 )	// 基本仰角
	RotateCamera( 0 , 107.817f , 0 )				// 角度
	ChangeCameraPers( 0 , 38.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 4.6f , 0 )				// ロール回転

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -41.044f , -1359.917f , 49.742f , 80 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.890f, 80 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE ,  -11.992f  , 80 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 107.805f , 80 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,2.5f , 80 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 80 )		// 視野角

	//MoveCameraAt( 0 , -41.044f , -1359.917f , 49.742f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.890f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -11.992f , 0 )	// 基本仰角
	//RotateCamera( 0 , 107.805f , 0 )				// 角度
	//ChangeCameraPers( 0 , 38.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 4.6f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(FADE_FAST)

	Wait(20)

	//	"RICOTTA"
	TalkMes("RICOTTA","#2732Vはあ……はあ……",
		"#110mさっきから……古代種ばっか……","")
	WaitPrompt()
	WaitCloseWindow()

	//	"SAHAD"
	TalkMes("SAHAD","#1847V#110mさ、さすがにこりゃあキツイぜ。","","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)

	CrossFade(FADE_CROSS)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	MoveCameraAt( 0 , -39.226f , -1361.717f , 49.618f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.120f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 3.416f , 0 )	// 基本仰角
	RotateCamera( 0 , 69.376f , 0 )				// 角度
	ChangeCameraPers( 0 , 38.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 6.0f , 0 )				// ロール回転

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -39.292f , -1361.893f , 49.668f , 80 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.690f, 80 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 3.417f , 80 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,  69.397f , 80 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,2.5f , 80 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 80 )		// 視野角

	//MoveCameraAt( 0 , -39.292f , -1361.893f , 49.668f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.690f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 3.417f , 0 )	// 基本仰角
	//RotateCamera( 0 , 69.397f , 0 )				// 角度
	//ChangeCameraPers( 0 , 38.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 6.0f , 0 )				// ロール回転

	Wait(FADE_CROSS)

	Wait(10)

	//	"LAXIA"
	TalkMes("LAXIA","#1039V#000m古代種が活発になっているという",
		"話ではありましたが……","")
	WaitPrompt()
	TalkMes("LAXIA","#1040V#041e#000m今回は特に攻撃的な",
		"個体が多いように思えます……","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	//　　最終WAVEの古代種たちが登場する演出。
	CrossFade(FADE_CROSS)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	ResetChrInfoFlag( "ev_m1001_1",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag( "ev_m1001_2",INFOFLAG_INVISIBLE)

	MoveCameraAt( 0 , -5.986f , -1310.991f , 52.118f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.520f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 1.404f , 0 )	// 基本仰角
	RotateCamera( 0 , 150.847f , 0 )				// 角度
	ChangeCameraPers( 0 , 53.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,  -8.134f , -1310.895f , 53.135f , 190 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 10.647f ,  190 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 24.416f ,  190 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 168.086f ,  190 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,2.5f ,  190 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 150 )		// 視野角

	//MoveCameraAt( 0 , -8.134f , -1310.895f , 53.135f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 10.647f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 24.416f , 0 )	// 基本仰角
	//RotateCamera( 0 , 168.086f , 0 )				// 角度
	//ChangeCameraPers( 0 , 53.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -5.4f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	ExecuteFunc(98 , "mp1215:M05S010_footstep")

	SetMotSpd("ev_m1001_1" , -1, 0.7 )
	ExecuteCmd( 11, MoveTo, "ev_m1001_1" , -40.11f,-1361.89f,48.60f , 0.1f , 0.28f )
	ExecuteCmd( 12, MoveTo, "ev_m1001_2" , -40.11f,-1361.89f,48.60f , 0.1f , 0.38f )
	//SetChrPos("ADOL",-40.11f,-1361.89f,48.60f)
	//Turn("ADOL",-139.51f,360.0f)
	Wait(160)

	CrossFade(FADE_FAST)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	MoveCameraAt( 0 , -2.947f , -1341.276f , 49.851f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 33.046f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 13.102f , 0 )	// 基本仰角
	RotateCamera( 0 , 80.793f , 0 )				// 角度
	ChangeCameraPers( 0 , 52.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -2.6f , 0 )				// ロール回転

	ResetChrInfoFlag( "ev_m1007_1",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag( "ev_m1007_2",INFOFLAG_INVISIBLE)

	SetMotSpd("ev_m1007_1" , -1, 0.9 )
	SetMotSpd("ev_m1007_2" , -1, 0.8 )
	ExecuteCmd( 13, MoveTo, "ev_m1007_1" , -25.040f , -1347.177f , 48.586f, 0.1f , 0.9f )
	ExecuteCmd( 14, MoveTo, "ev_m1007_2" , -25.040f , -1347.177f , 48.586f , 0.1f , 0.8f )
	//SetChrPos("ADOL",-40.11f,-1361.89f,48.60f)
	//Turn("ADOL",-139.51f,360.0f)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,-14.287f , -1347.410f , 49.851f, 140 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 31.546f ,140 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 13.102f, 140 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 110.170f , 140 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , -12.8f , 140 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 140)		// 視野角

	//MoveCameraAt( 0 , -14.287f , -1347.410f , 49.851f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 31.546f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 13.102f , 0 )	// 基本仰角
	//RotateCamera( 0 , 110.170f , 0 )				// 角度
	//ChangeCameraPers( 0 , 52.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -12.8f , 0 )				// ロール回転


	Wait(110)

	CrossFade(FADE_CROSS)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(11)
	StopThread(12)
	StopThread(13)
	StopThread(14)

	MoveCameraAt( 0 , -43.957f , -1361.967f , 49.578f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 8.686f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -0.086f , 0 )	// 基本仰角
	RotateCamera( 0 , 97.161f , 0 )				// 角度
	ChangeCameraPers( 0 , 35.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 4.2f , 0 )				// ロール回転

	SetChrPos("ev_m1001_1",-28.03f,-1342.51f,48.56f)
	Turn("ev_m1001_1",33.89f,360.0f)
	SetChrPos("ev_m1001_2",-20.20f,-1345.85f,48.78f)
	Turn("ev_m1001_2",48.67f,360.0f)
	SetChrPos("ev_m1007_1",-19.47f,-1354.46f,50.50f)
	Turn("ev_m1007_1",74.32f,360.0f)
	SetChrPos("ev_m1007_2",-19.94f,-1360.65f,50.45f)
	Turn("ev_m1007_2",93.49f,360.0f)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_COS ,-43.957f , -1361.967f , 49.479f , 30 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS , 9.491f, 30 )		// 基本距離
//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_COS , 13.071f , 30 )		// 基本仰角
//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_COS , 62.166f , 30)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_COS ,2.5f , 30)		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_COS ,39.000f, 40 )		// 視野角

	//MoveCameraAt( 0 , -43.957f , -1361.967f , 49.578f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 9.491f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -0.086f , 0 )	// 基本仰角
	//RotateCamera( 0 , 97.163f , 0 )				// 角度
	//ChangeCameraPers( 0 , 35.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 4.2f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	EmotionEx("ADOL", 0.0f,2,5,5,1,1,1.55f)	// ！
	EmotionEx("SAHAD", 0.0f,2,5,5,1,1,1.4f)	// ！
	EmotionEx("LAXIA", 0.0f,2,5,5,1,1,1.65f)	// ！
	EmotionEx("RICOTTA", 0.0f,2,5,5,1,1,1.45f)	// ！
	EmotionEx("HUMMEL", 0.0f,2,5,5,1,1,1.45f)	// ！
	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_ANGER_CLOSE_E,1)
	ChangeSubAnimation("HUMMEL",SUBMOT_EYE,ANI_E_ANGER_CLOSE_E,1)
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_SAD_CLOSE_E,1)
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_TAME_S,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_ANGER_S,1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)

	Wait(50)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	//　　アドルたち全員に「！」エモーション表示。
	TalkMes("SAHAD","#1848V#062e#000mひい、また古代種かよ……","","")
	WaitPrompt()
	WaitCloseWindow()

	//	"LAXIA"
	TalkMes("LAXIA","#1041V#041e#000mさすがに厳しいですね……","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(10)

	FadeBGM(30, 30)

	CrossFade(FADE_CROSS)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	//　　不意に半月刀が飛来して古代種にダメージを与え、
	//　　弧を描きながらブーメランのように戻っていく。
	//　　カメラ切り替えて断崖上でダーナが瞑目したまま、
	//　　舞を舞うように体を回転させつつ半月刀を受け止める。
	//　　カメラ切り替えて、アドルたちを映し、
	//　　ラクシャにPAエモーション表示する。

	CrossFade(FADE_FAST)
	ResetChrInfoFlag( "ev_m1001_1",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag( "ev_m1001_2",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag( "ev_m1007_1",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag( "ev_m1007_2",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag( "DANA",INFOFLAG_INVISIBLE)

	SetChrPos("ev_m1001_1",-28.03f,-1342.51f,48.56f)
	Turn("ev_m1001_1",33.89f,360.0f)
	SetChrPos("ev_m1001_2",-20.20f,-1345.85f,48.78f)
	Turn("ev_m1001_2",48.67f,360.0f)
	SetChrPos("ev_m1007_1",-19.47f,-1354.46f,50.50f)
	Turn("ev_m1007_1",74.32f,360.0f)
	SetChrPos("ev_m1007_2",-19.94f,-1360.65f,50.45f)
	Turn("ev_m1007_2",93.49f,360.0f)
	
	SetChrPos("LAXIA",-38.66f,-1362.76f,48.60f)
	Turn("LAXIA",-96.25f,360.0f)
	SetChrPos("SAHAD",-42.43f,-1360.12f,48.60f)
	Turn("SAHAD",-151.31f,360.0f)
	SetChrPos("RICOTTA",-40.12f,-1360.16f,48.60f)
	Turn("RICOTTA",-82.68f,360.0f)
	PitchChr("RICOTTA", 0.00f, 0)
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_SUP,1)
	ChangeSubAnimation("LAXIA",SUBMOT_MOUTH,ANI_M_OPEN,1)

	ChangeAnimation( "ADOL" , "ANI_EV_ZEEWAIT_E", -1 , 1 )
	ChangeAnimation( "LAXIA" , "ANI_EV_ZEEWAIT_E", -1 , 1 )
	ChangeAnimation( "SAHAD" , "ANI_EV_ZEEWAIT_E", -1 , 1 )
	ChangeAnimation( "RICOTTA" , "ANI_EV_ZEEWAIT_E", -1 , 1 )
	ChangeAnimation( "HUMMEL" , "ANI_EV_ZEEWAIT_E", -1 , 1 )

	LookChr("ADOL" , "DANA")
	LookChr("SAHAD" , "DANA")
	LookChr("LAXIA" , "DANA")
	LookChr("HUMMEL" , "DANA")
	LookChr("RICOTTA" , "DANA")

	MoveCameraAt( 0 , -31.176f , -1353.404f , 49.976f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 19.198f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 22.736f , 0 )	// 基本仰角
	RotateCamera( 0 , 251.267f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -20.9f , 0 )				// ロール回転

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_COS ,-31.176f , -1353.404f , 49.976f , 113 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS , 23.897f, 113 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_COS , 9.464f , 113 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_COS , 72.079f , 113 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_COS , 5.1f, 113 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_COS ,39.000f, 40 )		// 視野角

	//MoveCameraAt( 0 , -31.176f , -1353.404f , 49.976f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 23.897f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 9.464f , 0 )	// 基本仰角
	//RotateCamera( 0 , 72.079f , 0 )				// 角度
	//ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 5.1f , 0 )				// ロール回転

//	// Pos Key
//	KeyAnimeCreate(KEYANIME_EXSKILLPOS, 3)
//	KeyAnimeSet(0, -52.366, -1490.944, 5.701, 42.690, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
//	KeyAnimeSet(65, -52.814, -1487.043, 6.915, 29.717, -0.006, 0.056, 0.018, -0.188, -0.006, 0.056, 0.018, -0.188)
//	KeyAnimeSet(113, -53.099, -1484.569, 7.685, 21.491, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
//	
//	// Rot Key
//	KeyAnimeCreate(KEYANIME_EXSKILLROT, 3)
//	KeyAnimeSet(0, 26.858, 19.500, 57.696, 45.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
//	KeyAnimeSet(65, 16.550, 19.500, -44.545, 45.000, -0.149, 0.000, -2.061, 0.000, -0.149, 0.000, -2.061, 0.000)
//	KeyAnimeSet(113, 10.015, 19.500, -175.242, 45.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
//	//----------
//	
//	ExecuteCmd(1000, KeyAnimeCamera, 1.0f, KEYANIME_EXSKILLPOS, KEYANIME_EXSKILLROT, 0 )
//

	Effect( 3501100, 0.0f , 0.0f , 0.0f, 0 , 0 , IMPACT_NONE , KNOCK_EFXPOS , 0 , 1.0f, 1.0f)		//ブーメラン
	PlaySELabel(SE_M05S010_02, 40, 1, 9999, 500, 0, 1.0f, 0)
	PlaySE(SE_M05S010_07, 100, 0, 1000, 0, 1.0f, 0)

	Wait(10)

	FadeSELabel(SE_M05S010_02, 9999, 40, 5, 15)
	Slow(0.1)
	Wait(7)
	FadeSELabel(SE_M05S010_02, 9999, 5, 40, 15)
	Slow(1.0)
	Blur(BLUR_TYPE_AFTERIMAGE,0.3f,60)

	Wait(10)
	EarthQuake(1.0f,0.0f,10.0f)	
	PlaySE( SE_M05S010_03 , 50 , 0,  0, 0, 1.0f, 0)		//◆ダメージ
	ChrEffect( ev_m1001_1 , 110170 , 0 , 0 , 1.4f , 0 , 0 , IMPACT_NONE , KNOCK_EFXPOS,0.0f,0.0f,0, 2.5f, 1.0f)
	ChangeAnimation( "ev_m1001_1" , "ANI_DEAD", -1 , 1 )

	Wait(15)
	EarthQuake(1.0f,0.0f,10.0f)	
	PlaySE( SE_M05S010_03 , 50 , 0,  0, 0, 1.0f, 0)		//◆ダメージ
	ChrEffect( ev_m1001_2 , 110170 , 0 , 0 , 1.25f , 0 , 0 , IMPACT_NONE , KNOCK_EFXPOS,0.0f,0.0f,0, 3.0f, 1.0f)
	ChangeAnimation( "ev_m1001_2" , "ANI_DEAD", -1 , 1 )

	Wait(15)
	EarthQuake(1.5f,0.0f,10.0f)	
	PlaySE( SE_M05S010_03 , 50 , 0,  0, 0, 1.0f, 0)		//◆ダメージ
	ChrEffect( ev_m1007_1 , 110170 , 0 , 0 , 1.0f , 0 , 0 , IMPACT_NONE , KNOCK_EFXPOS,0.0f,0.0f,0, 2.5f, 1.0f)
	ChangeAnimation( "ev_m1007_1" , "ANI_DEAD", -1 , 1 )

	Wait(10)
	EarthQuake(2.0f,0.0f,15.0f)	
	PlaySE( SE_M05S010_03 , 50 , 0,  0, 0, 1.0f, 0)		//◆ダメージ
	ChrEffect( ev_m1007_2 , 110170 , 0 , 0 , 1.0f , 0 , 0 , IMPACT_NONE , KNOCK_EFXPOS,0.0f,0.0f,0, 2.5f, 1.0f)
	ChangeAnimation( "ev_m1007_2" , "ANI_DEAD", -1 , 1 )

//	PlaySE(SE_M05S010_05, 60, 0, 0, 0, 1.0f, 0)
	FadeSELabel(SE_M05S010_02, 9999, 40, 1, 30)

	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)

	Wait(10)

	// Key Release
	KeyAnimeRelease(KEYANIME_EXSKILLPOS)
	KeyAnimeRelease(KEYANIME_EXSKILLROT)

	FadeBGM(70, 30)
	PlaySE(SE_M05S010_06, 50, 0, 0, 0, 1.0f, 0)
//	FadeSELabel(SE_M05S010_02, 9999, 1, 40, 60)


	CrossFade(FADE_NORMAL)
	LookReset("DANA")

	SetShadowBound(8.0f, 8.0f)
		
	MoveCameraAt( 0 , -5.898f , -1370.984f , 63.658f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.187f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 25.217f , 0 )	// 基本仰角
	RotateCamera( 0 , 171.338f , 0 )				// 角度
	ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 6.8f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(45)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,-5.713f , -1371.029f , 64.725f , 90 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.287f , 90 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 26.637f , 90 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,268.424f , 90 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , -25.2f , 90 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 90 )		// 視野角

	//MoveCameraAt( 0 , -5.713f , -1371.029f , 64.725f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.137f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 26.637f , 0 )	// 基本仰角
	//RotateCamera( 0 , 268.424f , 0 )				// 角度
	//ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -25.2f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(45)

	FadeSELabel(SE_M05S010_02, 9999, 1, 40, 90)

	ChrEffect("DANA",3501110,-1.3f,-0.75.0f,1.2f,0,0,IMPACT_NONE , KNOCK_EFXPOS,1.0f,0.0f,0, 1.0f, 1.0f)	//キャッチブーメラン（カメラ変えるときは適当に相対角度や発生座標をいじってみてください）
	Wait(60)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	
	Wait(15)

	SetShadowBound(64.0f, 64.0f)

	PlaySE(SE_M05S010_09, 50, 0, 0, 0, 1.0f, 0)		//着地

	Blur( BLUR_TYPE_AFTERIMAGE ,0.35f , 13 )

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,-5.495f , -1370.973f , 64.602f , 25 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.927f , 25 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -2.831f , 25 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,28.554f , 25 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,  7.5f , 25 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 50 )		// 視野角
	
	//MoveCameraAt( 0 , -5.495f , -1370.973f , 64.602f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.927f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -2.831f , 0 )	// 基本仰角
	//RotateCamera( 0 , 28.554f , 0 )				// 角度
	//ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 7.5f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(10)

	FadeSELabel(SE_M05S010_02, 9999, 40, 5, 15)
	PlaySE(SE_M05S010_08, 100, 0, 0, 0, 1.0f, 0)

	Slow(0.20)

	Wait(20)

	
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)

	Slow(1.0)
	
	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,-5.495f , -1370.973f , 64.652f , 15 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE ,  4.636f , 15 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -15.270f, 15 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 248.478f , 15 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , -13.5f , 15 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 50 )		// 視野角

	//MoveCameraAt( 0 , -5.495f , -1370.973f , 64.652f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 4.636f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -15.270f , 0 )	// 基本仰角
	//RotateCamera( 0 , 248.478f , 0 )				// 角度
	//ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -13.5f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(5)

	Blur( BLUR_TYPE_AFTERIMAGE ,0.35f , 9 )
//	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_ANGER_CLOSE_E,1)
	ChangeAnimation( "DANA" , "ANI_EV_SWORCATCH_S", -1 , 1 )
	PlaySE(SE_M05S010_04, 100, 0, 0, 0, 1.0f, 0)
	PlaySE(SE_M05S010_10, 60, 0, 0, 0, 1.0f, 0)

	StopSELabel(9999, 300)

	WaitAnimation2( "DANA" , -1, 1, "ANI_EV_SWORCATCH_S",  0)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	Slow(1.0)

	Wait(35)

	CrossFade(FADE_NORMAL)
	Look("DANA" , 0 , -15 )

	MoveCameraAt( 0 , -39.331f , -1361.696f , 50.003f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 6.638f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -8.923f , 0 )	// 基本仰角
	RotateCamera( 0 , 233.893f , 0 )				// 角度
	ChangeCameraPers( 0 , 37.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -0.7f , 0 )				// ロール回転

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_COS ,-39.331f , -1361.696f , 50.698f , 180 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS , 6.638f, 180 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_COS ,-8.923f , 180 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_COS , 233.893f , 180 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_COS ,2.5f , 40 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_COS ,39.000f, 40 )		// 視野角

	//MoveCameraAt( 0 , -39.331f , -1361.696f , 50.698f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 6.638f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -8.923f , 0 )	// 基本仰角
	//RotateCamera( 0 , 233.893f , 0 )				// 角度
	//ChangeCameraPers( 0 , 37.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -0.7f , 0 )				// ロール回転

	Wait(FADE_NORMAL)

	Wait(10)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	TalkMes("LAXIA","#1042V#070e#000mあ、あれは……","","")
	WaitPrompt()
	WaitCloseWindow()

	//	"SAHAD"
	TalkMes("SAHAD","#1849V#000e#000m目を覚ましたのか……","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	//　　再びカメラをダーナに戻す。

	Wait(10)
	
	CrossFade(FADE_CROSS)

	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	MoveCameraAt( 0 , -5.385f , -1370.779f , 64.713f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.267f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -12.749f , 0 )	// 基本仰角
	RotateCamera( 0 , 348.984f , 0 )				// 角度
	ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -13.1f , 0 )				// ロール回転
//	Wait(FADE_CROSS)
//
//	Wait(35)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -5.385f , -1370.779f , 64.961f , 130 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.367f, 130 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -12.748f , 130 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 275.970f , 130 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,-13.1f , 130 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 130 )		// 視野角

	//MoveCameraAt( 0 , -5.385f , -1370.779f , 64.961f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.367f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -12.748f , 0 )	// 基本仰角
	//RotateCamera( 0 , 275.970f , 0 )				// 角度
	//ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -13.1f , 0 )				// ロール回転

	Wait(80)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	TalkMes("DANA","#3181V#0L……………………………………","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	Wait(10)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -5.380f , -1370.828f , 65.035f , 80 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE ,  1.857f , 80 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE ,-12.749f , 80 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,  276.031f , 80 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,-11.4f , 80 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 80 )		// 視野角

	//MoveCameraAt( 0 , -5.380f , -1370.828f , 65.035f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.857f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -12.749f , 0 )	// 基本仰角
	//RotateCamera( 0 , 276.031f , 0 )				// 角度
	//ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -13.1f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	Wait(35)

	//　　カッと目を見開くダーナ。
	Look("DANA" , 0 , -7 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_ANGER_CLOSE_E,1)

	Wait(15)

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	LookSpd("DANA" , 0.08 , 0.08 , 0.08 )
	Look("DANA" , -13 , -10 )
	TalkMes("DANA","#3182V#020l#000mアドルさん、加勢するよ！","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	//　　⇒可能であれば、ここでパーティー編成メニューに遷移。
	//　　　ダーナをロックした状態で編成をうながす。
	//　　　（もしくは強制的にダーナをパーティ−の
	//　　　　２番目に加えて既存メンバーが順次ずれ込む？）
	//　　　編成メニューを抜けると、ダーナをパーティーに
	//　　　加えた状態で最終WAVEを開始する。

	Wait(30)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	Wait(30)


//終了処理ここから----------------------------------------------------

	CallFunc("mp1215:EV_M05S010_ED")
}
function "EV_M05S010_ED"
{
	SetSkipScript("")	
	RestoreEventState()

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam( -1 )

	SetFlag(SF_CHARANORECVSHADOW,0)	//キャラ影受ける

	ReleaseEffect("efx_ev05.ite")

	CallFunc("system:reset_chrmot_ALL")

	//SetChrWork("ADOL", CWK_BATTLEMODE, 0)
	//SetChrWork("LAXIA", CWK_BATTLEMODE, 0)
	//SetChrWork("SAHAD", CWK_BATTLEMODE, 0)
	//SetChrWork("HUMMEL", CWK_BATTLEMODE, 0)
	//SetChrWork("RICOTTA", CWK_BATTLEMODE, 0)
	//SetChrWork("DANA", CWK_BATTLEMODE, 0)

	// 通常
	if ( !FLAG[SF_GALLERY_EVENT] )
	{
		PlaySE(SE_TUTORIAL, 100, 0, 0, 0, 1.0f, 0)		//チュートリアル
		TalkPopup(UNDEF,0,5,0,0,0)
		{
			"#-1W#4Cダーナがパーティに加わりました。"
			"#-1W#4C装備と編成を整えてください。#10W"
		}
		Wait(10)
		WaitPrompt()
		WaitCloseWindow()
		
		Wait(20)
		
		//ゲームオーバー用にパーティ構成を覚えておく
		SavePartyMember()
		
		//キャンプメニューを開く
		SetFlag(SF_CANTSAVE, 1)			//セーブ不可
		SetFlag( SF_CAMP_FORCE_CAN_EQUIP, 1 )

		CampMenu( CM_CAMP )
		WaitMenu(0)
		
		//フラグ
		SetFlag(GF_05MP1213_CHECK_DANA,1)	//ダーナ加入判定用
		SetFlag( GF_GALL_EV_05_01, 1 )		// M05S010:ダーナが迎撃戦に参加する

		//NowLoading 時の Tips 表示をカット
		SetFlag( TF_LOADING_TIPS_OFF, 1 )

		//迎撃戦に戻る
		InterceptResume()
	//	EventCue("mp1213:EV_M05S011")

		//解除
		SetFlag( SF_CANTSAVE, 0 )
		SetFlag( SF_CAMP_FORCE_CAN_EQUIP, 0 )

		ResetStopFlag(STOPFLAG_EVENTIMPOSE)

		// フェードイン
		FadeIn(FADE_BLACK,FADE_FAST)
		//WaitFade()
	}
	// イベントギャラリー中
	else
	{
		FadeBGM(100,15)
		SoundEfx( SEFX_DEFAULT, 15 )
		SetEnvSEPlayState(-1, 0)	//環境SE全停止
		GalleryEvEnd(0)		// イベントギャラリー終了（スクリプトから強制的に抜けていろいろ処理してくれる）
		ResetStopFlag(STOPFLAG_EVENTIMPOSE)
	}

//終了処理ここまで----------------------------------------------------
}
/*
function "M05S010_footstep"
{
	Wait(5)
	PlaySE(SE_M05S010_01, 60, 0, 0, 0, 1.0f, 0)
	Wait(32)
	PlaySE(SE_M05S010_01, 60, 0, 0, 0, 1.0f, 0)
	Wait(32)
	PlaySE(SE_M05S010_01, 60, 0, 0, 0, 1.0f, 0)
	Wait(32)
	PlaySE(SE_M05S010_01, 60, 0, 0, 0, 1.0f, 0)
	Wait(32)
	PlaySE(SE_M05S010_01, 60, 0, 0, 0, 1.0f, 0)
}
*/

function "EV_M05S011"		//ダーナが迎撃戦に参加する２
{
//開始処理ここから----------------------------------------------------

	SetStopFlag(STOPFLAG_EVENTIMPOSE)
	//SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_CINEMA)	//字幕背景非表示

	FadeOut(FADE_BLACK,0)
	WaitFade()

	LoadChr(ev_m1001_3)
	LoadChr(ev_m1001_4)

	SaveCamera()
	SaveEventState()
	CallFunc("system:event_chrinfoflag_set")

	ResetMotion( "ALL" , 1 )
	StopEffect(-1,ALL,1)
	StopEmotion( "ALL" )
	ResetMoveVec("PARTYALL")

	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	SetFlag( SF_TOWNMODE , 0)
	SetChrWork("ADOL",CWK_BATTLEMODE,1)		
	SetChrWork("SAHAD",CWK_BATTLEMODE,1)	
	SetChrWork("LAXIA",CWK_BATTLEMODE,1)	
	SetChrWork("HUMMEL",CWK_BATTLEMODE,1)	
	SetChrWork("RICOTTA",CWK_BATTLEMODE,1)	
//	SetChrWork("DANA",CWK_BATTLEMODE,1)	


	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))
	
	HP_Recover( 9999 )	//ダーナ復活
	
	//キャラ初期状態の設定				
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL",-43.66f,-1363.76f,48.60f)
	Turn("ADOL",-137.33f,360.0f)
	PitchChr("ADOL", 0.00f, 0)
	RollChr("ADOL", 0.00f, 0)
	ChangeAnimation("ADOL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_ANGER, 1)
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("ADOL")
	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("RICOTTA",-45.35f,-1364.11f,48.60f)
	Turn("RICOTTA",-134.80f,360.0f)
	PitchChr("RICOTTA", 0.00f, 0)
	RollChr("RICOTTA", 0.00f, 0)
	ChangeAnimation("RICOTTA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_ANGER, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("RICOTTA")
	SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
SetChrPos("SAHAD",-45.37f,-1365.67f,48.60f)
Turn("SAHAD",-155.59f,360.0f)
PitchChr("SAHAD", 0.00f, 0)
RollChr("SAHAD", 0.00f, 0)
	ChangeAnimation("SAHAD", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_ANGER, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("SAHAD")
	SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
SetChrPos("LAXIA",-42.50f,-1366.00f,48.60f)
Turn("LAXIA",-151.78f,360.0f)
PitchChr("LAXIA", 0.00f, 0)
RollChr("LAXIA", 0.00f, 0)
	ChangeAnimation("LAXIA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_ANGER, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("LAXIA")
	SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)

	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("HUMMEL",-42.84f,-1367.57f,48.60f)
	Turn("HUMMEL",-145.32f,360.0f)
	PitchChr("HUMMEL", 0.00f, 0)
	RollChr("HUMMEL", 0.00f, 0)
	ChangeAnimation("HUMMEL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_ANGER, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("HUMMEL")
	SetChrInfoFlag("HUMMEL", INFOFLAG_NOCHRATARI)

	SetChrInfoFlag( "DANA" , INFOFLAG_NOCHRATARI )
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA",-44.48f,-1366.42f,48.60f)
	Turn("DANA",-143.59f,360.0f)
	PitchChr("DANA", 3.94f, 0)
	RollChr("DANA", 0.00f, 0)
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_ANGER_CLOSE,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)

	SetChrInfoFlag( "ev_m1001_3" , INFOFLAG_NOCHRATARI )
	SetChrInfoFlag( "ev_m1001_4" , INFOFLAG_NOCHRATARI )

	SetChrPos("ev_m1001_3",-26.38f,-1338.86f,48.69f)
	Turn("ev_m1001_3",34.27f,360.0f)
	PitchChr("ev_m1001_3", 0.00f, 0)
	RollChr("ev_m1001_3", 0.00f, 0)
	SetChrPos("ev_m1001_4",-31.48f,-1355.24f,48.58f)
	Turn("ev_m1001_4",47.03f,360.0f)

	ChangeAnimation( "ev_m1001_3" , "ANI_WALK", -1 , 1 )

	SetFlag(SF_CHARANORECVSHADOW,1)	//キャラ影受けない
	
	//ダーナスキル用エフェクトロード
	SetFlag(TF_MENU_SELECT, 0)
	if (WORK[WK_ISEXIST_PLAYER1] && WORK[WK_PLAYER1] == DANA)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER2] && WORK[WK_PLAYER2] == DANA)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER3] && WORK[WK_PLAYER3] == DANA)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER4] && WORK[WK_PLAYER4] == DANA)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT, 1)
	}

	if (FLAG[TF_MENU_SELECT] == 0)
	{
		// まだ読まれてない
		LoadEffect("efx_c005.ite")
	}
	
	MoveCameraAt( 0 , -33.308f , -1356.169f , 49.419f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 6.580f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 5.529f , 0 )	// 基本仰角
	RotateCamera( 0 , 6.128f , 0 )				// 角度
	ChangeCameraPers( 0 , 43.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -5.7f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 170.000 ,1.000 ,0.700 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	SetSkipScript("mp1215:EV_M05S011_ED")

//開始処理ここまで-----------------------------------------------

	Wait(10)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -34.150f , -1355.325f , 50.535f, 210 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 9.881f , 210 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 2.868f , 210 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 296.661f ,  210 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 2.8f , 210 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 250 )		// 視野角

	//MoveCameraAt( 0 , -34.150f , -1355.325f , 50.535f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 9.881f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 2.868f , 0 )	// 基本仰角
	//RotateCamera( 0 , 296.661f , 0 )				// 角度
	//ChangeCameraPers( 0 , 43.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 2.8f , 0 )				// ロール回転


	ExecuteCmd( 1, MoveTo, "ev_m1001_3",-33.59f,-1349.21f,48.60f, 0.1f, 0.33f )
	//SetChrPos("ev_m1001_3",-33.59f,-1349.21f,48.60f)
	//Turn("ev_m1001_3",33.03f,360.0f)

	SetMotSpd("ev_m1001_4" , -1 , 0.75f)
	ChangeAnimation( "ev_m1001_4" , "ANI_EV_KNOCK", -1 , 1 )
	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	//　　戦闘終了後、イベントを再開。
	//　　弱った古代種が尚も威嚇の咆哮を上げる。
	//　　メンバーの前に進み出て、半月刀を構えるダーナ。


//	WaitAnimation2( "ev_m1001_4" , -1, 1, "ANI_KNOCKDOWN_F",  0)
	WaitAnimation2( "ev_m1001_4" , -1, 1, "ANI_EV_KNOCK",  0)
	ChangeAnimation( "ev_m1001_4" , "ANI_EV_WAIT", -1 , 1 )

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)

	CrossFade(45)
	MoveCameraAt( 0 , -41.325f , -1362.847f , 50.039f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 15.983f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.347f , 0 )	// 基本仰角
	RotateCamera( 0 , 138.244f , 0 )				// 角度
	ChangeCameraPers( 0 , 43.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転

//	SetMotSpd("ev_m1001_4" , -1 , 1.0f)

	ExecuteCmd( 2, MoveTo, "DANA" , -41.31f,-1362.87f,48.60f, 0.1f , 0.18f )
	//SetChrPos("DANA",-41.49f,-1362.20f,48.60f)
	//Turn("DANA",-150.29f,360.0f)
	//SetChrPos("DANA",-41.31f,-1362.87f,48.60f)
	//Turn("DANA",-143.59f,360.0f)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -41.325f , -1362.847f , 49.890f, 190 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.699f , 190 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -7.266f , 190 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 138.188f ,  190 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,0.0f, 190 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 190 )		// 視野角

	//MoveCameraAt( 0 , -41.325f , -1362.847f , 49.890f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.699f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -7.266f , 0 )	// 基本仰角
	//RotateCamera( 0 , 138.188f , 0 )				// 角度
	//ChangeCameraPers( 0 , 43.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	WaitThread(2)
	ChangeAnimation( "DANA" , "ANI_EV_SETARM", -1 , 1 )

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_ANGER_CLOSE_E,1)

	Wait(40)

	CrossFade(40)
	SetChrPos("DANA",-41.31f,-1362.87f,48.60f)

	LookChr("ev_m1001_3","DANA")
	LookChr("ev_m1001_4","DANA")
	ChangeAnimation( "ev_m1001_3" , "ANI_EV_WAIT", -1 , 1 )
	ChangeAnimation( "ev_m1001_4" , "ANI_EV_WAIT", -1 , 1 )

	MoveCameraAt( 0 , -41.325f , -1362.847f , 49.816f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.580f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 23.963f , 0 )	// 基本仰角
	RotateCamera( 0 , 313.131f , 0 )				// 角度
	ChangeCameraPers( 0 , 43.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 10.7f , 0 )				// ロール回転

	ChangeAnimation( "DANA" , "ANI_EV_EXWAIT", -1 , 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_ANGER_CLOSE,1)

	PlaySE( SYSSE_BOM_START , 100 , 0,  0, 0, 1.0f, 0)		//EX発動
	Effect( 105400,	-41.31f,-1362.87f,48.60f, 0 , 0 , IMPACT_NONE , KNOCK_EFXPOS , 0 , 1.0f, 0.7f)	//EXエフェクト

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_COS , -41.325f , -1362.847f , 49.965f, 90 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS , 1.370f , 90 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_COS , -14.424f , 90 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_COS , 100.752f,  90 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_COS ,2.8f, 90 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_COS ,39.000f, 90 )		// 視野角

	//MoveCameraAt( 0 , -41.325f , -1362.847f , 49.965f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.370f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -14.424f , 0 )	// 基本仰角
	//RotateCamera( 0 , 100.752f , 0 )				// 角度
	//ChangeCameraPers( 0 , 43.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 2.8f , 0 )				// ロール回転

	Wait(45)

	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_ANGER_CLOSE_E,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_SHOUT,1)
	PlayVoice(Y8V_2900,"DANA",100)		//覚悟はいいかな

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)

	Wait(30)
	
	CrossFade(FADE_FAST)
//	ResetStopFlag(STOPFLAG_EVENTIMPOSE)
//	SetStopFlag(STOPFLAG_SIMPLEEVENT2)

	SetChrPos("DANA",-39.05f,-1360.02f,48.60f)
	Turn("DANA",-138.33f,360.0f)

	MoveCameraAt( 0 , -38.763f , -1359.709f , 49.767f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 8.971f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 26.248f , 0 )	// 基本仰角
	RotateCamera( 0 , 304.528f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -14.3f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ChangeAnimation( "DANA" , "ANI_EV_EX1", -1 , 1 )

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_COS ,  -37.233f , -1358.227f , 49.767f , 80 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS , 8.971f , 80 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_COS , 26.919f , 80 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_COS , 149.259f,  80 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_COS ,0.3f, 80 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_COS ,39.000f, 80 )		// 視野角

	//MoveCameraAt( 0 , -37.233f , -1358.227f , 49.767f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 8.971f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 26.919f , 0 )	// 基本仰角
	//RotateCamera( 0 , 149.259f , 0 )				// 角度
	//ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 0.3f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(35)
	ChangeAnimation( "ev_m1001_4" , "ANI_EV_KNOCK", -1 , 1 )
	Wait(35)
	
	CrossFade(FADE_FAST)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	MoveCameraAt( 0 , -35.170f , -1354.559f , 49.767f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 12.571f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 31.617f , 0 )	// 基本仰角
	RotateCamera( 0 , 83.268f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -18.1f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_COS , -32.621f , -1353.420f , 49.767f , 80 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS , 10.171f , 80 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_COS , 10.525f , 80 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_COS , 263.321f,  80 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_COS ,7.4f, 80 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_COS ,39.000f, 80 )		// 視野角

	//MoveCameraAt( 0 , -32.621f , -1353.420f , 49.767f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 10.171f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 10.525f , 0 )	// 基本仰角
	//RotateCamera( 0 , 263.321f , 0 )				// 角度
	//ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 7.4f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(15)
	ChangeAnimation( "ev_m1001_3" , "ANI_EV_KNOCK", -1 , 1 )
	Wait(60)

	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()
	SetChrPos("DANA",-42.29f,-1341.85f,52.46f)
	Turn("DANA",-39.91f,360.0f)

	SetChrPos("ev_m1001_3",-33.54f,-1349.14f,48.60f)
	Turn("ev_m1001_3",122.38f,360.0f)
	SetChrPos("ev_m1001_4",-31.48f,-1355.24f,48.58f)
	Turn("ev_m1001_4",101.39f,360.0f)

	LookChr("ev_m1001_3","DANA")
	LookChr("ev_m1001_4","DANA")
	ChangeAnimation( "ev_m1001_3" , "ANI_EV_WAIT", -1 , 1 )
	ChangeAnimation( "ev_m1001_4" , "ANI_EV_WAIT", -1 , 1 )

	Wait(15)

	MoveCameraAt( 0 , -36.353f , -1351.561f , 50.932f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 17.488f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 10.959f , 0 )	// 基本仰角
	RotateCamera( 0 , 207.236f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_COS , -35.046f , -1350.577f , 50.929f , 35 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS ,  17.522f ,  35 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_COS , 22.616f ,  35 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_COS , 223.418f ,   35 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_COS ,-13.9f, 35 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f,  35 )		// 視野角

	//MoveCameraAt( 0 , -35.317f , -1350.693f , 50.830f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 17.362f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 22.561f , 0 )	// 基本仰角
	//RotateCamera( 0 , 222.207f , 0 )				// 角度
	//ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -13.9f , 0 )				// ロール回転
	//MoveCameraAt( 0 , -35.046f , -1350.577f , 50.929f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 17.522f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 22.616f , 0 )	// 基本仰角
	//RotateCamera( 0 , 223.418f , 0 )				// 角度
	//ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -13.9f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	PlaySE(SE_M05S011_03, 50, 0, 0, 0, 1.0f, 0)

	Slow(0.7)

	ChangeAnimation( "DANA" , "ANI_EV_EX2", -1 , 1 )

	FadeIn(FADE_BLACK,10)
	WaitFade()

	Wait(40)

	Slow(0.2)
	PlayVoice(Y8V_2903,"DANA",100)		//終わりだよ
	PlaySE( SE_EX_CUTIN , 100 , 0,  0, 0, 1.0f, 0)
	Effect2( 116990, 0 , 0 , 0, 0, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.0f, 5.0f)
	Wait(8)
	PlaySE(SE_M05S011_05, 70, 0, 50, 0, 1.0f, 0)
	Wait(2)

	CrossFade(FADE_NORMAL)
//	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//	SetStopFlag(STOPFLAG_EVENTIMPOSE)
//
//	SetFlag( SF_NOUSE_MTDSE, 1 )
//
//	SetChrWork("ADOL", CWK_BATTLEMODE, 1)
//	SetChrWork("LAXIA", CWK_BATTLEMODE, 1)
//	SetChrWork("SAHAD", CWK_BATTLEMODE, 1)
//	SetChrWork("HUMMEL", CWK_BATTLEMODE, 1)
//	SetChrWork("RICOTTA", CWK_BATTLEMODE,1)
//	SetChrWork("DANA", CWK_BATTLEMODE, 1)
//
//	ChangeAnimation( "ADOL" , "ANI_WAIT", -1 , 1 )
//	ChangeAnimation( "LAXIA" , "ANI_WAIT", -1 , 1 )
//	ChangeAnimation( "SAHAD" , "ANI_WAIT", -1 , 1 )
//	ChangeAnimation( "HUMMEL" , "ANI_WAIT", -1 , 1 )
//	ChangeAnimation( "RICOTTA" , "ANI_WAIT", -1 , 1 )
//	ChangeAnimation( "DANA" , "ANI_WAIT", -1 , 1 )
//
//	SetFlag( SF_NOUSE_MTDSE, 0 )


	Slow(1.0f)

	MoveCameraAt( 0 , -43.854f , -1339.994f , 56.687f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.789f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -21.625f , 0 )	// 基本仰角
	RotateCamera( 0 , 41.116f , 0 )				// 角度
	ChangeCameraPers( 0 , 47.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -12.5f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	SetChrPos("ev_m1001_4",-32.50f,-1356.59f,48.59f)
	Turn("ev_m1001_4",150.46f,360.0f)
	SetChrPos("ev_m1001_3",-30.82f,-1349.43f,48.59f)
	Turn("ev_m1001_3",123.29f,360.0f)
	
	LookChr("ev_m1001_3","DANA")
	LookChr("ev_m1001_4","DANA")
	ChangeAnimation( "ev_m1001_3" , "ANI_EV_WAIT", -1 , 1 )
	ChangeAnimation( "ev_m1001_4" , "ANI_EV_WAIT", -1 , 1 )

//	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_COS  , -43.854f , -1339.994f , 56.687f , 20 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS , 3.189f,  30 )		// 基本距離
//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_COS , -21.622f ,  20 )		// 基本仰角
//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_COS ,41.110f,   20 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_COS ,7.1f, 20 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_COS ,39.000f,  20 )		// 視野角

	//MoveCameraAt( 0 , -43.854f , -1339.994f , 56.687f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 3.189f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -21.622f , 0 )	// 基本仰角
	//RotateCamera( 0 , 41.110f , 0 )				// 角度
	//ChangeCameraPers( 0 , 47.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -12.5f , 0 )				// ロール回転

	SetChrInfoFlag("DANA" , INFOFLAG_FLING)
	ChangeAnimation( "DANA" , "ANI_EV_EX3", -1 , 1 )

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)
	TalkMes("DANA","#3183V#042e#160m氷煌演舞刃！！","","")
	Wait(50)
	ClosePrompt()
//	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_ANGER_CLOSE_S,1)
//	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -43.854f , -1339.994f , 54.479f , 60 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 21.321f,  60 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -14.844f ,  60 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 41.097f ,   60 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,5.3f, 60 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f,  20 )		// 視野角

	//MoveCameraAt( 0 , -43.854f , -1339.994f , 54.479f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 21.321f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -14.844f , 0 )	// 基本仰角
	//RotateCamera( 0 , 41.097f , 0 )				// 角度
	//ChangeCameraPers( 0 , 47.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 5.3f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	

	Wait(30)

	FadeOut(FADE_WHITE,FADE_NORMAL)
	WaitFade()
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopBGM(120)

	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_SUP,1)
	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_SUP,1)
	ChangeSubAnimation("HUMMEL",SUBMOT_EYE,ANI_E_SUP,1)
	ChangeSubAnimation("LAXIA",SUBMOT_MOUTH,ANI_M_WAIT,1)

	SetChrPos("ADOL",-43.49f,-1364.42f,48.60f)
	Turn("ADOL",-137.33f,360.0f)
	//ChangeAnimation( "ADOL" , "ANI_WAIT", -1 , 1 )
	ChangeAnimation( "DANA" , "ANI_DISARM", -1 , 1 )
	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_SMILE,1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_SMILE,1)

	ResetChrInfoFlag("DANA" , "INFOFLAG_FLING")
	SetChrPos("DANA",-39.77f,-1360.18f,48.60f)
	Turn("DANA",43.40f,360.0f)
	PitchChr("DANA", 0.00f, 0)
	RollChr("DANA", 0.00f, 0)
	ChangeAnimation( "DANA" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_ANGER_CLOSE,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)

	ChangeAnimation( "RICOTTA" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_SMILE,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_MOUTH,ANI_M_SMILE,1)


	SetChrPos("ev_m1001_3",-32.53f,-1347.63f,48.59f)
	Turn("ev_m1001_3",67.59f,360.0f)

	SetChrPos("ev_m1001_4",-32.45f,-1354.05f,48.59f)
	Turn("ev_m1001_4",51.40f,360.0f)
	
	Wait(20)

	//エフェクト停止
	StopEffect(-1,ALL,1)

	SetMotSpd("ev_m1001_4",-1, 0.85f)
	ChangeAnimation( "ev_m1001_3" , "ANI_DEAD", -1 , 1 )
	Wait(20)
	ChangeAnimation( "ev_m1001_4" , "ANI_DEAD", -1 , 1 )

	MoveCameraAt( 0 , -37.265f , -1357.455f , 50.684f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 5.352f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -14.726f , 0 )	// 基本仰角
	RotateCamera( 0 , 330.758f , 0 )				// 角度
	ChangeCameraPers( 0 , 48.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -8.6f , 0 )				// ロール回転

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -37.265f , -1357.455f , 50.684f , 150 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 6.531f,  150 )		// 基本距離
//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE ,-14.727f,  150 )		// 基本仰角
//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 330.756f,   150 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,7.1f, 150 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f,  150 )		// 視野角

	//MoveCameraAt( 0 , -37.265f , -1357.455f , 50.684f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 6.531f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -14.727f , 0 )	// 基本仰角
	//RotateCamera( 0 , 330.755f , 0 )				// 角度
	//ChangeCameraPers( 0 , 48.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -8.6f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	PlaySE(SE_M05S011_01, 70, 0, 0, 0, 1.0f, 0)

	FadeIn(FADE_WHITE,FADE_NORMAL)
	WaitFade()

//	PlaySE(SE_M05S011_02, 50, 0, 50, 0, 1.0f, 0)
	Wait(30)
//	PlaySE(SE_M05S011_04, 70, 0, 50, 0, 1.0f, 0)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)

	SoundEfx( SEFX_EV_HILL, 15 )

	Wait(20)

	CrossFade(FADE_FAST)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_SMILE,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_SMILE,1)

	MoveCameraAt( 0 , -42.726f , -1365.767f , 49.915f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.171f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -6.054f , 0 )	// 基本仰角
	RotateCamera( 0 , 111.631f , 0 )				// 角度
	ChangeCameraPers( 0 , 25.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 7.4f , 0 )				// ロール回転


	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_COS , -42.457f , -1366.450f , 49.915f, 400 )		// 注視点
//	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS ,  2.356f,  15 )		// 基本距離
//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_COS , -8.642f ,  20 )		// 基本仰角
//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_COS ,353.534f,   20 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_COS ,7.1f, 20 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_COS ,39.000f,  20 )		// 視野角

	//MoveCameraAt( 0 , -42.457f , -1366.450f , 49.915f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 4.171f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -6.054f , 0 )	// 基本仰角
	//RotateCamera( 0 , 111.631f , 0 )				// 角度
	//ChangeCameraPers( 0 , 25.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 7.4f , 0 )				// ロール回転


	//　　ダーナ、ＥＸスキルで古代種に止めを刺す。
	//　　古代種が倒れ伏せるのを見届けて武器を収めるダーナ。

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	TalkMes("LAXIA","#1043V#000m今のは……","","")
	WaitPrompt()
	WaitCloseWindow()

	//	"SAHAD"
	TalkMes("SAHAD","#1850V#070e#110mす、凄まじい速さとパワーだな。","","")
	WaitPrompt()
	WaitCloseWindow()

	//	"HUMMEL"
	TalkMes("HUMMEL","#2314V#011e#000m……フム、女性の膂力#4Rりょりょく#Rとは思えん。","","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)
	CrossFade(FADE_NORMAL)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	MoveCameraAt( 0 , -43.736f , -1364.790f , 49.915f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.731f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -5.684f , 0 )	// 基本仰角
	RotateCamera( 0 , 236.845f , 0 )				// 角度
	ChangeCameraPers( 0 , 31.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -5.7f , 0 )				// ロール回転


	ChangeAnimation( "HUMMEL" , "ANI_DISARM", -1 , 1 )
	ChangeAnimation( "LAXIA" , "ANI_DISARM", -1 , 1 )
	ChangeAnimation( "SAHAD" , "ANI_DISARM", -1 , 1 )
	ChangeAnimation( "DANA" , "ANI_DISARM", -1 , 1 )
	ChangeAnimation( "ADOL" , "ANI_DISARM", -1 , 1 )

	Wait(40)

	ChangeAnimation( "RICOTTA" , "ANI_EV_GUTSPOSE_S", -1 , 1 )

	//	"RICOTTA"
	TalkMes("RICOTTA","#2733V#020e#020mダーナ姉、カッコイイ！","","")
	WaitPrompt()
	WaitCloseWindow()

	WaitAnimation2( "DANA" , -1, 1, "ANI_DISARM",  0)

	SetChrPos("DANA",-38.88f,-1359.09f,48.60f)

	ExecuteCmd( 2, MoveTo, "DANA" , -42.866f,-1363.743f,48.60f, 0.1f , 0.18f )
	//-42.8664472055	-1363.7435519883

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -42.970f , -1363.327f , 49.915f, 130 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.181f,  130 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 3.328f ,  130 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,298.843f, 130)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,7.1f, 20 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f,  130 )		// 視野角

//	MoveCameraAt( 0 , -42.970f , -1363.327f , 49.915f , 0 )	// 注視点
//	ChangeCameraDistance( 0 , 4.181f , 0 )		// 基本距離
//	ChangeCameraElevation( 0 , 3.328f , 0 )	// 基本仰角
//	RotateCamera( 0 , 298.843f , 0 )				// 角度
//	ChangeCameraPers( 0 , 31.000f , 0 )			// 視野角
//	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
//	RollCamera( 0 , -0.0f , 0 )				// ロール回転
//	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(60)

	//　　振り向いてアドルたちの前まで歩いてくるダーナ。
	TalkMes("DANA","#3184V#080e#080mふふ、一応初めまして……だよね？",
	"一応2行目","")
	WaitPrompt()
	WaitCloseWindow()
	Wait(10)
	
	WaitThread(2)
	LookChr("DANA" , "ADOL")

	Wait(30)

	CrossFade(FADE_FAST)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	SetChrInfoFlag("DANA" , INFOFLAG_NOATARI)
	SetChrInfoFlag("ADOL" , INFOFLAG_NOATARI)
	SetChrInfoFlag("DANA" , INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("ADOL" , INFOFLAG_NOCHRATARI)

	SetChrPos("DANA", -42.8664472055f,-1363.7435519883f,48.60f)
	SetChrPos("ADOL",-43.49f,-1364.42f,48.60f)
	TurnToChr("DANA" , "ADOL" , 360.0f)

	MoveCameraAt( 0 , -43.087f , -1364.195f , 50.139f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.199f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 12.846f , 0 )	// 基本仰角
	RotateCamera( 0 , 354.678f , 0 )				// 角度
	ChangeCameraPers( 0 , 24.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -43.087f , -1364.195f , 49.990f, 250 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.970f ,  250 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 12.846f ,  250 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,354.680f, 250)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,7.1f, 250 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f,  250 )		// 視野角

	//MoveCameraAt( 0 , -43.087f , -1364.195f , 49.990f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.970f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 12.844f , 0 )	// 基本仰角
	//RotateCamera( 0 , 354.680f , 0 )				// 角度
	//ChangeCameraPers( 0 , 24.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -0.0f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(FADE_FAST)
	Wait(10)

	ChangeAnimation( "DANA" , "ANI_EV_AKUSHU_S", -1 , 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_LAUGH_S,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LAUGH_S,1)

	TalkMes("DANA","#3185V#080m私はダーナ。",
		"アドルさん、よろしくね。","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)
	
	WaitAnimation2( "DANA" , -1, 1, "ANI_EV_AKUSHU_S",  0)
	
	Wait(30)
	
	ChangeAnimation( "DANA" , "ANI_EV_AKUSHU2_S", -1 , 1 )
	ChangeAnimation( "ADOL" , "ANI_EV_AKUSHU2_S", -1 , 1 )

	//　　柔らかく微笑んで手を差し出すダーナ。
	//　　握手に応じるアドルを見せて画面フェードアウト。
	//　　迎撃戦のリザルトを表示して次のイベントへ接続する。

	WaitAnimation2( "DANA" , -1, 1, "ANI_EV_AKUSHU2_S",  0)
	
	Wait(30)
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_SMILE_S,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_SMILE_S,1)

	Wait(40)

	SetEnvSEPlayState(-1, 0)	//環境SE全停止

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	Wait(20)

//終了処理ここから----------------------------------------------------

	CallFunc("mp1215:EV_M05S011_ED")
}
function "EV_M05S011_ED"
{
	SetSkipScript("")	
	RestoreEventState()

	CallFunc("system:reset_chrmot_ALL")

	SetChrWork("ADOL", CWK_BATTLEMODE, 0)
	SetChrWork("LAXIA", CWK_BATTLEMODE, 0)
	SetChrWork("SAHAD", CWK_BATTLEMODE, 0)
	SetChrWork("HUMMEL", CWK_BATTLEMODE, 0)
	SetChrWork("RICOTTA", CWK_BATTLEMODE, 0)
	SetChrWork("DANA", CWK_BATTLEMODE, 0)

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam( -1 )

	SetFlag(SF_CHARANORECVSHADOW,0)	//キャラ影受ける

	//NowLoading 時の Tips 表示をカット
	SetFlag( TF_LOADING_TIPS_OFF, 1 )

	// エフェクトを破棄する
	if (FLAG[TF_MENU_SELECT] == 0)
	{
		// 追加で読んでいる場合のみ破棄
		ReleaseEffect("efx_c005.ite")
	}

	//フラグ
	SetFlag(SF_ALLMUTEKI,0)		//無敵OFF
	//SetFlag(GF_05MP1213_INTERCEPT_DANA,1)		//ダーナが迎撃戦に参加する２
	//SetFlag(SF_DANA_JOINED,1)	// ダーナ参加済み
	//CallFunc("rng:0422")

	StopBGM(60)
	SetFlag(SF_NOCHANGEBGM, 1)
	SoundEfx( SEFX_HILL, 15 )

	//InterceptSetRetMap("map/mp1201t2/mp1201t2.arg", 33.27f, -1417.26f, 10.83f ,58.81f)		//※ファイナルフェーズ終了時に立てる形に変更

	SetEnvSEPlayState(-1, 0)	//環境SE全停止

	//迎撃戦に戻る
	InterceptResume()

	ResetStopFlag(STOPFLAG_EVENTIMPOSE)

	// フェードイン
	FadeIn(FADE_BLACK,FADE_FAST)
	//WaitFade()

//終了処理ここまで----------------------------------------------------
}


//──────────────────────────────
//▼迎撃戦で新種に遭遇する(mp1215)
//──────────────────────────────

function "EV_M06S010"			//迎撃戦で新種に遭遇する(mp1215)
{
	//開始処理ここから-----------------------------------------------
	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK, 0)
	WaitFade()

	//イベントに登場するキャラをロード＆破棄対象から除外
	LoadChr("ev_m1021_1")

	//イベント開始前情報の保存
	SaveEventState()
	CallFunc("system:event_chrinfoflag_set")
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")
	
	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))
	
	//キャラ初期状態の設定				
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL", -56.66f, -1381.62f, 48.60f)
	Turn("ADOL", -144.24f, 360.0f)
	ChangeAnimation("ADOL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("ADOL")
	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("RICOTTA", -55.35f, -1383.20f, 48.60f)
	Turn("RICOTTA", -144.98f, 360.0f)
	ChangeAnimation("RICOTTA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("RICOTTA")
	SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD", -56.29f, -1384.01f, 48.60f)
	Turn("SAHAD", -133.01f, 360.0f)
	ChangeAnimation("SAHAD", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("SAHAD")
	SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA", -57.68f, -1381.37f, 48.60f)
	Turn("LAXIA", -147.22f, 360.0f)
	ChangeAnimation("LAXIA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("LAXIA")
	SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)

	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("HUMMEL", -58.69f, -1381.26f, 48.60f)
	Turn("HUMMEL", -135.42f, 360.0f)
	ChangeAnimation("HUMMEL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("HUMMEL")
	SetChrInfoFlag("HUMMEL", INFOFLAG_NOCHRATARI)

	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA", -56.23f, -1382.59f, 48.60f)
	Turn("DANA", -141.38f, 360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("DANA")
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)

	// 古代種
	SetChrPos("ev_m1021_1", 8.40f, -1274.26f, 51.46f)
	Turn("ev_m1021_1", 22.71f, 360.0f)

	//カメラ設定
	MoveCameraAt( 0 , -57.240f , -1381.757f , 51.007f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 5.320f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.363f , 0 )	// 基本仰角
	RotateCamera( 0 , 161.428f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 50.000, 2.000, 0.450, 0.500)					//イベント毎に調整
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp1215:EV_M06S010_ED")

	//開始処理ここまで-----------------------------------------------

	//　　イベント迎撃戦でWAVE1、WAVE2と古代種が登場。
	//　　「古代種が大挙してきた」ことが実感できる形にする。
	//　　FINAL WAVEで新種の古代種を登場させる。
	
	// カット1 ----------------------------------------------------------------------------------------

	//MTDのSE鳴らさない
//	SetFlag( SF_NOUSE_MTDSE, 1 )

	// 位置調整・表情・モーション
	SetChrWork("ADOL",CWK_BATTLEMODE,1)
	SetChrWork("LAXIA",CWK_BATTLEMODE,1)
	SetChrWork("SAHAD",CWK_BATTLEMODE,1)
	SetChrWork("RICOTTA",CWK_BATTLEMODE,1)
	SetChrWork("HUMMEL",CWK_BATTLEMODE,1)
	SetChrWork("DANA",CWK_BATTLEMODE,1)
//	ChangeAnimation("ADOL", "ANI_EV_SETARM", -1, 1)	// 武器構え
//	ChangeAnimation("DANA", "ANI_EV_SETARM", -1, 1)	// 武器構え
//	ChangeAnimation("LAXIA", "ANI_EV_SETARM", -1, 1)	// 武器構え
//	ChangeAnimation("SAHAD", "ANI_EV_SETARM", -1, 1)	// 武器構え
//	ChangeAnimation("RICOTTA", "ANI_EV_SETARM", -1, 1)	// 武器構え
//	ChangeAnimation("HUMMEL", "ANI_EV_SETARM", -1, 1)	// 武器構え

	//MTDのSE鳴らす
//	SetFlag( SF_NOUSE_MTDSE, 0 )

	LookReset("ADOL")
	LookReset("LAXIA")
	LookReset("SAHAD")
	LookReset("RICOTTA")
	LookReset("HUMMEL")
	LookReset("DANA")
	
	Wait(10)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -57.339f , -1381.743f , 50.207f, 65 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.361f , 65 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -7.519f , 65 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 168.877f , 65 )
	
	// フェードイン
	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()
	
	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	// ヒュンメル
	TalkPopup("HUMMEL", 0, 2, 0, 0, 0) {
		"#000e#000mフン、今回はやたらと"
		"古代種が多いようだが……"
	}
	WaitPrompt()
	WaitCloseWindow()

	HeadYes("LAXIA" , 1 , 25 )
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_CLOSE_S, 1)
	Wait(15)
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_CLOSE_E, 1)

	// ラクシャ
	TalkPopup("LAXIA", 0, 2, 0, 0, 0) {
		"#000mええ、北部でも彼らの様子が"
		"いつもと違いました。\p"
		"#010e#000mもしかしたら何か関係が……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　不意に激しく威嚇する啼き声が聞こえ、
	//　　新種が登場する。

	EarthQuake( 0.02f , 0.02f , 30 )	// 縦揺れ幅, 横揺れ幅, 時間

	PlaySE(SE_M06S010_01, 80, 0, 100, 0, 1.0f, 0)
	Wait(25)

	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_CLOSE_E, 1)	// 目
	EmotionEx("ADOL", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f )	// 「！」
	EmotionEx("DANA", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f )	// 「！」
	EmotionEx("LAXIA", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f )	// 「！」
	EmotionEx("SAHAD", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f )	// 「！」
	EmotionEx("RICOTTA", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f )	// 「！」
	EmotionEx("HUMMEL", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f )	// 「！」
	
	Wait(45)

	// カット2 -------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_CROSS)

	// カメラ
	MoveCameraAt( 0 , 7.177f , -1275.363f , 56.011f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 17.748f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 9.478f , 0 )	// 基本仰角
	RotateCamera( 0 , 303.388f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 6.958f , -1281.034f , 54.431f, 100 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 14.627f , 100 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -6.565f , 100 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 12.716f , 100)
	
	// フェード待ち
	Wait(FADE_CROSS)

	Blur( BLUR_TYPE_AFTERIMAGE ,0.1f , 100 )	// 残像

	// 移動待ち
	WaitThread(1)

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	
	Wait(30)
	
	// カット3 -------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_CROSS)

	MoveCameraAt( 0 , -56.121f , -1382.344f , 49.942f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.827f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 2.306f , 0 )	// 基本仰角
	RotateCamera( 0 , 108.588f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(10)
	
//	// カメラ
//	MoveCameraAt( 0 , -55.977f , -1381.641f , 49.942f , 0 )	// 注視点
//	ChangeCameraDistance( 0 , 3.827f , 0 )		// 基本距離
//	ChangeCameraElevation( 0 , 2.306f , 0 )	// 基本仰角
//	RotateCamera( 0 , 108.588f , 0 )				// 角度
//	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
//	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
//	RollCamera( 0 , 0.0f , 0 )				// ロール回転
//	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
//
//	// カメラ移動
//	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -56.121f , -1382.344f , 49.942f, 50 )
//	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.827f , 50 )
//	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 2.306f , 50 )
//	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 108.588f , 50 )
//	
//	// フェード待ち
//	Wait(FADE_CROSS)
//	
//	// カメラ待ち
//	WaitThread(1000)
//	WaitThread(1001)
//	WaitThread(1002)
//	WaitThread(1003)
	
	PlayVoice(Y8V_1418,"SAHAD",100)	//ひええっ…！（お化けなどに驚く）
	
	// サハド
	TalkPopup("SAHAD", 0, 2, 0, 0, 0) {
		"#050e#000mひいっ、また一段とやる気"
		"満々そうなのが出てきたぜ？"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　ダーナとラクシャにPAエモーション表示。
	EmotionEx("DANA", 0.05f, EMO_PA, 0, 5, 1, 1, 1.2f )	// 「PA」
	EmotionEx("LAXIA", 0.05f, EMO_PA, 0, 5, 1, 1, 1.2f )	// 「PA」
	Wait(35)
	
	// ダーナ
	TalkPopup("DANA", 0, 2, 0, 0, 0) {
		"#000e#000m……？"
	}
	WaitPrompt()
	WaitCloseWindow()

	// ラクシャ
	TalkPopup("LAXIA", 0, 2, 0, 0, 0) {
		"#070e#000mあの古代種は……"
	}
	WaitPrompt()
	WaitCloseWindow()

	// ヒュンメル
	TalkPopup("HUMMEL", 0, 2, 0, 0, 0) {
		"#030e#000m……来るぞ、構えろ。"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -56.121f , -1382.344f , 49.942f, 70 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 9.107f , 70 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 13.479f  , 70 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 89.967f , 70 )
	
//	Blur( BLUR_TYPE_AFTERIMAGE ,0.4f , 90 )	// 残像

	Wait(40)

	//　　FINAL WAVE開始。
	//　　これまでの中でも過酷で激しい迎撃戦となる。

	// フェードアウト
	FadeOut(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	//終了処理ここから----------------------------------------------------
	CallFunc("mp1215:EV_M06S010_ED")
}

function "EV_M06S010_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
	//ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")	

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	
	//イベント後の再配置
	//SetChrPos("LEADER", -59.90f, -1385.94f, 48.61f)
	//Turn("LEADER", -140.32f, 360.0f)
	//ResetPartyPos()
	//ResetFollowPoint()
	//Wait(1)

	//カメラ位置復帰
	//MoveCameraAt( 0 , 0.0f , 0.0f , 0.0f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 0.0f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 0.0f , 0 )		// 基本仰角
	//RotateCamera( 0 , 0.0f , 0 )				// 角度
	//ChangeCameraPers( 0 , 0.0f , 0 )			// 視野角
	//SetCameraZPlane( 0 , 0.0f )					// ZPlane
	//RollCamera( 0 , 0.0f , 0 )					// ロール回転

	//RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	//CallFunc("system:camera_reset")

	//NowLoading 時の Tips 表示をカット
	SetFlag( TF_LOADING_TIPS_OFF, 1 )

	//迎撃戦に戻る
	InterceptResume()

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)
	//WaitFade()

	//終了処理ここまで----------------------------------------------------
}



//──────────────────────────────
//▼迎撃戦で新種に遭遇する２(mp1215)
//──────────────────────────────
function "EV_M06S011"			//迎撃戦で新種に遭遇する２(mp1215)
{
	//開始処理ここから-----------------------------------------------
	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK, 0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	CallFunc("system:event_chrinfoflag_set")
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定				
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL", -56.66f, -1381.62f, 48.60f)
	Turn("ADOL", -133.58f, 360.0f)
	ChangeAnimation("ADOL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("ADOL")
	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("RICOTTA", -57.78f, -1380.06f, 48.60f)
	Turn("RICOTTA", -144.98f, 360.0f)
	ChangeAnimation("RICOTTA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("RICOTTA")
	SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD", -59.33f, -1379.61f, 48.60f)
	Turn("SAHAD", -133.01f, 360.0f)
	ChangeAnimation("SAHAD", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("SAHAD")
	SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA", -55.36f, -1383.87f, 48.60f)
	Turn("LAXIA", -157.88f, 360.0f)
	ChangeAnimation("LAXIA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("LAXIA")
	SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)

	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("HUMMEL", -58.33f, -1381.19f, 48.60f)
	Turn("HUMMEL", -135.42f, 360.0f)
	ChangeAnimation("HUMMEL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("HUMMEL")
	SetChrInfoFlag("HUMMEL", INFOFLAG_NOCHRATARI)

	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA", -56.50f, -1382.98f, 48.60f)
	Turn("DANA", -105.85f, 360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("DANA")
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)


	//カメラ設定
	MoveCameraAt( 0 , -56.880f , -1381.095f , 49.871f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.999f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 5.250f , 0 )	// 基本仰角
	RotateCamera( 0 , 306.126f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 135.000, 0.000, 0.950, 0.500)					//イベント毎に調整
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp1215:EV_M06S011_ED")

	//開始処理ここまで-----------------------------------------------

	//　　戦闘終了してリザルト表示閉じた後にイベント再開。
	//　　疲弊しきっているアドルたちを映す。
	
	// カット1 ----------------------------------------------------------------------------------------

	// 位置調整・表情・モーション
	ChangeAnimation("ADOL", "ANI_EV_ZEEWAIT", -1, 1)
	ChangeAnimation("DANA", "ANI_EV_ZEEWAIT", -1, 1)
	ChangeAnimation("LAXIA", "ANI_EV_ZEEWAIT", -1, 1)
	ChangeAnimation("SAHAD", "ANI_EV_ZEEWAIT", -1, 1)
	ChangeAnimation("RICOTTA", "ANI_EV_ZEEWAIT", -1, 1)
	ChangeAnimation("HUMMEL", "ANI_EV_ZEEWAIT", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_PAIN, 1)	// 目
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_PAIN, 1)	// 目
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_SAD_CLOSE, 1)	// 目
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_PAIN, 1)	// 目
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_SAD, 1)	// 目
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_PAIN, 1)	// 目
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_PAIN, 1)	// 口
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_PAIN, 1)	// 口
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_TAME, 1)	// 口
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_PAIN, 1)	// 口
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_TAME, 1)	// 口
	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_TAME, 1)	// 口

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -56.880f , -1381.095f , 49.871f, 120 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE ,4.999f, 120 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 4.964f , 120 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 329.330f, 120 )

	// フェードイン
	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()
	
	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	
	// カット2 ---------------------------------------------------------------------------------------------------

	StopBGM(240)

	// クロスフェード
	CrossFade(FADE_FAST)

	// カメラ
	MoveCameraAt( 0 , -57.723f , -1379.908f , 49.880f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.511f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -6.196f , 0 )	// 基本仰角
	RotateCamera( 0 , 113.067f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 非表示・再表示
	SetChrInfoFlag("DANA", INFOFLAG_INVISIBLE)	// 非表示

	Wait(FADE_FAST)
	
	// サハド
	TalkPopup("SAHAD", 0, 2, 0, 0, 0) {
		"#110mゼーハー、ゼーハー……"
	}
	WaitPrompt()
	WaitCloseWindow()

	// ヒュンメル
	TalkPopup("HUMMEL", 0, 2, 0, 0, 0) {
		"#060e#110m……大した戦闘力だったな。"
	}
	WaitPrompt()
	WaitCloseWindow()

	// リコッタ
	TalkPopup("RICOTTA", 0, 2, 0, 0, 0) {
		"#061e#110mう、うん……しぶとすぎ……"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カット3 ----------------------------------------------------------------------------------------
	
	// クロスフェード
	CrossFade(FADE_NORMAL)
	
	// カメラ
	MoveCameraAt( 0 , -55.966f , -1381.802f , 50.300f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.710f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 3.654f , 0 )	// 基本仰角
	RotateCamera( 0 , 161.787f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 非表示・再表示
	ResetChrInfoFlag("DANA", INFOFLAG_INVISIBLE)	// 再表示
	SetChrInfoFlag("HUMMEL", INFOFLAG_INVISIBLE)	// 非表示

	// 位置調整・表情・モーション
	SetChrPos("ADOL", -56.26f, -1382.72f, 48.60f)
	Turn("ADOL", -146.69f, 360.0f)

	SetChrPos("DANA", -56.66f, -1381.62f, 48.60f)
	Turn("DANA", -119.37f, 360.0f)
	SetChrPos("LAXIA", -55.40f, -1383.35f, 48.60f)
	Turn("LAXIA", -133.01f, 360.0f)

	ChangeAnimation( "SAHAD" , "ANI_DISARM", -1 , 1 )	// 武器しまう
	ChangeAnimation( "HUMMEL" , "ANI_DISARM", -1 , 1 )	// 武器しまう
	ChangeAnimation( "RICOTTA" , "ANI_DISARM", -1 , 1 )	// 武器しまう

	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_WAIT, 1)	// 目
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_WAIT, 1)	// 口
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)	// 目
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)	// 口
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_WAIT, 1)	// 目
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_WAIT, 1)	// 口
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_WAIT, 1)	// 目
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_WAIT, 1)	// 口
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_WAIT, 1)	// 目
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_WAIT, 1)	// 口
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_WAIT, 1)	// 目
	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_WAIT, 1)	// 口
	
	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -56.241f , -1382.352f , 50.120f , 75 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.230f , 75 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 0.789f , 75 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 169.807f , 75 )

	ChangeAnimation( "DANA" , "ANI_DISARM", -1 , 1 )	// 武器しまう
	Wait(20)
	ChangeAnimation( "ADOL" , "ANI_DISARM", -1 , 1 )	// 武器しまう
	Wait(10)
	ChangeAnimation( "LAXIA" , "ANI_DISARM", -1 , 1 )	// 武器しまう
	

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	
	//　　ダーナに「…」エモーション表示。
	EmotionEx("DANA", 0.0f, "EMO_3DOT", 27, 5, 1, 1, 0.8f)	// 「…」
	ChangeAnimation( "DANA", "ANI_EV_SIAN_S", -1, 1 )	// 思案
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_CLOSE_S, 1)	// 目
	Wait(52)
	ChangeAnimation( "DANA", "ANI_EV_SIAN_E", -1, 1 )	// 思案
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_CLOSE_E, 1)	// 目
	Wait(30)
	TurnToChr("DANA", "ADOL", 9.0f)
	Wait(10)
	
	// ダーナ
	TalkPopup("DANA", 0, 1, 0, 0, 0) {
		"#000e#000mアドルさん、今の古代種……"
		"私も見たことがない種類かも。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("ADOL", "DANA")
	Turn("ADOL",-163.96f,8.0f)
	Wait(10)

	//選択肢
	SetFlag(TF_MENU_SELECT, 0)
	MenuReset()
	MenuType(MENUTYPE_POPUP)
	MenuAdd(1, "珍しい種類なのか？")
	MenuAdd(2, "進化した古代種ってことか？")
	MenuOpen( TF_MENU_SELECT , -1 , ADOLMENU_PPOSY , -2 , -2 , 10 , 0)
	WaitMenu(0)
	MenuClose(10, 0)
	
	// （アドル）手振り
	ChangeAnimation( "ADOL", "ANI_EV_TEBURI", -1, 1 )
	SetChrWork("ADOL", CWK_FORCELIPSYNC, 1)	// 強制クチパク
	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT_S,1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	Wait(30)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	SetChrWork("ADOL", CWK_FORCELIPSYNC, 0)
	Wait(10)
	
	LookChr("LAXIA", "ADOL")
	TurnToChr("LAXIA", "DANA", 9.0f)

	//─────────────────────────
	//	⇒珍しい種類なのか？
	if (FLAG[TF_MENU_SELECT] == 1 ) {

		// ラクシャ
		TalkPopup("LAXIA", 0, 2, 0, 0, 0) {
			"#000e#000mいえ、そうではありません。"
		}
		WaitPrompt()
		WaitCloseWindow()
		
	}

	//	⇒進化した古代種ってことか？
	if (FLAG[TF_MENU_SELECT] == 2 ) {

		// ラクシャ
		TalkPopup("LAXIA", 0, 2, 0, 0, 0) {
			"#000e#000mいえ、少し違います……"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	//─────────────────────────
	
	LookChr("ADOL", "LAXIA")
	LookChr("DANA", "LAXIA")
	
	ChangeAnimation( "LAXIA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て

	// ラクシャ
	TalkPopup("LAXIA", 0, 2, 0, 0, 0) {
		"#000e#000m古代種の歴史は人より遥かに長く、"
		"その間に多くの種類が生まれました。\p"
		"先ほどの個体はおそらく"
		"エタニア紀以前のものだと思われます。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_RYOTEMAE_S", -1, 1 )	// 両手 前組み

	// ダーナ
	TalkPopup("DANA", 0, 1, 0, 0, 0) {
		"#000e#000mなるほど……"
		"道理で見慣れないわけだね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カット4 -----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_CROSS)

	// カメラ
	MoveCameraAt( 0 , -57.003f , -1382.372f , 50.120f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.730f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 4.847f , 0 )	// 基本仰角
	RotateCamera( 0 , 89.951f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 非表示・再表示
	ResetChrInfoFlag("HUMMEL", INFOFLAG_INVISIBLE)	// 再表示

	// 位置調整・表情・モーション
	SetChrPos("ADOL", -56.66f, -1383.24f, 48.60f)
	Turn("ADOL",-153.80f, 360.0f)
	SetChrPos("DANA", -56.05f, -1381.54f, 48.60f)
	Turn("DANA", -9.32f, 360.0f)
	SetChrPos("LAXIA", -55.40f, -1383.35f, 48.60f)
	Turn("LAXIA", 141.72f, 360.0f)
	SetChrPos("SAHAD", -57.67f, -1381.72f, 48.60f)
	Turn("SAHAD", -58.40f, 360.0f)
	SetChrPos("RICOTTA", -56.97f, -1381.65f, 48.60f)
	Turn("RICOTTA", -45.50f, 360.0f)
	SetChrPos("HUMMEL", -57.43f, -1382.69f, 48.60f)
	Turn("HUMMEL", -95.24f, 360.0f)

	LookChr("HUMMEL", "LAXIA")
	LookChr("SAHAD", "LAXIA")
	LookChr("RICOTTA", "LAXIA")

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -57.003f , -1382.372f , 50.120f, 600 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.730f , 600 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 5.133f , 600 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 74.764f , 600 )
	
	// フェード待ち
	Wait(FADE_CROSS)
	
	ChangeAnimation( "HUMMEL", "ANI_EV_TEBURI", -1, 1 )	// 手振り

	// ヒュンメル
	TalkPopup("HUMMEL", 0, 2, 0, 0, 0) {
		"#000e#000m何故そんなヤツが"
		"今ここに現れたのだ？"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("LAXIA", "HUMMEL")
	ChangeAnimation( "LAXIA", "ANI_EV_TEMUNE_E", -1, 1 )	// 手胸当て

	// ラクシャ
	TalkPopup("LAXIA", 0, 1, 0, 0, 0) {
		"#000e#000mそこまでは分かりませんが……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　再び古代種の啼き声と足音が聞こえてくる。
	EarthQuake( 0.02f , 0.02f , 30 )	// 縦揺れ幅, 横揺れ幅, 時間
	Blur(BLUR_TYPE_EXPAND, 0.3f, 30)	//ブラー


	PlaySE(SE_M06S010_01, 80, 0, 100, 0, 1.0f, 0)
	Wait(30)

	PlayBGM(BGM_BOSS_008, 0)

	//　　全員に「！」エモーション表示。
	EmotionEx("ADOL", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f )	// 「！」
	EmotionEx("DANA", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f )	// 「！」
	EmotionEx("LAXIA", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f )	// 「！」
	EmotionEx("SAHAD", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f )	// 「！」
	EmotionEx("RICOTTA", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f )	// 「！」
	EmotionEx("HUMMEL", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f )	// 「！」
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_SUP_S, 1)	// 目
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_TAME,1)

	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_ANGER_S,1)
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_ANGER_S,1)

	LookReset("ADOL")
	LookReset("DANA")
	LookReset("LAXIA")
	
	Wait(40)
	ChangeAnimation( "DANA", "ANI_EV_RYOTEMAE_E", -1, 1 )	// 両手 前組み
	
	// サハド
	TalkPopup("SAHAD", 0, 2, 0, 0, 0) {
		"#061e#110mお？　おい、まさか……"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	LookReset("HUMMEL")
	ChangeAnimation( "HUMMEL", "ANI_EV_AKIRE", -1, 1 )	// あきれ
	
	// ヒュンメル
	TalkPopup("HUMMEL", 0, 2, 0, 0, 0) {
		"#011e#000mどうやら、また来客のようだ。"
		"今日は大繁盛だな。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "RICOTTA", "ANI_EV_RYOTEKOSI_S", -1, 1 )	// 両手腰
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_SAD_S, 1)	// 目

	// リコッタ
	TalkPopup("RICOTTA", 0, 2, 0, 0, 0) {
		"#061e#110mなはは、さすがにキビシイかも……"
		"なはは2行目"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_CLOSE_E, 1)	// 目
	
	LookChr("RICOTTA", "ADOL")
	
	LookChr("ADOL", "RICOTTA")
	
	// リコッタ
	TalkPopup("RICOTTA", 0, 2, 0, 0, 0) {
		"#062e#000mアドル兄、ドギたちに"
		"コッチ手伝ってもらえないのか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　ラクシャが漂流村のほうを見る。
	LookTo("LAXIA", -58.956f , -1385.590f , 50.140f)

	// ラクシャ
	TalkPopup("LAXIA", 0, 1, 0, 0, 0) {
		"#000e#000mそう言えば、ドギたちも"
		"まだ戻って来ていないようですね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookTo("DANA", -58.956f , -1385.590f , 50.140f)
	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て

	// ダーナ
	TalkPopup("DANA", 0, 1, 0, 0, 0) {
		"#000e#000mうん、この様子だと"
		"向こうも苦戦しているのかも。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookReset("SAHAD")
	ChangeAnimation( "SAHAD", "ANI_EV_GAKKARI_S", -1, 1 )	// がっかり
	// サハド
	TalkPopup("SAHAD", 0, 2, 0, 0, 0) {
		"#000mとほほ、やるしかねーか……"
		"とほほ2行目"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　画面フェードアウト。
	StopBGM(120)
	SetEnvSEPlayState(-1, 0)	//環境SE全停止

	// フェードアウト
	FadeOut(FADE_BLACK, FADE_NORMAL)
	WaitFade()
	
	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	Wait(60)

	//終了処理ここから----------------------------------------------------
	CallFunc("mp1215:EV_M06S011_ED")
}

function "EV_M06S011_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")	

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ
	SetFlag(SF_ALLMUTEKI,0)		//無敵OFF
	SetFlag(TF_LOADING_TIPS_OFF, 1)	//NowLoading 時の Tips 表示をカット

	StopBGM(30)
	SetFlag(SF_NOCHANGEBGM, 1)

	//LoadArg("map/mp1201t2/mp1201t2.arg")
	LoadArg("map/mp1201/mp1201.arg")
	EventCue("mp1201:EV_M06S020")

	SetEnvSEPlayState(-1, 0)	//環境SE全停止

	ResetStopFlag(STOPFLAG_EVENT)

	//終了処理ここまで----------------------------------------------------
}
