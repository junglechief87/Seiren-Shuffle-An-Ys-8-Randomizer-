#include "inc/mons.h"
#include "inc/def.h"
#include "inc/flag.h"
#include "inc/se.h"
#include "inc/scr_inc.h"
#include "inc/3dicon.h"
#include "inc/skilldef.h"
#include "inc/vo.h"
#include "inc/music.h"
#include "inc/efx.h"
#include "inc/enemy/b020.h"


//-------------------------------------------
// 6310b：
//-------------------------------------------
// initスクリプト
function "init"
{
	

	if (FLAG[SF_BOSS_BATTLE])
	{
		//リトライやデバッグボスジャンプからのボス戦
		SetWork( WK_BGM , BGM_Nothing )
		EventCue("mp6310b:EV_RetryBoss")
	}
}

// ボスをマップに設置する
function "show_boss"
{
//	SetParent(b021, b020, "Null_Spine3")
//	SetParent(b022, b020, "Null_Hips2")
//	SetParent(b023_1, b022, "Null_LeftFeelerRoot1")
//	SetParent(b023_2, b022, "Null_RightFeelerRoot1")

//	ChangeAnimation("b023_1", "SET_LEFT", -1, 1)
//	ChangeAnimation("b023_2", "SET_RIGHT", -1, 1)

	SetChrPos(b020, 0.0f, 0.0f, 0.0f)
	SetChrPos(b021, 0.0f, 0.0f, 0.0f)
	SetChrPos(b022, 0.0f, 0.0f, 0.0f)
//	SetChrPos(b023_1, 0.0f, 0.0f, 0.0f)
//	SetChrPos(b023_2, 0.0f, 0.0f, 0.0f)
	Turn(b020, 0.0f, 360.0f)
//	Turn(b021, 0.0f, 360.0f)
//	Turn(b022, 0.0f, 360.0f)
//	Turn(b023_1, 0.0f, 360.0f)
//	Turn(b023_2, 0.0f, 360.0f)

//	SetChrPos(b024, -25.0f, -25.0f, 38.0f)
//	SetChrPos(b025_1, 0.0f, -46.0f, 38.0f)
//	SetChrPos(b025_2, 46.0f, 0.0f, 38.0f)
//	SetChrPos(b025_3, 0.0f, 46.0f, 38.0f)
//	SetChrPos(b025_4, -46.0, 0.0f, 38.0f)

	//ChangeAnimation( b020 , "ANI_SET_PHASE2", -1 , 1 )
	//ChangeAnimation( b021 , "ANI_SET_PHASE2", -1 , 1 )
	//ChangeAnimation( b022 , "ANI_SET_PHASE2", -1 , 1 )
	//ChangeAnimation( b020 , "ANI_SET_PHASE3", -1 , 1 )
	//ChangeAnimation( b021 , "ANI_SET_PHASE3", -1 , 1 )
	//ChangeAnimation( b022 , "ANI_SET_PHASE3", -1 , 1 )
	//ChangeAnimation( b020 , "ANI_UNI2", -1 , 1 )
	//ChangeAnimation( b021 , "ANI_UNI2", -1 , 1 )
	//ChangeAnimation( b022 , "ANI_UNI2", -1 , 1 )

	//ChangeAnimation( b024 , "ANI_UNI1", -1 , 1 )//コアクリスタル格納状態
}

// ボスを亜空間に隠す
function "hide_boss"
{
//	SetParent(b021, b020, "")
//	SetParent(b022, b020, "")
//	SetParent(b023_1, b022, "")
//	SetParent(b023_2, b022, "")

//	ChangeAnimation("b023_1", "SET_LEFT", -1, 1)
//	ChangeAnimation("b023_2", "SET_RIGHT", -1, 1)

	SetChrPos(b020, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b021, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b021ivy, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b022, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b023_1, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b023_2, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b023_3, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b023_4, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b023_5, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b023_6, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b024, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b025_1, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b025_2, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b025_3, -100000.0f, 0.0f, 0.0f)
	SetChrPos(b025_4, -100000.0f, 0.0f, 0.0f)

	//ChangeAnimation( b020 , "ANI_SET_PHASE2", -1 , 1 )
	//ChangeAnimation( b021 , "ANI_SET_PHASE2", -1 , 1 )
	//ChangeAnimation( b022 , "ANI_SET_PHASE2", -1 , 1 )
	//ChangeAnimation( b020 , "ANI_SET_PHASE3", -1 , 1 )
	//ChangeAnimation( b021 , "ANI_SET_PHASE3", -1 , 1 )
	//ChangeAnimation( b022 , "ANI_SET_PHASE3", -1 , 1 )
	//ChangeAnimation( b020 , "ANI_UNI2", -1 , 1 )
	//ChangeAnimation( b021 , "ANI_UNI2", -1 , 1 )
	//ChangeAnimation( b022 , "ANI_UNI2", -1 , 1 )

	//ChangeAnimation( b024 , "ANI_UNI1", -1 , 1 )//コアクリスタル格納状態
}

//function "btl_set_boss_phase1"
//{
//	ChangeAnimation( b021 , "ANI_SET_PHASE1", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_SET_PHASE1", -1 , 1 )
//}
//function "btl_set_boss_phase2"
//{
//	ChangeAnimation( b021 , "ANI_SET_PHASE2", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_SET_PHASE2", -1 , 1 )
//}
//function "btl_set_boss_phase3"
//{
//	ChangeAnimation( b021 , "ANI_SET_PHASE3", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_SET_PHASE3", -1 , 1 )
//}
//function "btl_set_boss_knockdown"
//{
//	ChangeAnimation( b021 , "ANI_KNOCKDOWN_F", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_KNOCKDOWN_F", -1 , 1 )
//}
//function "btl_set_boss_dead"
//{
//	ChangeAnimation( b021 , "ANI_DEAD", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_DEAD", -1 , 1 )
//}
//function "btl_set_boss_swoon"
//{
//	ChangeAnimation( b021 , "ANI_SWOON", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_SWOON", -1 , 1 )
//}
//
//function "btl_set_boss_weak_damage"
//{
//	ChangeAnimation( b021 , "ANI_WEAK_DAMAGE", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_WEAK_DAMAGE", -1 , 1 )
//}
//
//function "btl_set_boss_uni1"
//{
//	ChangeAnimation( b021 , "ANI_UNI1", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_UNI1", -1 , 1 )
//}
//function "btl_set_boss_uni2"
//{
//	ChangeAnimation( b021 , "ANI_UNI2", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_UNI2", -1 , 1 )
//}
//function "btl_set_boss_atk1"
//{
//	ChangeAnimation( b021 , "ANI_ATK1", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_ATK1", -1 , 1 )
//}
//function "btl_set_boss_atk2"
//{
//	ChangeAnimation( b021 , "ANI_ATK2", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_ATK2", -1 , 1 )
//}
//function "btl_set_boss_atk3"
//{
//	ChangeAnimation( b021 , "ANI_ATK3", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_ATK3", -1 , 1 )
//}
//function "btl_set_boss_atk4"
//{
//	ChangeAnimation( b021 , "ANI_ATK4", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_ATK4", -1 , 1 )
//}
//function "btl_set_boss_atk5"
//{
//	ChangeAnimation( b021 , "ANI_ATK5", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_ATK5", -1 , 1 )
//}
//function "btl_set_boss_atk6"
//{
//	ChangeAnimation( b021 , "ANI_ATK6", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_ATK6", -1 , 1 )
//}
//function "btl_set_boss_atk7"
//{
//	ChangeAnimation( b021 , "ANI_ATK7", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_ATK7", -1 , 1 )
//}
//function "btl_set_boss_atk8"
//{
//	ChangeAnimation( b021 , "ANI_ATK8", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_ATK8", -1 , 1 )
//}
//function "btl_set_boss_atk9"
//{
//	ChangeAnimation( b021 , "ANI_ATK9", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_ATK9", -1 , 1 )
//}
//function "btl_set_boss_atk10"
//{
//	ChangeAnimation( b021 , "ANI_ATK10", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_ATK10", -1 , 1 )
//}
//function "btl_set_boss_atk10_2"
//{
//	ChangeAnimation( b021 , "ANI_3_ATK10_2", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_3_ATK10_2", -1 , 1 )
//}
//function "btl_set_boss_atk10_3"
//{
//	ChangeAnimation( b021 , "ANI_3_ATK10_3", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_3_ATK10_3", -1 , 1 )
//}


// ↓このfuncitonをボスのdead_scriptに登録。
// if文に入るかelseに入るかで、EXTRAスキル発動イベント登録か解除かが決まる。
function "EV_Boss_Finish"
{
	if (FLAG[TF_ENDROGRAM_STATE] == 0)
	{
		// EX発動で止め

		//EXゲージMAX
	//	AddEX(100)	// EX100%回復
	
	//	Wait(25)
	
		//リアルタイムヘルプ表示
		SetRealTimeHelp( RH_B020_LASTATTACK, 0 )

		//エクストラスキル発動チェック
		SetEventDriven(EED_TYPE_EXTRASKILL, 0, "mp6310b:EV_M06S245")
	}
	else
	{
		// 復活

		// リアルタイムヘルプ終了
		SetRealTimeHelp(-1, 0)

		//イベントドリブン解除
		SetEventDriven(EED_TYPE_NONE, 0, "")
	}
}


////////////////////////////////////////////////////////////////////////////////

//■ボス戦処理

////////////////////////////////////////////////////////////////////////////////

// ラスボス戦
function "EV_RetryBoss"
{
	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK, 0)
	WaitFade()
	SaveCamera()

//----------------------------------------------------------------------
//フラグ設定・キャンプメニュー
	SetFlag(SF_CANTSAVE, 1)			//セーブ不可

	if (!FLAG[SF_TIMEATK] && FLAG[GF_MP6310B_ENDROGRAM_STEP]){		// 第一段階を超えている
		SetFlag(SF_BOSS_BATTLE, 0)		//ボス戦中
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止
		SetFlag(SF_CANTSAVE, 1)			//セーブ不可
		SetFlag( SF_CAMP_FORCE_CAN_EQUIP, 1 )

		CampMenu( CM_CAMP )		//キャンプメニューを開く
	}

	SetFlag(SF_BOSS_BATTLE, 1)		//ボス戦中
	SetFlag(SF_CAMP_CANT_FORMATION, 1)	// キャンプメニュー：編成禁止
	SetFlag( SF_CAMP_FORCE_CAN_EQUIP, 0 )
	SetFlag(SF_SETRAMSAVE, 1)		//リトライセーブ
	SetFlag(SF_REDENTRYLINE, 1)	// エントリー表示を赤色に

	//HP装備入れ替え時のHP変動を回復
	HP_Recover(9999)

//----------------------------------------------------------------------
//ボスのフェーズ設定

	CallFunc("mp6310b:show_boss")
	Wait(1)

	CallFunc("rng:finalBossLevel")
	if (FLAG[GF_MP6310B_ENDROGRAM_STEP] == 0)	// 第一段階・触手戦
	{
		CallFunc("mp6310b:Phase1_set")
	}
	else if (FLAG[GF_MP6310B_ENDROGRAM_STEP] == 1)	// 第２段階・コア＆オプション戦
	{
		CallFunc("mp6310b:Phase2_set")
	}
	else if (FLAG[GF_MP6310B_ENDROGRAM_STEP] == 2)	// 第３段階・胸戦
	{
		CallFunc("mp6310b:Phase3_set")
	}

//----------------------------------------------------------------------
//その他（BGMを編成終わってから鳴らす場合はここで　）

	PlayBGM(BGM_BOSS_006, 0)

	//MTDのSE鳴らさない
	SetFlag(SF_NOUSE_MTDSE, 1)
	//武器構え
	SetChrWork("PLAYER1", CWK_BATTLEMODE, 1)
	SetChrWork("PLAYER2", CWK_BATTLEMODE, 1)
	SetChrWork("PLAYER3", CWK_BATTLEMODE, 1)
	ChangeAnimation("PLAYER1", "ANI_WAIT", -1, 1)
	ChangeAnimation("PLAYER2", "ANI_WAIT", -1, 1)
	ChangeAnimation("PLAYER3", "ANI_WAIT", -1, 1)
	//MTDのSE鳴らす
	SetFlag(SF_NOUSE_MTDSE, 0)

	// 段階切替のモーション遷移がバレないように5フレーム待ってみる (タイムアタックで邪魔かもだが…)
	Wait(1)				// マップの計算を回す
	ResetPartyPos()		// 第二段階以降でお供が最下層をウロウロするのを防ぐ
	ResetFollowPoint()
	Wait(4)

	FadeIn(FADE_BLACK, FADE_FAST)

	if (FLAG[SF_TIMEATK])
	{
		// タイムアタックの場合はボス名出してあげる
		VisualName("visual/bossname/bn_b009.itp", VN_NAMEBOSS2, VN_BOSSNAME_LT_X, VN_BOSSNAME_LT_Y,VN_BOSSNAME_TIME)
	}

	WaitFade()

	ResetStopFlag(STOPFLAG_EVENT)
}

function "Phase1_set"
{
	MapAnime("locator_base", "wait_1st")
		
	SetChrPos("LEADER", 0.0f, -40.0f, 0.00f)
	Turn("LEADER", 180.0f, 360.0f)

	ResetPartyPos()
	ResetFollowPoint()

	// argの設定を上書きする
	SetYs8Camera(B020_CAMERA_P1_NORMAL_DIST, B020_CAMERA_P1_NORMAL_FOV, B020_CAMERA_P1_NORMAL_DIP, B020_CAMERA_P1_NORMAL_ADDZ, B020_CAMERA_P1_NORMAL_ADDZ)

	// カメラリセット
	RestoreCamera(0, 0)
	ResetCameraObserver(0)

	MoveCameraAt(0, 0.000f, -40.000f, 3.057f, 0)	// 注視点
	ChangeCameraDistance(0, B020_CAMERA_P1_NORMAL_DIST, 0)		// 基本距離
	ChangeCameraElevation(0, B020_CAMERA_P1_NORMAL_DIP, 0)	// 基本仰角
	RotateCamera(0, 0.000f, 0)				// 角度
	ChangeCameraPers(0, B020_CAMERA_P1_NORMAL_FOV, 0)			// 視野角
//	SetCameraZPlane(0.100f, 1800.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	FixCamera()
}

function "Phase2_set"
{
	MapAnime("locator_base", "wait_2nd")

	SetChrPos("LEADER", 0.0f, -40.0f, 38.00f)
	Turn("LEADER", 180.0f, 360.0f)

	ResetPartyPos()
	ResetFollowPoint()

	// argの設定を上書きする
	SetYs8Camera(B020_CAMERA_P2_NORMAL_DIST, B020_CAMERA_P2_NORMAL_FOV, B020_CAMERA_P2_NORMAL_DIP, B020_CAMERA_P2_NORMAL_ADDZ, B020_CAMERA_P2_NORMAL_ADDZ)

	// カメラリセット
	RestoreCamera(0, 0)
	ResetCameraObserver(0)

	MoveCameraAt(0, 0.000f, -40.000f, 40.063f, 0)	// 注視点
	ChangeCameraDistance(0, B020_CAMERA_P2_NORMAL_DIST, 0)		// 基本距離
	ChangeCameraElevation(0, B020_CAMERA_P2_NORMAL_DIP, 0)	// 基本仰角
	RotateCamera(0, 0.000f, 0)				// 角度
	ChangeCameraPers(0, B020_CAMERA_P2_NORMAL_FOV, 0)			// 視野角
//	SetCameraZPlane(0.100f, 1800.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	FixCamera()
}

function "Phase3_set"
{
	MapAnime("locator_base", "wait_3rd")

	//◆EXスキル用リアルタイムヘルプを呼び出す
	//SetEventDriven(EED_TYPE_BOSSHPREDUCE,1,"mp6310b:boss3_ex_help")

	SetChrPos("LEADER", 0.0f, -40.0f, 94.00f)
	Turn("LEADER", 180.0f, 360.0f)

	ResetPartyPos()
	ResetFollowPoint()

	// argの設定を上書きする
	SetYs8Camera(B020_CAMERA_P3_NORMAL_DIST, B020_CAMERA_P3_NORMAL_FOV, B020_CAMERA_P3_NORMAL_DIP, B020_CAMERA_P3_NORMAL_ADDZ, B020_CAMERA_P3_NORMAL_ADDZ)

	// カメラリセット
	RestoreCamera(0, 0)
	ResetCameraObserver(0)

	MoveCameraAt(0, 0.000f, -40.000f, 97.840f, 0)	// 注視点
	ChangeCameraDistance(0, B020_CAMERA_P3_NORMAL_DIST, 0)		// 基本距離
	ChangeCameraElevation(0, B020_CAMERA_P3_NORMAL_DIP, 0)	// 基本仰角
	RotateCamera(0, 0.000f, 0)				// 角度
	ChangeCameraPers(0, B020_CAMERA_P3_NORMAL_FOV, 0)			// 視野角
//	SetCameraZPlane(0.100f, 1800.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	FixCamera()
}


// system:boss_end 改
function "boss3_end"
{
	//MTDのSE鳴らさない
	SetFlag(SF_NOUSE_MTDSE, 1)

	SetFlag(SF_ALLMUTEKI, 0)		//無敵ＯＦＦ

	// フラグ解除等（SF_BOSS_BATTLEのみイベント内で対処して下さい）
	SetFlag(SF_CANTSAVE, 0)			//セーブ不可
	SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止解除
	SetFlag(SF_REDENTRYLINE, 0)	// エントリー表示を赤色に
	//SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ

	//ボス戦はHP回復のみ
	HP_Recover(9999)
	CureAll()

	//MTDのSE鳴らす
	SetFlag(SF_NOUSE_MTDSE, 0)
}


// ボス死亡：第１段階
function "EV_Boss_Dead_1"
{
//◆第２段階へ
//---------------------------------------------------------------------------
//床移動カメラ演出

	SetFlag(SF_ALLMUTEKI, 1)		//無敵ＯＮ
	Wait(80)

	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()
	
	if (FLAG[SF_TIMEATK])
	{
		EndTimeAtk()
		SetFlag(SF_ALLMUTEKI, 0)		//無敵解除
		ResetStopFlag(STOPFLAG_EVENT)
	}
	else
	{
		SetStopFlag(STOPFLAG_NOEXTERIOR)
		SetStopFlag(STOPFLAG_PC)
		SetStopFlag(STOPFLAG_CAMERA)
		SetStopFlag(STOPFLAG_NOCHARACLIP)

		HP_Recover(9999)
		CureAll()

	//	ResetMotion( "PARTYALL" , 1 )
		ResetMotion("ALL", 1)
		StopEffect(-1,ALL,1)
		StopEmotion( "ALL" )
		ResetMoveVec("PARTYALL")

		SetChrPos("LEADER", 0.0f, -40.0f, 0.00f)
		Turn("LEADER", 180.0f, 360.0f)
		ResetPartyPos()
		ResetFollowPoint()

		Turn(b020, 0.0f, 360.0f)

		//MTDのSE鳴らさない
		SetFlag(SF_NOUSE_MTDSE, 1)
		//武器構え
		SetChrWork("PLAYER1", CWK_BATTLEMODE, 1)
		SetChrWork("PLAYER2", CWK_BATTLEMODE, 1)
		SetChrWork("PLAYER3", CWK_BATTLEMODE, 1)
		ChangeAnimation("PLAYER1", "ANI_WAIT", -1, 1)
		ChangeAnimation("PLAYER2", "ANI_WAIT", -1, 1)
		ChangeAnimation("PLAYER3", "ANI_WAIT", -1, 1)
		//MTDのSE鳴らす
		SetFlag(SF_NOUSE_MTDSE, 0)

		MoveCameraAt( 0 , 0.000f , -40.000f , 0.000f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 18.296f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 22.606f , 0 )	// 基本仰角
		RotateCamera( 0 , 58.050f , 0 )				// 角度
		ChangeCameraPers( 0 , 60.400f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
		RollCamera( 0 , -6.3f , 0 )				// ロール回転

		// 被写界深度の設定
		//SetDoF(0, LERP_LINEAR, 2.000, 30.000, 2.000, 0.550, 0.500)					//イベント毎に調整

		//固定カメラへ遷移
	//	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , 0.000f , -40.000f , 0.000f , 120 )	// 注視点
	//	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 18.296f , 120 )				// 基本距離
	//	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , 22.606f , 120 )				// 基本仰角
	//	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE ,  58.050f , 120 )				// 角度
	//	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE , -6.3f , 120 )				// ロール回転
	//
	//	//MoveCameraAt( 0 , 0.000f , -40.000f , 0.000f , 0 )	// 注視点
	//	//ChangeCameraDistance( 0 , 18.296f , 0 )		// 基本距離
	//	//ChangeCameraElevation( 0 , 22.606f , 0 )	// 基本仰角
	//	//RotateCamera( 0 , 58.050f , 0 )				// 角度
	//	//ChangeCameraPers( 0 , 60.400f , 0 )			// 視野角
	//	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//	//RollCamera( 0 , -6.3f , 0 )				// ロール回転

		FadeIn(FADE_BLACK,FADE_FAST)
		WaitFade()

		WaitThread(1001)
		WaitThread(1002)
		WaitThread(1003)
		WaitThread(1004)
		WaitThread(1005)

		MapAnime("locator_base", "go_2nd")

		//エレベーター移動	
		ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE ,  0.000f , -40.000f , 38.199f , 125 )	// 注視点
		ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 16.996f , 125 )				// 基本距離
		ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , 10.045f , 125 )				// 基本仰角
		ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE ,  339.249f , 125 )				// 角度
		ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE , 24.9f , 125 )				// ロール回転

		//MoveCameraAt( 0 , 0.000f , -40.000f , 38.199f , 0 )	// 注視点
		//ChangeCameraDistance( 0 , 16.996f , 0 )		// 基本距離
		//ChangeCameraElevation( 0 , 10.045f , 0 )	// 基本仰角
		//RotateCamera( 0 , 339.249f , 0 )				// 角度
		//ChangeCameraPers( 0 , 60.400f , 0 )			// 視野角
		//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
		//RollCamera( 0 , 24.9f , 0 )				// ロール回転

		Wait(110)

		SetFlag(GF_MP6310B_ENDROGRAM_STEP, 1)	// 第二段階・コア＆オプション戦へ切替 (ボスへの合図にもなっている)

		WaitThread(1001)
		WaitThread(1002)
		WaitThread(1003)
		WaitThread(1004)
		WaitThread(1005)

		//コア注目
		ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE ,  -0.003f , -17.327f , 44.400f , 140 )	// 注視点
		ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 20.496f , 140 )				// 基本距離
		ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , 10.493f , 140 )				// 基本仰角
		ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE ,  21.438f , 140 )				// 角度
		ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE , -24.8f , 140 )				// ロール回転

		//MoveCameraAt( 0 , -0.003f , -17.327f , 44.400f , 0 )	// 注視点
		//ChangeCameraDistance( 0 , 20.496f , 0 )		// 基本距離
		//ChangeCameraElevation( 0 , 10.493f , 0 )	// 基本仰角
		//RotateCamera( 0 , 21.438f , 0 )				// 角度
		//ChangeCameraPers( 0 , 60.400f , 0 )			// 視野角
		//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
		//RollCamera( 0 , -24.8f , 0 )				// ロール回転

		WaitThread(1001)
		WaitThread(1002)
		WaitThread(1003)
		WaitThread(1004)
		WaitThread(1005)

		Wait(20)

		//コア散らばる
		ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE ,  -24.370f , -4.396f , 43.408f , 110 )	// 注視点
		ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE ,55.396f , 110 )				// 基本距離
		ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE ,  23.082f , 110 )				// 基本仰角
		ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE ,  274.456f , 110 )				// 角度
		ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE , 16.8f , 110 )				// ロール回転

		//MoveCameraAt( 0 , -24.370f , -4.396f , 43.408f , 0 )	// 注視点
		//ChangeCameraDistance( 0 , 55.396f , 0 )		// 基本距離
		//ChangeCameraElevation( 0 , 23.082f , 0 )	// 基本仰角
		//RotateCamera( 0 , 274.456f , 0 )				// 角度
		//ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
		//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
		//RollCamera( 0 , 16.8f , 0 )				// ロール回転

		Wait(100)

	//---------------------------------------------------------------------------
	//パーティー編成等の処理

		FadeOut(FADE_BLACK, FADE_FAST)
		WaitFade()

		StopThread(1001)
		StopThread(1002)
		StopThread(1003)
		StopThread(1004)
		StopThread(1005)

		ResetStopFlag(STOPFLAG_PC)
		SetStopFlag(STOPFLAG_CHARACTER)

	//---------------------------------------------------------------
	//キャンプメニューを開く

		SetFlag(SF_BOSS_BATTLE, 0)		//ボス戦中
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止
		SetFlag(SF_CANTSAVE, 1)			//セーブ不可
		SetFlag( SF_CAMP_FORCE_CAN_EQUIP, 1 )


		CampMenu( CM_CAMP )		//キャンプメニューを開く

		SetFlag(SF_BOSS_BATTLE, 1)		//ボス戦中
		SetFlag( SF_CAMP_FORCE_CAN_EQUIP, 0 )
		SetFlag(SF_CAMP_CANT_FORMATION, 1)	// キャンプメニュー：編成禁止
		SetFlag(SF_REDENTRYLINE, 1)	// エントリー表示を赤色に

		//HP装備入れ替え時のHP変動を回復
		HP_Recover(9999)

	//---------------------------------------------------------------

		ResetStopFlag(STOPFLAG_CHARACTER)
		SetStopFlag(STOPFLAG_PC)

		SetFlag(SF_SETRAMSAVE, 1)		//リトライセーブ

		//第二段階
		CallFunc("mp6310b:Phase2_set")

		//マップパラメーターリセット
		ResetMapParam(-1)

		//MTDのSE鳴らさない
		SetFlag(SF_NOUSE_MTDSE, 1)
		//武器構え
		SetChrWork("PLAYER1", CWK_BATTLEMODE, 1)
		SetChrWork("PLAYER2", CWK_BATTLEMODE, 1)
		SetChrWork("PLAYER3", CWK_BATTLEMODE, 1)
		ChangeAnimation("PLAYER1", "ANI_WAIT", -1, 1)
		ChangeAnimation("PLAYER2", "ANI_WAIT", -1, 1)
		ChangeAnimation("PLAYER3", "ANI_WAIT", -1, 1)
		//MTDのSE鳴らす
		SetFlag(SF_NOUSE_MTDSE, 0)

		ResetStopFlag(STOPFLAG_NOEXTERIOR)
		ResetStopFlag(STOPFLAG_PC)
		ResetStopFlag(STOPFLAG_CAMERA)
		ResetStopFlag(STOPFLAG_NOCHARACLIP)

		FadeIn(FADE_BLACK, FADE_FAST)
		//WaitFade()
		SetFlag(SF_ALLMUTEKI, 0)		//無敵ＯＦＦ

	//---------------------------------------------------------------------------
	}

}



// ボス死亡：第２段階
function "EV_Boss_Dead_2"
{
// ◆第３段階へ
//---------------------------------------------------------------------------
//床移動カメラ演出
	SetFlag(SF_ALLMUTEKI, 1)		//無敵ＯＮ
	Wait(80)

	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

	if (FLAG[SF_TIMEATK])
	{
		EndTimeAtk()
		SetFlag(SF_ALLMUTEKI, 0)		//無敵解除
		ResetStopFlag(STOPFLAG_EVENT)
	}
	else
	{
		SetStopFlag(STOPFLAG_PC)
		SetStopFlag(STOPFLAG_NOEXTERIOR)
		SetStopFlag(STOPFLAG_CAMERA)
		SetStopFlag(STOPFLAG_NOCHARACLIP)

		HP_Recover(9999)
		CureAll()

	//	ResetMotion( "PARTYALL" , 1 )
		ResetMotion( "ALL" , 1 )
		StopEffect(-1,ALL,1)
		StopEmotion( "ALL" )
		ResetMoveVec("PARTYALL")

		SetChrPos("LEADER", 0.0f, -40.0f, 38.00f)
		Turn("LEADER", 180.0f, 360.0f)
		ResetPartyPos()
		ResetFollowPoint()

		Turn(b020, 0.0f, 360.0f)

		//MTDのSE鳴らさない
		SetFlag(SF_NOUSE_MTDSE, 1)
		//武器構え
		SetChrWork("PLAYER1", CWK_BATTLEMODE, 1)
		SetChrWork("PLAYER2", CWK_BATTLEMODE, 1)
		SetChrWork("PLAYER3", CWK_BATTLEMODE, 1)
		ChangeAnimation("PLAYER1", "ANI_WAIT", -1, 1)
		ChangeAnimation("PLAYER2", "ANI_WAIT", -1, 1)
		ChangeAnimation("PLAYER3", "ANI_WAIT", -1, 1)
		//MTDのSE鳴らす
		SetFlag(SF_NOUSE_MTDSE, 0)


		MoveCameraAt(0, 0.000f, -39.989f, 41.029f, 0)	// 注視点
		ChangeCameraDistance(0, 11.000f, 0)		// 基本距離
		ChangeCameraElevation(0, 0.000f, 0)	// 基本仰角
		RotateCamera(0, 0.000f, 0)				// 角度
		ChangeCameraPers(0, 60.000f, 0)			// 視野角
	//	SetCameraZPlane(0.100f, 1800.000f)			// ZPlane
		RollCamera(0, 0.0f, 0)				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


		//CheckChrAngle( TF_0009_4EV, "b020", "PLAYER1", 180, 360 )	//PCが左側にいる場合
		//CheckChrAngle( TF_0010_4EV, "b020", "PLAYER1", 270, 90 )	//PCが前方側にいる場合

		SetFlag(TF_0009_4EV,1)
		SetFlag(TF_0010_4EV,1)

		Wait(1)	// ボスが戦闘中に正面以外を向いていた場合、一瞬だけ向きが違う様子が見えるのを防ぐ
		FadeIn(FADE_BLACK,FADE_FAST)
		WaitFade()

		Wait(10)

		if (!FLAG[TF_0009_4EV] && FLAG[TF_0010_4EV]){		//PC右前にいる場合のカメラ
			ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , -49.608f , -41.723f , 130.851f , 160 )	// 注視点
			ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 27.500f , 160 )				// 基本距離
			ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE ,  55.197f , 160 )				// 基本仰角
			ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE ,  304.998f  , 160 )				// 角度
			ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE , 21.3f , 160 )				// ロール回転

			//MoveCameraAt( 0 , -49.608f , -41.723f , 130.851f , 0 )	// 注視点
			//ChangeCameraDistance( 0 , 27.500f , 0 )		// 基本距離
			//ChangeCameraElevation( 0 , 55.197f , 0 )	// 基本仰角
			//RotateCamera( 0 , 304.998f , 0 )				// 角度
			//ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
			//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
			//RollCamera( 0 , 21.3f , 0 )				// ロール回転

		}
		else if(FLAG[TF_0009_4EV] && FLAG[TF_0010_4EV]){		//PC左前にいる場合のカメラ
			ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , 49.608f , -41.723f , 130.851f , 160 )	// 注視点
			ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 27.500f , 160 )				// 基本距離
			ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE ,  55.197f , 160 )				// 基本仰角
			ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE ,  -304.998f  , 160 )				// 角度
			ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE , -21.3f , 160 )				// ロール回転

			//MoveCameraAt( 0 , 49.608f , -41.723f , 130.851f , 0 )	// 注視点
			//ChangeCameraDistance( 0 , 27.500f , 0 )		// 基本距離
			//ChangeCameraElevation( 0 , 55.197f , 0 )	// 基本仰角
			//RotateCamera( 0 , -304.998f , 0 )				// 角度
			//ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
			//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
			//RollCamera( 0 , -21.3f , 0 )				// ロール回転
		}
		else if(FLAG[TF_0009_4EV] && !FLAG[TF_0010_4EV]){		//PC左後にいる場合のカメラ
			ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , 49.608f , 41.723f , 130.851f , 160 )	// 注視点
			ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 27.500f , 160 )				// 基本距離
			ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE ,  55.197f , 160 )				// 基本仰角
			ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE ,  124.998f  , 160 )				// 角度
			ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE , -21.3f , 160 )				// ロール回転

			//MoveCameraAt( 0 , 49.608f , 41.723f , 130.851f , 0 )	// 注視点
			//ChangeCameraDistance( 0 , 27.500f , 0 )		// 基本距離
			//ChangeCameraElevation( 0 , 55.197f , 0 )	// 基本仰角
			//RotateCamera( 0 , 124.998f , 0 )				// 角度
			//ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
			//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
			//RollCamera( 0 , -21.3f , 0 )				// ロール回転
		}
		else if(!FLAG[TF_0009_4EV] && !FLAG[TF_0010_4EV]){		//PC右後にいる場合のカメラ
			ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , -49.608f , 41.723f , 130.851f , 160 )	// 注視点
			ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 27.500f , 160 )				// 基本距離
			ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE ,  55.197f , 160 )				// 基本仰角
			ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE ,  214.998f  , 160 )				// 角度
			ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE , 21.3f , 160 )				// ロール回転

			//MoveCameraAt( 0 , -49.608f , 41.723f , 130.851f , 0 )	// 注視点
			//ChangeCameraDistance( 0 , 27.500f , 0 )		// 基本距離
			//ChangeCameraElevation( 0 , 55.197f , 0 )	// 基本仰角
			//RotateCamera( 0 , 214.998f , 0 )				// 角度
			//ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
			//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
			//RollCamera( 0 , 21.3f , 0 )				// ロール回転
		}


		Wait(125)

		MapAnime("locator_base", "go_3rd")

		WaitThread(1001)
		WaitThread(1002)
		WaitThread(1003)
		WaitThread(1004)
		WaitThread(1005)

		Wait(20)

		//フェーズ切り替え映す
		ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , 0.000f , -40.000f , 98.747f , 150 )	// 注視点
		ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 53.696f  , 150 )				// 基本距離
		ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE ,  -16.123f , 150 )				// 基本仰角
		ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE , 0.0f  , 150 )				// 角度
		ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE , 0.0f , 150 )				// ロール回転

		//MoveCameraAt( 0 , 0.000f , -40.000f , 98.747f , 0 )	// 注視点
		//ChangeCameraDistance( 0 , 53.696f , 0 )		// 基本距離
		//ChangeCameraElevation( 0 , -16.123f , 0 )	// 基本仰角
		//RotateCamera( 0 , 0.0f , 0 )				// 角度
		//ChangeCameraPers( 0 , 60.400f , 0 )			// 視野角
		//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
		//RollCamera( 0 , 0.0f , 0 )				// ロール回転

		Wait(40)

		SetFlag(GF_MP6310B_ENDROGRAM_STEP, 2)	// 第三段階・胸戦へ切替 (ボスへの合図にもなっている)

		WaitThread(1001)
		WaitThread(1002)
		WaitThread(1003)
		WaitThread(1004)
		WaitThread(1005)
		Wait(10)

	//---------------------------------------------------------------------------
	//パーティー編成等の処理

		FadeOut(FADE_BLACK, FADE_FAST)
		WaitFade()

		StopThread(1001)
		StopThread(1002)
		StopThread(1003)
		StopThread(1004)
		StopThread(1005)

		ResetStopFlag(STOPFLAG_PC)
		SetStopFlag(STOPFLAG_CHARACTER)

	//---------------------------------------------------------------
	//キャンプメニューを開く

		SetFlag(SF_BOSS_BATTLE, 0)		//ボス戦中
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止
		SetFlag(SF_CANTSAVE, 1)			//セーブ不可
		SetFlag( SF_CAMP_FORCE_CAN_EQUIP, 1 )

		CampMenu( CM_CAMP )		//キャンプメニューを開く

		SetFlag(SF_BOSS_BATTLE, 1)		//ボス戦中
		SetFlag( SF_CAMP_FORCE_CAN_EQUIP, 0 )
		SetFlag(SF_CAMP_CANT_FORMATION, 1)	// キャンプメニュー：編成禁止
		SetFlag(SF_REDENTRYLINE, 1)	// エントリー表示を赤色に

		//HP装備入れ替え時のHP変動を回復
		HP_Recover(9999)

	//---------------------------------------------------------------

		ResetStopFlag(STOPFLAG_CHARACTER)
		SetStopFlag(STOPFLAG_PC)

		CallFunc("mp6310b:Phase3_set")

		SetFlag(SF_SETRAMSAVE, 1)		//リトライセーブ

		//マップパラメーターリセット
		ResetMapParam(-1)

		//MTDのSE鳴らさない
		SetFlag(SF_NOUSE_MTDSE, 1)
		//武器構え
		SetChrWork("PLAYER1", CWK_BATTLEMODE, 1)
		SetChrWork("PLAYER2", CWK_BATTLEMODE, 1)
		SetChrWork("PLAYER3", CWK_BATTLEMODE, 1)
		ChangeAnimation("PLAYER1", "ANI_WAIT", -1, 1)
		ChangeAnimation("PLAYER2", "ANI_WAIT", -1, 1)
		ChangeAnimation("PLAYER3", "ANI_WAIT", -1, 1)
		//MTDのSE鳴らす
		SetFlag(SF_NOUSE_MTDSE, 0)

		ResetStopFlag(STOPFLAG_PC)
		ResetStopFlag(STOPFLAG_NOEXTERIOR)
		ResetStopFlag(STOPFLAG_CAMERA)
		ResetStopFlag(STOPFLAG_NOCHARACLIP)

		FadeIn(FADE_BLACK, FADE_FAST)
		//WaitFade()
		SetFlag(SF_ALLMUTEKI, 0)		//無敵ＯＦＦ

	//---------------------------------------------------------------------------
	}
}


////////////////////////////////////////////////////////////////////////////////

//■メインイベントセクション

////////////////////////////////////////////////////////////////////////////////


function "EV_M06S240"			//ﾃｵｽ･ﾃﾞ･ｴﾝﾄﾞﾛｸﾞﾗﾑとの戦い	(mp6310)
{
	//開始処理ここから-----------------------------------------------
	SetStopFlag(STOPFLAG_EVENTIMPOSE)
	ResetStopFlag(STOPFLAG_CINEMA)

	FadeOut(FADE_BLACK, 0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	//ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定
	SetChrPos("ADOL",-0.30f,-40.73f,0.00f)
	Turn("ADOL",-178.94f,360.0f)
	SetChrPos("LAXIA",0.94f,-40.15f,0.00f)
	Turn("LAXIA",-175.61f,360.0f)
	SetChrPos("RICOTTA",-2.03f,-40.82f,0.00f)
	Turn("RICOTTA",179.41f,360.0f)
	SetChrPos("DANA",-1.29f,-39.85f,0.00f)
	Turn("DANA",168.42f,360.0f)
	
	//やや内側より
	SetChrPos("SAHAD",0.65f,-41.63f,0.00f)
	Turn("SAHAD",176.92f,360.0f)
	SetChrPos("HUMMEL",-1.25f,-41.66f,0.00f)
	Turn("HUMMEL",-172.45f,360.0f)


	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("ADOL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("ADOL")
	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("RICOTTA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("RICOTTA")
	SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("SAHAD", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("SAHAD")
	SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("LAXIA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("LAXIA")
	SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)

	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("HUMMEL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("HUMMEL")
	SetChrInfoFlag("HUMMEL", INFOFLAG_NOCHRATARI)

	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("DANA")
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)

	LookSpd("RICOTTA" , 0.08, 0.08, 0.08)
	LookSpd("SAHAD"   , 0.08, 0.08, 0.08)
	LookSpd("LAXIA"   , 0.08, 0.08, 0.08)
	LookSpd("HUMMEL"  , 0.08, 0.08, 0.08)
	LookSpd("DANA"    , 0.08, 0.08, 0.08)
	LookSpd("ADOL"    , 0.08, 0.08, 0.08)

	SetChrInfoFlag( "RICOTTA"  , INFOFLAG_INVISIBLE )
	SetChrInfoFlag( "SAHAD"    , INFOFLAG_INVISIBLE )
	SetChrInfoFlag( "LAXIA"    , INFOFLAG_INVISIBLE )
	SetChrInfoFlag( "HUMMEL"   , INFOFLAG_INVISIBLE )
	SetChrInfoFlag( "DANA"     , INFOFLAG_INVISIBLE )
	SetChrInfoFlag( "ADOL"     , INFOFLAG_INVISIBLE )

	CallFunc("mp6310b:show_boss")


	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )

	//カメラ設定
	MoveCameraAt( 0 , -1.776f , -39.892f , -0.612f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 9.500f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 26.611f , 0 )	// 基本仰角
	RotateCamera( 0 , 55.791f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , 9.6f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 165.000, 2.000, 0.550, 0.500)					//イベント毎に調整
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp6310b:EV_M06S231_ED")

	//開始処理ここまで-----------------------------------------------

	SoundEfx( SEFX_EV_CAVE_L, 15 )

	ExecuteCmd( 1000,ChangeCameraDistance, INTERPOLATE_SPHERE , 26.400f , 240 )				// 基本距離

	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	ChrEffect2( "ADOL" , 3901100 , "root", "", 0 , IMPACT_NONE , KNOCK_EFXPOS , 0.0f,0.0f,0, 1.5f, 0.5f)
	PlaySE(SE_M06S240_02, 70, 0, 0, 0, 1.0f, 0)

	Wait(30)

	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , 0.487f , -37.098f , 5.837f, 120 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 26.400f , 120 )				// 基本距離
	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , 22.918f , 120 )				// 基本仰角
	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE , 317.957f , 120 )				// 角度
//	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE , 6.7f , 120 )				// ロール回転
	StopThread(1000)


	//MoveCameraAt( 0 , 0.487f , -37.098f , 5.837f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 26.400f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 22.918f , 0 )	// 基本仰角
	//RotateCamera( 0 , 317.957f , 0 )				// 角度
	//ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 9.6f , 0 )				// ロール回転


	Wait(30)
	PlaySE(SE_M06S240_03, 70, 0, 0, 0, 1.0f, 0)
	Wait(20)
	ResetChrInfoFlag( "RICOTTA"  , INFOFLAG_INVISIBLE )
	ResetChrInfoFlag( "SAHAD"    , INFOFLAG_INVISIBLE )
	ResetChrInfoFlag( "LAXIA"    , INFOFLAG_INVISIBLE )
	ResetChrInfoFlag( "HUMMEL"   , INFOFLAG_INVISIBLE )
	ResetChrInfoFlag( "DANA"     , INFOFLAG_INVISIBLE )
	ResetChrInfoFlag( "ADOL"     , INFOFLAG_INVISIBLE )

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	Look("RICOTTA" , 0 , 25 )
	Look("SAHAD"   , 0 , 25 )
	Look("LAXIA"   , 0 , 25 )
	Look("HUMMEL"  , 0 , 25 )
	Look("DANA"    , 0 , 25 )
	Look("ADOL"    , 0 , 25 )


	Wait(20)


	//--------------------
	// Pos Key
	KeyAnimeCreate(KEYANIME_EXSKILLPOS, 7)
	KeyAnimeSet(0, 0.487, -37.098, 5.837, 26.400, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
	KeyAnimeSet(108, 2.331, 12.159, 47.228, 65.299, 0.008, 0.224, 0.134, 0.205, 0.008, 0.224, 0.134, 0.205)
	KeyAnimeSet(220, 2.331, 12.159, 35.322, 71.399, -0.060, -0.034, 0.182, 0.043, -0.060, -0.034, 0.182, 0.043)
	KeyAnimeSet(290, -8.614, 6.003, 68.479, 73.119, -0.042, 0.101, 0.543, 0.069, -0.042, 0.101, 0.543, 0.069)
	KeyAnimeSet(370, -3.915, 27.373, 116.805, 81.799, 0.028, 0.129, 0.352, 0.052, 0.028, 0.129, 0.352, 0.052)
	KeyAnimeSet(456, -3.915, 27.373, 126.975, 81.799, 0.021, -0.148, 0.001, 0.058, 0.021, -0.148, 0.001, 0.058)
	KeyAnimeSet(555, 0.000, 0.000, 117.054, 92.599, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
	
	// Rot Key
	KeyAnimeCreate(KEYANIME_EXSKILLROT, 7)
	KeyAnimeSet(0, 22.918, 9.600, 317.957, 60.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
	KeyAnimeSet(108, -19.598, 11.027, 168.135, 50.000, -0.041, 0.006, 0.040, -0.045, -0.041, 0.006, 0.040, -0.045)
	KeyAnimeSet(220, 13.854, 11.000, 326.811, 50.000, 0.000, -0.058, 0.963, -0.000, 0.000, -0.058, 0.963, -0.000)
	KeyAnimeSet(290, 13.766, 0.430, 343.408, 50.000, 0.094, -0.192, -0.566, 0.000, 0.094, -0.192, -0.566, 0.000)
	KeyAnimeSet(370, 27.962, -17.752, 241.937, 50.000, 0.120, -0.110, -1.651, 0.000, 0.120, -0.110, -1.651, 0.000)
	KeyAnimeSet(456, 33.614, -17.752, 69.350, 50.000, -0.220, 0.096, -1.308, 0.000, -0.220, 0.096, -1.308, 0.000)
	KeyAnimeSet(555, -12.671, 0.000, 0.000, 50.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
	
	//----------

	PlaySE( SE_M06S240_01 , 50 , 0,  0, 0, 1.0f, 0)
	Blur( BLUR_TYPE_AFTERIMAGE ,0.40f , 30 )
	ExecuteCmd(1000, KeyAnimeCamera, 1.0f, KEYANIME_EXSKILLPOS, KEYANIME_EXSKILLROT, 0 )	

	Wait(215)
	ChangeAnimation( b020 , "ANI_EV_APPEAR", -1 , 1 )		//鎌広げる
	ChangeAnimation( b021 , "ANI_EV_APPEAR", -1 , 1 )		//て広げる

	Wait(65)

	Slow(1.35)
	Blur( BLUR_TYPE_AFTERIMAGE ,0.45f , 60 )
	PlaySE( SE_M06S240_01 , 60 , 0,  1000, 0, 1.0f, 0)

	Wait(100)

	Slow(0.88)
	Blur( BLUR_TYPE_EXPAND ,0.5f , 60 )
	ChangeAnimation( b021 , "ANI_EV_APPEAR2", -1 , 0 )		//首回す(何やら咆哮？）
	PlaySE( SE_M06S240_04 , 60 , 0,  0, 0, 1.0f, 0)

	VibrationPad(2007, 0 )		//咆哮振動

	Wait(130)
	Slow(1.0)

	WaitThread(1000)

	// Key Release
	KeyAnimeRelease(KEYANIME_EXSKILLPOS)
	KeyAnimeRelease(KEYANIME_EXSKILLROT)

	VisualName("visual/bossname/bn_b009.itp", VN_NAMEBOSS, VN_BOSSNAME_LB_X, VN_BOSSNAME_LB_Y,VN_BOSSNAME_TIME)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , 0.000f , -5.859f , 101.973f  , 260 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 128.398f , 260 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE ,  -32.327f  , 260 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 0.000f  , 260 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,2.5f , 260 )		// ロール回転

	//MoveCameraAt( 0 , 0.000f , -5.859f , 101.973f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 108.398f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -32.327f , 0 )	// 基本仰角
	//RotateCamera( 0 , 0.000f , 0 )				// 角度
	//ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転

	Wait(120)

	ChangeAnimation( "HUMMEL" , "ANI_EV_UDEGUMI", -1 , 1 )
	ChangeAnimation( "SAHAD" , "ANI_EV_RYOTEKOSI", -1 , 1 )

	ChangeAnimation( "RICOTTA" , "ANI_EV_YARUKI", -1 , 1 )

	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_ANGER,1)
	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_ANGER,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_ANGER,1)
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_ANGER,1)
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_ANGER,1)
	ChangeSubAnimation("HUMMEL",SUBMOT_EYE,ANI_E_ANGER,1)


	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	Wait(20)

	CrossFade(FADE_NORMAL)


	MoveCameraAt( 0 , 0.652f , -41.191f , 1.458f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.710f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 18.146f , 0 )	// 基本仰角
	RotateCamera( 0 , 144.603f , 0 )				// 角度
	ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , 6.4f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	
	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -0.277f , -41.257f , 1.025f , 160 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 5.250f , 160 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 19.850f , 160 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 208.263f , 160 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,-8.2f , 160 )		// ロール回転

	//MoveCameraAt( 0 , -0.277f , -41.257f , 1.025f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 5.250f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 19.850f , 0 )	// 基本仰角
	//RotateCamera( 0 , 208.263f , 0 )				// 角度
	//ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , -8.2f , 0 )				// ロール回転

	Wait(90)

	FadeBGM(70,10)

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	LookReset("DANA")
	TalkMes("DANA","#3490V#041e#000mようやくのご対面だね。","","")
	WaitPrompt()

	Wait(10)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	CrossFade(FADE_CROSS)
	MoveCameraAt( 0 , -0.668f , -40.406f , 1.323f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.800f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 8.905f , 0 )	// 基本仰角
	RotateCamera( 0 , 8.451f , 0 )				// 角度
	ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , 10.6f , 0 )				// ロール回転


	SetChrPos("RICOTTA",-2.06f,-40.92f,0.00f)
	Turn("RICOTTA",-167.25f,360.0f)


	SetChrPos("LAXIA",0.94f,-40.15f,0.00f)
	Turn("LAXIA",-179.33f,360.0f)

	Look("RICOTTA" , 0 , 25 )

	ChangeAnimation( "HUMMEL" , "ANI_EV_UDEGUMI_E", -1 , 1 )
	ChangeAnimation( "SAHAD" , "ANI_WAIT", -1 , 1 )
	ChangeAnimation( "RICOTTA" , "ANI_WAIT", -1 , 1 )


	Look("ADOL", -30 , 0 )
	LookReset("DANA")
	TurnToChr("DANA" , "ADOL" , 8.0f)
	LookChr("DANA" ,"ADOL")

//	Wait(FADE_CROSS)

	ChangeAnimation( "DANA" , "ANI_EV_TEBURI", -1 , 1 )

	TalkMes("DANA","#3491V#042e#000mアドルさん、行こう！","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(15)

	//　　頷いて一歩前へ進み出るアドル。
	HeadYes("ADOL" , 1 , 25 )

	Wait(40)

	LookSpd("ADOL"  , 0.10, 0.10, 0.10)

	LookReset("ADOL")
	Wait(20)

	ExecuteCmd( 1, MoveTo, "ADOL" ,-0.25f,-39.09f,0.00f , 0.1f , 0.22f )
	//SetChrPos("ADOL",-0.25f,-39.09f,0.00f)
	//Turn("ADOL",-178.94f,360.0f)

	Wait(15)

	StopBGM(90)

	Blur( BLUR_TYPE_AFTERIMAGE ,0.4f , 45 )
	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,-0.360f , -40.796f , 1.075f , 120 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 6.280f , 120 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 15.144f , 120 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,184.456f, 120 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,7.4f, 120 )		// ロール回転

	//MoveCameraAt( 0 , -0.360f , -40.796f , 1.075f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 6.280f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 15.144f , 0 )	// 基本仰角
	//RotateCamera( 0 , 184.456f , 0 )				// 角度
	//ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 11.0f , 0 )				// ロール回転

	ChangeAnimation( "HUMMEL" , "ANI_EV_SETARM", -1 , 1 )
	ChangeAnimation( "RICOTTA" , "ANI_EV_SETARM", -1 , 1 )

	Wait(20)
	ChangeAnimation( "SAHAD" , "ANI_EV_SETARM", -1 , 1 )

	Wait(15)

	LookReset("DANA")
	Turn("DANA",-167.80f,15.0f)
	Look("DANA" , -15 , 25 )
	ChangeAnimation( "DANA" , "ANI_EV_SETARM", -1 , 1 )


	Wait(20)
	ChangeAnimation( "LAXIA" , "ANI_EV_SETARM", -1 , 1 )


	WaitThread(1)
	Wait(20)

	Look(ADOL , 0 , 25 )
	ChangeAnimation( "ADOL" , "ANI_EV_KAKAGE_S", -1 , 1 )

	WaitAnimation2( "ADOL" , -1, 1, "ANI_EV_KAKAGE_S",  0)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	Wait(20)

	//選択肢
	SetFlag(TF_MENU_SELECT,0)
	MenuReset()
	MenuType(MENUTYPE_POPUP)
	MenuAdd(1,"どんな結末になっても恐れずに突き進むぞ！")
	MenuAdd(2,"最後まで足掻いて道を切り拓くぞ！")
	MenuOpen( TF_MENU_SELECT , -1 , ADOLMENU_PPOSY , -2 , -2 , 10 , 0)
	WaitMenu(0)
	MenuClose(10,0)

	CrossFade(FADE_FAST)
	
	MoveCameraAt( 0 , -0.240f , -39.428f , 1.274f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.950f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 26.279f , 0 )	// 基本仰角
	RotateCamera( 0 , 178.408f , 0 )				// 角度
	ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , -0.4f , 0 )				// ロール回転

	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , -0.240f , -39.428f , 1.323f , 180 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_COS , 2.180f , 15 )				// 基本距離
//	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , 1.850f , 180 )				// 基本仰角
//	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE , 116.549f , 180)				// 角度
//	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE , 6.7f , 180 )				// ロール回転

	//MoveCameraAt( 0 , -0.240f , -39.428f , 1.323f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.180f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 26.279f , 0 )	// 基本仰角
	//RotateCamera( 0 , 178.408f , 0 )				// 角度
	//ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , -0.4f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	Wait(35)

	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_SHOUT_S,1)

	//─────────────────────────
	if (FLAG[TF_MENU_SELECT] == 1 ) {
		PlayVoice("SVO_ADL_UNI_5" ,"ADOL", 140)	// ◆NO仮　どんな結末でも恐れずに突き進むぞ！
		Wait(120)
	}
	else  {
		PlayVoice("SVO_ADL_UNI_6" ,"ADOL", 140)	// ◆NO仮　最後まで足掻いて道を切り拓くぞ！
		Wait(120)
		
	}
	//─────────────────────────


//	ChangeSubAnimation("HUMMEL" ,SUBMOT_EYE,ANI_E_SHOUT_S,1)
	ChangeSubAnimation("LAXIA"  ,SUBMOT_MOUTH,ANI_M_SHOUT_S,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_MOUTH,ANI_M_SHOUT_S,1)
	ChangeSubAnimation("SAHAD"  ,SUBMOT_MOUTH,ANI_M_SHOUT_S,1)
	ChangeSubAnimation("DANA"   ,SUBMOT_MOUTH,ANI_M_SHOUT_S,1)
	ChangeSubAnimation("HUMMEL" ,SUBMOT_MOUTH,ANI_M_SHOUT_S,1)

//	ChangeAnimation("LAXIA"  , "ANI_EV_GUTSPOSE3_S", -1 , 1 )
//	ChangeAnimation("RICOTTA", "ANI_EV_GUTSPOSE_S", -1 , 1 )
//	ChangeAnimation("SAHAD"  , "ANI_EV_YARUKI_S", -1 , 1 )
//	ChangeAnimation("DANA"   , "ANI_EV_TEMUNE_S", -1 , 1 )
//	ChangeAnimation("HUMMEL" , "ANI_EV_UDEGUMI_S", -1 , 1 )

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	Blur(BLUR_TYPE_EXPAND,0.35f ,15)
	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -0.240f , -39.428f , 1.596f , 15 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 5.680f , 15 )		// 基本距離
//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE ,  -10.203f , 150 )		// 基本仰角
//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 1.023f  , 150 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,0.0f , 150 )		// ロール回転

	//MoveCameraAt( 0 , -0.240f , -39.428f , 1.596f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 5.680f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 26.279f , 0 )	// 基本仰角
	//RotateCamera( 0 , 178.408f , 0 )				// 角度
	//ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , -0.4f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	EarthQuake( 0.10 , 0.125 , 10 )
	TalkMes(UNDEF,"#5879V#20Sおお！","","")	//（大フォント）
	Wait(15)
	PlayBGM(BGM_BOSS_006, 0)
	FadeBGM(100,0)
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(25)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -0.348f , -40.895f , 3.381f , 150 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 20.980f , 185 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE ,  -10.203f , 150 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 1.023f  , 150 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,0.0f , 150 )		// ロール回転

	//MoveCameraAt( 0 , -0.348f , -40.895f , 3.381f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 20.980f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -10.203f , 0 )	// 基本仰角
	//RotateCamera( 0 , 1.023f , 0 )				// 角度
	//ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 7.4f , 0 )				// ロール回転

	Wait(120)

	FadeOut(FADE_BLACK, FADE_NORMAL)
	Wait(FADE_NORMAL)

	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

	Wait(30)

	//終了処理ここから----------------------------------------------------
	CallFunc("mp6310b:EV_M06S231_ED")
}

function "EV_M06S231_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))
	CallFunc("mp6310b:show_boss")

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	SetChrWork( "ADOL" , CWK_BATTLEMODE , 0 )

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//エフェクトの停止
	StopEffect(-1,ALL,1)

	// 通常
	if ( !FLAG[SF_GALLERY_EVENT] )
	{
		//フラグ
		CallFunc("system:InterceptTimeOver")	//迎撃戦の時間切れ強制終了・セレンの間〜

		SetFlag( GF_GALL_EV_06_06, 1 )			// M06S240:ﾃｵｽ･ﾃﾞ･ｴﾝﾄﾞﾛｸﾞﾗﾑとの戦い

		//イベント後の再配置
		SetChrPos("LEADER",-0.30f,-40.73f,0.00f)
		Turn("LEADER",-178.94f,360.0f)

		ResetPartyPos()
		ResetFollowPoint()
		//Wait(1) //処理待ち用

		//カメラ位置復帰
	//	MoveCameraAt( 0 , -0.027f , -294.168f , 28.041f , 0 )	// 注視点
	//	ChangeCameraDistance( 0 , 11.000f , 0 )		// 基本距離
	//	ChangeCameraElevation( 0 , 4.415f , 0 )	// 基本仰角
	//	RotateCamera( 0 , 0.000f , 0 )				// 角度
	//	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	//	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//	RollCamera( 0 , 0.0f , 0 )				// ロール回転

		SoundEfx( SEFX_SCFI, 15 )

		CallFunc("system:camera_reset")

		EventCue("mp6310b:EV_RetryBoss")

		ResetStopFlag(STOPFLAG_EVENT)
	}
	// イベントギャラリー中
	else
	{
		FadeBGM(100,15)
		SoundEfx( SEFX_DEFAULT, 15 )
		SetEnvSEPlayState(-1, 0)	//環境SE全停止
		GalleryEvEnd(0)		// イベントギャラリー終了（スクリプトから強制的に抜けていろいろ処理してくれる）
		ResetStopFlag(STOPFLAG_EVENTIMPOSE)
	}

	//終了処理ここまで----------------------------------------------------
}

function "EV_M06S245"			//テオス・デ・エンドログラムとどめのEXスキル
{
	//開始処理ここから-----------------------------------------------

	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	FadeOut(FADE_BLACK, FADE_FAST)
	WaitFade()
//	SetStopFlag(STOPFLAG_NOEXTERIOR)
//	SetStopFlag(STOPFLAG_PC)
//	SetStopFlag(STOPFLAG_BTLCAMERA)
//	SetStopFlag(STOPFLAG_NOCHARACLIP)

	KeyAnimeRelease(KEYANIME_EXSKILLPOS)
	KeyAnimeRelease(KEYANIME_EXSKILLROT)

	SetRealTimeHelp(-1, 0)		// リアルタイムヘルプ終了

	StopEffect( -1, "ALL", 1 )	// エフェクト停止
	StopEmotion( "ALL" )		// エモーション停止
	Wait(1)	

	HP_Recover( 9999 )	//アドルダーナ復活

	CallFunc("system:party_remove")
	SetChrPos("Sarai" ,-100000.0f, 0.00f , 0.00f )

	//三段階目の床位置
	MapAnime("locator_base","wait_3rd")

	//マップを暗くしてみる
	MapHide(locator_base,0)
	MapHide(Sky_add,0)
	MapHide(Sky_base,0)
	MapHide(astro1,0)
	MapHide(astro2,0)
	
	//SetPartyMember(PARTY_ADOL, PARTY_DANA, -1)		//読み込みに時間がかかるためボツ
	
	//ダーナスキル用エフェクトロード
	SetFlag(TF_MENU_SELECT, 0)
	if (WORK[WK_ISEXIST_PLAYER1] && WORK[WK_PLAYER1] == DANA)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER2] && WORK[WK_PLAYER2] == DANA)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER3] && WORK[WK_PLAYER3] == DANA)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER4] && WORK[WK_PLAYER4] == DANA)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT, 1)
	}

	if (FLAG[TF_MENU_SELECT] == 0)
	{
		// まだ読まれてない
		LoadEffect("efx_c005.ite")
	}

	//アドルスキル用エフェクトロード
	SetFlag(TF_MENU_SELECT2, 0)
	if (WORK[WK_ISEXIST_PLAYER1] && WORK[WK_PLAYER1] == ADOL)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT2, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER2] && WORK[WK_PLAYER2] == ADOL)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT2, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER3] && WORK[WK_PLAYER3] == ADOL)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT2, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER4] && WORK[WK_PLAYER4] == ADOL)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT2, 1)
	}

	if (FLAG[TF_MENU_SELECT2] == 0)
	{
		// まだ読まれてない
		LoadEffect( "efx_c000.ite" )	//イベント終了時にプログラム側で破棄されてしまうので、パーティメンバーとしてJOINし直す必要あり
		LoadEffect( "efx_c0e0.ite" )	//イベント終了時にプログラム側で破棄されてしまうので、パーティメンバーとしてJOINし直す必要あり
	}
	
	//キャラ初期状態の設定				
	SetChrWork("ADOL", CWK_BATTLEMODE, 1)
	SetChrWork("DANA", CWK_BATTLEMODE, 1)

	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("ADOL", "ANI_EV_EXWAIT", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_ANGER, 1)
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_OPEN, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKL, 1)
	LookReset("ADOL")
	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("ADOL", INFOFLAG_NOATARI)
	SetChrPos("ADOL",-4.32f,-37.24f,94.00f)
	Turn("ADOL",-0.00f,360.0f)

	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("DANA", "ANI_EV_EXWAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_EX, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_OPEN, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKR, 1)
	LookReset("DANA")
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("DANA", INFOFLAG_NOATARI)
	SetChrPos("DANA",-4.30f,-36.81f,94.00f)
	Turn("DANA",179.98f,360.0f)

	CallFunc("mp6310b:show_boss")
	Wait(10)

	ChangeAnimation( "b020" , "ANI_SWOON", -1 , 1 )
	ChangeAnimation( b021 , "ANI_SWOON", -1 , 1 )
	ChangeAnimation( b022 , "ANI_SWOON", -1 , 1 )
	SetChrInfoFlag("b020",INFOFLAG_INVISIBLE)
	SetChrInfoFlag("b021",INFOFLAG_INVISIBLE)
	SetChrInfoFlag("b022",INFOFLAG_INVISIBLE)

	//BGM設定
	PlayBGM(BGM_BOSS_006, 0)

//--------------------
// Pos Key
KeyAnimeCreate(KEYANIME_EXSKILLPOS, 4)
KeyAnimeSet(0, -4.343, -36.992, 94.938, 6.921, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
KeyAnimeSet(30, -4.334, -37.003, 95.103, 4.658, 0.000, -0.000, 0.007, -0.076, 0.000, -0.000, 0.007, -0.076)
KeyAnimeSet(60, -4.321, -37.020, 95.339, 2.339, 0.000, -0.001, 0.008, -0.051, 0.000, -0.001, 0.008, -0.051)
KeyAnimeSet(90, -4.308, -37.036, 95.574, 1.621, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)

// Rot Key
KeyAnimeCreate(KEYANIME_EXSKILLROT, 4)
KeyAnimeSet(0, 27.301, -15.662, 135.589, 37.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
KeyAnimeSet(30, 17.905, -7.000, -44.410, 37.000, -0.380, 0.351, -6.000, -0.000, -0.380, 0.351, -6.000, -0.000)
KeyAnimeSet(60, 4.481, 5.400, -224.408, 37.000, -0.447, 0.413, -6.000, 0.000, -0.447, 0.413, -6.000, 0.000)
KeyAnimeSet(90, -8.942, 17.800, -404.406, 37.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)

//----------


MoveCameraAt( 0 , -4.343f , -36.992f , 94.938f , 0 )	// 注視点
ChangeCameraDistance( 0 , 6.921f , 0 )		// 基本距離
ChangeCameraElevation( 0 , 27.301f , 0 )	// 基本仰角
RotateCamera( 0 , 135.589f , 0 )				// 角度
ChangeCameraPers( 0 , 37.000f , 0 )			// 視野角
SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
RollCamera( 0 , -15.7f , 0 )				// ロール回転
// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 2.000, 30.000, 0.000, 0.700, 0.500)					//イベント毎に調整
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp6310b:EV_M06S245_ED")

	//開始処理ここまで-----------------------------------------------

	ExecuteCmd(1000, KeyAnimeCamera, 1.0f, KEYANIME_EXSKILLPOS, KEYANIME_EXSKILLROT, 0 )

	PlaySE( SYSSE_BOM_START , 100 , 0,  0, 0, 1.0f, 0)		//EX発動
	Effect( 105400,	-4.343f , -36.992f , 94.020f, 0 , 0 , IMPACT_NONE , KNOCK_EFXPOS , 0 , 1.0f, 0.7f)	//EXエフェクト
	FadeIn(FADE_BLACK, 5)
	WaitFade()
	Wait(3)
	

	Wait(45)

	Slow(0.05)
	SetMotSpd(DANA,SUBMOT_MOUTH,20.0f)
	PlayVoice(Y8V_2911,"DANA",100)	//いこう、アドルさん

	Wait(4)
	Slow(1.00)
	Wait(12)
	Slow(0.05)
	SetMotSpd(ADOL,SUBMOT_MOUTH,20.0f)
	PlayVoice(Y8V_0084,"ADOL",100)	//いくぞ、ダーナ

	Wait(3)
	Slow(1.00)
	FadeOut(FADE_BLACK,15)
	WaitFade()

//---------------------------------------------------------------------------------------------------
//アドル連撃

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	
	ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	SetMotSpd(DANA,SUBMOT_MOUTH,1.0f)
	SetMotSpd(ADOL,SUBMOT_MOUTH,1.0f)

	// Key Release
	KeyAnimeRelease(KEYANIME_EXSKILLPOS)
	KeyAnimeRelease(KEYANIME_EXSKILLROT)

	SetChrInfoFlag("DANA",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("b020",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("b021",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("b022",INFOFLAG_INVISIBLE)

	SetChrPos("ADOL",-3.20f,-37.55f,94.00f)
	Turn("ADOL",-73.24f,360.0f)
	MoveCameraAt( 0 , 1.949f , -38.512f , 95.347f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 6.801f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -8.219f , 0 )	// 基本仰角
	RotateCamera( 0 , 265.784f , 0 )				// 角度
	ChangeCameraPers( 0 , 57.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , 10.3f , 0 )				// ロール回転

	//--------------------
	// Pos Key
	KeyAnimeCreate(KEYANIME_EXSKILLPOS, 3)
	KeyAnimeSet(0, 1.952, -38.472, 95.347, 6.801, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
	KeyAnimeSet(50, 1.949, -38.512, 95.347, 6.661, 0.011, -0.013, -0.005, -0.046, 0.011, -0.013, -0.005, -0.046)
	KeyAnimeSet(100, 3.042, -39.730, 94.851, 2.171, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)

	// Rot Key
	KeyAnimeCreate(KEYANIME_EXSKILLROT, 3)
	KeyAnimeSet(0, -8.219, 10.300, 265.784, 57.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
	KeyAnimeSet(50, 10.246, 20.600, 224.858, 57.000, 0.011, 0.032, -2.016, 0.000, 0.011, 0.032, -2.016, 0.000)
	KeyAnimeSet(100, -7.133, 13.464, 64.153, 57.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)

	//----------

	Wait(15)
	ChangeAnimation( "ADOL" , "ANI_EV_EX1", -1 , 1 )


	FadeIn(FADE_BLACK,5)
	WaitFade()
	Wait(10)
	Slow(0.8)
	
	ExecuteCmd(1000, KeyAnimeCamera, 1.0f, KEYANIME_EXSKILLPOS, KEYANIME_EXSKILLROT, 0 )

	Wait(68)
	ChrAlpha( b020 , 0.0f , 5)
	ChrAlpha( b021 , 0.0f , 5)
	ChrAlpha( b022 , 0.0f , 5)
	//SetChrInfoFlag("b020",INFOFLAG_INVISIBLE)
	//SetChrInfoFlag("b021",INFOFLAG_INVISIBLE)
	//SetChrInfoFlag("b022",INFOFLAG_INVISIBLE)

	
	//MoveCameraAt( 0 , 1.949f , -38.512f , 95.347f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 6.661f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 5.266f , 0 )	// 基本仰角
	//RotateCamera( 0 , 244.861f , 0 )				// 角度
	//ChangeCameraPers( 0 , 57.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 20.6f , 0 )				// ロール回転

	//MoveCameraAt( 0 , 1.949f , -38.512f , 94.851f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.931f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -7.797f , 0 )	// 基本仰角
	//RotateCamera( 0 , 44.080f , 0 )				// 角度
	//ChangeCameraPers( 0 , 57.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 9.2f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	//MoveCameraAt( 0 , 3.271f , -39.333f , 94.851f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.931f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -7.797f , 0 )	// 基本仰角
	//RotateCamera( 0 , 49.787f , 0 )				// 角度
	//ChangeCameraPers( 0 , 57.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 9.2f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	
	Wait(5)
	
	FadeOut(FADE_BLACK,20)
	WaitFade()
//---------------------------------------------------------------------------------------------------
//ダーナ連撃

	StopThread(1000)

	Wait(15)

	// Key Release
	KeyAnimeRelease(KEYANIME_EXSKILLPOS)
	KeyAnimeRelease(KEYANIME_EXSKILLROT)

	ChrAlpha( b020 , 1.0f , 8)
	ChrAlpha( b021 , 1.0f , 8)
	ChrAlpha( b022 , 1.0f , 8)

	SetChrInfoFlag("ADOL",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("DANA",INFOFLAG_INVISIBLE)
	SetChrPos("DANA",-9.36f,-39.01f,94.00f)
	Turn("DANA",-72.28f,360.0f)

	MoveCameraAt( 0 , -5.209f , -41.113f , 95.297f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 6.871f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.644f , 0 )	// 基本仰角
	RotateCamera( 0 , 253.549f , 0 )				// 角度
	ChangeCameraPers( 0 , 57.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , -14.3f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	//--------------------
	// Pos Key
	KeyAnimeCreate(KEYANIME_EXSKILLPOS, 3)
	KeyAnimeSet(0, -5.209, -41.113, 95.297, 6.871, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
	KeyAnimeSet(50, -2.797, -41.631, 95.099, 8.471, 0.057, -0.012, -0.007, -0.007, 0.057, -0.012, -0.007, -0.007)
	KeyAnimeSet(115, 0.472, -42.287, 94.355, 7.771, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)

	// Rot Key
	KeyAnimeCreate(KEYANIME_EXSKILLROT, 3)
	KeyAnimeSet(0, -2.644, -14.272, 253.549, 57.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
	KeyAnimeSet(50, 32.875, 26.255, 214.480, 57.000, 0.098, -0.174, 1.220, -0.000, 0.098, -0.174, 1.220, -0.000)
	KeyAnimeSet(115, 14.326, -23.487, 382.841, 57.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)

	//----------

	ChangeAnimation( "DANA" , "ANI_EV_EX1", -1 , 1 )
	Wait(10)
	FadeIn(FADE_BLACK,0)
	WaitFade()

//	Slow(0.00001)

	Wait(5)
	ExecuteCmd(1000, KeyAnimeCamera, 1.0f, KEYANIME_EXSKILLPOS, KEYANIME_EXSKILLROT, 0 )

	WaitThread(1000)
//	Wait(10)
	FadeOut(FADE_BLACK,10)
	WaitFade()

//---------------------------------------------------------------------------------------------------
//アドルステップ溜め
	
	// Key Release
	KeyAnimeRelease(KEYANIME_EXSKILLPOS)
	KeyAnimeRelease(KEYANIME_EXSKILLROT)

	SetChrInfoFlag("DANA",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("ADOL",INFOFLAG_INVISIBLE)

	Wait(15)

	SetChrPos("ADOL",11.38f,-51.76f,100.18f)
	Turn("ADOL",166.41f,360.0f)

	MoveCameraAt( 0 , 9.111f , -43.296f , 98.051f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 13.941f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 13.496f , 0 )	// 基本仰角
	RotateCamera( 0 , 19.548f , 0 )				// 角度
	ChangeCameraPers( 0 , 47.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , 12.0f , 0 )				// ロール回転

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_COS , 9.111f , -43.296f , 98.051f , 30 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS , 15.541f, 30)		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_COS , 13.496f , 30 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_COS , 19.548f ,  30 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 0.0f, 250 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 250 )		// 視野角

	//MoveCameraAt( 0 , 9.111f , -43.296f , 98.051f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 15.541f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 13.496f , 0 )	// 基本仰角
	//RotateCamera( 0 , 19.548f , 0 )				// 角度
	//ChangeCameraPers( 0 , 47.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 12.0f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	ChangeAnimation( "ADOL" , "ANI_EV_EX2", -1 , 1 )

	FadeIn(FADE_BLACK,5)
	WaitFade()

	//BtlVoice(1,Y8V_0072,-1,-1,100,1.0f);//ボイス
	PlayVoice(Y8V_0072,"ADOL",100)	//はああああ

	Wait(60)
	
	
	CrossFade(45)	
//	FadeOut(FADE_BLACK,10)
//	WaitFade()

//---------------------------------------------------------------------------------------------------
//ダーナジャンプ

	ResetChrInfoFlag("DANA",INFOFLAG_INVISIBLE)

	SetChrPos("DANA",-4.36f,-43.61f,99.366f)
	Turn("DANA",-87.39f,360.0f)
	PitchChr("DANA", -5.36f, 0)
	RollChr("DANA", 0.00f, 0)

	MoveCameraAt( 0 , -4.735f , -44.080f , 100.035f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.111f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -9.161f , 0 )	// 基本仰角
	RotateCamera( 0 , 118.569f , 0 )				// 角度
	ChangeCameraPers( 0 , 47.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , -18.5f , 0 )				// ロール回転

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_COS , -5.144f , -43.954f , 100.234f , 50 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS , 3.311f, 50)		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_COS ,  6.893f , 50 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_COS , 299.005f ,  50 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,  15.2f, 50 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 250 )		// 視野角

	//MoveCameraAt( 0 , -5.144f , -43.954f , 100.234f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 3.311f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 6.893f , 0 )	// 基本仰角
	//RotateCamera( 0 , 299.005f , 0 )				// 角度
	//ChangeCameraPers( 0 , 47.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 15.2f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	ChangeAnimation( "DANA" , "ANI_EV_EX2", -1 , 1 )

	FadeIn(FADE_BLACK,5)
	WaitFade()
	PlayVoice(Y8V_2880,"DANA",100)	//はああああ

	Wait(60)

	FadeOut(FADE_BLACK,10)
	WaitFade()

//---------------------------------------------------------------------------------------------------
//同時アタック

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	SetChrPos("ADOL",8.88f,-48.30f,96.46f)
	Turn("ADOL",166.41f,360.0f)
	PitchChr("ADOL", -8.28f, 0)
	RollChr("ADOL", 0.00f, 0)
	
	SetChrPos("DANA",-6.02f,-41.90f,99.89f)
	Turn("DANA",-102.39f,360.0f)
	PitchChr("DANA", -3.75f, 0)
	RollChr("DANA", 0.00f, 0)


	MoveCameraAt( 0 , 8.232f , -44.577f , 95.521f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 8.911f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 35.654f , 0 )	// 基本仰角
	RotateCamera( 0 , 55.528f , 0 )				// 角度
	ChangeCameraPers( 0 , 56.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , -20.3f , 0 )				// ロール回転

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_COS , 6.249f , -40.453f , 96.265f , 150 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS , 33.911f, 150)		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_COS ,  41.196f , 150 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_COS ,245.450f ,  150 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,  24.8f, 150 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 250 )		// 視野角

	//MoveCameraAt( 0 , 6.249f , -40.453f , 96.265f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 33.911f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 41.196f , 0 )	// 基本仰角
	//RotateCamera( 0 , 232.450f , 0 )				// 角度
	//ChangeCameraPers( 0 , 56.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 24.8f , 0 )				// ロール回転

	FadeIn(FADE_BLACK,5)
	WaitFade()

	Wait(10)

	Slow(0.20)

//アドルカットイン
//	SystemEffect2(111990,"","",0,IMPACT_NORMAL,KNOCK_CHRPOS2,1.0f,0.0f,0, 1.0f, 1.0f)
//	PlaySE(1,SE_EX_CUTIN,0.0f,0.0f,0.0f,1.0f,100,0,-1, 0, 0, 1.0f, 0)	//仮ＳＥ

	PlayVoice(Y8V_0073,"ADOL",100)
	PlaySE( SE_EX_CUTIN , 100 , 0,  0, 0, 1.0f, 0)		//◆
	Effect2( 111990, 0 , 0 , 0, 0, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.0f, 5.0f)

	Wait(6)
	ChangeAnimation( "ADOL" , "ANI_EV_EX3", -1 , 1 )	
	
	Slow(1.00)

	Wait(40)

	ChangeAnimation( "DANA" , "ANI_EV_EX3", -1 , 1 )
	Wait(45)

	Slow(0.20)
//ダーナカットイン
//	SystemEffect2(116990,"","",0,IMPACT_NORMAL,KNOCK_CHRPOS2,1.0f,0.0f,0, 1.0f, 1.1f)
//	PlaySE(1,SE_EX_CUTIN,0.0f,0.0f,0.0f,1.0f,100,0,-1, 0, 0, 1.0f, 0)	//仮ＳＥ

	PlayVoice(Y8V_2903,"DANA",100)
	PlaySE( SE_EX_CUTIN , 100 , 0,  0, 0, 1.0f, 0)		//◆
	Effect2( 116990, 0 , 0 , 0, 0, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.0f, 5.0f)
	Wait(5)

	Slow(1.00)
	Wait(20)

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	PlayVoice(Y8V_2904,"DANA",100)
	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_COS , 5.910f , -38.567f , 98.299f , 80 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS ,  14.691f , 80)		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_COS , 11.160f , 80 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_COS ,  285.471f ,  70 )		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , -9.0f, 80)		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 250 )		// 視野角

	//MoveCameraAt( 0 , 5.910f , -38.567f , 98.299f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 14.691f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 11.160f , 0 )	// 基本仰角
	//RotateCamera( 0 , 285.471f , 0 )				// 角度
	//ChangeCameraPers( 0 , 56.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , -9.0f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	Wait(30)

//	Slow(0.001)
//	Wait(10)

	FadeOut(FADE_WHITE,40)
	WaitFade()
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	StopEffect(-1,ALL,1)
	Wait(30)
//	Wait(10000)

	//終了処理ここから----------------------------------------------------
	CallFunc("mp6310b:EV_M06S245_ED")
}

function "EV_M06S245_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//マップパラメーターリセット
	ResetMapParam(-1)
	
	StopEffect(-1,ALL,1)
	
	CallFunc("mp6310b:boss3_end")
	SetFlag(SF_BOSS_BATTLE, 0)

	EventCue("mp6310b:EV_M06S241")
	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)

	//終了処理ここまで----------------------------------------------------
}




function "EV_M06S241"			//テオス・デ・エンドログラム戦後(mp6310)
{
	//開始処理ここから-----------------------------------------------
	SetStopFlag(STOPFLAG_EVENTIMPOSE)
	ResetStopFlag(STOPFLAG_CINEMA)

	FadeOut(FADE_WHITE, 0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")
	CallFunc("system:party_remove")
	SetChrPos("Sarai",-100000.00f,0.0f,0.00f)

	//床の制御
	//MapHide(locator_base,0)
	MapAnime("locator_base","wait_3rd")

	//マップON
	MapHide(locator_base,1)
	MapHide(Sky_add,1)
	MapHide(Sky_base,1)
	MapHide(astro1,1)
	MapHide(astro2,1)

	//ダーナスキル用エフェクトリリース
	SetFlag(TF_MENU_SELECT, 0)
	if (WORK[WK_ISEXIST_PLAYER1] && WORK[WK_PLAYER1] == DANA)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER2] && WORK[WK_PLAYER2] == DANA)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER3] && WORK[WK_PLAYER3] == DANA)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER4] && WORK[WK_PLAYER4] == DANA)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT, 1)
	}

	if (FLAG[TF_MENU_SELECT] == 0)
	{
		// まだ読まれてない
		ReleaseEffect("efx_c005.ite")	
	}
	//アドルスキル用エフェクトロード
	SetFlag(TF_MENU_SELECT2, 0)
	if (WORK[WK_ISEXIST_PLAYER1] && WORK[WK_PLAYER1] == ADOL)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT2, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER2] && WORK[WK_PLAYER2] == ADOL)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT2, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER3] && WORK[WK_PLAYER3] == ADOL)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT2, 1)
	}
	else if (WORK[WK_ISEXIST_PLAYER4] && WORK[WK_PLAYER4] == ADOL)
	{
		// 既に読み込み済み
		SetFlag(TF_MENU_SELECT2, 1)
	}

	if (FLAG[TF_MENU_SELECT2] == 0)
	{
		ReleaseEffect("efx_c000.ite")
		ReleaseEffect("efx_c0e0.ite")
	}
	
	LoadEffect( "efx_ev06.ite" )

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定				
//	SetChrPos("ADOL",-0.00f,-37.66f,94.00f)
//	Turn("ADOL",-179.97f,360.0f)
//	
//	SetChrPos("SAHAD",1.91f,-39.44f,94.00f)
//	Turn("SAHAD",163.10f,360.0f)
//	SetChrPos("LAXIA",0.72f,-39.23f,94.00f)
//	Turn("LAXIA",173.54f,360.0f)
//	
//	SetChrPos("HUMMEL",-1.86f,-40.63f,94.00f)
//	Turn("HUMMEL",176.92f,360.0f)
//	
//	SetChrPos("RICOTTA",0.41f,-40.48f,94.00f)
//	Turn("RICOTTA",177.34f,360.0f)
//	
//	SetChrPos("DANA",-1.21f,-38.83f,94.00f)
//	Turn("DANA",-177.20f,360.0f)
//
//	SetChrPos("Sarai",-6.85f,-33.69f,94.00f)
//	Turn("Sarai",-60.04f,360.0f)

//	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
//	ChangeAnimation("ADOL", "ANI_EV_ZEEWAIT2", -1, 1)
//	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_ANGER, 1)
//	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_OPEN, 1)
//	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
//	LookReset("ADOL")
//	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)
//
//	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
//	ChangeAnimation("RICOTTA", "ANI_EV_ZEEWAIT2", -1, 1)
//	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_SAD_CLOSE, 1)
//	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_OPEN, 1)
//	ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
//	LookReset("RICOTTA")
//	SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)
//
//	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
//	ChangeAnimation("SAHAD", "ANI_EV_ZEEWAIT2", -1, 1)
//	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_SAD_CLOSE, 1)
//	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_OPEN, 1)
//	ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
//	LookReset("SAHAD")
//	SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)
//
//	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
//	ChangeAnimation("LAXIA", "ANI_EV_ZEEWAIT2", -1, 1)
//	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_ANGER, 1)
//	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_OPEN, 1)
//	ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
//	LookReset("LAXIA")
//	SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)
//
//	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
//	ChangeAnimation("HUMMEL", "ANI_EV_ZEEWAIT2", -1, 1)
//	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_ANGER_CLOSE, 1)
//	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_OPEN, 1)
//	ChangeSubAnimation("HUMMEL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
//	LookReset("HUMMEL")
//	SetChrInfoFlag("HUMMEL", INFOFLAG_NOCHRATARI)
//
//	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
//	ChangeAnimation("DANA", "ANI_EV_ZEEWAIT2", -1, 1)
//	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_ANGER, 1)
//	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
//	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
//	LookReset("DANA")
//	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)
//
//	SetChrWork("Sarai", CWK_DEFAULT_SKIPNODE_OFF, 1)
//	ChangeAnimation("Sarai", "ANI_EV_TEMUNE", -1, 1)
//	ChangeSubAnimation("Sarai", SUBMOT_EYE, ANI_E_ANGER, 1)
//	ChangeSubAnimation("Sarai", SUBMOT_MOUTH, ANI_M_WAIT, 1)
//	ChangeSubAnimation("Sarai", SUBMOT_EXT1, ANI_E_LOOKC, 1)
//	LookReset("Sarai")
//	SetChrInfoFlag("Sarai", INFOFLAG_NOCHRATARI)
//	SetChrInfoFlag("Sarai", INFOFLAG_INVISIBLE)
//
//	SetChrWork("b020", CWK_DEFAULT_SKIPNODE_OFF, 1)
//	SetChrWork("b021", CWK_DEFAULT_SKIPNODE_OFF, 1)
//	SetChrWork("b022", CWK_DEFAULT_SKIPNODE_OFF, 1)
//	SetChrWork("b023_1", CWK_DEFAULT_SKIPNODE_OFF, 1)
//	SetChrWork("b023_2", CWK_DEFAULT_SKIPNODE_OFF, 1)

//	SetChrPos("b020",00.00f,0.00f,0.00f)
//	Turn("b020",00.00f,360.0f)
//	SetChrPos("b021",00.00f,0.00f,0.00f)
//	Turn("b021",00.00f,360.0f)
//	SetChrPos("b022",00.00f,0.00f,0.00f)
//	Turn("b022",00.00f,360.0f)
//	SetChrPos("b023_1",00.00f,0.00f,0.00f)
//	Turn("b023_1",00.00f,360.0f)
//	SetChrPos("b023_2",00.00f,0.00f,0.00f)
//	Turn("b023_2",00.00f,360.0f)
//
//	SetParent(b021,b020,"Null_Spine3")
//	SetParent(b022,b020,"Null_Hips2")
//	SetParent(b023_1,b022,"Null_LeftFeelerRoot1")
//	SetParent(b023_2,b022,"Null_RightFeelerRoot1")
//
//	ChangeAnimation( b020 , "ANI_SET_PHASE3", -1 , 1 )
//	ChangeAnimation( b021 , "ANI_SET_PHASE3", -1 , 1 )
//	ChangeAnimation( b022 , "ANI_SET_PHASE3", -1 , 1 )
//
//	ChangeAnimation( "b023_1" , "SET_LEFT", -1 , 1 )
//	ChangeAnimation( "b023_2" , "SET_RIGHT", -1 , 1 )
	CallFunc("mp6310b:show_boss")

	ResetChrInfoFlag("b020",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("b021",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("b022",INFOFLAG_INVISIBLE)

	ChrAlpha( b020 , 1.0f , 0)
	ChrAlpha( b021 , 1.0f , 0)
	ChrAlpha( b022 , 1.0f , 0)

//--------------------
// Pos Key
KeyAnimeCreate(KEYANIME_EXSKILLPOS, 4)
KeyAnimeSet(0, -0.650, -29.829, 111.459, 49.600, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
KeyAnimeSet(25, -13.950, -2.387, 122.570, 62.000, 0.032, 0.522, 0.291, 0.180, 0.032, 0.522, 0.291, 0.180)
KeyAnimeSet(55, 1.131, -1.128, 125.570, 56.600, 0.261, -0.087, -0.042, -0.009, 0.261, -0.087, -0.042, -0.009)
KeyAnimeSet(80, 0.400, -7.155, 120.255, 64.830, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)

// Rot Key
KeyAnimeCreate(KEYANIME_EXSKILLROT, 4)
KeyAnimeSet(0, -19.696, -9.200, 349.327, 60.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
KeyAnimeSet(25, -17.581, -9.200, 250.263, 60.000, 0.469, 0.000, -4.758, 0.000, 0.469, 0.000, -4.758, 0.000)
KeyAnimeSet(55, 8.940, -9.200, 87.635, 60.000, -0.122, 0.167, -4.588, 0.000, -0.122, 0.167, -4.588, 0.000)
KeyAnimeSet(80, -24.307, 0.000, -2.075, 60.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)

//----------

	//カメラ設定
	MoveCameraAt( 0 , -0.650f , -29.829f , 111.459f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 49.600f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -19.696f , 0 )	// 基本仰角
	RotateCamera( 0 , 349.327f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , -9.2f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000,350.000, 0.000, 0.700, 0.500)					//イベント毎に調整
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp6310b:EV_M06S244_ED")

	//開始処理ここまで-----------------------------------------------
	Wait(10)

	ChangeAnimation( "b020" , "ANI_EV_DEAD", -1 , 1 )
	ChangeAnimation( b021 , "ANI_EV_DEAD", -1 , 1 )
	ChangeAnimation( b022 , "ANI_EV_DEAD", -1 , 1 )

	Slow(0.6)

	//エンドログラムが消滅していく
	//Effect( 3624100, -0.270f , -15.625f , 94.670f, 0 , 0 , IMPACT_NONE , KNOCK_EFXPOS , 0 , 3.0f, 1.0f)
	ChrEffect2( "b021" , 3624100 , "root", "", 0 , IMPACT_NONE , KNOCK_CHRPOS , 0.0f,0.0f,0, 4.8f, 1.5f)

	FadeIn(FADE_WHITE, FADE_NORMAL)
	Wait(20)
	//　　戦闘終了後、何百枚もの硝子を同時に叩き割るような
	//　　断末魔とともに消滅する《テオス・デ・エンドログラム》。

	Blur( BLUR_TYPE_EXPAND ,0.4f , -1 )
	PlaySE(SE_M06S241_01, 150, 0, 0, 0, 1.0f, 0)
	PlaySE(SE_M06S241_02, 100, 1, 1000, 0, 1.0f, 0)

	Wait(25)

	StopBGM(300)

	Slow(0.1)		//低速化
	Blur( BLUR_TYPE_EXPAND ,0.35f , -1 )
	ExecuteCmd(1000, KeyAnimeCamera, 1.7f, KEYANIME_EXSKILLPOS, KEYANIME_EXSKILLROT, 0 )	//死亡カメラ　◆調整の余地あり

	Wait(5)

	PlaySE(SE_M06S241_05, 90, 0, 0, 0, 1.0f, 0)
	PlaySE(SE_M06S241_04, 150, 0, 0, 0, 1.0f, 0)
	Slow(1.1)		//高速化
	Wait(6)

	Slow(0.1)		//低速化
	Wait(8)

	PlaySE(SE_M06S241_05, 90, 0, 0, 0, 1.0f, 0)
	PlaySE(SE_M06S241_01, 150, 0, 0, 0, 1.0f, 0)
	Slow(1.1)		//高速化
	Wait(8)

	Slow(0.1)		//低速化
	Wait(6)

	PlaySE(SE_M06S241_05, 90, 0, 0, 0, 1.0f, 0)
	PlaySE(SE_M06S241_06, 100, 0, 0, 0, 1.0f, 0)
	Slow(1.1)		//高速化

	WaitThread(1000)
	Slow(0.7)
	PlaySE(SE_M06S241_05, 90, 0, 0, 0, 1.0f, 0)

	// Key Release
	KeyAnimeRelease(KEYANIME_EXSKILLPOS)
	KeyAnimeRelease(KEYANIME_EXSKILLROT)

	Wait(65)
	StopSE(SE_M06S241_02, 2000)
	Wait(30)

	SetEnvSEPlayState(-1, 0)	//環境SE全停止

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	Slow(1.0)
	Blur( BLUR_TYPE_EXPAND ,0.5f , 0 )

	//　　画面切り替わって大樹の寺院──
	//　　大樹を覆っていた霧が渦巻きながら霧散して消滅していく。
	//　　同時に地上の古代種たちも消滅していく演出。
	//　　画面を戻して《選択の間》──
	//　　力尽きて床に跪いているアドルたち。

	StopBGM(60)
	SetFlag(SF_NOCHANGEBGM, 1)

	if (FLAG[SF_TIMEATK])
	{
		EndTimeAtk()
		SetFlag(SF_ALLMUTEKI, 0)		//無敵解除
		ResetStopFlag(STOPFLAG_EVENT)
	}
	else
	{
		SetFlag( TF_LOADING_TIPS_OFF, 1 )	//NowLoading 時の Tips 表示をカット
		LoadArg("map/mp4111/mp4111.arg")		//◆マップ完成後、正しいマップに変更
		EventCue("mp6310b:EV_M06S242")

	//	SetEnvSEPlayState(-1, 0)	//環境SE全停止
	}

}

//----------------------------------------------------------------------------------------------------
//大樹の霧が晴れていくカット		◆マップ完成後、移植予定
//----------------------------------------------------------------------------------------------------

function "EV_M06S242"			//大樹の霧が晴れる様子
{
	SetStopFlag(STOPFLAG_EVENTIMPOSE)
	ResetStopFlag(STOPFLAG_CINEMA)

	FadeOut(FADE_BLACK, 0)
	WaitFade()

	//StopBGM(0)	//◆仮
	CallFunc("system:party_remove")

	MoveCameraAt( 0 , -258.466f , 560.407f , 105.443f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 17.869f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -39.578f , 0 )	// 基本仰角
	RotateCamera( 0 , 203.284f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1200.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 350.000, 2.000, 0.700, 0.500)					//イベント毎に調整
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp6310b:EV_M06S244_ED")

	//霧が晴れていくアニメ
	MapAnime("mist_alpha" , "anm" )

	PlayBGM(BGM_EVENT_013, 0)

	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	Wait(20)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -258.466f , 560.407f , 94.033f , 250 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 26.069f , 250)		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -27.828f , 250 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 203.282f ,  250 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 0.0f, 250 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 250 )		// 視野角

	//MoveCameraAt( 0 , -258.466f , 560.407f , 94.033f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 26.069f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -27.828f , 0 )	// 基本仰角
	//RotateCamera( 0 , 203.282f , 0 )				// 角度
	//ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1200.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	Wait(70)

	SetEnvSEPlayState(-1, 0)	//環境SE全停止

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	PlayBGM(BGM_EVENT_013, 0)
	SetFlag(SF_NOCHANGEBGM, 1)

	SetFlag( TF_LOADING_TIPS_OFF, 1 )	//NowLoading 時の Tips 表示をカット
	LoadArg("map/mp4109/mp4109.arg")		//◆マップ完成後、正しいマップに変更
	EventCue("mp6310b:EV_M06S243")

}
//----------------------------------------------------------------------------------------------------
//古代種が消えていく		◆マップ完成後、移植予定


function "EV_M06S243"			//古代種が消滅していく様子
{
	SetStopFlag(STOPFLAG_EVENTIMPOSE)
	ResetStopFlag(STOPFLAG_CINEMA)

	FadeOut(FADE_BLACK, 0)
	WaitFade()

	CallFunc("system:party_remove")

	//竜人扉開く
	MapAnime("dragon_gate_all_A1" , "open")

	SetShadowBound( 192, 192 )

	SetChrInfoFlag( "ev_m1020_1" , INFOFLAG_NOCHRATARI )
	SetChrInfoFlag( "ev_m1020_2" , INFOFLAG_NOCHRATARI )
	SetChrInfoFlag( "ev_m1020_3" , INFOFLAG_NOCHRATARI )
	SetChrInfoFlag( "ev_m1020_4" , INFOFLAG_NOCHRATARI )
//	SetChrInfoFlag( "ev_m1020_1" , INFOFLAG_NOREALSHADOW )
//	SetChrInfoFlag( "ev_m1020_2" , INFOFLAG_NOREALSHADOW )
//	SetChrInfoFlag( "ev_m1020_3" , INFOFLAG_NOREALSHADOW )
//	SetChrInfoFlag( "ev_m1020_4" , INFOFLAG_NOREALSHADOW )

	SetChrPos("ev_m1020_1",-229.03f,673.96f,115.83f)
	Turn("ev_m1020_1",-114.93f,360.0f)
	SetChrPos("ev_m1020_2",-204.13f,687.19f,115.84f)
	Turn("ev_m1020_2",-107.16f,360.0f)

	SetChrPos("ev_m1020_3",-170.36f,692.57f,115.83f)
	Turn("ev_m1020_3",-166.24f,360.0f)
	SetChrPos("ev_m1020_4",-144.12f,701.81f,119.23f)
	Turn("ev_m1020_4",-62.53f,360.0f)

	//ロードエフェクト
	LoadEffect( "efx_ev06.ite" )

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 250.000, 2.000, 0.700, 0.500)					//イベント毎に調整

	SetShadowBound(512.0f,512.0f)

	MoveCameraAt( 0 , -259.267f , 702.547f , 129.200f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 22.002f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 26.532f , 0 )	// 基本仰角
	RotateCamera( 0 , 252.060f , 0 )				// 角度
	ChangeCameraPers( 0 , 51.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1600.000f )			// ZPlane
	RollCamera( 0 , 10.7f , 0 )				// ロール回転


	//スキップ許可
	SetSkipScript("mp6310b:EV_M06S244_ED")


	ExecuteCmd( 3, MoveTo, "ev_m1020_3", -177.35f,730.28f,115.83f, 0.1f, 0.80f )
	//SetChrPos("ev_m1020_3",-177.35f,730.28f,115.83f)
	//Turn("ev_m1020_3",-179.56f,360.0f)

	ExecuteCmd( 1, MoveTo, "ev_m1020_1", -164.99f,700.28f,115.83f, 0.1f, 1.2f )
	//SetChrPos("ev_m1020_1",-164.99f,700.28f,115.83f)
	//Turn("ev_m1020_1",-114.93f,360.0f)
	Wait(5)

	ExecuteCmd( 2, MoveTo, "ev_m1020_2", -161.45f,695.19f,115.86f, 0.1f, 1.2f )
	//SetChrPos("ev_m1020_2",-161.45f,695.19f,115.86f)
	//Turn("ev_m1020_2",-107.16f,360.0f)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -152.802f , 705.032f , 118.038f , 250 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE ,  22.401f , 250)		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 21.245f , 250 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,80.957f ,  250 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 0.0f, 250 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 250 )		// 視野角

	//MoveCameraAt( 0 , -152.802f , 705.032f , 118.038f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 22.401f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 21.245f , 0 )	// 基本仰角
	//RotateCamera( 0 , 80.957f , 0 )				// 角度
	//ChangeCameraPers( 0 , 51.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1600.000f )			// ZPlane
	//RollCamera( 0 , -2.1f , 0 )				// ロール回転

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )

	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()


	Wait(50)
	
	ChrSpecular( "ev_m1020_1",0 , 0, 0, 140 , 140, 140, 120, 1000, 0 )

	StopThread(1)
	ExecuteCmd( 1, MoveTo, "ev_m1020_1", -164.99f,700.28f,115.83f, 0.1f, 0.4f )
//	ChangeAnimation( "ev_m1020_1" , "ANI_WAIT", -1 , 1 )
	SetChrInfoFlag( "ev_m1020_1" , INFOFLAG_NOREALSHADOW )
	ChrEffect2( "ev_m1020_1" , 3624120 , "root", "", 0 , IMPACT_NONE , KNOCK_CHRPOS , 0.0f,0.0f,0, 1.0f, 1.0f)
	ChrAlpha( ev_m1020_1 , 0 , 25)
	PlaySE(SE_M06S243_01, 60, 0, 0, 0, 1.0f, 0)
	PlaySE(SE_M06S243_02, 60, 0, 0, 0, 1.0f, 0)
	

	Wait(35)
	StopThread(1)

	StopThread(2)
//	ChangeAnimation( "ev_m1020_2" , "ANI_WAIT", -1 , 1 )
	SetChrInfoFlag( "ev_m1020_1" , INFOFLAG_NOREALSHADOW )
	ChrEffect2( "ev_m1020_2" , 3624120 , "root", "", 0 , IMPACT_NONE , KNOCK_CHRPOS , 0.0f,0.0f,0, 1.0f, 1.0f)
	ChrAlpha( ev_m1020_2 , 0 , 25)
	PlaySE(SE_M06S243_01, 50, 0, 0, 0, 1.0f, 0)
	PlaySE(SE_M06S243_02, 50, 0, 0, 0, 1.0f, 0)
	Wait(45)

	StopThread(3)
//	ChangeAnimation( "ev_m1020_3" , "ANI_WAIT", -1 , 1 )
	SetChrInfoFlag( "ev_m1020_1" , INFOFLAG_NOREALSHADOW )
	ChrEffect2( "ev_m1020_3" , 3624120 , "root", "", 0 , IMPACT_NONE , KNOCK_CHRPOS , 0.0f,0.0f,0, 1.0f, 1.0f)
	ChrAlpha( ev_m1020_3 , 0 , 25)
	PlaySE(SE_M06S243_01, 40, 0, 0, 0, 1.0f, 0)
	PlaySE(SE_M06S243_02, 40, 0, 0, 0, 1.0f, 0)


	Wait(48)


	StopThread(4)
//	ChangeAnimation( "ev_m1020_4" , "ANI_WAIT", -1 , 1 )
	SetChrInfoFlag( "ev_m1020_1" , INFOFLAG_NOREALSHADOW )
	ChrEffect2( "ev_m1020_4" , 3624120 , "root", "", 0 , IMPACT_NONE , KNOCK_CHRPOS , 0.0f,0.0f,0, 0.9f, 0.9f)
	ChrAlpha( ev_m1020_4 , 0 , 30)
	PlaySE(SE_M06S243_01, 60, 0, 0, 0, 1.0f, 0)
	PlaySE(SE_M06S243_02, 60, 0, 0, 0, 1.0f, 0)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	Wait(60)

	SetEnvSEPlayState(-1, 0)	//環境SE全停止

	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

	ReleaseEffect("efx_ev06.ite")

	PlayBGM(BGM_EVENT_013, 0)
	SetFlag(SF_NOCHANGEBGM, 1)
	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	SetFlag( TF_LOADING_TIPS_OFF, 1 )	//NowLoading 時の Tips 表示をカット
	LoadArg("map/mp6310b/mp6310b.arg")		//◆マップ完成後、正しいマップに変更

	EventCue("mp6310b:EV_M06S244")
}

//----------------------------------------------------------------------------------------------------
//アドルたちのシーンへ

function "EV_M06S244"			//テオス・デ・エンドログラム戦後２(mp6310)
{
	//開始処理ここから-----------------------------------------------
	SetStopFlag(STOPFLAG_EVENTIMPOSE)
	ResetStopFlag(STOPFLAG_CINEMA)

	FadeOut(FADE_BLACK, 0)
	WaitFade()

	//三段階目の床位置
	MapAnime("locator_base","wait_3rd")

	//キャラ初期状態の設定				
	SetChrPos("ADOL",-0.00f,-37.66f,94.00f)
	Turn("ADOL",-179.97f,360.0f)
	
	SetChrPos("SAHAD",1.91f,-39.44f,94.00f)
	Turn("SAHAD",163.10f,360.0f)
	SetChrPos("LAXIA",0.72f,-39.23f,94.00f)
	Turn("LAXIA",173.54f,360.0f)
	
	SetChrPos("HUMMEL",-1.86f,-40.63f,94.00f)
	Turn("HUMMEL",176.92f,360.0f)
	
	SetChrPos("RICOTTA",0.41f,-40.48f,94.00f)
	Turn("RICOTTA",177.34f,360.0f)
	
	SetChrPos("DANA",-1.21f,-38.83f,94.00f)
	Turn("DANA",-177.20f,360.0f)

	SetChrPos("Sarai",-6.85f,-33.69f,94.00f)
	Turn("Sarai",-60.04f,360.0f)

	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("ADOL", "ANI_EV_ZEEWAIT2", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_MAJI, 1)
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_OPEN, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("ADOL")
	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("RICOTTA", "ANI_EV_ZEEWAIT2", -1, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_SAD_CLOSE, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_OPEN, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("RICOTTA")
	SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("SAHAD", "ANI_EV_ZEEWAIT2", -1, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_SAD_CLOSE, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_OPEN, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("SAHAD")
	SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("LAXIA", "ANI_EV_ZEEWAIT2", -1, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_SAD_CLOSE, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_OPEN, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("LAXIA")
	SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)

	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("HUMMEL", "ANI_EV_ZEEWAIT2", -1, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_ANGER_CLOSE, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_OPEN, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("HUMMEL")
	SetChrInfoFlag("HUMMEL", INFOFLAG_NOCHRATARI)

	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("DANA", "ANI_EV_ZEEWAIT2", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_ANGER, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("DANA")
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)

	SetChrWork("Sarai", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation("Sarai", "ANI_EV_TEMUNE", -1, 1)
	ChangeSubAnimation("Sarai", SUBMOT_EYE, ANI_E_ANGER, 1)
	ChangeSubAnimation("Sarai", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("Sarai", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("Sarai")
	SetChrInfoFlag("Sarai", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("Sarai", INFOFLAG_INVISIBLE)

//	SetChrPos("b020"  ,-100000.00f,0.00f,0.00f)
//	SetChrPos("b021"  ,-100000.00f,0.00f,0.00f)
//	SetChrPos("b022"  ,-100000.00f,0.00f,0.00f)
//	SetChrPos("b023_1",-100000.00f,0.00f,0.00f)
//	SetChrPos("b023_2",-100000.00f,0.00f,0.00f)
	CallFunc("mp6310b:hide_boss")


	MoveCameraAt( 0 , 0.419f , -40.315f , 99.304f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.021f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -24.080f , 0 )	// 基本仰角
	RotateCamera( 0 , 240.136f , 0 )				// 角度
	ChangeCameraPers( 0 , 37.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 250.000, 2.000, 0.700, 0.500)					//イベント毎に調整
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp6310b:EV_M06S244_ED")

	//開始処理ここまで-----------------------------------------------

	SoundEfx( SEFX_EV_SCFI, 15 )

//	FadeIn(FADE_BLACK, FADE_NORMAL)
//	WaitFade()
//
//	Wait(10)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , 0.419f , -40.315f , 94.889f , 120 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 7.021f , 120)		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -4.216f , 120 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 208.243f ,  120 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 0.0f, 120 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 120 )		// 視野角

	//MoveCameraAt( 0 , 0.419f , -40.315f , 94.889f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 7.021f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -4.216f , 0 )	// 基本仰角
	//RotateCamera( 0 , 208.243f , 0 )				// 角度
	//ChangeCameraPers( 0 , 37.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転

	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	Wait(50)
	FadeBGM(60,10)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	TalkMes("SAHAD","#1961V#200mハア……ハア……",
		"何言われてももう動けねえ……")
	WaitPrompt()
	WaitCloseWindow()

	//	"RICOTTA"
	TalkMes("RICOTTA","#2802V#200mリ、リコッタも……",
		"さすがにヘロヘロ……","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)

	CrossFade(FADE_CROSS)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

	MoveCameraAt( 0 , -0.867f , -40.258f , 95.013f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.521f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -6.145f , 0 )	// 基本仰角
	RotateCamera( 0 , 143.195f , 0 )				// 角度
	ChangeCameraPers( 0 , 28.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , -4.9f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -152.802f , 705.032f , 118.038f , 250 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE ,   4.151f , 250)		// 基本距離
//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 21.245f , 250 )		// 基本仰角
//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,80.957f ,  250 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 0.0f, 250 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 250 )		// 視野角

	//MoveCameraAt( 0 , -0.735f , -40.357f , 95.013f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 4.151f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -6.143f , 0 )	// 基本仰角
	//RotateCamera( 0 , 143.195f , 0 )				// 角度
	//ChangeCameraPers( 0 , 28.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , -4.9f , 0 )				// ロール回転

	Wait(FADE_CROSS)
	Wait(10)

	LookSpd("HUMMEL", 0.1 , 0.1 , 0.1 )
	Look("HUMMEL" , 0 ,25 )
	Wait(15)

	//	"HUMMEL"
	TalkMes("HUMMEL","#2367V#042e#000mフン、静かだな……",
		"外の様子はどうなっている？","")
	WaitPrompt()
	WaitCloseWindow()

	//	"LAXIA"
	TalkMes("LAXIA","#1180V#062e#000mええ、私たち……",
		"止めることができたのでしょうか？","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(10)

	CrossFade(FADE_FAST)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

	MoveCameraAt( 0 , -1.259f , -38.314f , 94.740f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.291f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -9.093f , 0 )	// 基本仰角
	RotateCamera( 0 , 209.292f , 0 )				// 角度
	ChangeCameraPers( 0 , 28.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , -4.9f , 0 )				// ロール回転

	Wait(FADE_FAST)

//	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,-1.259f , -38.314f , 94.740f  , 120 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.441f , 120)		// 基本距離
//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE ,  -9.096f , 120 )		// 基本仰角
//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 209.293f  ,  120 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 0.0f, 120 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 140 )		// 視野角

	//MoveCameraAt( 0 , -1.259f , -38.314f , 94.740f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.441f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -9.096f , 0 )	// 基本仰角
	//RotateCamera( 0 , 209.293f , 0 )				// 角度
	//ChangeCameraPers( 0 , 28.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , -4.9f , 0 )				// ロール回転

	Wait(10)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	//	"DANA"
	TalkMes("DANA","#3493V#0L…………………………………","","")	//（真剣）
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(20)

	StopBGM(120)

	VibrationPad(1030, 0 )		//汎用大

	EarthQuake( 0.2 , 0.125 , 15 )
	PlaySE(SE_M06S244_02, 40, 0, 200, 0, 1.0f, 0)
	Wait(10)


	//　　次の瞬間、不意に地鳴りとともに
	//　　巨大な地震が起きて周囲が揺れ続ける。

	EmotionEx("DANA", -0.0f,EMO_EX,0,5,1,1,0.8f )
	EmotionEx("RICOTTA", -0.01f,EMO_EX,0,5,1,1,0.8f )
	EmotionEx("HUMMEL", -0.01f,EMO_EX,0,5,1,1,0.8f )
	EmotionEx("LAXIA", -0.01f,EMO_EX,0,5,1,1,0.8f )
	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_SUP_S,1)
	ChangeSubAnimation("LAXIA",SUBMOT_MOUTH,ANI_M_OPEN_S,1)
	ChangeSubAnimation("LAXIA",SUBMOT_EXT1,ANI_E_LOOKL_S,1)

	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_SUP_S,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_MOUTH,ANI_M_OPEN_S,1)

	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_SUP_S,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_OPEN_S,1)

	Wait(30)

	//地震開始
	ExecuteFunc(100,"mp6310b:quake")
//	SetEnvSEPlayState(6310001,1)		//◆地鳴り
	PlaySE(SE_M06S244_01, 40, 1, 1000, 0, 1.0f, 0)

	Wait(10)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	Look("DANA" , -10 , 0 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_ANGER_S,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKL_S,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_OPEN_S,1)
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_SHOUT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_SHOUT,1)

	TalkMes("RICOTTA","#2803V#17S#160e#160mにゃあああ！？","","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)



	CrossFade(FADE_CROSS)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

	Look("LAXIA" , -15 , 0 )

	MoveCameraAt( 0 , 1.248f , -39.150f , 94.864f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.201f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -10.035f , 0 )	// 基本仰角
	RotateCamera( 0 , 244.923f , 0 )				// 角度
	ChangeCameraPers( 0 , 34.200f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , -8.8f , 0 )				// ロール回転

	Wait(FADE_CROSS)
	Wait(10)

	//	"SAHAD"
	TalkMes("SAHAD","#1962Vな、何だ何だ、",
		"何が起こってやがる？","")
	WaitPrompt()
	WaitCloseWindow()

	Look("LAXIA" , 0 , 20 )
	//	"LAXIA"
	TalkMes("LAXIA","#1181V#030l#070e#070mこ、これは地震！？","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(10)

	CrossFade(FADE_CROSS)

	MoveCameraAt( 0 , -0.457f , -37.265f , 94.908f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.011f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -4.479f , 0 )	// 基本仰角
	RotateCamera( 0 , 73.394f , 0 )				// 角度
	ChangeCameraPers( 0 , 34.200f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , 3.9f , 0 )				// ロール回転

	PlaySE(SE_M06S244_03, 70, 0, 0, 0, 1.0f, 0)
 	ChrEffect2( "Sarai" , 3901000 , "root", "", 0 , IMPACT_NONE , KNOCK_EFXPOS , 0.0f,0.0f,0, 1.0f, 1.0f)	//魔方陣（無限ループ）
	Wait(20)
	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,-0.199f , -36.610f , 94.908f , 120 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.791f , 120)		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -4.478f , 120 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 67.860f ,  120 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , -1.2f, 120 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 140 )		// 視野角

	//MoveCameraAt( 0 , -0.199f , -36.610f , 94.908f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.791f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -4.478f , 0 )	// 基本仰角
	//RotateCamera( 0 , 67.860f , 0 )				// 角度
	//ChangeCameraPers( 0 , 34.200f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 7.9f , 0 )				// ロール回転

	Wait(80)

	PlaySE(SE_M06S244_04, 70, 0, 0, 0, 1.0f, 0)
 	ChrEffect2( "Sarai" , 3901020 , "root", "root", 0 , IMPACT_NONE , KNOCK_EFXPOS , 0.0f,0.0f,0, 1.0f, 1.0f)
	ResetChrInfoFlag("Sarai", INFOFLAG_INVISIBLE)

	Wait(35)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	CrossFade(FADE_FAST)

	MoveCameraAt( 0 , -7.506f , -33.696f , 95.730f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.691f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -9.301f , 0 )	// 基本仰角
	RotateCamera( 0 , 85.206f , 0 )				// 角度
	ChangeCameraPers( 0 , 34.200f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , -4.9f , 0 )				// ロール回転

	StopEffect(3901000,ALL,1)

	//次シーン準備
	SetChrPos("ADOL",-0.22f,-37.91f,94.00f)
	Turn("ADOL",105.28f,360.0f)
	SetChrPos("DANA",-1.21f,-38.83f,94.00f)
	Turn("DANA",141.56f,360.0f)

	SetChrPos("HUMMEL",-0.78f,-40.36f,94.00f)
	Turn("HUMMEL",156.83f,360.0f)
	SetChrPos("RICOTTA",1.21f,-40.20f,94.00f)
	Turn("RICOTTA",131.49f,360.0f)
	SetChrPos("LAXIA",0.92f,-39.10f,94.00f)
	Turn("LAXIA",123.29f,360.0f)
	SetChrPos("SAHAD",2.25f,-38.98f,94.00f)
	Turn("SAHAD",106.87f,360.0f)

	SetChrWork("ADOL",CWK_BATTLEMODE,0)
	SetChrWork("DANA",CWK_BATTLEMODE,0)
	SetChrWork("LAXIA",CWK_BATTLEMODE,0)
	SetChrWork("HUMMEL",CWK_BATTLEMODE,0)
	SetChrWork("RICOTTA",CWK_BATTLEMODE,0)
	SetChrWork("SAHAD",CWK_BATTLEMODE,0)

	ChangeAnimation( "ADOL" , "ANI_EV_SHAGAMI", -1 , 1 )
	ChangeAnimation( "DANA" , "ANI_EV_SHAGAMI", -1 , 1 )
	ChangeAnimation( "LAXIA" , "ANI_WAIT", -1 , 1 )
	ChangeAnimation( "RICOTTA" , "ANI_WAIT", -1 , 1 )
	ChangeAnimation( "SAHAD" , "ANI_WAIT", -1 , 1 )
	ChangeAnimation( "HUMMEL" , "ANI_EV_UDEGUMI", -1 , 1 )

	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_SAD,1)
	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_ANGER,1)
	ChangeSubAnimation("HUMMEL",SUBMOT_EYE,ANI_E_ANGER,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_WAIT,1)

	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("LAXIA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("HUMMEL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_MOUTH,ANI_M_WAIT,1)

	ChangeSubAnimation("LAXIA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)

	LookChr("ADOL" , "Sarai")
	LookChr("DANA" , "Sarai")
	LookChr("LAXIA"  , "Sarai")
	LookChr("RICOTTA" , "Sarai")
	LookChr("SAHAD"  , "Sarai")
	LookChr("HUMMEL"  , "Sarai")

	Wait(FADE_FAST)
	Wait(10)


	//　　そこへサライが転移してくる。

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)
	ChangeAnimation( "Sarai" , "ANI_EV_TEMUNE_E", -1 , 1 )
	TalkMes("Sarai","#5460V皆さん！　無事ですか？","","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)

	CrossFade(FADE_FAST)
	TurnTo("Sarai" , -2.04f,-37.49f,94.00f ,360.0f )
	LookChr("Sarai" , "DANA")

	MoveCameraAt( 0 , -2.136f , -36.979f , 95.382f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.211f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 2.370f , 0 )	// 基本仰角
	RotateCamera( 0 , 45.845f , 0 )				// 角度
	ChangeCameraPers( 0 , 36.200f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , 0.4f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ChangeAnimation( "ADOL" , "ANI_EV_SHAGAMI_E", -1 , 1 )
	ChangeAnimation( "DANA" , "ANI_EV_SHAGAMI_E", -1 , 1 )


	ChangeAnimation( "Sarai" , "ANI_EV_RUN", -1 , 1 )
//	ExecuteCmd( 1, MoveToEx, "Sarai", -2.04f,-37.49f,94.00f, 0.1f, 0.25f , 0 , 0 )
	//SetChrPos("Sarai",-2.04f,-37.49f,94.00f)
	//Turn("Sarai",-39.39f,360.0f)

	//	"DANA"
	TalkMes("DANA","#3494V#030e#000l#000mサライちゃん、何が起きたの？","","")
	WaitPrompt()
	WaitCloseWindow()

	HeadYes("Sarai" , 1 , 25 )

	//	"Sarai"
	TalkMes("Sarai","#5461V#041e#000mええ、ラクリモサは",
		"確かに止まったようですが……","")
	WaitPrompt()
	TalkMes("Sarai","#5462V#042e#000m島が……","","")
	WaitPrompt()

	LookSpd("Sarai", 0.1 , 0.1 , 0.1 )
	LookChr("Sarai" , "ADOL")
	TalkMes("Sarai","#5463V#000mいえ、世界が……",
		"この島を中心に消失し始めています！","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)
	Wait(15)

	PlayBGM(BGM_DUNGEON_503, 0)

	CrossFade(FADE_CROSS)
	MoveCameraAt( 0 , 0.043f , -39.229f , 95.283f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.411f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 15.547f , 0 )	// 基本仰角
	RotateCamera( 0 , 229.957f , 0 )				// 角度
	ChangeCameraPers( 0 , 36.200f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , 1.1f , 0 )				// ロール回転

//	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , 869.378f , -1431.630f , 36.283f , 120  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_COS , 5.111f , 10  )		// 基本距離
//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -18.515f , 300 )		// 基本仰角
//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,  256.663f , 300)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,5.7f　, 300  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 300 )		// 視野角

	//MoveCameraAt( 0 , 0.043f , -39.229f , 95.283f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 5.111f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 15.547f , 0 )	// 基本仰角
	//RotateCamera( 0 , 229.957f , 0 )				// 角度
	//ChangeCameraPers( 0 , 36.200f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 1.1f , 0 )				// ロール回転

	//　　アドルたち全員に「！」エモーション。
	EmotionEx("DANA", -0.0f,EMO_EXQ,0,5,1,1,1.1f )
	EmotionEx("RICOTTA", -0.01f,EMO_EXQ,0,5,1,1,1.2f )
	EmotionEx("HUMMEL", -0.01f,EMO_EXQ,0,5,1,1,1.2f )
	EmotionEx("LAXIA", -0.01f,EMO_EXQ,0,5,1,1,1.2f )
	EmotionEx("ADOL", -0.01f,EMO_EXQ,0,5,1,1,1.1f )
	EmotionEx("SAHAD", -0.01f,EMO_EXQ,0,5,1,1,1.2f )

	ChangeAnimation( "SAHAD" , "ANI_EV_SUP_S", -1 , 1 )

	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_OPEN_S,1)
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_OPEN_S,1)
	ChangeSubAnimation("LAXIA",SUBMOT_MOUTH,ANI_M_OPEN_S,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_MOUTH,ANI_M_OPEN_S,1)

	Wait(45)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("LAXIA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_SAD,1)

	FadeBGM(70,10)

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	HeadNo("SAHAD" , 1, 30 )
	TalkMes("SAHAD","#1963V#061e#000mな、何だって……","","")
	WaitPrompt()
	WaitCloseWindow()

	//	"RICOTTA"
	ChangeAnimation( "RICOTTA" , "ANI_EV_RYOTEKOSI_S", -1 , 1 )
	TalkMes("RICOTTA","#2804V#061e#000mそんな……","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	//　　ラクシャに「…」エモーション。

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , 0.383f , -38.819f , 95.283f , 150 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE ,  4.261f  , 150)		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 15.550f , 150 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 234.361f ,  150 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 0.0f, 150 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 150 )		// 視野角

	//MoveCameraAt( 0 , 0.383f , -38.819f , 95.283f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 4.261f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 15.550f , 0 )	// 基本仰角
	//RotateCamera( 0 , 234.361f , 0 )				// 角度
	//ChangeCameraPers( 0 , 36.200f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , 1.1f , 0 )				// ロール回転

	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_SAD_CLOSE_S,1)
	ChangeAnimation( "LAXIA" , "ANI_EV_UDEGUMI_S", -1 , 1 )
	WaitAnimation2( "LAXIA" , -1, 1, "ANI_EV_UDEGUMI_S",  0)

	EmotionEx("LAXIA", 0.00f,EMO_3DOT,0,5,1,1,1.15f )
	Wait(52)

	WaitAnimation2( "LAXIA" , -1, 1, "ANI_EV_UDEGUMI_S",  0)
	ChangeAnimation( "LAXIA" , "ANI_EV_UDEGUMI_TEBURI", -1 , 1 )

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	LookSpd("LAXIA", 0.08 , 0.08 , 0.08 )
	LookChr("LAXIA" , "ADOL")
	TalkMes("LAXIA","#1182V#062e#000mアドル、摂理に干渉したのは",
		"やはり間違いだったのでしょうか……","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(10)

	CrossFade(FADE_FAST)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)
	ChangeSubAnimation("Sarai",SUBMOT_EYE,ANI_E_CLOSE,1)

	MoveCameraAt( 0 , 1.986f , -39.013f , 95.533f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 5.391f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -1.755f , 0 )	// 基本仰角
	RotateCamera( 0 , 257.012f , 0 )				// 角度
	ChangeCameraPers( 0 , 26.200f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , -1.0f , 0 )				// ロール回転
	
	Look("ADOL" , -30 , -5 )
	ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKL_S,1)

	Wait(FADE_FAST)

	Wait(10)

	//選択肢
	SetFlag(TF_MENU_SELECT,0)
	MenuReset()
	MenuType(MENUTYPE_POPUP)
	MenuAdd(1,"最後まで諦めるな")
	MenuAdd(2,"やれることは全てやった")
	MenuOpen( TF_MENU_SELECT , -1 , ADOLMENU_PPOSY , -2 , -2 , 10 , 0)
	WaitMenu(0)
	MenuClose(10,0)

	Wait(10)
	PlayVoice(Y8V_0166,"ADOL",100)	//いや…（否定）
	ChangeAnimation( "ADOL" , "ANI_EV_TEBURI_L", -1 , 1 )
	WaitAnimation2( "ADOL" , -1, 1, "ANI_EV_TEBURI_L",  0)

	Wait(10)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)
	HeadYes("LAXIA" ,1 , 25 )

	//─────────────────────────
	//	⇒最後まで諦めるな
	if (FLAG[TF_MENU_SELECT] == 1){

		HeadYes("LAXIA" ,1 , 25 )
		TalkMes("LAXIA","#1183V#061e#000mえ、ええ……でも……","","")
		WaitPrompt()
		WaitCloseWindow()
	}

	//	⇒やれることは全てやった
	if (FLAG[TF_MENU_SELECT] == 2){
		TalkMes("LAXIA","#1184V#061e#000mそうですね……でも……","","")
		WaitPrompt()
		WaitCloseWindow()
	}

	//─────────────────────────
	Look("LAXIA" , 0 , -15 )
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(35)

	CrossFade(FADE_CROSS)
	MoveCameraAt( 0 , -2.754f , -35.925f , 96.054f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.591f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -17.654f , 0 )	// 基本仰角
	RotateCamera( 0 , 3.068f , 0 )				// 角度
	ChangeCameraPers( 0 , 31.200f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , -1.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	Look("ADOL" , 0 , 25 )
	Look("HUMMEL" , 0 , 25 )
	Look("LAXIAL" , 0 , 25 )
	Look("RICOTTA" , 0 , 25 )
	Look("SAHAD" , 0 , 25 )

	Wait(FADE_CROSS)
	Wait(15)

	SetMotSpd("Sarai" , SUBMOT_EYE , 0.25)
	LookSpd("Sarai", 0.08 , 0.08 , 0.08 )
	Look("Sarai" , 0 , 22 )
	ChangeSubAnimation("Sarai",SUBMOT_EYE,ANI_E_CLOSE_E,1)

	Wait(20)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,-2.754f , -35.925f, 96.178f , 200 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE ,  5.231f , 200)		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE ,  -24.681f , 200 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,3.068f,  200 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 0.0f, 200 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 200 )		// 視野角

	//MoveCameraAt( 0 , -2.754f , -35.925f , 96.178f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 5.231f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -24.681f , 0 )	// 基本仰角
	//RotateCamera( 0 , 3.068f , 0 )				// 角度
	//ChangeCameraPers( 0 , 31.200f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , -1.0f , 0 )				// ロール回転

	Wait(40)

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	//　　上空を見上げて呟くサライ。
	TalkMes("Sarai","#5464V#000m世界が……白く染まっていく……","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	ChangeSubAnimation("Sarai",SUBMOT_EYE,ANI_E_CLOSE_S,1)

	Wait(30)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	Wait(20)

	CrossFade(FADE_CROSS)
	MoveCameraAt( 0 , -0.859f , -38.287f , 95.434f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.731f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 2.189f , 0 )	// 基本仰角
	RotateCamera( 0 , 341.593f , 0 )				// 角度
	ChangeCameraPers( 0 , 31.200f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	RollCamera( 0 , 1.4f , 0 )				// ロール回転

	//--------------------
	// Pos Key
	KeyAnimeCreate(KEYANIME_EXSKILLPOS, 3)
	KeyAnimeSet(0, -0.859, -38.287, 95.434, 2.731, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
	KeyAnimeSet(60, -1.152, -38.704, 95.434, 5.591, -0.002, -0.003, 0.000, 0.030, -0.002, -0.003, 0.000, 0.030)
	KeyAnimeSet(120, -1.152, -38.704, 95.434, 6.291, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)

	// Rot Key
	KeyAnimeCreate(KEYANIME_EXSKILLROT, 3)
	KeyAnimeSet(0, 2.189, 1.438, 341.593, 31.200, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)
	KeyAnimeSet(60, 11.176, -4.247, 398.503, 31.200, 0.075, -0.077, 1.641, -0.000, 0.075, -0.077, 1.641, -0.000)
	KeyAnimeSet(120, 11.177, -7.800, 538.553, 31.200, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000)

	//----------

	Wait(FADE_CROSS)
	Wait(10)

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)
	LookSpd("DANA", 0.08 , 0.08 , 0.08 )
	LookChr("DANA" , "ADOL")
	//	"DANA"
	TalkMes("DANA","#3495V#041e#000m…………まだだよ、アドルさん。","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	PlaySE(SE_M06S244_05, 50, 0, 0, 0, 1.0f, 0)
	ChrEffect2( "DANA" , 3900600 , "Bone_root", "", 0 , 0 , 0 , 0.0f,0.0f,0, 1.0f, 1.0f)	//オーラ（ループ）
	Wait(10)

	LookSpd("ADOL", 0.08 , 0.08 , 0.08 )
	LookChr("ADOL" , "DANA")
	Wait(60)

	Blur( BLUR_TYPE_AFTERIMAGE ,0.4f , 30 )
	ExecuteCmd(1000, KeyAnimeCamera, 0.85f, KEYANIME_EXSKILLPOS, KEYANIME_EXSKILLROT, 0 )

	WaitThread(1000)

	// Key Release
	KeyAnimeRelease(KEYANIME_EXSKILLPOS)
	KeyAnimeRelease(KEYANIME_EXSKILLROT)

	Wait(25)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,-1.250f , -38.701f , 95.484f , 260 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.291f , 260)		// 基本距離
//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -4.478f , 260 )		// 基本仰角
//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 67.860f ,  260 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 0.0f, 260 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 260 )		// 視野角

	//MoveCameraAt( 0 , -1.250f , -38.701f , 95.484f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.291f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 11.178f , 0 )	// 基本仰角
	//RotateCamera( 0 , 178.553f , 0 )				// 角度
	//ChangeCameraPers( 0 , 31.200f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 1800.000f )			// ZPlane
	//RollCamera( 0 , -7.8f , 0 )				// ロール回転

	Wait(65)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	//　　ダーナ、強い意志を秘めた眼差しで
	//　　諦めずに理力のオーラをまとう。

	TalkMes("DANA","#3496V私たちがやったことを……",
		"間違いになんて……#80W#042e#0Wさせない！","")
	Wait(150)
	ClosePrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(10)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	FadeBGM(100,60)
	StopSE(SE_M06S244_01, 2000)
	SetEnvSEPlayState(-1, 0)	//環境SE全停止

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	StopEffect(-1,ALL,1)
	EarthQuake( 0.00 , 0.00 , 0 )
	StopThread(100)

	Wait(20)

	//　　画面切り替わって大樹の寺院周辺──
	//　　大きな地震が続く中、大樹が白く輝き、
	//　　やがてその光がセイレン島全体を包んでいく。
	//　　そのまま画面ホワイトアウトして
	//　　下記のエフェクトタイトルを表示する。

	//	エフェクトタイトル
	//	第六部　絶海のラクリモサ　了


	//終了処理ここから----------------------------------------------------
	CallFunc("mp6310b:EV_M06S244_ED")
}

function "EV_M06S244_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//字幕帯非表示
	ResetStopFlag(STOPFLAG_CINEMA)

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	EarthQuake( 0.00 , 0.00 , 0 )
	StopThread(100)

	// 通常
	if ( !FLAG[SF_GALLERY_EVENT] )
	{
		if (FLAG[SF_TIMEATK])
		{
			// タイムアタックでもイベントスキップしたらこっちくるので、対処しておく
			EndTimeAtk()
			SetFlag(SF_ALLMUTEKI, 0)		//無敵解除
			ResetStopFlag(STOPFLAG_EVENT)
		}
		else
		{
			//フラグ処理
			SetFlag(GF_06MPxxxx_6TH_CHAPTER_FINISH,1)// 第六部了
			SetFlag( GF_CAMP_SHIPYARD_LV, 9 )	// 漂流村の発展設定：造船所LV9
			SetFlag(SF_CAMP_CANT_EQUIP, 0)	// キャンプメニュー：装備禁止解除
			SetFlag(SF_BOSS_BATTLE, 0)		//ボス戦終了
			SetFlag(GF_GALL_MOVIE_07,1)		//ラクリモサの消滅

			SetFlag( GF_GALL_EV_06_07, 1 )		// M06S241:ﾃｵｽ･ﾃﾞ･ｴﾝﾄﾞﾛｸﾞﾗﾑとの戦い２

				//イベントバトル用フラグ設定
				SetFlag(SF_CANTSAVE,0)			//セーブ不可
				SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止
				SetFlag(SF_SETRAMSAVE,0)		//リトライセーブ
				SetFlag( SF_REDENTRYLINE, 0)	// エントリー表示を赤色に

			//メインマーカー
			DelMapMarker( SMI_SYMBOL ,PAGE_MP6310, MARKER_EV_M06S231, 0,0)		//メイン：《選択の間》に突入する

		//	//漂流者マーカー
		//	DelMapMarker( SMI_SUBEVENT ,PAGE_F012, MARKER_PERSON_REJA, 0,0)			//漂流者：レーヤ
		//	DelMapMarker( SMI_SUBEVENT ,PAGE_F004, MARKER_PERSON_ED, 0,0)			//漂流者：エド
		//	DelMapMarker( SMI_SUBEVENT ,PAGE_F011, MARKER_PERSON_MIRALDA, 0,0)		//漂流者：ミラルダ
		//	DelMapMarker( SMI_SUBEVENT ,PAGE_F014, MARKER_PERSON_AUSTEN, 0,0)		//漂流者：オースティン
		//	DelMapMarker( SMI_SUBEVENT ,PAGE_F036, MARKER_PERSON_FRANZ, 0,0)		//漂流者：フランツ
		//	DelMapMarker( SMI_SUBEVENT ,PAGE_F035, MARKER_PERSON_KASHU, 0,0)		//漂流者：カシュー
		//	DelMapMarker( SMI_SUBEVENT ,PAGE_F038, MARKER_PERSON_GRISELDA, 0,0)		//漂流者：グリゼルダ
		//	DelMapMarker( SMI_SUBEVENT ,PAGE_F034, MARKER_PERSON_SILVIA, 0,0)		//漂流者：シルヴィア
		//	DelMapMarker( SMI_SUBEVENT ,PAGE_MP747x, MARKER_PERSON_NIA, 0,0)		//漂流者：シスターニア



			PlayBGM(BGM_DUNGEON_503, 0)
			SetEnvSEPlayState(-1, 0)	//環境SE全停止

			//挿入ムービー
			Movie("movie/ins06.mp4", 0, 0, -1, 2, SE_Y496)
			WaitMovie()

			StopBGM(270)
			Wait(210)

			Portrait_Load(0, "system/black.itp" )		//擬似フェードアウト用
			Portrait_Create(0, 0, 0, 0, 0, 1920,1080, 0.0f, 0x00ffffff, 0x00000000)

			Portrait_Load(  1 , "visual/portrait/chap71.itp" )	//第六部了エフェクトタイトル
			Portrait_Create(1 , -64 , 28 , 
							0 , 0 , 2048 , 1024 , 
							0.0f , 0x00ffffff , 0x00000000 )

			//★エフェクトタイトル////////////////////////////////////////////////
			Wait(30)

			//擬似フェードアウト
			Portrait_Anime(  0 , PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f,0)
			FadeIn(FADE_BLACK,0)
			WaitFade()

			Portrait_Anime(  1 , PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f,FADE_SLOW)
			Wait(30)

			//時限式選択肢
			//◆SE無効化コマンド置換用
			SetFlag(TF_MENU_SELECT,0)
			MenuReset()
			MenuAdd( 1 , "" )
			MenuOpen( TF_MENU_SELECT , 0 ,0 , 0 , 0 , 0 , 0 )
			WaitMenu(180) //ウェイトしたい数値
			MenuClose(0,0)

			Portrait_Anime(  1 , PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f,45)
			Wait(45)
			Wait(30)

			//擬似フェードアウト
			FadeOut(FADE_BLACK,0)
			WaitFade()
			Portrait_Anime(  0 , PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f,0)

			Portrait_Close(  -1 )
			Portrait_Unload( -1 )

			/////////////////////////////////////////////////////////////////////

			//トロフィー入手
			GetTrophy("TROPHY_SCENE_C6_END")		//絶海のラクリモサ			第六部「絶海のラクリモサ」をクリアした。

			SetFlag( TF_LOADING_TIPS_OFF, 1 )	//NowLoading 時の Tips 表示をカット

			StopBGM(30)
			SetFlag(SF_NOCHANGEBGM, 1)

			SetFlag(GF_MP1202_NOW,1)		//屋内に直接飛ぶ場合
			//LoadArg("map/mp1201/mp1201.arg")
			//EventCue("mp1201:EV_M07S000")
			CallFunc("rng:ending")

			SetEnvSEPlayState(-1, 0)	//環境SE全停止

			ResetStopFlag(STOPFLAG_EVENTIMPOSE)

		}
	}
	// イベントギャラリー中
	else
	{
		FadeBGM(100,15)
		SoundEfx( SEFX_DEFAULT, 15 )
		SetEnvSEPlayState(-1, 0)	//環境SE全停止
		GalleryEvEnd(0)		// イベントギャラリー終了（スクリプトから強制的に抜けていろいろ処理してくれる）
		ResetStopFlag(STOPFLAG_EVENTIMPOSE)
	}

		//終了処理ここまで----------------------------------------------------
}

function "quake"
{
	while(1)
	{
		EarthQuake( 0.036 , 0.046 , 6000 )
		Wait(6000)
	}

}