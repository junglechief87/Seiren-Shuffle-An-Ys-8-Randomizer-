#include "inc/mons.h"
#include "inc/def.h"
#include "inc/flag.h"
#include "inc/se.h"
#include "inc/scr_inc.h"
#include "inc/3dicon.h"
#include "inc/skilldef.h"
#include "inc/vo.h"
#include "inc/music.h"
#include "inc/efx.h"
#include "inc/temp/mp6401m.h"


//----------------------------------------------------------------------------//
//                                                                            //
// 王都中央街区（荒廃）  			                                              //
//                                                                            //
//----------------------------------------------------------------------------//
///////////////////////////////////////////////////////////////////////////////
// 初期化スクリプト
///////////////////////////////////////////////////////////////////////////////
//-------------------------------------------

function "init"
{
	
	//遠景不必要ノード削除◆マップ作業者用
	MapHide( "@BG2_etania" , 0 )

	//大樹の色制御
	MapAnime(gim_taiju , normal )

	// イベントエリア設定制御
	EventAreaEnable( "SubEV_Past_06_Breakout" , 0 )	// 過去編Ⅵ：【サブイベント：中央区を突破する】
	EventAreaEnable( "Stopper_Past_05_01" , 0 )		// 過去編Ⅴ：【ストッパー：西街道→王都方面へ行けない】
	EventAreaEnable( "Stopper_Past_06_04" , 0 )		// 過去編Ⅵ：【ストッパー：中央区→東街区に戻れない】

	if( FLAG[SF_EVENT_ON] )
	{
		// 雪
		Set3DParticle(PARTICLE_TYPE_SNOW, 0.0f,0.0f,-0.1f, 0.1f,0.0f,0.2f, 0.0f,0.0f,0.0f, 0.0f,0.0f,0.0f, 180.0f, 0.0f)

		//一般配置ファンクション呼び出し
		CallFunc("mp6201m1:NpcPosition")

		// イベントエリア制御
		if( FLAG[GF_PAST_EPISODE_6_GO_GARDEN] )			//▼過去編Ⅵセレンの園へ向かう
		{
			if( !FLAG[GF_SUBEV_PAST_06_GATE] )			// 過去編Ⅵ：【サブイベント：山門で修道女たちに見送られる】を見た
			{
				EventAreaEnable( "SubEV_Past_06_Breakout" , 1 )		// 過去編Ⅵ：【サブイベント：中央区を突破する】
			}
		}
		
		// ストッパー制御
		if( FLAG[GF_PAST_EPISODE_5_GO_VALLAY] )			//▼過去編Ⅴ王家の谷へ向かう
		{
			EventAreaEnable( "Stopper_Past_05_01" , 1 )		// 過去編Ⅴ：【ストッパー：西街道→王都方面へ行けない】
		}
		if( FLAG[GF_PAST_EPISODE_6_GO_GARDEN] )			//▼過去編Ⅵセレンの園へ向かう
		{
			EventAreaEnable( "Stopper_Past_06_04" , 1 )		// 過去編Ⅵ：【ストッパー：中央区→東街区に戻れない】
		}
	}

	//マップ名表示
	if(!FLAG[SF_LOADINIT] && !FLAG[GF_MPxxxx_MAP_NAME_NO_DRAW] && !FLAG[TF_MAPNAME_SHOWN]){
		if( FLAG[SF_LASTENTRY_NO] == 5 ){
			VisualName("visual/mapname/mn_6201m.itp",VN_NAMEMAP2,-1,-1,VN_MAPNAME_TIME)//王都アイギアス
			SetFlag( TF_MAPNAME_SHOWN, 1 )				// 地名表示した（テンポラリ）
		}
	}
}


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//■配置制御セクション

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function "NpcPosition"
{
	if( FLAG[GF_PAST_EPISODE_6_GO_GARDEN] )				//▼過去編Ⅵセレンの園へ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_5_GO_VALLAY] )		//▼過去編Ⅴ王家の谷へ向かう
	{
//		SetChrPos("Citizen_5_A01",-669.95f	971.15f	11.69f)
//		Turn("Citizen_5_A01",-4.05f,360.0f)
//		ChangeAnimation("Citizen_5_A01","ANI_EV_SIT_C", -1 , 1 )	

		SetChrPos("Citizen_5_A01",-713.17f	976.28f	11.09f)
		Turn("Citizen_5_A01",176.89f,360.0f)
		Look("Citizen_5_A01" , 0 , -20 )

	}
	else if( FLAG[GF_PAST_EPISODE_4_2_GO_OUT] )			//▼過去編Ⅳ-２王宮の外へ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )		//▼過去編Ⅳ王宮前へ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )		//▼過去編Ⅱ南門へ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )	//▼ダーナ編③王都を歩く
	{
	}
	else if( FLAG[GF_PAST_EPISODE_D1A_TEM] )			//▼ダーナ編①Ａ寺院内を歩く
	{
	}
}
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//■一般会話セクション

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//──────────────────────────────
//	【王都市民】
//──────────────────────────────
function "Talk_Citizen_5_A01"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if( FLAG[GF_PAST_EPISODE_5_GO_VALLAY] )			//▼過去編Ⅴ王家の谷へ向かう
	{
		//▼過去編Ⅴ王家の谷へ向かう
		//───────────────
		//	場所		：西街道①（過去）
		//───────────────
		//	配置・カメラ：街出口付近の瓦礫に座る
		//	モーション	：崩し座り／デフォルトで悲哀表情
		//───────────────
		if( !FLAG[TF_TALK_MOB01] )
		{
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"……あんた知ってるか？"
				"ドラン衛士長はまだ行方知れずだってよ。\p"
				"あの日、女子供を庇ったままな……"
				"おそらく生きてちゃ居ないだろう。\p"
				"おまけに女王陛下はとんと姿を"
				"お見せにならねえ……\p"
				"……クソッ、この国は"
				"どうなっちまったんだよおっ！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB01, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"“最も幸福な時代”"
				"だったんじゃねえのかよ……\p"
				"誰でもいいから……"
				"何とか言ってくれよ……っ！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)
	Look("Citizen_5_A01" , 0 , -20 )
}


////──────────────────────────────
////	【王都市民】
////──────────────────────────────
//function "Talk_Citizen_5_A02"
//{
//	SetStopFlag(STOPFLAG_TALK)
//	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM
//
//	if( FLAG[GF_PAST_EPISODE_5_GO_VALLAY] )			//▼過去編Ⅴ王家の谷へ向かう
//	{
//		//▼過去編Ⅴ王家の谷へ向かう
//		//───────────────
//		//	場所		：西街道①（過去）
//		//───────────────
//		//	配置・カメラ：下のキャラと話す
//		//	モーション	：デフォルトで悲哀表情
//		//───────────────
//		//　　振り返らない
//		//	王都市民
//		TalkPopup("this",0,0,0,0,0)
//		{
//			"泣くな……行くぞ。\p"
//			"巫女様たちが守ってくれるなんて"
//			"信じたのが馬鹿だったんだ……\p"
//			"こんな事ならとっとと"
//			"逃げ出しとくべきだったぜ……！"
//		}
//		WaitPrompt()
//		WaitCloseWindow()
//	}
//
//	ResetStopFlag(STOPFLAG_TALK)
//}
//
//
////──────────────────────────────
////	【王都市民】
////──────────────────────────────
//function "Talk_Citizen_5_A03"
//{
//	SetStopFlag(STOPFLAG_TALK)
//	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM
//
//	if( FLAG[GF_PAST_EPISODE_5_GO_VALLAY] )			//▼過去編Ⅴ王家の谷へ向かう
//	{
//		//▼過去編Ⅴ王家の谷へ向かう
//		//───────────────
//		//	場所		：西街道①（過去）
//		//───────────────
//		//	配置・カメラ：下のキャラと話す
//		//	モーション	：デフォルトで悲哀表情
//		//───────────────
//		//　　振り返らない
//		//	王都市民
//		TalkPopup("this",0,0,0,0,0)
//		{
//			"でも私たち、"
//			"竜車も持っていないのよ……？\p"
//			"ああ、せめてさっきの人たちが"
//			"乗せてくれたら……"
//		}
//		WaitPrompt()
//		WaitCloseWindow()
//
//		//	王都市民
//		TalkPopup("this",0,0,0,0,0)
//		{
//			"馬鹿言ってんじゃねえッ！"
//			"みんな自分のことで必死なんだ！\p"
//			"……歩けばいいだろ。"
//			"どこか遠くの町までよ……！"
//		}
//		WaitPrompt()
//		WaitCloseWindow()
//	}
//
//	ResetStopFlag(STOPFLAG_TALK)
//}





////////////////////////////////////////////////////////////////////////////////

//■メインイベントセクション

////////////////////////////////////////////////////////////////////////////////

//──────────────────────────────
//▼【過去編Ⅴ】王都から住人が逃げ出す(マップ未定)
//──────────────────────────────
function "EV_M05S390"			//【過去編Ⅴ】王都から住人が逃げ出す
{
	//開始処理ここから-----------------------------------------------

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK, 0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//過去Ⅴ　開始処理呼び出し
	CallFunc("system:BackTo_EPISODE_5")
	SetFlag(GF_PAST_EPISODE_5B_REARRIVE, 0)	//▽過去編ⅤＢ再訪時
	SetFlag(SF_PAST_AGAIN, 0)		//初回はメニューから帰還を禁止

	CallFunc("fxxxm:init")	//ヒモロギ表示用

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定				
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)
	SetChrPos("DANA", -482.09f, 929.75f, 11.07f)
	Turn("DANA", 171.66f, 360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)

	SetChrWork("Olga", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Olga", INFOFLAG_NOCHRATARI)
	SetChrPos("Olga", -481.14f, 929.15f, 11.07f)
	Turn("Olga", 157.45f, 360.0f)
	ChangeAnimation("Olga", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_EXT1, ANI_E_LOOKC, 1)

	SetChrWork("soldierA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("soldierA", INFOFLAG_NOCHRATARI)
	SetChrPos("soldierA", -489.28f, 948.41f, 11.07f)
	Turn("soldierA", -87.17f, 360.0f)
	ChangeAnimation("soldierA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("soldierA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("soldierA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	
	SetChrPos("ev_eq4028_1", -489.28f, 948.41f, 11.07f)
	SetParent("ev_eq4028_1", "soldierA", "Null_ken")
	
	SetChrWork("soldierB", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("soldierB", INFOFLAG_NOCHRATARI)
	SetChrPos("soldierB", -488.97f, 950.37f, 11.07f)
	Turn("soldierB", -87.17f, 360.0f)
	ChangeAnimation("soldierB", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("soldierB", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("soldierB", SUBMOT_MOUTH, ANI_M_WAIT, 1)

	SetChrPos("ev_eq4028_2", -488.97f, 950.37f, 11.07f)
	SetParent("ev_eq4028_2", "soldierB", "Null_ken")

	SetChrWork("citizenM", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("citizenM", INFOFLAG_NOCHRATARI)
	SetChrPos("citizenM", -482.50f, 946.12f, 11.07f)
	Turn("citizenM", 123.60f, 360.0f)
	ChangeAnimation("citizenM", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("citizenM", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("citizenM", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	
	SetChrWork("citizenF", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("citizenF", INFOFLAG_NOCHRATARI)
	SetChrPos("citizenF", -483.55f, 944.43f, 11.07f)
	Turn("citizenF", 137.81f, 360.0f)
	ChangeAnimation("citizenF", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("citizenF", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("citizenF", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	
	SetChrInfoFlag("dragoncar", INFOFLAG_NOCHRATARI)
	SetChrPos("dragoncar", -481.53f, 939.76f, 11.07f)
	Turn("dragoncar", 155.58f, 360.0f)
	ChangeAnimation("dragoncar", "ANI_WAIT", -1, 1)


	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )

	//カメラ設定
	MoveCameraAt( 0 , -486.675f , 948.893f , 16.024f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.299f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -52.740f , 0 )	// 基本仰角
	RotateCamera( 0 , 109.188f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 1.000, 60.000, 0.000, 0.150, 0.500)					//イベント毎に調整
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp6201m1:EV_M05S390_ED")

	//開始処理ここまで-----------------------------------------------

	//　　暗雲が垂れ込めた空を映し出した後にPANダウンして
	//　　王都の門で見張りをしている
	//　　兵士たち（二人ほど？）を映し出す。
	
	// カット1 -----------------------------------------------------------------------------------------

	// 非表示・再表示
	SetChrInfoFlag("DANA", INFOFLAG_INVISIBLE)	// 非表示
	SetChrInfoFlag("Olga", INFOFLAG_INVISIBLE)	// 非表示

	SetEnvSEPlayState(-1, 1)	//環境SE

	// フェードイン
	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()
	
	Wait(15)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -488.438f , 949.508f , 12.844f , 140 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.579f , 140 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -0.603f , 140 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 115.211f , 140 )

	Wait(110)

	FadeBGM(70,10)

	// 男性の住人
	SetName("男性の住人")
	TalkPopup(UNDEF, 0, 3, 0, 230, 0) {
		"#5810Vおーい、そこをどいてくれ！"
	}
	WaitPrompt()
	WaitCloseWindow()
	SetName("")

	//　　兵士たちにＰＡエモーション。
	EmotionEx("soldierA", 0.1f, EMO_PA, 0, 5, 1, 1, 1.2f )	// 「PA」
	EmotionEx("soldierB", 0.1f, EMO_PA, 0, 5, 1, 1, 1.2f )	// 「PA」
	LookChr("soldierA", "citizenM")
	LookChr("soldierB", "citizenM")
	Wait(40)


	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	// カット2 ----------------------------------------------------------------------------------------
	
	//　　荷物を満載した獣車を引いて
	//　　住人たちが門までやって来る。
	
	// クロスフェード
	CrossFade(FADE_NORMAL)
	
	// カメラ
	MoveCameraAt( 0 , -489.225f , 949.231f , 13.508f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.258f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 7.979f , 0 )	// 基本仰角
	RotateCamera( 0 , 233.944f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	
	// 位置調整・表情・モーション
	SetChrPos("soldierB", -488.69f, 950.45f, 11.07f)
	Turn("soldierB", -37.43f, 360.0f)
	LookChr("citizenM", "soldierB")
	LookChr("citizenF", "soldierB")
	
	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -488.046f , 949.065f , 13.108f, 180 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.538f , 180 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 7.406f , 180 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 229.647f , 180 )
	
	// 移動
	ExecuteCmd(1, MoveTo, "citizenM", -487.01f, 948.73f, 11.07f, 0.1f, 0.185f)
	Wait(3)
	ExecuteCmd(2, MoveTo, "citizenF", -486.98f, 947.61f, 11.07f, 0.1f, 0.185f)
	ExecuteCmd(3, MoveTo, "dragoncar", -483.99f, 944.81f, 11.07f, 0.1f, 0.145f)
	PlaySE(SE_M05S390_01, 70, 1, 1000, 0, 1.0f, 0)


	Wait(60)

	StopSE(SE_M05S390_01, 2500)
	
	// 見張りの兵士
	TalkPopup("soldierB", 0, 1, 0, 0, 0) {
		"#5854Vお、お前たち、こんな大荷物で"
		"どこへ行くつもりなんだ？"
	}
	WaitPrompt()
	WaitCloseWindow()

	// 移動待ち
	WaitThread(1)
	WaitThread(2)

	// 男性の住人
	TalkPopup("citizenM", 0, 2, 0, 0, 0) {
		"#5811Vどこへだって？"
		"そんなことは俺たちにもわからねぇ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	// 女性の住人
	TalkPopup("citizenF", 0, 2, 0, 0, 0) {
		"#5813V#061e#000mもう何日も陽は射さないし、"
		"地震や火山の噴火も止まらないし……\p"
		"#5814V#051e#000mこんな国にはもう住めないわ。"
		"どこか安全な場所へ逃げるしか……"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	ChangeAnimation( "citizenM", "ANI_EV_TEBURI", -1, 1 )	// 手振り

	// 男性の住人
	TalkPopup("citizenM", 0, 2, 0, 0, 0) {
		"#5812Vとにかく通してくれ！"
		"アンタたちに止める権利はないはずだ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	HeadYes("soldierB" , 1 , 25 )

	// 兵士
	TalkPopup("soldierB", 0, 1, 0, 0, 0) {
		"#5856Vあ、ああ……"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)

	// カット3 ----------------------------------------------------------------------------------------

	//　　カメラスクロールして、離れた場所から
	//　　そのやり取りを見守るダーナとオルガを映す。
	
	FadeBGM(100,30)

	// クロスフェード
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

	// 非表示・再表示
	ResetChrInfoFlag("DANA", INFOFLAG_INVISIBLE)	// 再表示
	ResetChrInfoFlag("Olga", INFOFLAG_INVISIBLE)	// 再表示

	Wait(15)

	MoveCameraAt( 0 , -482.226f , 930.137f , 12.648f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.029f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 1.208f , 0 )	// 基本仰角
	RotateCamera( 0 , 4.514f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -482.226f , 930.137f , 12.648f, 60 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.538f, 60 )
//	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 7.406f , 60 )
//	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 229.647f , 60 )

	//// カメラ
	//MoveCameraAt( 0 , -482.097f , 930.175f , 12.668f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 3.538f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 1.208f , 0 )	// 基本仰角
	//RotateCamera( 0 , 4.521f , 0 )				// 角度
	//ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転

	// クロスフェード
	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()
	
	// カメラ待ち（垂直）
	WaitThread(1000)
	WaitThread(1001)

	// ダーナ
	TalkPopup("DANA", 0, 2, 0, 0, 0) {
		"#000e#000mオルガちゃん、あれは……"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	ChangeAnimation( "Olga", "ANI_EV_UDEGUMI_S", -1, 1 )	// 腕組
	//PlayVoice(Y8V_5314,"Olga",100)	//ふむ（平常のテンション）
	
	// オルガ
	TalkPopup("Olga", 0, 1, 0, 0, 0) {
		"#000e#000mふむ……最近、王都から逃げ出す"
		"住人が増えていると聞くが……"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	//　　ダーナに「！」エモーション表示。
	EmotionEx("DANA", 0.05f, EMO_EX, 0, 5, 1, 1, 1.2f )	// 「！」
	Wait(40)
	
	LookChr("DANA", "Olga")
	TurnToChr("DANA", "Olga", 9.0f)
	
	// ダーナ
	TalkPopup("DANA", 0, 2, 0, 0, 0) {
		"#051e#000mそ、そんな……"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カット4 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_CROSS)
	
	// カメラ
	MoveCameraAt( 0 , -481.646f , 929.577f , 12.668f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.858f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -5.954f , 0 )	// 基本仰角
	RotateCamera( 0 , 181.172f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動（角度）
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE ,  200.368f , 600 )

	LookChr("Olga", "DANA")

	// フェード待ち
	Wait(FADE_CROSS)

	// オルガ
	TalkPopup("Olga", 0, 2, 0, 0, 0) {
		"#000e#000m流星による衝撃が地殻変動を誘発し、"
		"火山の噴火や津波が頻繁に起こっている。"
		"噴火3行目"

	}
	WaitPrompt()
	WaitCloseWindow()
	
	ChangeAnimation( "Olga", "ANI_EV_UDEGUMI_E", -1, 1 )	// 腕組
	
	// オルガ
	TalkPopup("Olga", 0, 2, 0, 0, 0) {
		"#000e#000mさらに巻き上がった粉塵や噴煙が天を覆い、"
		"異常気象をもたらしているのだ。"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	LookReset("Olga")
	ChangeAnimation( "Olga", "ANI_EV_RYOTEKOSI_S", -1, 1 )	// 両手腰
	Look("Olga", 0.0f, -10.0f)	// うつむく
	
	// オルガ
	TalkPopup("Olga", 0, 2, 0, 0, 0) {
		"#061e#000mこのような状況で不安になるのは"
		"無理からぬことだが……"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て

	// ダーナ
	TalkPopup("DANA", 0, 1, 0, 0, 0) {
		"#061e#000m流星雨が終息して、"
		"終わりだと思ってたのに……"
	}
	WaitPrompt()
	WaitCloseWindow()

	// オルガ
	TalkPopup("Olga", 0, 2, 0, 0, 0) {
		"#060e#000mこのままでは地上は"
		"暗黒世界に成り果ててしまうかもしれぬ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	Look("DANA", 0.0f, -10.0f)	// うつむく
	Wait(10)

	// ダーナ
	TalkPopup("DANA", 0, 1, 0, 0, 0) {
		"#060e#000m#0L……………………………………"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "Olga", "ANI_EV_RYOTEKOSI_E", -1, 1 )	// 両手腰
//	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_SAD_CLOSE_E, 1)	// 目
	LookChr("Olga", "DANA")

	// オルガ
	TalkPopup("Olga", 0, 2, 0, 0, 0) {
		"#012e#000mやはり《王家の谷》へ向かうか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カット5 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_FAST)
	
	// カメラ停止（角度）
	StopThread(1003)
	
	// カメラ
	MoveCameraAt( 0 , -481.591f , 929.397f , 12.648f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.858f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 6.078f , 0 )	// 基本仰角
	RotateCamera( 0 , 98.103f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// フェード待ち
	Wait(FADE_FAST)

	LookChr("DANA", "Olga")
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SAD_CLOSE_E, 1)	// 目

	// ダーナ
	TalkPopup("DANA", 0, 2, 0, 0, 0) {
		"#000e#000mうん、あれ以来なぜか"
		"サライちゃんにも会えないし……\p"
		"#011e#000m巫女には伝えられていない"
		"大樹の“真実”……"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_E", -1, 1 )	// 手胸当て
	
	// ダーナ
	TalkPopup("DANA", 0, 2, 0, 0, 0) {
		"#012e#000mそれが何か分からないけれど、"
		"確かめないといけない気がする。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "Olga", "ANI_EV_UDEGUMI_S", -1, 1 )	// 腕組

	// オルガ
	TalkPopup("Olga", 0, 1, 0, 0, 0) {
		"#000e#000mお前も分かっていると思うが、"
		"《王家の谷》は王家の墓所でもある。\p"
		"大樹の巫女と言えども、"
		"立ち入りは今も許されてはいない。"
	}
	WaitPrompt()
	WaitCloseWindow()

	Look("DANA", 0.0f, -10.0f)	// うつむく
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_CLOSE_S, 1)	// 目

	// ダーナ
	TalkPopup("DANA", 0, 2, 0, 0, 0) {
		"#010e#000m……それでも行くよ。\p"
		"アドルさんもちょうど今、"
		"向かっているみたいだから。"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	LookChr("DANA", "Olga")
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_CLOSE_E, 1)	// 目
	
	// ダーナ
	TalkPopup("DANA", 0, 2, 0, 0, 0) {
		"#081e#080m未来の私自身にも"
		"頼まれちゃったことだしね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "Olga", "ANI_EV_UDEGUMI_E", -1, 1 )	// 腕組

	// オルガ
	TalkPopup("Olga", 0, 1, 0, 0, 0) {
		"#000e#000mそうか……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　画面そのままフェードアウト

	// フェードアウト
	FadeOut(FADE_BLACK, FADE_NORMAL)
	WaitFade()
	
	Wait(10)
	
	//終了処理ここから----------------------------------------------------
	CallFunc("mp6201m1:EV_M05S390_ED")
}

function "EV_M05S390_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_DANA")
	CallFunc("system:reset_chrmot_Olga")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//NowLoading 時の Tips 表示をカット
	SetFlag(TF_LOADING_TIPS_OFF, 1)

	CallFunc("system:camera_reset")

	EventCue("mp6201m1:EV_M05S391")		// NEXT：[M05S391][過去Ⅴ　ダーナが王家の谷へ出発]

	ResetStopFlag(STOPFLAG_EVENT)

	//終了処理ここまで----------------------------------------------------

}


//──────────────────────────────
//▼【過去編Ⅴ】ダーナが王家の谷へ出発する
//──────────────────────────────
function "EV_M05S391"			//【過去編Ⅴ】ダーナが王家の谷へ出発する
{
	//開始処理ここから-----------------------------------------------

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK, 0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定				
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)
	SetChrPos("DANA", -593.62f, 961.05f, 11.09f)
	Turn("DANA", 94.46f, 360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)

	SetChrWork("Olga", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Olga", INFOFLAG_NOCHRATARI)
	SetChrPos("Olga", -592.84f, 960.23f, 11.09f)
	Turn("Olga", 94.46f, 360.0f)
	ChangeAnimation("Olga", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_EXT1, ANI_E_LOOKC, 1)

	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )

	// 雪		→initに移動。イベント設定が必要な場合は再度ＯＮにして下さい（四方）
//	Set3DParticle(PARTICLE_TYPE_SNOW, 0.0f,0.0f,-0.1f, 0.1f,0.0f,0.2f, 0.0f,0.0f,0.0f, 0.0f,0.0f,0.0f, 180.0f, 0.0f)

	//カメラ設定
	MoveCameraAt( 0 , -592.295f , 960.428f , 12.028f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.632f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 0.009f , 0 )	// 基本仰角
	RotateCamera( 0 , 111.470f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 1.000, 75.000, 1.000, 0.450, 0.500)					//イベント毎に調整
	SetDoFFocus(0,0,0)

	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp6201m1:EV_M05S391_ED")

	//開始処理ここまで-----------------------------------------------

	//　　画面フェードインして、王都西街区の橋を
	//　　歩いて渡って来るダーナとオルガ。
	//　　不意に空から雪がひらひらと舞い始める。
	
	// カット1 ----------------------------------------------------------------------------------------

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -598.984f , 960.960f , 12.928f , 140 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.128f , 140 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -1.710f , 140 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 55.315f , 140 )

	// 移動
	ExecuteCmd(1, MoveTo, "DANA", -600.24f, 962.02f, 11.09f, 0.1f, 0.19f)
	Wait(10)
	ExecuteCmd(2, MoveTo, "Olga", -598.54f, 961.03f, 11.09f, 0.1f, 0.20f)

	// フェードイン
	FadeIn(FADE_BLACK, FADE_NORMAL)
	Wait(FADE_NORMAL)
	
//	Wait(100)
//	
//	//　　オルガにPAエモーション。
//	EmotionEx("Olga", 0.03f, EMO_PA, 0, 5, 1, 1, 1.2f )	// 「PA」
//	Wait(20)
	
	// 移動待ち（オルガ）
	WaitThread(2)

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -598.938f , 960.851f , 13.108f, 70 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.792f , 70 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -21.478f , 70 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 56.462f , 70 )
	
	LookSpd("Olga", 0.08f, 0.08f, 0.08f )// ゆっくりめに首向き
	Look("Olga", 0.0f, 20.0f)	// 見上げる
	Wait(20)
	
	// オルガ
	TalkPopup("Olga", 0, 1, 0, 0, 0) {
		"#000e#000m……この時期に雪か。\p"
		"気温が下がっていると思ったが、"
		"これも空が閉ざされた影響なのか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)
	LookSpd( "Olga", LOOKSPD_DEFAULT, LOOKSPD_DEFAULT, LOOKSPD_DEFAULT )


	// カット2 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_NORMAL)

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	// 移動停止（ダーナ）
	StopThread(1)

	// カメラ
//	MoveCameraAt( 0 , -599.210f , 961.293f , 12.928f , 0 )	// 注視点
//	ChangeCameraDistance( 0 , 2.432f , 0 )		// 基本距離
//	ChangeCameraElevation( 0 , 9.888f , 0 )	// 基本仰角
//	RotateCamera( 0 , 91.994f , 0 )				// 角度
//	ChangeCameraPers( 0 , 35.000f , 0 )			// 視野角
//	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
//	RollCamera( 0 , 0.0f , 0 )				// ロール回転
//	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	MoveCameraAt( 0 , -599.210f , 961.293f , 12.728f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.432f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 9.888f , 0 )	// 基本仰角
	RotateCamera( 0 , 91.994f , 0 )				// 角度
	ChangeCameraPers( 0 , 35.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 位置調整・表情・モーション
	SetChrPos("DANA", -599.40f, 961.78f, 11.09f)
	Turn("DANA", 98.38f, 360.0f)
	ChangeAnimation( "DANA", "ANI_WAIT", -1, 1 )	// 待機
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SAD, 1)	// 目

//	// カメラ移動（垂直）
//	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE ,-599.210f , 961.293f , 12.728f, 55 )
//
//	// フェード待ち
//	Wait(FADE_NORMAL)

	LookChr("DANA", "Olga")
	TurnToChr("DANA", "Olga", 8.0f)

//	// カメラ待ち（垂直）
//	WaitThread(1000)

	Wait(20)

	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て

	// ダーナ
	TalkPopup("DANA", 0, 2, 0, 0, 0) {
		"#050e#000m……急いだほうがいい気がする。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookSpd("Olga", 0.08f, 0.08f, 0.08f )// ゆっくりめに首向き
	Look("Olga", 0.0f, -10.0f)	// うつむく

	//　　オルガに「…」エモーション表示。
	EmotionEx("Olga", 0.03f, "EMO_3DOT", 27, 5, 1, 1, 0.8f)	// 「…」
	Wait(52)
	
	LookSpd( "Olga", LOOKSPD_DEFAULT, LOOKSPD_DEFAULT, LOOKSPD_DEFAULT )

	
	// オルガ
	TalkPopup("Olga", 0, 1, 0, 0, 0) {
		"#000e#000mダーナ、言いにくいことだが……"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "Olga", "ANI_EV_UDEGUMI_S", -1, 1 )	// 腕組

	// オルガ
	TalkPopup("Olga", 0, 1, 0, 0, 0) {
		"#000e#000m大樹の真実とやらが"
		"王家の谷に眠っているとするのなら……\p"
		"王族であるサライは"
		"それを知っていた可能性がある。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_E", -1, 1 )	// 手胸当て
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SAD_CLOSE_S, 1)	// 目
	Look("DANA", 0.0f, -10.0f)	// うつむく

	// ダーナ
	TalkPopup("DANA", 0, 2, 0, 0, 0) {
		"#060e#000mうん、分かってる。"
		"だから確かめないとね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カット3 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_CROSS)
	
	// カメラ
	MoveCameraAt( 0 , -598.770f , 961.485f , 12.688f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.981f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -3.002f , 0 )	// 基本仰角
	RotateCamera( 0 , 197.699f , 0 )				// 角度
	ChangeCameraPers( 0 , 35.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 位置調整・表情・モーション
	SetChrPos("Olga", -598.18f, 961.16f, 11.09f)
	Turn("Olga", 119.32f, 360.0f)
	
	// カメラ移動（角度）
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 212.883f , 600 )
	
	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_CLOSE_S, 1)	// 目
	Look("Olga", 0.0f, -15.0f)	// うつむく
	
	// フェード待ち
	Wait(FADE_CROSS)

	//　　オルガに「…」エモーション。
	EmotionEx("Olga", 0.0f, "EMO_3DOT", 27, 5, 1, 1, 1.0f)	// 「…」
	Wait(52)
	
	LookChr("Olga", "DANA")
	ChangeAnimation( "Olga", "ANI_EV_UDEGUMI_E", -1, 1 )	// 腕組
	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_CLOSE_E, 1)	// 目
	
	// オルガ
	TalkPopup("Olga", 0, 2, 0, 0, 0) {
		"#000mやはり、ここは私もお前と一緒に……"
	}
	WaitPrompt()
	WaitCloseWindow()

	HeadNo("DANA", 1, 25)	// キャラ, 回数, 速さ

	// ダーナ
	TalkPopup("DANA", 0, 1, 0, 0, 0) {
		"#011e#000mそれは駄目だよ。\p"
		"巫女と祭司長が一度に姿を消したら、"
		"みんなびっくりしちゃうから。"
	}
	WaitPrompt()
	WaitCloseWindow()

	// オルガ
	TalkPopup("Olga", 0, 2, 0, 0, 0) {
		"#061e#000mそれは……"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_CLOSE_E,1)

	ChangeAnimation( "Olga", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て
	
	// オルガ
	TalkPopup("Olga", 0, 2, 0, 0, 0) {
		"#062e#000mすまない、栓無きことを言った。"
		"気を付けて行ってきてくれ。"
	}
	WaitPrompt()
	WaitCloseWindow()

//	HeadYes("DANA", 1, 25)	// キャラ, うなずき回数, 速さ
	LookChr("DANA", "Olga")	// うつむく戻す

	// ダーナ
	TalkPopup("DANA", 0, 1, 0, 0, 0) {
		"#000e#000mうん、行ってくるね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カメラ停止（角度）
	StopThread(1003)

	//　　ここで操作許可。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -598.770f , 961.485f , 13.108f , 150 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.045f , 150 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -1.570f , 150 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 196.552f , 150 )

	Wait(35)

	// フェードアウト
	FadeOut(FADE_BLACK, FADE_NORMAL)
	WaitFade()
	
	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	
	//終了処理ここから----------------------------------------------------
	CallFunc("mp6201m1:EV_M05S391_ED")
}

function "EV_M05S391_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_DANA")
	CallFunc("system:reset_chrmot_Olga")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//エフェクトの停止
	StopEffect(-1,ALL,1)

	//フラグ処理
	SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	SetFlag(GF_05MP6203_GOTO_VALLEY, 1)
	CallFunc("mp6201m1:init")

	//マップマーカー
	CallFunc("system:SetMarkerDANA")	//クエスト系マーカー処理
	SetMapMarker( SMI_DANA_SYMBOL ,PAGE_MF005, MARKER_EV_M05S401, -934.02f, 678.87f, 48.03f, -934.02f, 678.87f,MARKER_EV_M05S401,MN_F_MP6106M,0)		//メイン：衛士たちに誰何を受ける２

	//イベント後の再配置
	SetChrPos("LEADER",-614.53f,962.80f,11.09f)
	Turn("LEADER",96.05f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt( 0 , -614.532f , 962.795f , 12.896f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -9.394f , 0 )	// 基本仰角
	RotateCamera( 0 , 84.054f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	CallFunc("system:camera_reset")

	VisualName("visual/portrait/ep_0150.itp",VN_NAMEMAP2,-1,-1,VN_MAPNAME_TIME)//過去Ⅴ

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK, FADE_FAST)
	//WaitFade()

	//終了処理ここまで----------------------------------------------------

}

////////////////////////////////////////////////////////////////////////////////

//■サブイベントセクション

////////////////////////////////////////////////////////////////////////////////
//──────────────────────────────
//	【サブイベント：中央区を突破する】
//──────────────────────────────
function "SubEV_Past_06_Breakout"
{

//開始処理ここから----------------------------------------------------

	CallFunc("system:event_begin_impose")

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	//ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA",-396.82f, 898.80f, 11.07f)
	Turn("DANA",60.12f,360.0f)
	ChangeAnimation( "DANA" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "DANA" )
	SetChrInfoFlag( "DANA" , INFOFLAG_NOCHRATARI)

	// エフェクトロード
	LoadEffect("efx_ev06.ite")

	Portrait_Load(0, "system/white.itp" )		//擬似フェードアウト用
	Portrait_Create(0, 0, 0, 0, 0, 64,64, 0.0f, 0x00ffffff, 0x00000000)

	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )

	SetFlag(SF_CHARANORECVSHADOW,1)	//キャラ影受けない

	//カメラ設定
	MoveCameraAt( 0 , -400.038f , 898.089f , 12.317f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.298f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -1.340f , 0 )	// 基本仰角
	RotateCamera( 0 , 272.877f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 1.000, 60.000 ,1.000 ,0.700 ,0.500)

	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6201m1:SubEV_Past_06_Breakout_ED")

//開始処理ここまで-----------------------------------------------

	// カット1 ----------------------------------------------------------------------------------------

	//　　ダーナは辺りを伺いつつ、塔堂の正面辺りにやってくる。

	SetEnvSEPlayState(6201602, 0)
	SetEnvSEPlayState(6201603, 0)
	SetEnvSEPlayState(6201604, 0)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -403.541f , 893.475f , 12.577f , 160 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.298f , 160 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -3.346f , 160 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 342.779f , 160 )

	// 移動
	ExecuteCmd(1, MoveTo, "DANA", -403.43f, 893.53f, 11.07f, 0.1f, 0.22f)

	LookSpd("DANA", 0.08f, 0.08f, 0.08f )// ゆっくりめに首向き
	Look("DANA", 30.0f, 0.0f)	// ←（＾＾）

	// フェードイン
	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	Wait(20)
	Look("DANA", -30.0f, 0.0f)	// （＾＾）→
	Wait(55)
	Look("DANA", 20.0f, 0.0f)	// ←（＾＾）

	// 移動待ち
	WaitThread(1)

	FadeBGM(65,30)
	SoundEfx( SEFX_EV_HILL, 15 )

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	LookReset("DANA")

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	// ダーナ
	TalkMes("DANA",
		"#6433V#000e#000m大丈夫そうだね……")
	WaitPrompt()
	WaitCloseWindow()

	//　　ダーナに！エモーション。
	EmotionEx("DANA", 0.00f, EMO_EX, 0, 5, 1, 1, 0.8f)	//！
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SUP_S, 1)	// 目
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_OPEN_S, 1)	// 口
	Wait(40)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -403.988f , 893.216f , 11.857f , 50 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 0.818f , 50 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -5.638f , 50 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 266.579f , 50 )

	Blur(BLUR_TYPE_EXPAND,0.55f , 15 )
	PlaySE(SE_KAKO_6_01, 100, 0, 0, 0, 1.0f, 0)
	PlaySE(SE_KAKO_6_02, 80, 0, 0, 0, 1.0f, 0)

	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_SAD_CLOSE_S,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_TAME_S,1)

	//Portrait_Anime(0 ,PR_ANIME_SCALE, 30.0f, 17.0f, 0, 0, 0)
	//Portrait_Anime(0 ,PR_ANIME_COLOR, 1.0f, 0.0f, 0.0f, 1.0f, 10)

	//　　ダーナは膝をつく。
	ChangeAnimation( "DANA" , "ANI_EV_ZUTUU_SHAGAMI_S", -1 , 1 )
	WaitAnimation2( "DANA" , -1, 1, "ANI_EV_ZUTUU_SHAGAMI_S",  0)

	// ダーナ
	TalkMes("DANA",
		"#6434V#061e#110mうっ……")
	WaitPrompt()
	WaitCloseWindow()	


	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	//　　画面が赤く染まる演出。

	Look("DANA", 0.0f, -10.0f)	// うつむく
	Wait(10)

	// ダーナ
	TalkMes("DANA",
		"#6435V#062e#110mはぁ……はぁ……",
		"……今視えた予知は……")
	WaitPrompt()

	TalkMes("DANA",
		"#6436V#0L#061e#000m…………………………………………")
	WaitPrompt()
	WaitCloseWindow()

	Look("DANA", 0.0f, 0.0f)	// うつむく戻す
	Wait(10)

	// ダーナ
	TalkMes("DANA",
		"#6437V#062e#000m#0L（……まだ泣いては駄目……",
		"　ここで立ち止まるわけには……！）")
	WaitPrompt()
	WaitCloseWindow()

	//	声
	SetName("声")
	TalkMes("man1",
		"#6438V#000e#000mオイ見ろ！　あれじゃないか？")
	WaitPrompt()
	WaitCloseWindow()
	SetName("")

	EarthQuake( 0.02f , 0.02f , 10 )	// 縦揺れ幅, 横揺れ幅, 時間

	//	声
	SetName("声")
	TalkMes("man2",
		"#6439V#18S#000e#000mいたぞ、巫女だ！",
		"#18S大樹の巫女だぞッ！！")
	WaitPrompt()
	WaitCloseWindow()
	SetName("")

	// ダーナ
	TalkMes("DANA",
		"#6440V#062e#200m#0L（……しまった──！）")
	WaitPrompt()
	WaitCloseWindow()

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	// カット2 ----------------------------------------------------------------------------------------

	//　　暗転を挟んで、ダーナの周りに
	//　　人が集まってきている状態に。
	
	MoveCameraAt( 0 , -404.940f , 892.130f , 12.227f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.298f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 0.057f , 0 )	// 基本仰角
	RotateCamera( 0 , 21.245f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 2000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	SetChrPos("DANA",-404.81f,892.11f,11.07f)
	Turn("DANA",156.52f,360.0f)
	ChangeAnimation( "DANA" , "ANI_WAIT", -1 , 1 )
	LookReset("DANA")

	SetChrWork("Rastell", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Rastell",-410.21f, 894.00f, 11.07f)
	Turn("Rastell",-66.16f,360.0f)
	ChangeAnimation( "Rastell" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("Rastell",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("Rastell",SUBMOT_MOUTH,ANI_M_WAIT,1)
//	ChangeSubAnimation("Rastell",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "Rastell" )
	SetChrInfoFlag( "Rastell" , INFOFLAG_NOCHRATARI)

	SetChrWork("Cryo", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Cryo",-405.74f,896.35f,11.07f)
	Turn("Cryo",-15.98f,360.0f)
	ChangeAnimation( "Cryo" , "ANI_EV_STWAIT", -1 , 1 )
	ChangeSubAnimation("Cryo",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("Cryo",SUBMOT_MOUTH,ANI_M_WAIT,1)
//	ChangeSubAnimation("Cryo",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "Cryo" )
	SetChrInfoFlag( "Cryo" , INFOFLAG_NOCHRATARI)

	Wait(5)

	SetChrWork("Anthea", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Anthea",-407.70f, 895.74f, 11.07f)
	Turn("Anthea",-35.85f,360.0f)
	ChangeAnimation( "Anthea" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("Anthea",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("Anthea",SUBMOT_MOUTH,ANI_M_WAIT,1)
//	ChangeSubAnimation("Anthea",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "Anthea" )
	SetChrInfoFlag( "Anthea" , INFOFLAG_NOCHRATARI)

	SetChrWork("man1", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("man1",-407.97f, 894.46f, 11.07f)
	Turn("man1",-50.24f,360.0f)
	ChangeAnimation( "man1" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("man1",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("man1",SUBMOT_MOUTH,ANI_M_WAIT,1)
//	ChangeSubAnimation("man1",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "man1" )
	SetChrInfoFlag( "man1" , INFOFLAG_NOCHRATARI)

	Wait(5)

	SetChrWork("man2", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("man2",-409.30f, 892.33f, 11.07f)
	Turn("man2",-80.07f,360.0f)
	ChangeAnimation( "man2" , "ANI_EV_STWAIT", -1 , 1 )
	ChangeSubAnimation("man2",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("man2",SUBMOT_MOUTH,ANI_M_WAIT,1)
//	ChangeSubAnimation("man2",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "man2" )
	SetChrInfoFlag( "man2" , INFOFLAG_NOCHRATARI)

	Wait(5)

	SetChrWork("man3", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("man3",-407.31f, 896.75f, 11.07f)
	Turn("man3",-26.64f,360.0f)
	ChangeAnimation( "man3" , "ANI_EV_STWAIT", -1 , 1 )
	ChangeSubAnimation("man3",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("man3",SUBMOT_MOUTH,ANI_M_WAIT,1)
//	ChangeSubAnimation("man3",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "man3" )
	SetChrInfoFlag( "man3" , INFOFLAG_NOCHRATARI)

	SetChrWork("woman1", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("woman1",-410.16f, 894.32f, 11.07f)
	Turn("woman1",-65.72f,360.0f)
	ChangeAnimation( "woman1" , "ANI_EV_STWAIT", -1 , 1 )
	ChangeSubAnimation("woman1",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("woman1",SUBMOT_MOUTH,ANI_M_WAIT,1)
//	ChangeSubAnimation("woman1",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "woman1" )
	SetChrInfoFlag( "woman1" , INFOFLAG_NOCHRATARI)

	Wait(5)

	SetChrWork("woman2", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("woman2",-411.00f, 893.28f, 11.07f)
	Turn("woman2",-76.38f,360.0f)
	ChangeAnimation( "woman2" , "ANI_EV_TEKOSI", -1 , 1 )
	ChangeSubAnimation("woman2",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("woman2",SUBMOT_MOUTH,ANI_M_WAIT,1)
//	ChangeSubAnimation("woman2",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "woman2" )
	SetChrInfoFlag( "woman2" , INFOFLAG_NOCHRATARI)

	SetChrWork("man4", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("man4",-412.92f, 894.87f, 11.07f)
	Turn("man4",-68.00f,360.0f)
	ChangeAnimation( "man4" , "ANI_EV_STWAIT", -1 , 1 )
	ChangeSubAnimation("man4",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("man4",SUBMOT_MOUTH,ANI_M_WAIT,1)
//	ChangeSubAnimation("man4",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "man4" )
	SetChrInfoFlag( "man4" , INFOFLAG_NOCHRATARI)

	Wait(5)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -405.338f , 891.990f , 12.607f , 63 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.298f , 63 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -3.380f , 63 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 12.072f , 63 )

	// フェードイン
	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	ChangeAnimation( "man1", "ANI_EV_TEKOSI_S", -1, 1 )	// 片手腰

	//	男
	TalkMes("man1",
		"#6441V#000e#000m巫女様、なぜ逃げ回るんで？","巫女2行目")
	WaitPrompt()

	TalkMes("man1",
		"#6442Vやっぱりやましい事があんだな。",
		"アア！？")
	WaitPrompt()
	WaitCloseWindow()

	TalkMes("Cryo",
		"#6443V#000e#000mそういやあんた、巫女のくせに",
		"よく街をウロウロしてたよなァ。")
	WaitPrompt()

	TalkMes("Cryo",
		"#6444V子供と遊んだり、",
		"市場なんかに出入りしたり……")
	WaitPrompt()

	TalkMes("Cryo",
		"#6445V自分の役目を軽んじやがって！",
		"だからこんな事になっちまったんだ！！")
	WaitPrompt()
	WaitCloseWindow()


	ChangeSubAnimation("man3", SUBMOT_EYE, ANI_E_MAJI_S, 1)	// 目

	//	青年
	TalkMes("man3",
		"#6446Vそうだ、あんたが凶星を呼んだんだ！",
		"この魔女めッ！！")
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "Anthea", "ANI_EV_TEBURI", -1, 1 )	// 手振り

	TalkMes("Anthea",
		"#6447V#000e#000m娘を……娘を返して……！",
		"ミーアはあなたが殺したのよッ……！")
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て

	// ダーナ
	TalkMes("DANA",
		"#6448V#000e#000m皆さん、落ち着いてください……！")
	WaitPrompt()
	TalkMes("DANA",
		"#6449V私は決してそのような事は……！")
	WaitPrompt()
	WaitCloseWindow()

	//	冷めた声
	SetName("冷めた声")
	TalkMes("Rastell",
		"#6450V無かったと本当に言いきれますか？")
	WaitPrompt()
	WaitCloseWindow()
	SetName("")

	//　　群衆の間からラステルが現れる
	//　　ダーナに「！」エモーション表示。
	
	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -405.442f , 891.978f , 12.507f , 58 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.778f , 58 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -1.088f , 58 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 51.038f , 58 )

	// 移動
	ExecuteCmd(1, MoveTo, "Rastell", -406.79f, 892.80f, 11.07f, 0.1f, 0.18f)
	
	Wait(30)
	EmotionEx("DANA", -0.002f, EMO_EX, 0, 5, 1, 1, 0.8f )	// 「！」
	LookChr("DANA", "Rastell")
	
	WaitThread(1)

	// ダーナ
	TalkMes("DANA",
		"#6451V#000e#000mラステル！？　あなた……")
	WaitPrompt()
	WaitCloseWindow()

	// カット3 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_FAST)

	// カメラ
	MoveCameraAt( 0 , -406.288f , 892.724f , 12.767f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.618f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 5.895f , 0 )	// 基本仰角
	RotateCamera( 0 , 234.183f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 2000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -406.288f , 892.724f , 12.767f , 450 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.098f , 450 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 11.337f , 450 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 222.146f , 450 )

	// フェード待ち
	Wait(FADE_FAST)

	// ラステル
	TalkMes("Rastell",
		"#6452V#000e#000m巫女様、答えてください。",
		"なぜこんな事になったんです。")
	WaitPrompt()

	TalkMes("Rastell",
		"#6453Vどうしてエタニアを……",
		"僕たちを守ってくれなかったんだ！！")
	WaitPrompt()
	WaitCloseWindow()

	// ダーナ
	TalkMes("DANA",
		"#6454V#050e#000mラステル……")
	WaitPrompt()
	WaitCloseWindow()

	Look("Rastell", 0.0f, -15.0f)	// うつむく
	
	// ラステル
	TalkMes("Rastell",
		"#6455V……父の遺体が見つかりました。")
	WaitPrompt()

	TalkMes("Rastell",
		"#6456V星によって穿たれた",
		"あの大穴の近くで……！")
	WaitPrompt()
	WaitCloseWindow()

	//　　ダーナに！！エモーション
	EmotionEx("DANA", 0.00f, EMO_EX2, 0, 5, 1, 1, 1.0f)	//！！

	//　　目を見開いて動揺する。
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SUP_S, 1)	// 目
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_SUP_S, 1)	// 口
	Wait(40)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SUP_E, 1)	// 目
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_SUP_E, 1)	// 口

	LookReset("DANA")
	Look("DANA", 0.0f, -10.0f)	// うつむく
	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_E", -1, 1 )	// 手胸当て

	// ダーナ
	TalkMes("DANA",
		"#6457V#061e#000mドランが！？")
	WaitPrompt()

	TalkMes("DANA",
		"#6458V#062e#000mそう……でしたか……")
	WaitPrompt()
	WaitCloseWindow()

	// ラステル
	TalkMes("Rastell",
		"#6459V#0L……………………………………")
	WaitPrompt()
	WaitCloseWindow()

	//　　 ダーナ、悲しみを収めて
	//　　 静かにラステルと向き合う	
	
	
	// カット4 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_CROSS)
	
	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	ChangeSubAnimation("Rastell",SUBMOT_EYE,ANI_E_MAJI,1)
	
	// カメラ
	MoveCameraAt( 0 , -404.920f , 892.380f , 12.607f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.378f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -5.582f , 0 )	// 基本仰角
	RotateCamera( 0 , 89.146f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 2000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -404.920f , 892.380f , 12.607f , 600 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.378f , 600 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -6.442f , 600 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 98.875f , 600 )
	
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SAD_CLOSE_E, 1)	// 目
	Turn("DANA", 109.22f, 360.0f)
	LookChr("DANA", "Rastell")
	LookChr("Rastell", "DANA")

	// フェード待ち
	Wait(FADE_CROSS)
	Wait(10)
	
	// ダーナ
	TalkMes("DANA",
		"#6460V#050e#000mラステル、私はまだあなたの",
		"問いに答えることができません。")
	WaitPrompt()
	
	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て
	
	// ダーナ
	TalkMes("DANA",
		"#6461V#061e#000mでも、何よりも知りたい。",
		"巫女として、彼らの友人として。","友人2行目")
	WaitPrompt()

	TalkMes("DANA",
		"#6462V#062e#000m彼らがなぜ命を",
		"落とさねばならなかったのか……")
	WaitPrompt()	
	
	// ダーナ
	TalkMes("DANA",
		"#6463V#052e#000mそして、どうすればエタニアを……",
		"みんなを救えるのかを。")
	WaitPrompt()
	WaitCloseWindow()

	
	//　　ラステルに！エモーション。
	EmotionEx("Rastell", 0.05f, EMO_EX, 0, 5, 1, 1, 1.0f)	//！
	ChangeSubAnimation("Rastell",SUBMOT_EYE,ANI_E_SUP_S,1)
	Wait(40)

	// ラステル
	TalkMes("Rastell",
		"#6464V#011e#000m………巫女、様………")
	WaitPrompt()
	WaitCloseWindow()

	// カット4 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_FAST)

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	// カメラ
	MoveCameraAt( 0 , -404.935f , 892.216f , 12.607f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.138f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 1.024f , 0 )	// 基本仰角
	RotateCamera( 0 , 266.556f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 2000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -404.935f , 892.216f , 12.647f , 450 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.168f , 450 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -4.991f , 450 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 289.175f , 450 )

	// フェード待ち
	Wait(FADE_FAST)

	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_E", -1, 1 )	// 両手胸当て

	// ダーナ
	TalkMes("DANA",
		"#6465V#011e#000mまだ希望はついえていません。")
	WaitPrompt()

	Look("DANA", 0.0f, -10.0f)	// うつむく

	// ダーナ
	TalkMes("DANA",
		"#6466V#000m私は大樹の巫女ダーナ。",
		"人々を守り、エタニアを導く存在。")
	WaitPrompt()
	
	Look("DANA", 0.0f, 0.0f)	// うつむく

	// ダーナ
	TalkMes("DANA",
		"#6467V#012e#000mその使命を一時たりとも",
		"忘れたことはありません。")
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て

	// ダーナ
	TalkMes("DANA",
		"#6468V#011e#000m例えこの命尽きようとも、"
		"真実を知らなくてはならないのです。")
	WaitPrompt()
	WaitCloseWindow()
	
	//Blur(BLUR_TYPE_EXPAND, 0.2f, 15)	//ブラー
	EarthQuake( 0.02f , 0.02f , 5 )	// 縦揺れ幅, 横揺れ幅, 時間
	
	// ダーナ
	TalkMes("DANA",
		"#6469V#030e#000mさあ、ここを通してください！")
	WaitPrompt()
	WaitCloseWindow()

	// カット5 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_CROSS)

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	// カメラ
	MoveCameraAt( 0 , -405.446f , 894.085f , 12.567f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.818f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -6.136f , 0 )	// 基本仰角
	RotateCamera( 0 , 59.236f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 2000.000f )			// ZPlane
	RollCamera( 0 , 0.6f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -405.152f , 894.539f , 12.567f , 300 )

	// フェード待ち
	Wait(FADE_CROSS)

	ChangeAnimation( "man1", "ANI_EV_TEKOSI_E", -1, 1 )	// 片手腰
	ChangeSubAnimation("man1", SUBMOT_EYE, ANI_E_MAJI_S, 1)	// 目

	//	男性
	TalkMes("man1",
		"#6470Vくっ……")
	WaitPrompt()
	WaitCloseWindow()

	WaitAnimation2( "man1" , -1, 1, "ANI_EV_TEKOSI_E",  0)
	ChangeAnimation( "man1" , "ANI_EV_STWAIT_S", -1 , 1 )
	EarthQuake( 0.02f , 0.02f , 10 )	// 縦揺れ幅, 横揺れ幅, 時間

	TalkMes("man1",
		"#6471Vい、今更あんたの",
		"言うことなんて信じられるかよ！")
	WaitPrompt()
	WaitCloseWindow()


	ChangeSubAnimation("man3", SUBMOT_EYE, ANI_E_MAJI_S, 1)	// 目

	//	青年
	TalkMes("man3",
		"#6472Vそうだ、やっちまえ！")
	WaitPrompt()
	WaitCloseWindow()

	//　　気勢を上げる群衆。

	PlaySE(SE_KAKO_6_03, 60, 1, 500, 0, 1.0f, 0)		//やいのやいの

	// カット6 ----------------------------------------------------------------------------------------

	//　　ダーナの周りに石が飛んでくる。
	//　　なおも語りかけようとするダーナ。

	// クロスフェード
	CrossFade(FADE_CROSS)

	// カメラ停止
	StopThread(1000)

	// カメラ
	MoveCameraAt( 0 , -404.763f , 893.232f , 12.331f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.869f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -10.023f , 0 )	// 基本仰角
	RotateCamera( 0 , 168.266f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 2000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	LookReset("DANA")
	Turn("DANA", 148.30f, 360.0f)
	ChangeAnimation( "DANA", "ANI_EV_STWAIT", -1, 1 )	// 緊張待機
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SHOUT, 1)	// 目
	Look("DANA", 40.0f, -20.0f)	// ←（＾＾）


	SetChrPos("ev_eq4019_1", -405.37f, 895.93f, 13.35f)	// 石
	SetChrPos("ev_eq4019_2", -407.64f, 893.68f, 13.35f)	// 石
	SetChrPos("ev_eq4019_3", -406.75f, 896.32f, 13.35f)	// 石
	SetChrPos("ev_eq4019_4", -408.24f, 893.66f, 14.60f)	// 石

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -404.957f , 892.295f , 12.631f , 450 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE ,  1.389f , 450 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -7.401f , 450 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 226.152f , 450 )

	ExecuteFunc( 100 , "mp6201m1:SubEV_Past_06_Breakout_Stone" )

	// フェード待ち
	Wait(FADE_CROSS)

	PlaySE(SE_KAKO_6_06, 100, 1, 1000, 0, 1.0f, 0)

	Wait(30)
	HeadNo("DANA", 2, 25)	// キャラ, 回数, 速さ
	Wait(60)
	
	LookReset("DANA")
	ChangeAnimation( "DANA", "ANI_EV_STWAIT_E", -1, 1 )	// 緊張待機
	WaitAnimation2("DANA", -1, 1, "ANI_EV_STWAIT_E", 0)
	Wait(20)

	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て
	// ダーナ
	TalkMes("DANA",
		"#6473V#050e#000m皆さんの怒りはもっともです。")
	WaitPrompt()

	TalkMes("DANA",
		"#6474V#061e#000mですが──")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	// カット7 ----------------------------------------------------------------------------------------

	//　　１つの石がダーナの頭に直撃しそうになる。
	
	StopSE(SE_KAKO_6_03, 500)
	StopSE(SE_KAKO_6_06, 500)
	PlaySE(SE_KAKO_6_07, 30, 0, 200, 0, 1.0f, 0)

	// クロスフェード
	CrossFade(FADE_FAST)

	// 投石停止
	StopThread(100)
	StopEffect(-1,ALL,1)

	// 移動停止
	StopThread(1)
	StopThread(2)
	StopThread(3)
	StopThread(4)
	StopThread(5)
	StopThread(6)
	
	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	Slow(0.6)
	
	// カメラ
	MoveCameraAt( 0 , -404.766f , 892.471f , 12.651f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.439f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -17.454f , 0 )	// 基本仰角
	RotateCamera( 0 , 84.268f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 2000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Turn("DANA", 123.43f, 360.0f)
	SetChrPos("ev_eq4019_1",-100000.0f, 0.0f, 0.0f)
	SetChrPos("ev_eq4019_2",-100000.0f, 0.0f, 0.0f)
	SetChrPos("ev_eq4019_3",-100000.0f, 0.0f, 0.0f)

	// 移動
	ExecuteCmd(1, MoveToEx, "ev_eq4019_4", -405.44f, 892.48f, 12.74f, 0.1f, 0.50f, 0, 0)
	ExecuteCmd(2, MoveZ , "ev_eq4019_4" , 13.10f , 0 , INTERPOLATE_SPHERE  , 50 )
	Blur( BLUR_TYPE_AFTERIMAGE ,0.3f , 40 )	// 残像

	// フェード待ち
	Wait(FADE_FAST)
	
	LookChr("DANA", "ev_eq4019_4")
	Wait(10)

	//　　ここで暗転し、ガキンと石を弾くＳＥ。
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

	PlaySE(SE_KAKO_6_05, 120, 0, 0, 0, 1.0f, 0)
	PlaySE(SE_KAKO_6_08, 100, 0, 0, 0, 1.0f, 0)

	Slow(1.0)
	
	// カット8 ----------------------------------------------------------------------------------------

	//　　槍を構えたラステルがダーナを庇うように割って入っている。
	//　　まだラステルの表情は硬く、顔を伏せている。

	// カメラ
	MoveCameraAt( 0 , -405.786f , 893.336f , 11.856f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.139f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -0.651f , 0 )	// 基本仰角
	RotateCamera( 0 , 236.912f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 3.7f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	SetChrPos("ev_eq4019_4",-100000.0f, 0.0f, 0.0f)

	SetChrPos("DANA",-404.81f, 891.15f, 11.07f)
	Turn("DANA",155.41f,360.0f)
	LookChr("DANA", "Rastell")
	ChangeAnimation( "DANA", "ANI_EV_TEMUNE", -1, 1 )	// 手胸当て
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SUP, 1)	// 目
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_OPEN,1)

	SetChrPos("ev_eq4029",-405.64f, 892.90f, 11.07f)
	SetParent("ev_eq4029", "Rastell", "Null_Rhand")
	ChangeAnimation( "ev_eq4029" , "ANI_WAIT_c321", -1 , 1 )

	SetChrPos("Rastell",-405.64f, 892.90f, 11.07f)
	Turn("Rastell",146.71f,360.0f)
	LookReset("Rastell")
	ChangeSubAnimation("Rastell", SUBMOT_EYE, ANI_E_MAJI_S, 1)	// 目
	ChangeAnimation( "Rastell" , "ANI_EV_KENSEI_L", -1 , 1 )
	Look("Rastell", 0.0f, -10.0f)	// うつむく


	LookChr("man1", "Rastell")
	LookChr("man2", "Rastell")
	LookChr("man3", "Rastell")
	LookChr("Cryo", "Rastell")
	LookChr("Anthea", "Rastell")

	Wait(30)	//ちょっと間をおく

	// フェードイン
	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()
	
	Wait(10)

	// カメラ移動（Aイベント用）
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -405.895f , 893.168f , 12.516f , 65 )		// 注視点
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.139f , 65 )		// 基本距離
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 1.354f , 65 )		// 基本仰角
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 232.327f , 65 )		// 角度
	ExecuteCmd(1004, ChangeCameraPers, INTERPOLATE_SPHERE , 40.000f , 65 )		// 視野角
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , -6.9f , 65 )		// ロール回転


	// カメラ待ち（Aイベント用）
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	// ラステル
	TalkMes("Rastell",
		"#6475V#000e#000m……行ってください、巫女様。")
	WaitPrompt()
	WaitCloseWindow()

	// ダーナ
	TalkMes("DANA",
		"#6476V#050e#000mラステル……？")
	WaitPrompt()
	WaitCloseWindow()

	// カット9 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_FAST)

	// カメラ
	MoveCameraAt( 0 , -405.542f , 893.555f , 12.536f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.579f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -8.099f , 0 )	// 基本仰角
	RotateCamera( 0 , 28.579f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 位置調整・表情・モーション
	SetChrPos("DANA", -404.21f, 891.29f, 11.07f)
	Turn("DANA", 155.41f 360.0f)
	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_E", -1, 1 )	// 手胸当て

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -405.542f , 893.555f , 12.536f , 450 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.579f , 450 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -7.239f , 450 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 36.884f , 450 )

	// フェード待ち
	Wait(FADE_FAST)

	//	男
	TalkMes("man1",
		"#6477V#000e#000mオ、オイッ！　なんで邪魔をするッ！")
	WaitPrompt()
	WaitCloseWindow()

	TalkMes("Cryo",
		"#6478V#000e#000m巫女の肩を持つ気か？",
		"そいつはお前の親父を殺したんだぞ！！")
	WaitPrompt()
	WaitCloseWindow()

	// ラステル
	TalkMes("Rastell",
		"#6479V#000e#000mあの日、父と言葉を",
		"交わすことはできなかった……")
	WaitPrompt()

	TalkMes("Rastell",
		"#6480Vでも、父のことだから自らの使命を",
		"全うして死んでいったに違いない。")
	WaitPrompt()
	WaitCloseWindow()
	
	// カット10 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_CROSS)
	
	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	
	// カメラ
	MoveCameraAt( 0 , -405.586f , 893.075f , 12.476f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.619f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -3.231f , 0 )	// 基本仰角
	RotateCamera( 0 , 168.674f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	
	// フェード待ち
	Wait(FADE_CROSS)
	
	
	Look("Rastell", 0.0f, -10.0f)	// うつむく
	
	// ラステル
	TalkMes("Rastell",
		"#6481V#011e#000mだったら僕は父と同じように",
		"生きようとする、この人を守る……")
	WaitPrompt()
	WaitCloseWindow()

	Look("Rastell", 0.0f, 0.0f)	// うつむく戻す
	ChangeSubAnimation("Rastell", SUBMOT_EYE, ANI_E_CLOSE_E, 1)	// 目
	Wait(15)

	ChangeSubAnimation("Rastell", SUBMOT_EYE, ANI_E_MAJI_S, 1)	// 目

	//Blur(BLUR_TYPE_EXPAND, 0.2f, 15)	//ブラー
	EarthQuake( 0.05f , 0.05f , 10 )	// 縦揺れ幅, 横揺れ幅, 時間

	// ラステル
	TalkMes("Rastell",
		"#6482V#18S自分が守ると決めたものを",
		"#18S最期まで守ってみせるっ！！")
	WaitPrompt()
	WaitCloseWindow()

	// カット11 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_CROSS)

	// カメラ
	MoveCameraAt( 0 , -407.078f , 894.249f , 12.656f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.579f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -7.528f , 0 )	// 基本仰角
	RotateCamera( 0 , 8.533f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// フェード待ち
	Wait(FADE_CROSS)

	//	青年
	TalkMes("man3",
		"#6483V#000e#000mテメェ……裏切りやがったな！",
		"やっちまえ！！")
	WaitPrompt()
	WaitCloseWindow()

	//　　気勢を上げる群衆。

	PlaySE(SE_KAKO_6_03, 70, 1, 500, 0, 1.0f, 0)		//やいのやいの

	// カット12 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_CROSS)
	
	// カメラ
	MoveCameraAt( 0 , -404.977f , 892.199f , 12.536f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.339f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -1.509f , 0 )	// 基本仰角
	RotateCamera( 0 , 196.170f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -405.166f , 892.348f , 12.536f, 600 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.339f , 600 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -1.509f , 600 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 182.705f , 600 )

	// フェード待ち
	Wait(FADE_CROSS)
	
	// ラステル
	TalkMes("Rastell",
		"#6484V#000e#000mあまり長くは持ちません。",
		"さあ、早く……！")
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て

	// ダーナ
	TalkMes("DANA",
		"#6485V#061e#000mでも……！")
	WaitPrompt()
	WaitCloseWindow()

	HeadNo("Rastell", 1, 25)	// キャラ, 回数, 速さ

	// ラステル
	TalkMes("Rastell",
		"#6486V#011e#000m僕なら大丈夫です。")
	WaitPrompt()

	TalkMes("Rastell",
		"#6487V#020e#080mあの時の約束……",
		"今ここで果たさせてください。")
	WaitPrompt()
	WaitCloseWindow()

	//　　笑ってみせるラステル。

	//　　それを見てダーナもうなずき返す。
	HeadYes("DANA" , 1 , 25)
	//ChangeSubAnimation("Rastell", SUBMOT_EYE, ANI_E_LAUGH_E, 1)	// 目

	// ダーナ
	TalkMes("DANA",
		"#6488V#062e#000m私も約束します。",
		"必ず謎を解いて戻ってくると！")
	WaitPrompt()
	WaitCloseWindow()

	ChangeSubAnimation("Rastell", SUBMOT_EYE, ANI_E_MAJI, 1)	// 目
	EarthQuake( 0.02f , 0.02f , 10 )	// 縦揺れ幅, 横揺れ幅, 時間
	
	TalkMes("Rastell",
		"#6489V#18Sはいっ！")
	WaitPrompt()
	WaitCloseWindow()

	// カット10 ----------------------------------------------------------------------------------------

	//　　ダーナは寺院の方へ駆けてゆく。

	// クロスフェード
	CrossFade(FADE_NORMAL)
	
	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	// カメラ
	MoveCameraAt( 0 , -405.835f , 892.465f , 12.316f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.699f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 2.394f , 0 )	// 基本仰角
	RotateCamera( 0 , 226.155f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 位置調整・表情・モーション
	SetChrPos("DANA", -404.21f, 891.29f, 11.07f)
	Turn("DANA", -8.03f, 360.0f)
	LookReset("DANA")
	ChangeAnimation( "DANA", "ANI_WAIT", -1, 1 )	// 待機

	ChangeSubAnimation("Rastell",SUBMOT_EYE,ANI_E_CLOSE,1)

	// 移動
	SetMotSpd("DANA" ,-1 , 0.8f )	// モーションスピード変更
	ExecuteCmd(1, MoveTo, "DANA", -384.86f, 847.29f, 11.09f, 0.1f, 0.60f)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -405.540f , 893.113f , 12.556f , 75 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.699f , 75 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 4.972f , 75 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 236.464f , 75 )

	// フェード待ち
	Wait(FADE_NORMAL)

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	EarthQuake( 0.02f , 0.02f , 10 )	// 縦揺れ幅, 横揺れ幅, 時間
	ChangeSubAnimation("Rastell",SUBMOT_EYE,ANI_E_MAJI_S,1)

	// ラステル
	TalkMes("Rastell",
		"#6490V#18S#000mドラン衛士長の息子、ラステル。",
		"#18S相手になるぞッ！！")
	WaitPrompt()
	WaitCloseWindow()

	//　　詰め寄る群集と押しとどめようとするラステル。
	//　　オートメッセージで以下を表示しつつ暗転。


	SetEnvSEPlayState(-1, 0)	//環境SE全停止
	StopSE(SE_KAKO_6_03, 3000)

	FadeOut(FADE_BLACK,FADE_SLOW)

	//	男
	TalkMes("man1",
		"#6491V#18S巫女が逃げるぞ！！")

	Wait(50)
	ClosePrompt()	//メッセージ強制閉じ
	WaitCloseWindow()

	//	青年
	TalkMes("man2",
		"#6492V#18S邪魔をするなぁぁぁっ！！")
	Wait(50)
	ClosePrompt()	//メッセージ強制閉じ
	WaitCloseWindow()

	//　　そのまま以下に接続
	WaitFade()

//終了処理ここから----------------------------------------------------
	CallFunc("mp6201m1:SubEV_Past_06_Breakout_ED")
}
function "SubEV_Past_06_Breakout_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1)
	StopThread(2)
	StopThread(3)
	StopThread(4)
	StopThread(5)
	StopThread(6)
	StopThread(100)
	
	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
//	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	SetMotSpd("DANA" ,-1 , 1.0f )	// モーションスピード戻す

	SetFlag(SF_CHARANORECVSHADOW,0)	//キャラ影受ける

	// ポートレートリリース
	Portrait_Close(-1)
	Portrait_Unload(-1)

	StopEffect(-1,ALL,1)

	// エフェクトリリース
	ReleaseEffect("efx_ev06.ite")

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//SetDiaryCharaFlag(DRCHA_RASTELL,DRCHA_FLAG_INFO1,1)	//ラステル人物手帳 メモ１開封

	DelMapMarker( SMI_DANA_SYMBOL, PAGE_MF002, MARKER_SUBEV_PAST06_6, 0, 0)	// 過去編Ⅵ：「【サブイベント：中央区を突破する】」の場所用②

	SetFlag(SF_NOCHANGEBGM, 1)
	SoundEfx( SEFX_HILL, 15 )

	SetFlag( TF_LOADING_TIPS_OFF, 1 )	//NowLoading 時の Tips 表示をカット
	LoadArg("map/mp6212m/mp6212m.arg")
	EventCue("mp6212m:SubEV_Past_06_Gate")		// 過去編Ⅵ：【サブイベント：山門で修道女たちに見送られる】

	ResetStopFlag(STOPFLAG_EVENTIMPOSE)
	
//終了処理ここまで----------------------------------------------------
}

function "SubEV_Past_06_Breakout_Stone"
{
	
	while(1) {
		
		
//		SetChrPos("ev_eq4019_1", -405.37f, 895.93f, 13.35f)	// 石
//		SetChrPos("ev_eq4019_2", -407.64f, 893.68f, 13.35f)	// 石
//		SetChrPos("ev_eq4019_3", -406.75f, 896.32f, 13.35f)	// 石

//		ExecuteCmd(1, MoveToEx, "ev_eq4019_1", -405.18f, 888.78f, 11.12f, 0.1f, 0.50f, 0, 0)
//		ExecuteCmd(2, MoveZ , "ev_eq4019_1" , 11.12f , 0 , INTERPOLATE_SPHERE  , 60 )
		Effect2( 3690000, -405.37f, 895.93f, 13.35f, 0.00f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.0f, 1.0f)
		PlaySE(SE_KAKO_6_04, 40, 0, 0, 0, 1.0f, 0)
		Wait(30)
//		ExecuteCmd(3, MoveToEx, "ev_eq4019_2", -401.92f, 891.36f, 11.37f, 0.1f, 0.50f, 0, 0)
//		ExecuteCmd(4, MoveZ , "ev_eq4019_2" , 11.37f , 0 , INTERPOLATE_SPHERE  , 60 )
		Effect2( 3690000, -407.64f, 893.68f, 13.35f, -40.00f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.0f, 1.0f)
		PlaySE(SE_KAKO_6_04, 30, 0, 0, 0, 1.0f, 0)
		Wait(40)
		PlaySE(SE_KAKO_6_04, 40, 0, 0, 0, 1.0f, 0)
//		ExecuteCmd(5, MoveToEx, "ev_eq4019_3", -403.88f, 884.53f, 11.12f, 0.1f, 0.50f, 0, 0)
//		ExecuteCmd(6, MoveZ , "ev_eq4019_3" , 11.12f , 0 , INTERPOLATE_SPHERE  , 80 )
		Effect2( 3690000, -406.75f, 896.32f, 13.35f, -30.00f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.0f, 1.0f)
		PlaySE(SE_KAKO_6_04, 35, 0, 0, 0, 1.0f, 0)
		Wait(20)
//		WaitThread(1)
//		WaitThread(2)
//		WaitThread(3)
//		WaitThread(4)
		PlaySE(SE_KAKO_6_04, 20, 0, 0, 0, 1.0f, 0)
//		WaitThread(5)
//		WaitThread(6)
		
	}
	
	
}


////////////////////////////////////////////////////////////////////////////////

//■ストッパー・ＬＰセクション

////////////////////////////////////////////////////////////////////////////////
//──────────────────────────────
//	【ストッパー：西街道→王都方面へ行けない】
//──────────────────────────────
function "Stopper_Past_05_01"
{
	//	mp6201m1	-607.81f	961.81f	11.09f	-89.36f付近

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅴ王家の谷へ向かう
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000m（今は戻るわけには……）\p"
		"（もし地下聖堂を調べるなら"
		"　転位で向かおうかな。）"
	}
	WaitPrompt()
	WaitCloseWindow()

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-612.12f,962.92f,11.09f)
	Turn("LEADER",96.30f,360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	WaitFade()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

function "SubEV_Past_06_Path2"
{
	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK, 0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定				
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)
	SetChrPos("DANA",-365.73f,981.84f,7.82f)
	Turn("DANA",64.90f,360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	SetChrInfoFlag("DANA", INFOFLAG_NOATARI)
	Look("DANA" , 0 , 15 )

	//カメラ設定
	MoveCameraAt( 0 , -365.818f , 981.054f , 10.050f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.938f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 16.948f , 0 )	// 基本仰角
	RotateCamera( 0 , 113.892f , 0 )				// 角度
	ChangeCameraPers( 0 , 44.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転


	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 1.000, 64.000 ,0.000 ,0.650 ,0.500)

	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp6201m1:SubEV_Past_06_Path2_ED")

	//開始処理ここまで-----------------------------------------------

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -365.818f , 981.054f , 14.019f, 140 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 7.938f , 140 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 17.899f , 140 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,  93.079f ,  140 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , -3.6f, 160 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 160 )		// 視野角

	//MoveCameraAt( 0 , -365.818f , 981.054f , 14.019f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 7.938f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 17.899f , 0 )	// 基本仰角
	//RotateCamera( 0 , 93.079f , 0 )				// 角度
	//ChangeCameraPers( 0 , 44.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転

	ChangeAnimation("DANA", "ANI_OKIAGARI", -1, 1)

	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()


	Wait(60)

//	Wait(10)


	FadeOut(FADE_BLACK, FADE_FAST)
	WaitFade()
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	//◆着地SE？
	PlaySE(SE_KAKO_6_16, 100, 0, 0, 0, 1.0f, 0)
	PlaySE(SE_KAKO_6_17, 20, 0, 0, 0, 1.0f, 0)

	ChangeAnimation("DANA", "ANI_EV_SHAGAMI", -1, 1)

	ResetChrInfoFlag("DANA", INFOFLAG_NOATARI)
	SetChrPos("DANA",-375.42f,975.56f,10.89f)
	Turn("DANA",35.89f,360.0f)
	LookReset("DANA")

	MoveCameraAt( 0 , -375.716f , 975.387f , 12.515f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.191f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -1.253f , 0 )	// 基本仰角
	RotateCamera( 0 , 101.006f , 0 )				// 角度
	ChangeCameraPers( 0 , 43.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -375.716f , 975.387f , 12.515f , 200 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE ,  3.191f, 200 )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -1.253f , 200 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 165.576f,  200 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , -3.6f, 200 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 200 )		// 視野角

	//MoveCameraAt( 0 , -375.716f , 975.387f , 12.515f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 3.191f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -1.253f , 0 )	// 基本仰角
	//RotateCamera( 0 , 165.576f , 0 )				// 角度
	//ChangeCameraPers( 0 , 43.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転

	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	Wait(10)

	ChangeAnimation("DANA", "ANI_EV_SHAGAMI_E", -1, 1)
	WaitAnimation2( "DANA" , -1, 1, "ANI_EV_SHAGAMI_E",  0)

	Wait(10)

	LookSpd("DANA",0.1f,0.1f,0.1f)
	Look("DANA" , 30 , 0 )

	TalkPopup("DANA",0,0,0,0,0)
	{
		"#000e#000m（ふう……何とか"
		"　中央区に来れたみたい。）\p"
		"（王都西側の橋は崩落しているから"
		"　大回りしないと……）"
	}
	WaitPrompt()
	WaitCloseWindow()

	Look("DANA", -25, 0 )

	TalkPopup("DANA",0,0,0,0,0)
	{
		"（まずは南にある"
		"　寺院の山門へ向かおう！）"
	}
	WaitPrompt()
	WaitCloseWindow()

//	MoveCameraAt( 0 , -375.853f , 977.483f , 12.763f , 0 )	// 注視点
//	ChangeCameraDistance( 0 , 3.071f , 0 )		// 基本距離
//	ChangeCameraElevation( 0 , -12.747f , 0 )	// 基本仰角
//	RotateCamera( 0 , 19.366f , 0 )				// 角度
//	ChangeCameraPers( 0 , 43.000f , 0 )			// 視野角
//	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
//	RollCamera( 0 , 0.0f , 0 )				// ロール回転
//	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(10)


	FadeOut(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)


//終了処理ここから----------------------------------------------------
	CallFunc("mp6201m1:SubEV_Past_06_Path2_ED")
}

function "SubEV_Past_06_Path2_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_DANA")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	SetFlag(GF_SUBEV_PAST_06_PATH,1)	// 過去編Ⅵ：【サブイベント：中央区に抜ける】を見た
	//SetFlag( SF_MISSIONNO, MS_08_06C )		//★冒険メモ：寺院の山門から古ガンナ参道に入ろう

	//マーカー消去
	SetMapMarker( SMI_DANA_SYMBOL ,PAGE_MF002, MARKER_SUBEV_PAST06_6,  -340.245f , 747.160f , 11.086f, -340.245f , 747.160f,MARKER_SUBEV_PAST06_6,MN_F_MP6201M,0)		// 過去編Ⅵ：「【サブイベント：中央区を突破する】」の場所用②
	DelMapMarker( SMI_DANA_SYMBOL, PAGE_MF002, MARKER_SUBEV_PAST06_2, 0, 0)	// 過去編Ⅵ：「【サブイベント：中央区を突破する】」の場所用

	SetChrPos("LEADER",-379.00f, 973.13f, 11.07f)	//-375.42f,975.56f,10.89f)
	Turn("LEADER",15.66f, 360.0f)	//35.89f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

//	MoveCameraAt( 0 , -375.416f , 975.564f , 12.743f , 0 )	// 注視点
//	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
//	ChangeCameraElevation( 0 , 6.754f , 0 )	// 基本仰角
//	RotateCamera( 0 , -24.560f , 0 )				// 角度
//	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
//	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
//	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	MoveCameraAt( 0 , -379.000f , 973.130f , 12.939f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 14.000f , 0 )	// 基本仰角
	RotateCamera( 0 , 150.382f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	CallFunc("system:camera_reset")
	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK, FADE_FAST)
	//WaitFade()
//終了処理ここまで----------------------------------------------------

}
//──────────────────────────────
//	【ストッパー：中央区→東街区に戻れない】
//──────────────────────────────
function "Stopper_Past_06_04"
{

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅵセレンの園へ向かう
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000m（こっちじゃない……"
		"　セレンの園へ急がないと。）\p"
		"（まずは寺院に向かおう……！）"
	}
	WaitPrompt()
	WaitCloseWindow()

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-393.00f, 991.14f, 11.07f)
	Turn("LEADER",31.76f,360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	WaitFade()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}
//──────────────────────────────
//	【ストッパー：中央区→東街区に戻れない・瓦礫】
//──────────────────────────────
function "Stopper_Past_06_10"
{

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅵセレンの園へ向かう
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000m（………戻っている時間はないね。）\p"
		"（セレンの園へ急ごう。"
		"　まずは寺院に向かわないと……！）"
	}
	WaitPrompt()
	WaitCloseWindow()

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-379.60f, 975.92f, 11.07f)
	Turn("LEADER",50.08f,360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	WaitFade()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}


