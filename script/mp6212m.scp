#include "inc/mons.h"
#include "inc/def.h"
#include "inc/flag.h"
#include "inc/se.h"
#include "inc/scr_inc.h"
#include "inc/3dicon.h"
#include "inc/skilldef.h"
#include "inc/vo.h"
#include "inc/music.h"
#include "inc/efx.h"
#include "inc/temp/mp6401m.h"

//----------------------------------------------------------------------------//
//                                                                            //
// mp6212m    			                 			                         //
//                                                                            //
//----------------------------------------------------------------------------//
///////////////////////////////////////////////////////////////////////////////
// 初期化スクリプト
///////////////////////////////////////////////////////////////////////////////
//-------------------------------------------

function "init"
{
	
	// イベントエリア設定制御
	EventAreaEnable( "Stopper_Past_01_01" , 0 )	// 過去編Ⅰ：【ストッパー：山門内部→王都方面へ行けない】
	EventAreaEnable( "SubEV_Past_04_Cesil" , 0 )	// 過去編Ⅳ：【サブイベント：セシルと話す】


	if( FLAG[SF_EVENT_ON] )
	{
		//一般配置ファンクション呼び出し
		CallFunc("mp6212m:NpcPosition")

		// ストッパー制御
		if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
		{
			EventAreaEnable( "Stopper_Past_01_01" , 1 )	// 過去編Ⅰ：【ストッパー：山門内部→王都方面へ行けない】
		}

		//エントリー制御
		if( FLAG[GF_PAST_EPISODE_6_GO_GARDEN] )			//▼過去編Ⅵセレンの園へ向かう
		{
				//※エタニア崩壊後は、以下のエントリーの有効、無効を切り替えてください
				//02⇒無効
				//03⇒有効
			EntryOn(02,0)
			EntryOn(03,1)
		}

		//EBOX制御
		if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] && !FLAG[GF_SUBEV_PAST_04_CESIL])			//▼過去編Ⅳ王宮前へ向かう
		{
			EventAreaEnable( "SubEV_Past_04_Cesil" , 1 )	// 過去編Ⅳ：【サブイベント：セシルと話す】
		}

	}

	//サウンド制御
//	if (FLAG[GF_06MP6202M_GOTO_GARDEN] ){		// ６話以降
//		SetWork( WK_BGM , BGM_DUNGEON_902 )
//	}

	//マップ名表示
	if(!FLAG[SF_LOADINIT] && !FLAG[GF_MPxxxx_MAP_NAME_NO_DRAW] && !FLAG[TF_MAPNAME_SHOWN]){
		if( FLAG[SF_LASTENTRY_NO] == 0 || FLAG[SF_LASTENTRY_NO] == 2 ){
			VisualName("visual/mapname/mn_6212m.itp",VN_NAMEMAP2,-1,-1,VN_MAPNAME_TIME)//大樹の寺院・山門
			SetFlag( TF_MAPNAME_SHOWN, 1 )				// 地名表示した（テンポラリ）
		}
	}
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//■配置制御セクション

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function "NpcPosition"
{
	if( FLAG[GF_PAST_EPISODE_6_GO_GARDEN] )				//▼過去編Ⅵセレンの園へ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_5_GO_VALLAY] )		//▼過去編Ⅴ王家の谷へ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_4_2_GO_OUT] )			//▼過去編Ⅳ-２王宮の外へ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )		//▼過去編Ⅳ王宮前へ向かう
	{
		//----------------------上段--------------------------
		SetChrPos("Cesil",-291.67f	627.88f	66.90f)
		Turn("Cesil",170.13f,360.0f)
		ChangeAnimation("Cesil","ANI_EV_RYOTEMAE", -1 , 1 )

		SetChrPos("Sister_1_01",-282.67f	631.13f	66.90f)
		Turn("Sister_1_01",149.94f,360.0f)

		SetChrPos("Citizen_4_A01",-288.45f	639.36f	66.90f)
		Turn("Citizen_4_A01",-25.09f,360.0f)
		ChangeAnimation( "Citizen_4_A01", "ANI_EV_PRAY", -1, 1 )

		//----------------------中段--------------------------
		SetChrPos("Sister_1_02",-303.31f,653.67f,58.90f)
		Turn("Sister_1_02",159.25f,360.0f)

		SetChrPos("Citizen_4_A02",-298.18f,660.00f,58.90f)
		Turn("Citizen_4_A02",-17.05f,360.0f)

		SetChrPos("Citizen_4_A03",-305.45f	662.09f	58.90f)
		Turn("Citizen_4_A03",-2.84f,360.0f)

		SetChrPos("Citizen_4_A04",-306.91f,661.54f,58.90f)
		Turn("Citizen_4_A04",-43.08f,360.0f)
		LookChr("Citizen_4_A03","Citizen_4_A04")
		LookChr("Citizen_4_A04","Citizen_4_A03")

		//----------------------下段--------------------------
		SetChrPos("Sister_1_03",-303.63f,676.19f,51.00f)
		Turn("Sister_1_03",127.28f,360.0f)
		ChangeAnimation("Sister_1_03","ANI_EV_RYOTEMAE", -1 , 1 )

		SetChrPos("Darios",-313.48f,692.78f,50.90f)
		Turn("Darios",-22.60f,360.0f)

		SetChrPos("Citizen_4_A05",-316.65f,686.64f,50.90f)
		Turn("Citizen_4_A05",-22.81f,360.0f)

		SetChrPos("Citizen_4_A06",-311.52f,679.49f,51.00f)
		Turn("Citizen_4_A06",-19.94f,360.0f)

		SetChrPos("Citizen_4_A07",-308.26f,677.22f,51.00f)
		Turn("Citizen_4_A07",-22.76f,360.0f)
		ChangeAnimation( "Citizen_4_A07", "ANI_EV_PRAY", -1, 1 )

		SetChrPos("Citizen_4_A08",-307.30f,677.25f,51.00f)
		Turn("Citizen_4_A08",-18.92f,360.0f)
		ChangeAnimation( "Citizen_4_A08", "ANI_EV_PRAY", -1, 1 )

		SetChrPos("Citizen_4_A09",-323.21f	718.96f	42.90f)
		Turn("Citizen_4_A09",27.45f,360.0f)

		SetChrPos("Citizen_4_A10",-324.65f	719.24f	42.90f)
		Turn("Citizen_4_A10",-14.80f,360.0f)
		LookChr("Citizen_4_A09","Citizen_4_A10")
		LookChr("Citizen_4_A10","Citizen_4_A09")

	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )		//▼過去編Ⅱ南門へ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
		//----------------------上段--------------------------
		SetChrPos("Cesil",-291.67f	627.88f	66.90f)
		Turn("Cesil",170.13f,360.0f)
		ChangeAnimation("Cesil","ANI_EV_RYOTEMAE", -1 , 1 )

		SetChrPos("Sister_1_01",-282.67f	631.13f	66.90f)
		Turn("Sister_1_01",149.94f,360.0f)

		SetChrPos("Citizen_1_A01",-288.55f	637.32f	66.90f)
		Turn("Citizen_1_A01",-20.50f,360.0f)
		ChangeAnimation( "Citizen_1_A01", "ANI_EV_PRAY", -1, 1 )

		//----------------------中段--------------------------
		SetChrPos("Sister_1_02",-303.31f,653.67f,58.90f)
		Turn("Sister_1_02",159.25f,360.0f)

		SetChrPos("Citizen_1_A02",-299.09f,662.20f,58.90f)
		Turn("Citizen_1_A02",-23.58f,360.0f)

		SetChrPos("Citizen_1_A03",-304.97f,662.65f,58.90f)
		Turn("Citizen_1_A03",-23.59f,360.0f)

		SetChrPos("Citizen_1_A04",-306.03f,662.51f,58.90f)
		Turn("Citizen_1_A04",-23.59f,360.0f)

		//----------------------下段--------------------------
		SetChrPos("Sister_1_03",-303.63f,676.19f,51.00f)
		Turn("Sister_1_03",127.28f,360.0f)
		ChangeAnimation("Sister_1_03","ANI_EV_RYOTEMAE", -1 , 1 )

		SetChrPos("Citizen_1_A05",-308.13f,678.49f,51.00f)
		Turn("Citizen_1_A05",-27.10f,360.0f)
		ChangeAnimation("Citizen_1_A05","ANI_EV_PRAY", -1 , 1 )

		SetChrPos("Citizen_1_A06",-313.51f,684.27f,50.90f)
		Turn("Citizen_1_A06",-24.31f,360.0f)

		SetChrPos("Irake",-310.81f,692.69f,50.90f)
		Turn("Irake",-14.84f,360.0f)

		SetChrPos("Rikarita",-311.94f,692.75f,50.90f)
		Turn("Rikarita",-3.96f,360.0f)
		Look("Rikarita" , 0 , -17 )

	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )	//▼ダーナ編③王都を歩く
	{
	}
	else if( FLAG[GF_PAST_EPISODE_D1A_TEM] )			//▼ダーナ編①Ａ寺院内を歩く
	{
	}
}



//////////////////////////////////////////////////////////////////////
//■一般会話
//////////////////////////////////////////////////////////////////////

//──────────────────────────────
//	【修道女セシル】
//──────────────────────────────
function "Talk_Cesil"
{
	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		SetStopFlag(STOPFLAG_TALK)
		CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

		//	修道女セシル
		TalkPopup("this",0,0,0,0,0)
		{
			"収穫祭も終わったばかりですから、"
			"今日はどこも混雑していますわ。\p"
			"お二人とも、お気を付けなさいませ。"
			"大樹の導きがあらんことを。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//　　★ＧＦ初回
		if( !FLAG[GF_1STTALK_PAST_1_CESIL] )
		{
			//────────  一般・開始処理(過去編)  ──────────
			SetStopFlag(STOPFLAG_TALK2)
			//───────────────
			//	場所		：寺院山門（過去）
			//───────────────
			//	配置・カメラ：（参拝者の案内）
			//	モーション	：
			//───────────────
			SaveCamera()
			ChangeCameraPers( 0 , 60.000f , 0 )	// 視野角
			SetCameraZPlane( 0.100f , 200.000f )	// ZPlane
			RollCamera( 0 , 0.0f , 0 )		// ロール回転
			MoveCameraAt( 0 , -291.188f , 627.505f , 68.489f , 0 )	// 注視点
			MoveCamera( 0 , -290.578f , 627.202f , 68.542f , 0 )		// 視点
			// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

			//キャラ初期動作の記述
//			LookSpd("this", 1.0f, 1.0f, 1.0f)
//			LookTo("this", -472.80f	940.42f	12.2f )	// 首を正面に向ける

			ChangeSubAnimation("this",SUBMOT_MOUTH,ANI_M_SMILE,1)

			CallFunc("system:talkevent_begin")		//TALK_BEGIN
//			LookSpd("this", LOOKSPD_DEFAULT, LOOKSPD_DEFAULT, LOOKSPD_DEFAULT)
			//───────────────────────────────

			//　　ＰＡエモーション
			EmotionEx("this", 0.0f, EMO_PA, 0, 5, 1, 1, 1.0f )	// 「PA」
			Wait(30)
			ChangeAnimation("this","ANI_WAIT", -1 , 1 )		//リセット
			LookTo("this",-290.578f , 627.202f , 68.542f)	// 首を正面に向ける
			Turn("Cesil",-61.08f,8.0f)
			Wait(15)
			
			//	修道女セシル
			TalkPopup("this",0,0,0,0,0)
			{
				"#051e#080mあらダーナ様……"
				"今月はもう３回目ですよ？"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("DANA",0,3,160,236,0)		//一人称ダーナ：左
			{
				"#000e#000mコホン、今回は祭司長の"
				"許可をもらっておりますから。"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation("Cesil","ANI_EV_RYOTEMAE_S", -1 , 1 )

			//	修道女セシル
			TalkPopup("this",0,0,0,0,0)
			{
				"#021eクスクス……そうでしたか。"
				"では大手を振って歩けますね。\p"
				"#022e山門は今朝も"
				"参拝者で賑わっていますよ。\p"
				"#011eみなダーナ様を敬愛しています。"
				"どうかお声をかけてあげてください。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( GF_1STTALK_PAST_1_CESIL, 1 )
			CallFunc("system:talkevent_end_ps")		//TALK_END
			Turn("Cesil",170.13f,360.0f)
		}
		else
		{
			//　　★ＧＦ以降
			SetStopFlag(STOPFLAG_TALK)
			CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

			//	修道女セシル
			TalkPopup("this",0,0,0,0,0)
			{
				"この３年で、ダーナ様の予知は"
				"何度も人々を救ってきました。\p"
				"ですからみなダーナ様を"
				"敬愛しているのです。\p"
				"ふふ、どうか"
				"お声をかけてあげてくださいね。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【参拝者】
//──────────────────────────────
function "Talk_Citizen_1_A01"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		//	参拝者
		TalkPopup("this",0,0,0,0,0)
		{
			"この先にはじまりの大樹が"
			"あるのですね……\p"
			"大樹の恵みに感謝いたします。"
			"よき導きがあらん事を。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【参拝者】
//──────────────────────────────
function "Talk_Citizen_1_A02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		if( !FLAG[TF_TALK_MOB01] )
		{
			//　　ＰＡエモーションで振り返る
			EmotionEx("this", 0.05f, EMO_PA, 0, 5, 1, 1, 1.8f )	// 「PA」
			Wait(30)

			PlayVoice(Y8V_5749,"this",100)		//これは巫女様（呼びかけ）

			//	参拝者
			TalkPopup("this",0,0,0,0,0)
			{
				"こりゃあ、巫女様でしたか……！\p"
				"ははは、今日のわたくしは"
				"幸運でございますな。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　瞑目しつつ一礼する
			ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

			//	参拝者
			TalkPopup("this",0,0,0,0,0)
			{
				"ご尊顔、確かに……！"
				"ありがたき事でごさいます。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB01, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	参拝者
			TalkPopup("this",0,0,0,0,0)
			{
				"まさか朝から巫女様に"
				"お会いできるとは……"
				"ははは、今日は幸運でございますな。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　瞑目しつつ一礼する
			ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

			//	参拝者
			TalkPopup("this",0,0,0,0,0)
			{
				"ありがたき事でごさいます……！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)
}



//──────────────────────────────
//	【参拝者】
//──────────────────────────────
function "Talk_Citizen_1_A03"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		//　　★ＧＦ初回
		if( !FLAG[GF_1STTALK_PAST_1_MOB03] )
		{
			CallFunc("mp6212m:Talk_Citizen_1_A03_04")	//共通会話
		}
		else
		{
			//　　★ＧＦ以降
			//	参拝者
			TalkPopup("this",0,0,0,0,0)
			{
				"ありがたきお言葉……"
				"必ず伝えるといたします。\p"
				"ダーナ様、本当に"
				"ありがとうございました……！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)
}


function "Talk_Citizen_1_A03_04"
{

	LookChr("Citizen_1_A03","LEADER")
	LookChr("Citizen_1_A04","LEADER")
	TurnToChr("Citizen_1_A03","LEADER",10.0)
	TurnToChr("Citizen_1_A04","LEADER",10.0)

		PlayVoice(Y8V_5750,"this",100)		//ダーナ様（呼びかけ）

			//	参拝者
			TalkPopup("Citizen_1_A03",0,0,0,0,0)
			{
				"おお、ダーナ様……！？"
				"ダーナ様ではありませんか！\p"
				"昨年バラッカで起こるはずの大火を"
				"予知で防がれたとか……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　瞑目しつつ一礼する
			ChangeAnimation("Citizen_1_A03","ANI_EV_REI", -1 , 1 )
			Wait(5)
			ChangeAnimation("Citizen_1_A04","ANI_EV_REI", -1 , 1 )

			//	参拝者
			TalkPopup("Citizen_1_A03",0,0,0,0,0)
			{
				"本当にありがとうございます！"
				"お陰で両親が命拾いいたしました！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	参拝者
			TalkPopup("Citizen_1_A04",0,0,0,0,0)
			{
				"巫女様、本当に感謝いたします！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("DANA",0,0,0,0,0)
			{
				"#000e#000mそうでしたか……"
				"本当によかった。\p"
				"どうかこれからも"
				"お体を大事になさるよう"
				"お伝え下さい。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	参拝者
			TalkPopup("Citizen_1_A03",0,0,0,0,0)
			{
				"は、はい、それはもう……！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	参拝者
			TalkPopup("Citizen_1_A04",0,0,0,0,0)
			{
				"きっと両親も喜びます！"
				"ありがとうございました……！ "
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( GF_1STTALK_PAST_1_MOB03, 1 )

	ExecuteCmd( 1000, Turn,"Citizen_1_A03",-23.59f,10.0f)
	ExecuteCmd( 1001, Turn,"Citizen_1_A04",-23.59f,10.0f)
	LookReset("Citizen_1_A03")
	LookReset("Citizen_1_A04")
	WaitThread(1000)
	WaitThread(1001)

}


//──────────────────────────────
//	【参拝者】
//──────────────────────────────
function "Talk_Citizen_1_A04"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		//　　★ＧＦ初回

		if( !FLAG[GF_1STTALK_PAST_1_MOB03] )
		{
			CallFunc("mp6212m:Talk_Citizen_1_A03_04")	//共通会話
		}
		else
		{
			//　　★ＧＦ以降
			//	参拝者
			TalkPopup("this",0,0,0,0,0)
			{
				"まさか巫女様に直接お礼を"
				"お伝えできるなんて……！\p"
				"きっと両親も喜びます！"
				"ありがとうございました……！ "
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【参拝者】
//──────────────────────────────
function "Talk_Citizen_1_A05"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：下段で祈る
		//	モーション	：
		//───────────────
		//　　振り返らない
		//	参拝者
		TalkPopup("this",0,0,0,0,0)
		{
			"大いなる大樹よ、"
			"今日もよき導きを"
			"お与えくださいますよう……"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【参拝者】（老人）Citizen_1_A06
//──────────────────────────────
function "Talk_Citizen_1_A06"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────

		if( !FLAG[TF_TALK_MOB02] )
		{
			//	参拝者
			TalkPopup("this",0,0,0,0,0)
			{
				"王都民は、日々の礼拝を"
				"大樹に直接捧げられるのですな。\p"
				"いや、羨ましいですぞ。\p"
				"私の故郷は遠く、巡礼をしなければ"
				"辿り着けませぬのでなぁ。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB02, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	参拝者
			TalkPopup("this",0,0,0,0,0)
			{
				"せめて王都に滞在する間は"
				"礼拝に参るといたしましょうぞ。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【修道女】Sister_1_01
//──────────────────────────────
function "Talk_Sister_1_01"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：上段
		//	モーション	：
		//───────────────

		PlayVoice(Y8V_5762,"this",100)	//えーと

		//	修道女
		TalkPopup("this",0,0,0,0,0)
		{
			"そういえば、今日はウルグナータ様が"
			"寺院にいらしているようです。\p"
			"なんでも届け物を"
			"お持ちになったようで……\p"
			"ふう、あの方がいらっしゃると"
			"心なし緊張してしまいますね。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：上段・セシルの向かい
		//	モーション	：
		//───────────────
		//	修道女
		TalkPopup("this",0,0,0,0,0)
		{
			"巫女様……郊外へ向かわれるのですか？\p"
			"ここを上へ抜ければ"
			"参道に出ることができますが……\p"
			"コホン、その、どうかほどほどで"
			"お戻りになられますよう。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【修道女】Sister_1_02
//──────────────────────────────
function "Talk_Sister_1_02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：中段
		//	モーション	：
		//───────────────
		//　　振り向かない

		ChangeAnimation("this","ANI_EV_TEBURI", -1 , 1 )

		//	修道女
		TalkPopup("this",0,0,0,0,0)
		{
			"皆様、大いなる大樹に対しては"
			"決して理力を向けられませぬよう……\p"
			"それが許されているのは"
			"大樹の巫女、ただ一人なのですから。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}
	else if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：中段
		//	モーション	：
		//───────────────
		//　　振り返らない

		ChangeAnimation("this","ANI_EV_TEBURI", -1 , 1 )

		//	修道女
		TalkPopup("this",0,0,0,0,0)
		{
			"皆様、これより先は"
			"《はじまりの大樹》がおわす地にございます。\p"
			"どうか静粛に、順にお並びになって"
			"礼拝をお願い致します。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【修道女】Sister_1_03
//──────────────────────────────
function "Talk_Sister_1_03"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：下段
		//	モーション	：
		//───────────────
		//	修道女
		TalkPopup("this",0,0,0,0,0)
		{
			"収穫祭を観るために、地方から"
			"いらっしゃる方も多いのです。\p"
			"お話を聞くと、どこも大過に遭わず"
			"平和で実りある一年だったと。\p"
			"私どもとしても、"
			"これほど嬉しい事はありませんわ。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：下段
		//	モーション	：
		//───────────────
		//	修道女
		TalkPopup("this",0,0,0,0,0)
		{
			"朝の礼拝にいらした皆様に"
			"祝福を与えている所です。\p"
			"大いなる大樹よ、今日もエタニア王国に"
			"よき恵みをもたらさんことを……"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}



//──────────────────────────────
//	【イレーク】
//──────────────────────────────
function "Talk_Irake"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		//	イレーク
		TalkPopup("this",0,0,0,0,0)
		{
			"大樹の巫女様の予知のお陰で"
			"今年も豊作なんですよ。\p"
			"ふふ、農家としては"
			"これ以上の幸せはありません。\p"
			"さあ、仕事を始める前に"
			"しっかり祈りを捧げていかないと。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【リカリタ】
//──────────────────────────────
function "Talk_Rikarita"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
		//▼過去編Ⅰアドルがいたポイントへ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		//　　振り返らない
		//	リカリタ
//		TalkPopup("this",0,0,0,0,0)
//		{
//			"（朝のお祈り……"
//			"  兄ちゃんと毎日来てるけど……）\p"
//			"（やっぱり人が多いところは"
//			"  苦手だよう……）\p"
//			"（はぁ、地元の礼拝所なら"
//			"  平気なんだけどなぁ……）"
//		}
//		WaitPrompt()
//		WaitCloseWindow()

		//　　振り返らない
		//	リカリタ
		TalkPopup("this",0,0,0,0,0)
		{
			"#12S（大いなる大樹よ、お願いします……）\p"
			"#12S（私の口下手を治してください……）\p"
			"#12S（うう、毎朝お祈りしてるけど……"
			"#12S　いつになったらマシになるんだろ……）"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
	Look("Rikarita" , 0 , -17 )
}


//──────────────────────────────
//	【ダリオス執政官】
//──────────────────────────────
function "Talk_Darios"
{

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//　　★ＧＦ初回
		if( !FLAG[GF_1STTALK_PAST_4_DARIOS] )
		{
			//────────  一般・開始処理(過去編)  ──────────
			SetStopFlag(STOPFLAG_TALK2)
			//▼過去編Ⅳ王宮前へ向かう
			//───────────────
			//	場所		：寺院山門（過去）
			//───────────────
			//	配置・カメラ：
			//	モーション	：
			//───────────────
			SaveCamera()
MoveCameraAt( 0 , -313.801f , 692.619f , 52.824f , 0 )	// 注視点
ChangeCameraDistance( 0 , 1.344f , 0 )		// 基本距離
ChangeCameraElevation( 0 , 3.499f , 0 )	// 基本仰角
RotateCamera( 0 , 12.878f , 0 )				// 角度
ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
SetCameraZPlane( 0.100f , 200.000f )			// ZPlane
RollCamera( 0 , 0.0f , 0 )				// ロール回転
// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

			//キャラ初期動作の記述
			LookSpd("this", 1.0f, 1.0f, 1.0f)
//			LookTo("this",-291.55f	629.06f	68.60f)	// 首を正面に向ける
LookTo("this",-313.57f	691.58f	52.60f)	// 首を正面に向ける

			Turn("Darios",12.85f,360.0f)
			ChangeSubAnimation("this",SUBMOT_MOUTH,ANI_M_SMILE,1)

			CallFunc("system:talkevent_begin_ps")		//TALK_BEGIN
			LookSpd("this", LOOKSPD_DEFAULT, LOOKSPD_DEFAULT, LOOKSPD_DEFAULT)
			//───────────────────────────────

			TalkPopup("DANA",0,3,160,236,0)		//一人称ダーナ：左
			{
				"#000e#000mあら、ダリオス執政官。"
				"お珍しいですね。"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation("this","ANI_EV_TEBURI", -1 , 1 )
			PlayVoice(Y8V_5751,"this",100)	//やあ、どうも

			//	ダリオス執政官
			TalkPopup("this",0,0,0,0,0)
			{
				"#021eいやあ、面目ございませぬ。\p"
				"今日こそ日頃の不信心を返上せねばと"
				"参った次第でして、ハハハ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　ダリオスに・・・エモーション
			EmotionEx("this", -0.08f, EMO_3DOT, 0, 5, 1, 1, 1.0f)	//…
			Wait(50)
			Wait(10)

			//　　向きを戻す
			LookSpd("this", 0.01 ,  0.01 ,  0.01 )
			Look("this" , -15 , 5 )
			LookSpd("this", LOOKSPD_DEFAULT, LOOKSPD_DEFAULT, LOOKSPD_DEFAULT)
			Wait(10)

			//	ダリオス執政官
			TalkPopup("this",0,0,0,0,0)
			{
				"#022eここはいつ来ても変わりませぬなぁ……\p"
				"#011e……サライ陛下は、幼い頃"
				"大病に罹#2Rかか#Rられた事がありましてな。\p"
				"#000m何日も生死の境を彷徨われて、"
				"それはもう、見ておられませんでした。\p"
				"#060eあの時は、わしも"
				"毎日礼拝に参ったものですぞ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("DANA",0,3,160,236,0)		//一人称ダーナ：左
			{
				"#000e#000mそうだったのですか……"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeSubAnimation("this",SUBMOT_EYE,ANI_E_LAUGH_S,1)
			ChangeSubAnimation("this",SUBMOT_MOUTH,ANI_M_SMILE,1)
			LookTo("this",-313.57f	691.58f	52.60f)	// 首を正面に向ける

			//	ダリオス執政官
			TalkPopup("this",0,0,0,0,0)
			{
				"わはは、もう十五年も前の話です。\p"
				"今やご立派になられ申した……"
				"ありがたき事でございますなぁ。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( GF_1STTALK_PAST_4_DARIOS, 1 )
			CallFunc("system:talkevent_end_ps")		//TALK_END
			Turn("Darios",-22.60f,360.0f)
		}
		else
		{
			//　　★ＧＦ以降
			SetStopFlag(STOPFLAG_TALK)
			CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

			//	ダリオス執政官
			TalkPopup("this",0,0,0,0,0)
			{
				"あの時、大樹に祈りが通じたからこそ"
				"今の“最も幸福な時代”がある──\p"
				"わはは、そう思うとやはり"
				"全ては大樹の導きなのでしょうなぁ。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALK)
}




//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//■過去編Ⅳ　モブ

//──────────────────────────────
//	【参拝者】Citizen_4_A01
//──────────────────────────────
function "Talk_Citizen_4_A01"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：上段
		//	モーション	：祈る
		//───────────────
		//　　振り返らない
		//	参拝者
		TalkPopup("this",0,0,0,0,0)
		{
			"大いなる大樹よ……"
			"どうかこの身に良き導きを……"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【参拝者】Citizen_4_A02
//──────────────────────────────
function "Talk_Citizen_4_A02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：中段
		//	モーション	：
		//───────────────
		//	参拝者
		TalkPopup("this",0,0,0,0,0)
		{
			"毎年、収穫祭の後は"
			"大樹に祈りを捧げてから故郷に帰るんです。\p"
			"ふふ、来年の家内安全を"
			"バッチリお祈りしておかないと！"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【参拝者】
//──────────────────────────────
function "Talk_Citizen_4_A03"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：下のキャラと離す
		//	モーション	：
		//───────────────
		//　　振り返らない
		//	参拝者
		TalkPopup("this",0,0,0,0,0)
		{
			"ダーナ様は歴代巫女の中でも"
			"予知の力に恵まれていらっしゃる。\p"
			"いやはや、それがこれほど"
			"繁栄に結びつくとはなぁ～。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Citizen_4_A03","Citizen_4_A04")
}

//──────────────────────────────
//	【参拝者】Citizen_4_A04
//──────────────────────────────
function "Talk_Citizen_4_A04"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：上のキャラと離す
		//	モーション	：
		//───────────────
		//　　振り返らない

		PlayVoice(Y8V_5753,"this",100)	//わはは！

		//	参拝者
		TalkPopup("this",0,0,0,0,0)
		{
			"ハハハ、我々は幸せ者だな！\p"
			"エタニアに栄光あれ！"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Citizen_4_A04","Citizen_4_A03")
}


//──────────────────────────────
//	【参拝者】Citizen_4_A05
//──────────────────────────────
function "Talk_Citizen_4_A05"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：下段
		//	モーション	：
		//───────────────
		//	参拝者
		TalkPopup("this",0,0,0,0,0)
		{
			"た、大樹の巫女様……？\p"
			"なんてこと……ご本人だなんて……"
		}
		WaitPrompt()
		WaitCloseWindow()

		ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

		TalkPopup("this",0,0,0,0,0)
		{
			"光栄ですわ……"
			"ありがとうございます……！"
		}
		WaitPrompt()
		WaitCloseWindow()


	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【参拝者】Citizen_4_A06
//──────────────────────────────
function "Talk_Citizen_4_A06"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：下段
		//	モーション	：
		//───────────────
		//　　振り返らない
		
		PlayVoice(Y8V_5750,"this",100)	//ダーナ様（呼びかけ）
		
		//	参拝者
		TalkPopup("this",0,0,0,0,0)
		{
			"今年も大病もなく"
			"穏やかな日々を過ごせております。"
		}
		WaitPrompt()
		WaitCloseWindow()

		ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

		TalkPopup("this",0,0,0,0,0)
		{
			"はは、これも大樹の導きでありましょう。"
			"感謝いたしますぞ。"
		}
		WaitPrompt()
		WaitCloseWindow()


	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【参拝者】Citizen_4_A07
//──────────────────────────────
function "Talk_Citizen_4_A07"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：下段
		//	モーション	：
		//───────────────
		//　　振り返らない
		//	参拝者
		TalkPopup("this",0,0,0,0,0)
		{
			"大いなる大樹よ……\p"
			"我らをよき未来へと導きたまえ……"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【参拝者】Citizen_4_A08
//──────────────────────────────
function "Talk_Citizen_4_A08"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：下段
		//	モーション	：
		//───────────────
		//　　振り返らない
		//	参拝者
		TalkPopup("this",0,0,0,0,0)
		{
//			"二人目に続き、三人目まで"
//			"授けていただきました……\p"
			"どうか我が子達に"
			"よきお導きをお与え下さい……"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【参拝者】Citizen_4_A09
//──────────────────────────────
function "Talk_Citizen_4_A09"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：下段
		//	モーション	：
		//───────────────
		//　　振り返らない
		//	参拝者
		TalkPopup("this",0,0,0,0,0)
		{
			"水やりに使ってる理法具も"
			"そろそろ買い換えたいよなぁ。\p"
			"おお大樹よ！　来年の金運も"
			"どうかよろしくお頼みします！"
		}
		WaitPrompt()
		WaitCloseWindow()


	}
	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Citizen_4_A09","Citizen_4_A10")
}


//──────────────────────────────
//	【参拝者】Citizen_4_A10
//──────────────────────────────
function "Talk_Citizen_4_A10"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：寺院山門（過去）
		//───────────────
		//	配置・カメラ：下段
		//	モーション	：
		//───────────────
		//　　振り返らない
		//	参拝者
		TalkPopup("this",0,0,0,0,0)
		{
			"ちょっとアンタ、"
			"来年の作付けを忘れてるわよっ！\p"
			"農家にとっちゃそれが"
			"いの一番なんだから。"
			"順番を間違えないでおくれ！"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Citizen_4_A10","Citizen_4_A09")
}

////////////////////////////////////////////////////////////////////////////////

//■メインイベントセクション

////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////

//■サブイベントセクション

////////////////////////////////////////////////////////////////////////////////

function "SubEV_Past_04_Cesil"
{
	//開始処理ここから-----------------------------------------------
	CallFunc("system:event_begin")

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")
	CallFunc("system:party_remove")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定				
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA",-289.58f,634.59f,66.90f)
	Turn("DANA",154.14f,360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	ChangeSubAnimation("DANA",SUBMOT_EXT2,ANI_SIGN_HIDE,1)
	LookReset("DANA")
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)

	SetChrWork("Olga", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Olga",-288.36f,634.75f,66.90f)
	Turn("Olga",154.14f,360.0f)
	ChangeAnimation("Olga", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("Olga")
	SetChrInfoFlag("Olga", INFOFLAG_NOCHRATARI)

	SetChrWork("Cesil", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Cesil",-291.42f,626.68f,66.90f)
	TurnTo("Cesil",-291.31f,635.60f,66.90f,360.0f)
	ChangeAnimation("Cesil", "ANI_EV_RYOTEMAE", -1, 1)
	ChangeSubAnimation("Cesil", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Cesil", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	LookChr("Cesil","DANA")
	SetChrInfoFlag("Cesil", INFOFLAG_NOCHRATARI)

	//カメラ設定
	MoveCameraAt( 0 , -291.136f , 637.453f , 68.347f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.400f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -6.835f , 0 )	// 基本仰角
	RotateCamera( 0 , 233.807f , 0 )				// 角度
	ChangeCameraPers( 0 , 42.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 200.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 160.000 ,0.000 ,0.450 ,1.000)

	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)
	
	//スキップ許可
	SetSkipScript("mp6212m:SubEV_Past_04_Cesil_ED")
	//開始処理ここまで-----------------------------------------------

	//	★修道女セシルの一般メッセージを必須サブイベント化。
	//	"収穫祭の情報を与えて、一般メッセージを聞いて回るよう"
	//	"水を向けて過去編Ⅳの希薄さを補強する。"
	//　　現在セシルが配置されているフロア
	//　　[mp6212(-291,628,66.9)付近]に降りたらイベント開始。
	ExecuteCmd( 1, MoveTo, "DANA",-290.94f,638.72f,66.90f, 0.1f, 0.20f )
	ExecuteCmd( 2, MoveTo, "Olga",-289.70f,638.01f,66.90f, 0.1f, 0.20f )
	//SetChrPos("DANA",-290.94f,638.72f,66.90f)
	//Turn("DANA",153.84f,360.0f)
	//SetChrPos("Olga",-289.70f,638.01f,66.90f)
	//Turn("Olga",154.14f,360.0f)
	Wait(22)

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -290.800f , 637.996f , 68.347f , 120 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.400f , 120 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -6.835f , 120 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 205.615f , 120 )

	//MoveCameraAt( 0 , -290.800f , 637.996f , 68.347f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 3.400f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -6.835f , 0 )	// 基本仰角
	//RotateCamera( 0 , 205.615f , 0 )				// 角度
	//ChangeCameraPers( 0 , 42.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 200.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転

	Wait(20)

	//	？？？
	TalkPopup(Cesil,0,2,0,0,0)
	{
		"#000m巫女様、祭司長様……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　ダーナにPAエモーション。
	EmotionEx("DANA", 0.00f,EMO_PA,0,5,1,1,1.0f )

	ChangeAnimation("Cesil", "ANI_EV_RYOTEMAE_E", -1, 1)
	WaitAnimation2( "Cesil" , -1, 1, "ANI_EV_RYOTEMAE_E",  0)

	ExecuteCmd( 3, MoveTo, "Cesil",-291.31f,635.60f,66.90f, 0.1f, 0.235f )
	//SetChrPos("Cesil",-291.31f,635.60f,66.90f)
	//Turn("Cesil",176.43f,360.0f)
	
	WaitThread(1)
	TurnToChr("DANA" , "Cesil" , 8.0f)
	LookChr("DANA","Cesil")
	LookChr("Olga","Cesil")

	Wait(45)
	
	CrossFade(FADE_CROSS)

	SetChrPos("DANA",-291.16f,637.77f,66.90f)
	Turn("DANA",-10.17f,360.0f)
	SetChrPos("Olga",-289.90f,637.81f,66.90f)

	MoveCameraAt( 0 , -290.344f , 635.408f , 68.645f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.801f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 10.986f , 0 )	// 基本仰角
	RotateCamera( 0 , 24.791f , 0 )				// 角度
	ChangeCameraPers( 0 , 42.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 200.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	Turn("Olga",32.49f,8.0f)
	LookChr("Olga","Cesil")

	Wait(FADE_CROSS)
	Wait(10)
	
	ChangeAnimation( "DANA" , "ANI_EV_TEBURI", -1 , 1 )
	TalkPopup("DANA",0,2,0,0,0)
	{
		"#000e#000mセシル、どうしました？"
	}
	WaitPrompt()
	WaitCloseWindow()

	WaitThread(3)

	//	修道女セシル
	TalkPopup(Cesil,0,1,0,0,0)
	{
		"#000m収穫祭が終わったばかりなのに"
		"もうお出かけになるのですか？\p"
		"#000m最近、お二人とも随分と"
		"お忙しそうにされていますね。"
	}
	WaitPrompt()
	WaitCloseWindow()
	Wait(10)

	CrossFade(FADE_CROSS)
	StopThread(1)

	SetChrPos("Cesil",-291.31f,635.60f,66.90f)
	//Turn("Cesil",-173.33f,360.0f)
	SetChrPos("Olga",-289.83f,637.69f,66.90f)
	Turn("Olga",32.49f,360.0f)

	MoveCameraAt( 0 , -290.700f , 636.983f , 68.496f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.101f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 4.725f , 0 )	// 基本仰角
	RotateCamera( 0 , 159.519f , 0 )				// 角度
	ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 200.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(FADE_CROSS)

	HeadYes("Olga" ,1 , 25 )

	//	"Olga"
	TalkPopup("Olga",0,1,0,0,0)
	{
		"#000e#000mああ、皆には負担をかけるな。"
		"すまないと思っている。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Cesil" ,"Olga" )
	Wait(15)
	HeadNo("Cesil" , 1 , 35 )

	//	修道女セシル
	TalkPopup(Cesil,0,2,0,0,0)
	{
		"#011e#000mいえ、畏れながら"
		"私が申し上げたいのは……\p"
		"#012e#000mもっと遠慮なく私どもを"
		"頼って頂きたいということです。"
	}
	WaitPrompt()
	WaitCloseWindow()

	EmotionEx("DANA", -0.0150f,EMO_EX,0,5,1,1,0.8f )
	EmotionEx("Olga", -0.0150f,EMO_EX,0,5,1,1,0.8f )
	//　　ダーナとオルガに「！」エモーション表示。

	Wait(40)

	CrossFade(FADE_CROSS)
	LookSpd("Cesil",0.08f,0.08f,0.08f)
	Turn("Cesil",-173.33f,360.0f)
	LookChr("Cesil" ,"DANA" )

	SetChrPos("Olga",-290.09f,637.48f,66.90f)
	Turn("Olga",14.47f,360.0f)

	MoveCameraAt( 0 , -291.105f , 635.480f , 68.595f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.001f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 0.093f , 0 )	// 基本仰角
	RotateCamera( 0 , 201.049f , 0 )				// 角度
	ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 200.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	Wait(FADE_CROSS)

	HeadNo("Cesil",1 ,35 )

	//	修道女セシル
	TalkPopup(Cesil,0,1,0,0,0)
	{
		"#011e#000m巫女様と祭司長様が何を"
		"調べているかは存じません。\p"
		"#012e#000mでも、お二人の様子からとても"
		"深刻なことだと察しております。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "Cesil" , "ANI_EV_TEMUNE_S", -1 , 1 )

	TalkPopup(Cesil,0,1,0,0,0)
	{
		"#011e#080m微力ではありますが、私どもにも"
		"どうかお手伝いをさせてください。"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)
	
	
	CrossFade(FADE_CROSS)

	MoveCameraAt( 0 , -290.667f , 637.455f , 68.545f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.601f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 3.624f , 0 )	// 基本仰角
	RotateCamera( 0 , 39.089f , 0 )				// 角度
	ChangeCameraPers( 0 , 28.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 200.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	CrossFade(FADE_CROSS)
	Wait(10)
	
	
	ChangeAnimation( "Olga" , "ANI_EV_SIAN_S", -1 , 1 )

	//	"Olga"
	TalkPopup("Olga",0,1,0,0,0)
	{
		"#000e#000mフム……"
	}
	WaitPrompt()
	WaitCloseWindow()

	HeadYes("DANA" ,1 , 25 )
	//	"DANA"
	TalkPopup("DANA",0,2,0,0,0)
	{
		"#091e#080mセシル、ありがとう。"
		"とても嬉しく思います。\p"
		"#092e#080m今はまだ詳しいことは話せませんが、"
		"いずれ力を借りる時が来るかも。"
		"翻訳用空行"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA" , "ANI_EV_WAIT2_S", -1 , 1 )

	TalkPopup("DANA",0,2,0,0,0)
	{
		"#020e#080mその時は遠慮なく"
		"みんなを頼らせてもらいますね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)
	CrossFade(FADE_CROSS)
	ChangeSubAnimation("Cesil",SUBMOT_EYE,ANI_E_CLOSE,1)

	MoveCameraAt( 0 , -290.763f , 636.813f , 68.446f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.261f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 1.539f , 0 )	// 基本仰角
	RotateCamera( 0 , 199.837f , 0 )				// 角度
	ChangeCameraPers( 0 , 35.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 200.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	Wait(FADE_CROSS)
	Wait(10)

	ChangeAnimation( "Cesil" , "ANI_EV_TEMUNE_E", -1 , 1 )

	//	修道女セシル
	TalkPopup(Cesil,0,2,0,0,0)
	{
		"#080m巫女様……わかりました。"
		"ありがとうございます。\p"
		"#012eせめてそれまでは留守を"
		"きっちり預からせて頂きますね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	HeadYes(Olga,1 , 25 )

	ChangeAnimation( "Olga" , "ANI_EV_SIAN_E", -1 , 1 )

	//	"Olga"
	TalkPopup("Olga",0,0,0,0,0)
	{
		"#000e#000mああ、どうかよろしく頼む。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Olga","DANA")

	TalkPopup("Olga",0,0,0,0,0)
	{
		"それではダーナ、"
		"一旦ここで別れるとしよう。\p"
		"私は寺院によってから"
		"いくつか心当たりを探るつもりだ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	Look("DANA",-18, 5 )
	//ChangeAnimation( "DANA" , "ANI_EV_WAIT2_E", -1 , 1 )

	//	"DANA"
	TalkPopup("DANA",0,0,0,0,0)
	{
		"#000e#000mわかった、私も"
		"なるべく早めに戻るね。"
	}
	WaitPrompt()
	WaitCloseWindow()


	ChangeAnimation( "Cesil" , "ANI_EV_RYOTEMAE_S", -1 , 1 )

	//	修道女セシル
	TalkPopup(Cesil,0,2,0,0,0)
	{
		"#020e#080mふふ、少々留守になさった程度で"
		"揺らぐ寺院ではありませんわ。\p"
		"#000e#080m収穫祭も終わったばかりですから、"
		"今日はどこも混雑しています。\p"
		"#000e#080m気をつけてお出かけください。"
		"お二人に大樹の導きがあらんことを。"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	

//終了処理ここから----------------------------------------------------
		CallFunc("mp6212m:SubEV_Past_04_Cesil_ED")
}
function "SubEV_Past_04_Cesil_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	ChangeAnimation("Cesil", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Cesil", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Cesil", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	LookReset("Cesil")

	SetChrPos("Olga",-100000.0f ,0 , 0 )

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ立て
	SetFlag( GF_SUBEV_PAST_04_CESIL, 1 )		// 過去編Ⅳ	：【サブイベント：セシルと話す】	
	SetFlag(SF_WARP_DISABLED,0)			//ワープ解除
		
	CallFunc("mp6212m:init")

	//イベント後の再配置
	SetChrPos("LEADER",-289.09f	633.93f	66.90f)
	Turn("LEADER",157.68f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt( 0 , -290.944f , 638.166f , 68.734f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 6.983f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -1.121f , 0 )	// 基本仰角
	RotateCamera( 0 , -157.676f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 200.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

//	RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK, FADE_FAST)
	//WaitFade()

//終了処理ここまで----------------------------------------------------

}





//──────────────────────────────
//	【サブイベント：山門で修道女たちに見送られる】
//──────────────────────────────
function "SubEV_Past_06_Gate"
{
//開始処理ここから----------------------------------------------------

//	CallFunc("system:event_begin")

	SetStopFlag(STOPFLAG_EVENT)

	FadeOut(FADE_BLACK,0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	//ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA",-317.97f, 699.40f, 50.30f)
	Turn("DANA",-24.10f,360.0f)
	ChangeAnimation( "DANA" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_SAD,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "DANA" )
	SetChrInfoFlag( "DANA" , INFOFLAG_NOCHRATARI)

	SetChrWork("Atra", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Atra",-312.70f, 693.68f, 50.90f)
	Turn("Atra",108.05f,360.0f)
	ChangeAnimation( "Atra" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("Atra",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("Atra",SUBMOT_MOUTH,ANI_M_WAIT,1)
//	ChangeSubAnimation("Atra",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "Atra" )
	SetChrInfoFlag( "Atra" , INFOFLAG_NOCHRATARI)

	SetChrPos("ev_citizen1",-313.89f, 686.51f, 50.90f)	//負傷者（娘②）
	Turn("ev_citizen1",-119.34f,360.0f)
	ChangeAnimation( "ev_citizen1" , "ANI_EV_TATEHIZA", -1 , 1 )

	SetChrPos("ev_citizen2",-319.54f, 685.66f, 50.90f)	//負傷者（少女）
	Turn("ev_citizen2",93.84f,360.0f)
	ChangeAnimation( "ev_citizen2" , "ANI_EV_DOWN", -1 , 1 )

	SetChrPos("ev_citizen3",-318.31f, 682.49f, 50.90f)	//負傷者（青年②）
	Turn("ev_citizen3",140.03f,360.0f)
	ChangeAnimation( "ev_citizen3" , "ANI_EV_TATEHIZA", -1 , 1 )

	SetChrPos("ev_citizen4",-312.81f, 687.16f, 50.90f)	//負傷者（青年①）
	Turn("ev_citizen4",104.50f,360.0f)
	ChangeAnimation( "ev_citizen4" , "ANI_EV_TATEHIZA", -1 , 1 )

	SetChrPos("ev_citizen5",-321.72f, 677.59f, 51.50f)	//負傷者（中年男）
	Turn("ev_citizen5",161.35f,360.0f)
	ChangeAnimation( "ev_citizen5" , "ANI_EV_SIT_C", -1 , 1 )

	SetChrPos("ev_citizen6",-320.28f, 684.52f, 50.90f)	//負傷者（老人男）
	Turn("ev_citizen6",-127.59f,360.0f)
	ChangeAnimation( "ev_citizen6" , "ANI_EV_TATEHIZA", -1 , 1 )

	SetChrPos("ev_citizen7",-312.69f, 682.61f, 50.90f)	//負傷者（娘①）
	Turn("ev_citizen7",-45.88f,360.0f)
	ChangeAnimation( "ev_citizen7" , "ANI_EV_PRAY_S", -1 , 1 )

	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )

	//カメラ設定
	MoveCameraAt( 0 , -316.186f , 695.221f , 51.783f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.200f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 1.645f , 0 )	// 基本仰角
	RotateCamera( 0 , 9.183f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 200.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 80.000 ,0.000 ,0.450 ,0.500)
	SetDoFFocus(0, 0, 0)

	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6212m:SubEV_Past_06_Gate_ED")

//開始処理ここまで-----------------------------------------------

	//　　暗転明けで寺院山門内に入ってくるダーナ。

	// カット1 ----------------------------------------------------------------------------------------

	// 移動
	ExecuteCmd(1, MoveTo, "DANA", -316.15f, 695.20f, 50.90f, 0.1f, 0.17f)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -316.186f , 695.221f , 52.443f , 120 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.720f , 120 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 0.212f , 120 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 51.582f , 120 )
	
	// フェードイン
	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	// 移動待ち
	WaitThread(1)
	
	ChangeAnimation( "DANA", "ANI_EV_WAIT2_S", -1, 1 )	// 待機2
	Look("DANA", 0.0f, -20.0f)	// うつむく

	// ダーナ
	TalkPopup("DANA",0,2,0,0,0) {
		"#061e#000mはあ、はあ……\p"
		"#060e#000m#0L（ラステル、どうか無事で……）"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カメラ待ち
	WaitThread(1000)
	
	// カット2 ----------------------------------------------------------------------------------------

	//　　ダーナ、顔を上げて見渡すと
	//　　避難してうずくまってる人が大勢いる。

	// クロスフェード
	CrossFade(FADE_CROSS)
	
	// カメラ
	MoveCameraAt( 0 , -315.936f , 694.536f , 52.443f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.680f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 1.645f , 0 )	// 基本仰角
	RotateCamera( 0 , 189.660f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 200.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -316.159f , 694.674f , 52.443f , 300 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.680f , 300 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -0.933f , 300 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 160.725f , 300 )

	// フェード待ち
	Wait(FADE_CROSS)
	
	Look("DANA", 0.0f, 0.0f)	// うつむく戻す
	ChangeAnimation( "DANA", "ANI_EV_WAIT2_E", -1, 1 )	// 待機2
	Wait(30)

	Look("DANA", 20.0f, 0.0f)	// ←（＾＾）

	// ダーナ
	TalkPopup("DANA",0,1,0,0,0) {
		"#000e#000m#0L（こんなに大勢……）\p"
		"（この様子では、あと何日もつか……）"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	声
	SetName("声")
	TalkPopup("Atra",0,3,100,200,0) {
		"#000e#000m巫女様……！"
	}
	WaitPrompt()
	WaitCloseWindow()
	SetName("")

	EmotionEx("DANA", 0.00f, EMO_PA, 0, 5, 1, 1, 1.0f )	// 「PA」
	Wait(40)

	// カット3 ----------------------------------------------------------------------------------------

	//　　侍女アトラがやってくる

	// クロスフェード
	CrossFade(FADE_FAST)
	
	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	
	// カメラ
	MoveCameraAt( 0 , -315.907f , 694.890f , 52.443f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.660f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -1.654f , 0 )	// 基本仰角
	RotateCamera( 0 , 270.989f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 200.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	SetChrPos("ev_citizen3", -304.50f, 697.57f, 50.90f)
	Turn("ev_citizen3", 29.89f, 360.0f)
	SetChrPos("ev_citizen1", -303.75f, 696.50f, 50.90f)
	Turn("ev_citizen1", 130.52f, 360.0f)

	Turn("DANA", -62.50f, 360.0f)
	LookChr( "DANA", "Atra" )
	LookChr( "Atra", "DANA",)
	
	// 移動
	ExecuteCmd(1, MoveTo, "Atra", -314.81f, 694.36f, 50.90f, 0.1f, 0.18f)
	
	
	// フェード待ち
	Wait(FADE_FAST)

	// 移動待ち
	WaitThread(1)

	// アトラ
	TalkPopup("Atra",0,2,0,0,0) {
		"#000e#000m王都で騒ぎがあったと聞いて……"
		"ご無事だったのですね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	HeadYes("DANA", 1, 25)	// キャラ, うなずき回数, 速さ

	// ダーナ
	TalkPopup("DANA",0,1,0,0,0) {
		"#000e#000mええ、私なら平気です。\p"
		"それより至急"
		"《セレンの園》へ向かいます。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　アトラ、頷く。
	
	// うなずきセット
	HeadYes("Atra" , 1 , 25 )

	// アトラ
	TalkPopup("Atra",0,0,0,0,0) {
		"#011e#000m準備はできております。\p"
		"#012eですが、その前に"
		"例の件についてご報告が……"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カット4 ----------------------------------------------------------------------------------------

	//　　ダーナ、アトラが奥に歩きつつ暗転。

	// クロスフェード
	CrossFade((FADE_NORMAL))
	
	// カメラ
	MoveCameraAt( 0 , -316.186f , 696.093f , 51.983f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.660f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.227f , 0 )	// 基本仰角
	RotateCamera( 0 , 218.561f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 200.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 位置調整・表情・モーション
	SetChrPos("DANA", -315.25f, 694.89f, 50.90f)
	Turn("DANA", -55.40f, 360.0f)
	SetChrPos("Atra", -313.88f, 693.99f, 50.90f)
	Turn("Atra", -62.49f, 360.0f)
	LookReset("DANA")
	LookReset("Atra")

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -316.186f , 696.093f , 54.643f , 210 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.660f , 210 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -7.670f , 210 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 225.152f , 210 )

	// 移動
	ExecuteCmd(1, MoveTo, "Atra", -305.05f, 690.48f, 50.90f, 0.1f, 0.18f)
	ExecuteCmd(2, MoveTo, "DANA", -306.86f, 691.63f, 50.90f, 0.1f, 0.18f)
	
	// フェード待ち
	Wait((FADE_NORMAL))

	Wait(60)

	// フェードアウト
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

//終了処理ここから----------------------------------------------------
	CallFunc("mp6212m:SubEV_Past_06_Gate_ED")
}
function "SubEV_Past_06_Gate_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	// 移動停止
	StopThread(1)
	StopThread(2)

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
//	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	SetFlag(SF_NOCHANGEBGM, 1)

	SetFlag( TF_LOADING_TIPS_OFF, 1 )	//NowLoading 時の Tips 表示をカット
	LoadArg("map/mp4105m/mp4105m.arg")
	EventCue("mp4105m:SubEV_Past_06_Gate2")		// 過去編Ⅵ：【サブイベント：山門で修道女たちに見送られる】（続き）
//終了処理ここまで----------------------------------------------------
}

////////////////////////////////////////////////////////////////////////////////

//■ストッパー・ＬＰセクション

////////////////////////////////////////////////////////////////////////////////
//──────────────────────────────
//	【ストッパー：山門内部→王都方面へ行けない】
//──────────────────────────────
function "Stopper_Past_01_01"
{
//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅰアドルがいたポイントへ向かう
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000mここを行くと王都だけど……\p"
		"東街道には"
		"直接向った方が近道かな。\p"
		"この山門を上に抜けてしまおう。"
	}
	WaitPrompt()
	WaitCloseWindow()

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-316.90f	694.65f	50.90f)
	Turn("LEADER",-19.52f,360.0f)


	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}
