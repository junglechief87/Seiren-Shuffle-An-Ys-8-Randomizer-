#include "inc/mons.h"
#include "inc/def.h"
#include "inc/flag.h"
#include "inc/se.h"
#include "inc/scr_inc.h"
#include "inc/3dicon.h"
#include "inc/skilldef.h"
#include "inc/vo.h"
#include "inc/music.h"
#include "inc/efx.h"
#include "inc/temp/mp6401m.h"

//----------------------------------------------------------------------------//
//                                                                            //
// 王都中央区（過去）  			                                              //
//                                                                            //
//----------------------------------------------------------------------------//
///////////////////////////////////////////////////////////////////////////////
// 初期化スクリプト
///////////////////////////////////////////////////////////////////////////////
//-------------------------------------------

function "init"
{
	
	//遠景不必要ノード削除◆マップ作業者用
	MapHide( "@BG2_etania" , 0 )
	MapHide( "@BG2_mp6110m_2" , 0 )
	MapHide( "BG2_groundfog_forest" , 0 )

//	EventAreaEnable("evb2_M04S191",0)

	//ノード制御
	MapAnime("gim_himorogi" , "off")	//初期状態
	MapAnime("dragon_gate_all_A2" , "open" )		//東大橋の門	過去では開きっぱなし
	EventAreaEnable( "evb2_act_0414" , 0 )	//アクティブボイス

	// イベントエリア設定制御
	EventAreaEnable( "SubEV_Past_03_Rastell" , 0 )		// イベントエリア無効化
	EventAreaEnable( "SubEV_Past_03_Rastell_2" , 0 )	// イベントエリア無効化
	EventAreaEnable( "Stopper_Past_D3_01" , 0 )			// イベントエリア無効化
	EventAreaEnable( "Stopper_Past_D3_02" , 0 )			// イベントエリア無効化
	EventAreaEnable( "Stopper_Past_D3_03" , 0 )			// イベントエリア無効化
	EventAreaEnable( "Stopper_Past_02_01" , 0 )			// イベントエリア無効化
	EventAreaEnable( "Stopper_Past_02_02" , 0 )			// イベントエリア無効化
	EventAreaEnable( "Stopper_Past_02_03" , 0 )			// イベントエリア無効化
	EventAreaEnable( "Stopper_Past_02_07" , 0 )			// イベントエリア無効化
	EventAreaEnable( "Stopper_Past_03_02" , 0 )			// イベントエリア無効化
	EventAreaEnable( "Stopper_Past_03_03" , 0 )			// イベントエリア無効化
	EventAreaEnable( "Stopper_Past_03_04" , 0 )			// イベントエリア無効化
	EventAreaEnable( "Stopper_Past_03_05" , 0 )			// イベントエリア無効化
	EventAreaEnable( "Stopper_Past_04_02" , 0 )			// イベントエリア無効化
	EventAreaEnable( "Stopper_Past_04_03" , 0 )			// イベントエリア無効化
	EventAreaEnable( "SubEV_Past_D3_Ras_Tra" , 0 )			// イベントエリア無効化
	EventAreaEnable( "SubEV_Past_04_io_baro" , 0 )			// イベントエリア無効化

	if (FLAG[SF_EVENT_ON]){
		// イベント発生制御
		if (FLAG[GF_04MP6201_TALK_THANATOS] && !FLAG[GF_04MP6201_DIS_OBSTACLE]){
//			EventAreaEnable("evb2_M04S191",1)	//過去Ⅱ ダーナが参道に着く
			SetChrPos("LP_M04S191",-354.70f, 819.84f, 12.55f)		// [M04S191][過去Ⅱ ダーナが参道に着く]
		}
		if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] &&		//▼過去編Ⅱ南門へ向かう
			!FLAG[GF_SUBEV_PAST_02_QUEST_A]) {			// 過去クエスト②Ａ：かくれんぼの話を聞く
			EventCue("mp6201m:SubEV_Past_02_Quest_A")
		}
		if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )		//▼ダーナ編③王都を歩く
		{
			if (!FLAG[GF_SUBEV_PAST_D3_TALK_RAS_TRA])	// ダーナ編③：【サブイベント：ラステル・衛士トラキルと会う】を見た
			{
				EventAreaEnable( "SubEV_Past_D3_Ras_Tra" , 1 )
			}
		}

		//一般配置ファンクション呼び出し
		CallFunc("mp6201m:NpcPosition")
	
		// イベントエリア制御
		if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] &&		//▼過去編Ⅲバハの塔へ向かう
			!FLAG[GF_SUBEV_PAST_03_RASTELL] )		// 過去編Ⅲ：【サブイベント：ラステルと話す】を見た
		{
			EventAreaEnable( "SubEV_Past_03_Rastell" , 1 )		// 過去編Ⅲ：【サブイベント：ラステルと話す】
			EventAreaEnable( "SubEV_Past_03_Rastell_2" , 1 )	// イベントエリア無効化
		}
	
		// ストッパー制御
		if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )		//▼ダーナ編③王都を歩く
		{
			EventAreaEnable( "Stopper_Past_D3_01" , 1 )	// ダーナ編③：【ストッパー：山門方面へ行けない】
			EventAreaEnable( "Stopper_Past_D3_02" , 1 )	// ダーナ編③：【ストッパー：西街道方面へ行けない】
			EventAreaEnable( "Stopper_Past_D3_03" , 1 )	// ダーナ編③：【ストッパー：東街道方面へ行けない】
		}
		if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )		//▼過去編Ⅱ南門へ向かう
		{
			EventAreaEnable( "Stopper_Past_02_01" , 1 )	// 過去編Ⅱ：【ストッパー：中央区→山門方面へ行けない】
			EventAreaEnable( "Stopper_Past_02_02" , 1 )	// 過去編Ⅱ：【ストッパー：中央区→西街道方面へ行けない】
			EventAreaEnable( "Stopper_Past_02_03" , 1 )	// 過去編Ⅱ：【ストッパー：中央区→東街道方面へ行けない】
			if (FLAG[GF_SUBEV_PAST_02_QUEST_A] &&
				!FLAG[GF_SUBEV_PAST_02_QUEST_C])
			{
				EventAreaEnable( "Stopper_Past_02_07" , 1 )	// 過去編Ⅱ：【ストッパー：かくれんぼ中 水晶石のほうへ行けない】
			}
		}
		if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
		{
			EventAreaEnable( "Stopper_Past_03_02" , 1 )	// 過去編Ⅲ：【ストッパー：中央区→西街道方面へ行けない】
			EventAreaEnable( "Stopper_Past_03_03" , 1 )	// 過去編Ⅲ：【ストッパー：中央区→東街区へ行けない】
			EventAreaEnable( "Stopper_Past_03_04" , 1 )	// 過去編Ⅲ：【ストッパー：中央区→西街区へ行けない】
			EventAreaEnable( "Stopper_Past_03_05" , 1 )	// 過去編Ⅲ：【ストッパー：中央区→南方面へ行けない】
		}
		if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
		{
			EventAreaEnable( "Stopper_Past_04_02" , 1 )	// 過去編Ⅳ：【ストッパー：西街道方面へ行けない】
			EventAreaEnable( "Stopper_Past_04_03" , 1 )	// 過去編Ⅳ：【ストッパー：東街道方面へ行けない】

			if (!FLAG[GF_SUBEV_PAST_04_IO_BARO] && !FLAG[GF_SUBEV_PAST_04_IO_MONO])		// 過去編Ⅳ：【サブイベント：過去編Ⅳでのイオとの会話】を見た
			{
				EventAreaEnable( "SubEV_Past_04_io_baro" , 1 )	// 過去編Ⅳ：【サブイベント：過去編Ⅳでのイオとの会話】
			}
		}
		
		// ＬＰ制御
		if (FLAG[GF_04MP6201_DIS_OBSTACLE] ){		//参道の障害が消滅する
			MapAnime("gim_himorogi" , "on")	
			if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )		//▼過去編Ⅱ南門へ向かう
			{
				SetChrPos("LP_SubEV_Past_02_Return",-361.55f,816.94f,12.55f)		// 過去編Ⅱ：【過去編Ⅱ：現代に戻るイベント】
				SetChrWork( "LP_SubEV_Past_02_Return" , CWK_CHECKRADIUS , 2.5f )	// 範囲
			}
			if (FLAG[GF_PAST_EPISODE_4_GO_CASTLE])		//▼過去編Ⅳ王宮前へ向かう
			{
				SetChrPos("LP_Past_04_01",-361.55f,816.94f,12.55f)	//【ＬＰ：過去編Ⅱで植えたヒモロギを調べる】
				SetChrWork( "LP_Past_04_01" , CWK_CHECKRADIUS , 2.5f )	// 範囲
			}
		}
		
		// アクティブボイス
		if(!FLAG[GF_AVOICE_0414] && FLAG[GF_04MP6101M_KNOW_DOWNFALL] && !FLAG[GF_04MP6201_DIS_OBSTACLE]){
			EventAreaEnable( "evb2_act_0414" , 1 )
		}
		if(!FLAG[GF_AVOICE_0514] && FLAG[GF_05MP6202_GOTO_SKYWAY] && !FLAG[GF_05MP6204_APPEAR_CASTLE] &&FLAG[SF_LASTENTRY_NO]==1){
			ActiveVoiceStart(EACT_EVID_0514, 1, 0)	//適当な一般会話の後など
		}
		//ＮＰＣマーカーセット
		CallFunc("system:SetMarkerNPC")
	}

	//マップ名表示
	if(!FLAG[SF_LOADINIT] && !FLAG[GF_MPxxxx_MAP_NAME_NO_DRAW] && !FLAG[TF_MAPNAME_SHOWN]){
		if( FLAG[SF_LASTENTRY_NO] == 1 ){
			VisualName("visual/mapname/mn_6201m.itp",VN_NAMEMAP2,-1,-1,VN_MAPNAME_TIME)//王都アイギアス
			SetFlag( TF_MAPNAME_SHOWN, 1 )				// 地名表示した（テンポラリ）
		}
	}
}

//////////////////////////////////////////////////////////////////////
//■アクティブボイス
//////////////////////////////////////////////////////////////////////
function "act_0414"
{
	if (!FLAG[GF_AVOICE_0414])
	{
		EventAreaEnable( "evb2_act_0414" , 0 )
		ActiveVoiceStop(ACTIVEVOICESTOP_WINDOWOFF)
		ActiveVoiceStart(EACT_EVID_0414, 1, 0)	//南門への通路に入った所で
	}
}

//////////////////////////////////////////////////////////////////////
//■一般配置
//////////////////////////////////////////////////////////////////////
function "NpcPosition"
{
	//◆仮入力：【QS522】クエストの入力のため、仮配置しました
	if( FLAG[GF_PAST_EPISODE_6_GO_GARDEN] )				//▼過去編Ⅵセレンの園へ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_5_GO_VALLAY] )		//▼過去編Ⅴ王家の谷へ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_4_2_GO_OUT] )			//▼過去編Ⅳ-２王宮の外へ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )		//▼過去編Ⅳ王宮前へ向かう
	{
		SetChrPos("Trakil",-415.74f,906.27f,12.25f)
		Turn("Trakil",-16.25f,360.0f)
		ChangeAnimation("Trakil","ANI_EV_WAIT_BUKI", -1 , 1 )	//	モーション	：歩哨待機
		SetChrPos("eq4029_1",-415.74f,906.27f,12.25f)			//槍
		SetParent( "eq4029_1" , "Trakil", "Null_Rhand" )		//槍
		ChangeAnimation("eq4029_1","ANI_WAIT_c380", -1 , 1 )	//	c380用

		SetChrPos("Barossa",-398.39f,928.72f,10.89f)
		Turn("Barossa",-84.79f,360.0f)
		SetChrPos("TALKPT_Barossa",-395.65f	928.33f	11.07f)		//カウンター会話

		//詩人セパ			//	場所		：王都中央区（過去）・東エリア
//		SetChrPos("Sepa",-386.01f,971.38f,11.07f)
//		Turn("Sepa",-114.22f,360.0f)
		SetChrPos("Sepa",-391.31f,955.28f,10.89f)
		Turn("Sepa",-50.76f,360.0f)
		SetChrPos("eq4020",-391.31f,955.28f,10.89f)			//琴
		SetParent( "eq4020" , "Sepa", "Null_harp" )			//琴
		ChangeAnimation( "Sepa", "ANI_EV_HARP_ENSO", -1, 1 )

		SetChrPos("Merchant",-377.18f,980.90f,10.89f)
		Turn("Merchant",20.05f,360.0f)
		SetChrPos("TALKPT_Merchant",-378.07f	978.45f	10.89f)		//カウンター会話

		SetChrPos("Irake",-484.96f,931.19f,11.07f)
		Turn("Irake",-84.59f,360.0f)

		SetChrPos("Rikarita",-484.22f	933.71f	11.07f)
		Turn("Rikarita",-82.95f,360.0f)

		SetChrPos("Citizen_4_C02",-482.17f	933.27f	11.07f)
		Turn("Citizen_4_C02",107.06f,360.0f)
		ChangeAnimation( "Citizen_4_C02", "ANI_EV_TEKOSI", -1, 1 )

		SetChrPos("Citizen_4_C03",-478.19f	935.41f	11.07f)
		Turn("Citizen_4_C03",65.31f,360.0f)

		//--------南エリア----------------------------------------

//		SetChrPos("Cryo",-374.26f	811.64f	12.55f)
//		Turn("Cryo",121.77f,360.0f)
		SetChrPos("Cryo",-397.52f	875.93f	11.09f)
		Turn("Cryo",-44.80f,360.0f)
		//free

		SetChrPos("Citizen_4_D02",-354.94f	786.09f	11.09f)
		Turn("Citizen_4_D02",106.58f,360.0f)

		SetChrPos("Citizen_4_D03",-356.30f	787.20f	11.09f)
		Turn("Citizen_4_D03",-31.12f,360.0f)
		LookChr("Citizen_4_D03","Citizen_4_D02")
		LookChr("Citizen_4_D02","Citizen_4_D03")

		SetChrPos("Citizen_4_D04",-393.71f	867.09f	11.09f)
		Turn("Citizen_4_D04",-24.16f,360.0f)
		//NPC_Move_t10

		//--------モブたち----------------------------------------

		//街路をルートムーブ＜中央中央Ａ１＞
		SetChrPos("Citizen_2_A01",-386.18f	918.65f	11.07f)
		Turn("Citizen_2_A01",-2.31f,360.0f)

		//街路をルートムーブ＜中央中央Ａ２＞
		SetChrPos("Citizen_2_A02",-441.51f	904.64f	11.07f)
		Turn("Citizen_2_A02",-35.27f,360.0f)

		//	モーション	：街路をルートムーブ＜中央東Ｂ１＞
		SetChrPos("Citizen_2_B01",-383.46f	954.93f	11.07f)
		Turn("Citizen_2_B01",-171.15f,360.0f)

		//	モーション	：街路をルートムーブ＜中央西Ｃ１＞
		SetChrPos("Citizen_2_C01",-480.28f	928.47f	11.07f)
		Turn("Citizen_2_C01",-44.76f,360.0f)

		//旅人
		SetChrPos("Citizen_4_C04",-404.32f	897.81f	11.12f)
		Turn("Citizen_4_C04",-52.54f,360.0f)
		//旅人
		SetChrPos("Citizen_4_C05",-403.13f	899.20f	11.07f)
		Turn("Citizen_4_C05",-6.70f,360.0f)
		LookChr("Citizen_4_C04","Citizen_4_C05")
		LookChr("Citizen_4_C05","Citizen_4_C04")

		//	配置・カメラ：西側の道端で下のキャラと話す
		SetChrPos("Citizen_D3_A03",-417.65f,893.22f,10.90f)
		Turn("Citizen_D3_A03",88.66f,360.0f)

		//	配置・カメラ：西側の道端で上のキャラと話す
		SetChrPos("Citizen_D3_A04",-419.42f,893.01f,10.89f)
		Turn("Citizen_D3_A04",-78.28f,360.0f)

		//王都市民
		SetChrPos("Citizen_4_C06",-435.70f	904.41f	11.07f)
		Turn("Citizen_4_C06",92.33f,360.0f)
		//王都市民
		SetChrPos("Citizen_4_C07",-437.14f	905.12f	11.07f)
		Turn("Citizen_4_C07",-33.31f,360.0f)
		LookChr("Citizen_4_C06","Citizen_4_C07")
		LookChr("Citizen_4_C07","Citizen_4_C06")

		//	配置・カメラ：バロッサの店の買い物客
		SetChrPos("Citizen_D3_A06",-393.89f,928.59f,11.07f)
		Turn("Citizen_D3_A06",99.05f,360.0f)

		//	配置・カメラ：バロッサの店の買い物客
		SetChrPos("Citizen_3_D07",-392.99f	929.32f	11.07f)
		Turn("Citizen_3_D07",72.50f,360.0f)

		//行商人たち
		SetChrPos("Citizen_4_C09",-398.97f	988.17f	11.07f)
		Turn("Citizen_4_C09",-94.23f,360.0f)
		ChangeAnimation("Citizen_4_C09","ANI_EV_UDEGUMI", -1 , 1 )

		//行商人たち
		SetChrPos("Citizen_4_C10",-398.46f	989.63f	11.07f)
		Turn("Citizen_4_C10",-6.40f,360.0f)
		ChangeAnimation( "Citizen_4_C10", "ANI_EV_TEKOSI", -1, 1 )
		LookChr("Citizen_4_C10","Citizen_4_C09")
		LookChr("Citizen_4_C09","Citizen_4_C10")

		SetChrPos("C390_01",-402.03f	991.88f	10.89f)
		Turn("C390_01",-140.19f,360.0f)

		//イオ
		SetChrPos("Io",-395.45f,926.52f,11.07f)
		Turn("Io",112.65f,360.0f)
		SetChrWork("Io",CWK_NPCMODE,NPC_MODE_WAIT )		//ムーブ停止
		ChangeAnimation( "Io" , "ANI_WAIT", -1 , 1 )

		//--------精霊------------------------------------------

		if(FLAG[GF_SUBEV_PAST_SPIRITE] && FLAG[GF_SUBEV_PAST_SPIRITF])		//精霊救出後
		{
			//塔堂前
			SetChrPos("Pulau",-401.10f,909.78f,11.89f)
			Turn("Pulau",-117.85f,360.0f)

			SetChrPos("Eld",-399.22f,910.69f,11.89f)
			Turn("Eld",63.26f,360.0f)
		}
		if(FLAG[GF_SUBEV_PAST_SPIRITD])		//精霊救出後
		{
			//西橋前
			SetChrPos("Lindell",-484.81f,962.21f,10.89f)
			Turn("Lindell",-46.43f,360.0f)
		}
	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		SetChrPos("Trakil",-415.74f,906.27f,12.25f)
		Turn("Trakil",-16.25f,360.0f)
		ChangeAnimation("Trakil","ANI_EV_WAIT_BUKI", -1 , 1 )	//	モーション	：歩哨待機
		SetChrPos("eq4029_1",-415.74f,906.27f,12.25f)			//槍
		SetParent( "eq4029_1" , "Trakil", "Null_Rhand" )		//槍
		ChangeAnimation("eq4029_1","ANI_WAIT_c380", -1 , 1 )	//	c380用

		//衛士ラステル		//	場所		：王都中央区（過去）・東エリア
		SetChrPos("Rastell2",-395.03f	997.09f	11.07f)
		Turn("Rastell2",37.86f,360.0f)
		ChangeAnimation("Rastell2","ANI_EV_WAIT_BUKI", -1 , 1 )	//	モーション	：歩哨待機
		SetChrPos("eq4029_2",-394.81f,997.29f,11.07f)			//槍
		SetParent( "eq4029_2" , "Rastell2", "Null_Rhand" )		//槍
		ChangeAnimation( "eq4029_2", "ANI_WAIT_c321", -1, 1 )	//ラステル用
		SetFlag( TF_NORMALTALK_RASTELL, 1 )
		
		SetChrPos("Barossa",-398.39f,928.72f,10.89f)
		Turn("Barossa",-84.79f,360.0f)
		SetChrPos("TALKPT_Barossa",-395.65f	928.33f	11.07f)		//カウンター会話

		//詩人セパ			//	場所		：王都中央区（過去）・東エリア
//		SetChrPos("Sepa",-386.01f,971.38f,11.07f)
//		Turn("Sepa",-114.22f,360.0f)
		SetChrPos("Sepa",-391.31f,955.28f,10.89f)
		Turn("Sepa",-50.76f,360.0f)
		SetChrPos("eq4020",-391.31f,955.28f,10.89f)			//琴
		SetParent( "eq4020" , "Sepa", "Null_harp" )			//琴
		ChangeAnimation( "Sepa", "ANI_EV_HARP_ENSO", -1, 1 )

		SetChrPos("Merchant",-377.18f,980.90f,10.89f)
		Turn("Merchant",20.05f,360.0f)
		SetChrInfoFlag( "Merchant",INFOFLAG_NOTALKTURN)
		SetChrInfoFlag( "Merchant",INFOFLAG_NOTALKMOTION)
		SetChrPos("TALKPT_Merchant",-378.07f	978.45f	10.89f)		//カウンター会話

		SetChrPos("Lakey",-378.42f	977.48f	11.07f)
		Turn("Lakey",-160.95f,360.0f)

		SetChrPos("Yuka",-398.99f	961.28f	11.89f)
		Turn("Yuka",-128.39f,360.0f)

		SetChrPos("Irake",-484.96f,931.19f,11.07f)
		Turn("Irake",-84.59f,360.0f)

		SetChrPos("Rikarita",-485.09f,933.88f,11.07f)
		Turn("Rikarita",-87.20f,360.0f)

		SetChrPos("Cryo",-444.43f,900.38f,11.07f)
		Turn("Cryo",71.14f,360.0f)
		SetChrWork("Cryo",CWK_NPCMODE,NPC_MODE_WAIT )		//ムーブ停止
		SetChrInfoFlag( "Cryo",INFOFLAG_NOTALKTURN)
		SetChrInfoFlag( "Cryo",INFOFLAG_NOTALKMOTION)

//		SetChrPos("Anthea",-408.37f,896.52f,11.07f)
//		Turn("Anthea",-75.44f,360.0f)
		SetChrPos("Anthea",-407.25f	897.09f	11.15f)
		Turn("Anthea",59.35f,360.0f)

//		SetChrPos("Thea",-406.70f,896.15f,11.07f)
//		Turn("Thea",90.87f,360.0f)
		SetChrPos("Thea",-406.72f	896.50f	11.15f)
		Turn("Thea",87.03f,360.0f)
		LookChr("Anthea","Thea")

		if(!FLAG[GF_SUBEV_PAST_MONOLITH_B2])
		{
			SetChrPos("Io",-386.63f,895.64f,10.89f)
			Turn("Io",0.00f,360.0f)
			ChangeAnimation( "Io" , "ANI_WAIT", -1 , 1 )
		}
		//--------モブたち----------------------------------------

		//街路をルートムーブ＜中央中央Ａ１＞
		SetChrPos("Citizen_2_A01",-386.18f	918.65f	11.07f)
		Turn("Citizen_2_A01",-2.31f,360.0f)

		//街路をルートムーブ＜中央中央Ａ２＞
		SetChrPos("Citizen_2_A02",-441.51f	904.64f	11.07f)
		Turn("Citizen_2_A02",-35.27f,360.0f)

		//	モーション	：街路をルートムーブ＜中央東Ｂ１＞
		SetChrPos("Citizen_2_B01",-383.46f	954.93f	11.07f)
		Turn("Citizen_2_B01",-171.15f,360.0f)

		//	モーション	：街路をルートムーブ＜中央西Ｃ１＞
		SetChrPos("Citizen_2_C01",-480.28f	928.47f	11.07f)
		Turn("Citizen_2_C01",-44.76f,360.0f)

//		//	配置・カメラ：西エリアで客をする
//		SetChrPos("Citizen_3_D05",-475.96f	934.25f	11.07f)
//		Turn("Citizen_3_D05",91.69f,360.0f)

//		//	配置・カメラ：西エリアで客をする
//		SetChrPos("Citizen_3_D06",-475.71f	935.94f	11.07f)
//		Turn("Citizen_3_D06",51.16f,360.0f)

		//	配置・カメラ：バロッサの店の買い物客
		SetChrPos("Citizen_3_D07",-393.89f,928.59f,11.07f)
		Turn("Citizen_3_D07",99.05f,360.0f)

		//--------東の橋----------------------------------------

		SetChrPos("C390_01",-356.25f	1045.20f	11.09f)
		Turn("C390_01",-143.98f,360.0f)

		SetChrPos("C390_02",-263.72f	1164.45f	11.09f)
		Turn("C390_02",36.88f,360.0f)
//		ChangeAnimation( "C390_02", "ANI_WAIT_TAZUNA_C", -1, 1 )		//◆効いてない

		SetChrPos("Citizen_3_D01",-316.69f	1093.64f	11.09f)
		Turn("Citizen_3_D01",34.11f,360.0f)
		//NPC_Move_t09

		SetChrPos("Citizen_3_D02",-362.54f	1037.05f	11.09f)
		Turn("Citizen_3_D02",-12.89f,360.0f)

		SetChrPos("Citizen_3_D03",-266.83f	1163.38f	11.09f)
		Turn("Citizen_3_D03",-84.19f,360.0f)
		ChangeAnimation( "Citizen_3_D03", "ANI_EV_TEKOSI", -1, 1 )

		SetChrPos("Citizen_3_D04",-261.75f	1168.43f	11.96f)
		Turn("Citizen_3_D04",-119.16f,360.0f)
		SetChrPos("TALKPT_Citizen_3_D04",-264.23f	1168.41f	11.09f)

		//--------精霊------------------------------------------
		if(FLAG[GF_SUBEV_PAST_SPIRITD])		//精霊救出後
		{
			//西橋前
			SetChrPos("Lindell",-484.81f,962.21f,10.89f)
			Turn("Lindell",-46.43f,360.0f)
		}
	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )		//▼過去編Ⅱ南門へ向かう
	{
		if (!FLAG[GF_SUBEV_PAST_02_QUEST_C]) {	// 過去編Ⅱ：【過去クエスト②Ｃ：達成イベント】を見た
			SetChrPos("Thea",-407.00f, 896.75f, 11.15f)
			Turn("Thea",-22.87f,360.0f)
		}
		
		SetChrPos("Trakil",-415.74f,906.27f,12.25f)
		Turn("Trakil",-16.25f,360.0f)
		ChangeAnimation("Trakil","ANI_EV_WAIT_BUKI", -1 , 1 )	//	モーション	：歩哨待機
		SetChrPos("eq4029_1",-415.74f,906.27f,12.25f)			//槍
		SetParent( "eq4029_1" , "Trakil", "Null_Rhand" )		//槍
		ChangeAnimation("eq4029_1","ANI_WAIT_c380", -1 , 1 )	//	c380用

		SetChrPos("Barossa",-398.39f,928.72f,10.89f)
		Turn("Barossa",-84.79f,360.0f)
		SetChrPos("TALKPT_Barossa",-395.65f	928.33f	11.07f)		//カウンター会話

		SetChrPos("Merchant",-377.18f,980.90f,10.89f)
		Turn("Merchant",20.05f,360.0f)
		SetChrPos("TALKPT_Merchant",-378.07f	978.45f	10.89f)		//カウンター会話

		//詩人セパ			//	場所		：王都中央区（過去）・東エリア
//		SetChrPos("Sepa",-386.01f,971.38f,11.07f)
//		Turn("Sepa",-114.22f,360.0f)
		SetChrPos("Sepa",-391.31f,955.28f,10.89f)
		Turn("Sepa",-50.76f,360.0f)
		SetChrPos("eq4020",-391.31f,955.28f,10.89f)			//琴
		SetParent( "eq4020" , "Sepa", "Null_harp" )			//琴
		ChangeAnimation( "Sepa", "ANI_EV_HARP_ENSO", -1, 1 )

		SetChrPos("Haril",-395.42f,994.87f,11.07f)
		Turn("Haril",26.80f,360.0f)
		ChangeAnimation("Haril","ANI_EV_WAIT_BUKI", -1 , 1 )	//	モーション	：歩哨待機
		SetChrPos("eq4029_2",-395.42f,994.87f,11.07f)			//槍
		SetParent( "eq4029_2" , "Haril", "Null_Rhand" )			//槍
		ChangeAnimation("eq4029_2","ANI_WAIT_c381", -1 , 1 )	//	c381用

		SetChrPos("Irake",-484.96f,931.19f,11.07f)
		Turn("Irake",-84.59f,360.0f)

		SetChrPos("Rikarita",-485.09f,933.88f,11.07f)
		Turn("Rikarita",-87.20f,360.0f)

		//--------モブたち----------------------------------------

		//街路をルートムーブ＜中央中央Ａ１＞
		SetChrPos("Citizen_2_A01",-386.18f	918.65f	11.07f)
		Turn("Citizen_2_A01",-2.31f,360.0f)

		//街路をルートムーブ＜中央中央Ａ２＞
		SetChrPos("Citizen_2_A02",-441.51f	904.64f	11.07f)
		Turn("Citizen_2_A02",-35.27f,360.0f)
		//	モーション	：街路をルートムーブ＜中央東Ｂ１＞
		SetChrPos("Citizen_2_B01",-383.46f	954.93f	11.07f)
		Turn("Citizen_2_B01",-171.15f,360.0f)

		//	モーション	：街路をルートムーブ＜中央西Ｃ１＞
		SetChrPos("Citizen_2_C01",-480.28f	928.47f	11.07f)
		Turn("Citizen_2_C01",-44.76f,360.0f)

		//	配置・カメラ：イレークの店で客をする		//⇒移動
		SetChrPos("Citizen_2_C02",-487.69f	950.70f	11.07f)
		Turn("Citizen_2_C02",-62.00f,360.0f)

		//	配置・カメラ：イレークの店で客をする
		SetChrPos("Citizen_2_C03",-482.17f	933.27f	11.07f)
		Turn("Citizen_2_C03",107.06f,360.0f)
		ChangeAnimation( "Citizen_2_C03", "ANI_EV_TEKOSI", -1, 1 )

		SetChrPos("Citizen_2_D01",-386.18f,844.89f,11.09f)
		Turn("Citizen_2_D01",154.98f,360.0f)
		//NPC_Move_t07

		SetChrPos("Citizen_2_D02",-392.32f	865.05f	11.09f)
		Turn("Citizen_2_D02",-35.91f,360.0f)
		ChangeAnimation( "Citizen_2_D02", "ANI_EV_TEKOSI", -1, 1 )

		SetChrPos("Citizen_2_D03",-391.05f	865.17f	11.09f)
		Turn("Citizen_2_D03",7.27f,360.0f)
		LookChr("Citizen_2_D03","Citizen_2_D02")
		LookChr("Citizen_2_D02","Citizen_2_D03")

		SetChrPos("Citizen_2_D04",-379.59f,837.11f,11.09f)
		Turn("Citizen_2_D04",-23.16f,360.0f)

		//--------東通路の話せないモブ----------------------------------------
//		SetChrPos("C390_02",-348.52f	1055.35f	11.09f)
//		Turn("C390_02",36.63f,360.0f)

//		SetChrPos("Citizen_D3_M01",-366.17f	1022.77f	11.09f)
//		Turn("Citizen_D3_M01",135.30f,360.0f)

		SetChrPos("Citizen_D3_M02",-356.72f	1046.34f	11.09f)
		Turn("Citizen_D3_M02",166.78f,360.0f)

		SetChrPos("Citizen_D3_M03",-370.02f	1022.57f	11.09f)
		Turn("Citizen_D3_M03",-143.33f,360.0f)

	}
	else if( FLAG[GF_PAST_EPISODE_1_GO_CAMP] )			//▼過去編Ⅰアドルがいたポイントへ向かう
	{
	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )	//▼ダーナ編③王都を歩く
	{
		SetChrPos("Trakil",-415.74f,906.27f,12.25f)
		Turn("Trakil",-16.25f,360.0f)
		ChangeAnimation("Trakil","ANI_EV_WAIT_BUKI", -1 , 1 )	//	モーション	：歩哨待機
		SetChrPos("eq4029_1",-415.74f,906.27f,12.25f)			//槍
		SetParent( "eq4029_1" , "Trakil", "Null_Rhand" )		//槍
		ChangeAnimation("eq4029_1","ANI_WAIT_c380", -1 , 1 )	//	c380用

		SetChrPos("Rastell",-415.77f	904.32f	12.15f)
		Turn("Rastell",-162.34f,360.0f)
		LookChr("Trakil","Rastell")
		LookChr("Rastell","Trakil")
		if( !FLAG[GF_SUBEV_PAST_D3_TALK_RAS_TRA] )
		{
			SetFlag( TF_CAMERATALK_TRAKIL, 1 )
		} else {
			SetFlag( TF_NORMALTALK_RASTELL, 1 )
		}

		SetChrPos("Barossa",-398.39f,928.72f,10.89f)
		Turn("Barossa",-84.79f,360.0f)
		SetChrPos("TALKPT_Barossa",-395.65f	928.33f	11.07f)		//カウンター会話

		SetChrPos("Merchant",-377.18f,980.90f,10.89f)
		Turn("Merchant",20.05f,360.0f)
		SetChrPos("TALKPT_Merchant",-378.07f	978.45f	10.89f)		//カウンター会話

		SetChrPos("Cryo",-387.07f,972.78f,11.07f)
		Turn("Cryo",-124.91f,360.0f)
		SetChrWork("Cryo",CWK_NPCMODE,NPC_MODE_WAIT )		//ムーブ停止
		SetChrInfoFlag( "Cryo",INFOFLAG_NOTALKTURN)
		SetChrInfoFlag( "Cryo",INFOFLAG_NOTALKMOTION)
		ChangeAnimation( "Cryo", "ANI_EV_TEKOSI", -1, 1 )

		//詩人セパ			//	場所		：王都中央区（過去）・東エリア
//		SetChrPos("Sepa",-386.01f,971.38f,11.07f)
//		Turn("Sepa",-114.22f,360.0f)
		SetChrPos("Sepa",-391.31f,955.28f,10.89f)
		Turn("Sepa",-50.76f,360.0f)
		SetChrPos("eq4020",-391.31f,955.28f,10.89f)			//琴
		SetParent( "eq4020" , "Sepa", "Null_harp" )			//琴
		ChangeAnimation( "Sepa", "ANI_EV_HARP_ENSO", -1, 1 )

		SetChrPos("Haril",-395.42f,994.87f,11.07f)
		Turn("Haril",26.80f,360.0f)
		ChangeAnimation("Haril","ANI_EV_WAIT_BUKI", -1 , 1 )	//	モーション	：歩哨待機
		SetChrPos("eq4029_2",-395.42f,994.87f,11.07f)			//槍
		SetParent( "eq4029_2" , "Haril", "Null_Rhand" )			//槍
		ChangeAnimation("eq4029_2","ANI_WAIT_c381", -1 , 1 )	//	c381用

		SetChrPos("Irake",-484.96f,931.19f,11.07f)
		Turn("Irake",-84.59f,360.0f)

		SetChrPos("Rikarita",-485.09f,933.88f,11.07f)
		Turn("Rikarita",-87.20f,360.0f)
		Look("Rikarita" , 0 , -20 )

		SetChrInfoFlag( "Darios" , INFOFLAG_NOMAPATARICHECK )
		SetChrInfoFlag( "Darios" , INFOFLAG_NOGRAVITY )
		SetChrPos("Darios",-472.00f,940.71f,10.89f)
		Turn("Darios",97.87f,360.0f)
		ChangeAnimation("Darios","ANI_EV_SIT_C", -1 , 1 )	//	モーション	：座る：継続

		//--------モブたち----------------------------------------

		//街を見る
		SetChrPos("Citizen_D3_D01",-443.39f,898.88f,11.07f)
		Turn("Citizen_D3_D01",50.46f,360.0f)

		//街路をルートムーブ＜中央中央Ａ１＞
		SetChrPos("Citizen_2_A01",-386.18f	918.65f	11.07f)
		Turn("Citizen_2_A01",-2.31f,360.0f)

		//街路をルートムーブ＜中央中央Ａ２＞
		SetChrPos("Citizen_2_A02",-441.51f	904.64f	11.07f)
		Turn("Citizen_2_A02",-35.27f,360.0f)

		//	配置・カメラ：西側の道端で下のキャラと話す
		SetChrPos("Citizen_D3_A03",-417.65f,893.22f,10.90f)
		Turn("Citizen_D3_A03",88.66f,360.0f)

		//	配置・カメラ：西側の道端で上のキャラと話す
		SetChrPos("Citizen_D3_A04",-419.42f,893.01f,10.89f)
		Turn("Citizen_D3_A04",-78.28f,360.0f)

		//	配置・カメラ：中央塔を見上げる
		SetChrPos("Citizen_D3_A05",-404.45f,896.23f,11.07f)
		Turn("Citizen_D3_A05",163.87f,360.0f)

		//	配置・カメラ：バロッサの店の買い物客
		SetChrPos("Citizen_D3_A06",-393.89f,928.59f,11.07f)
		Turn("Citizen_D3_A06",99.05f,360.0f)

		//	モーション	：街路をルートムーブ＜中央東Ｂ１＞
		SetChrPos("Citizen_2_B01",-383.46f	954.93f	11.07f)
		Turn("Citizen_2_B01",-171.15f,360.0f)

		//	配置・カメラ：東街道の道脇に立つ／そばに竜車×２を止める
//		SetChrPos("C366_01",-399.81f,986.86f,11.07f)
//		Turn("C366_01",147.38f,360.0f)
		SetChrPos("Citizen_D3_B02",-400.93f,988.69f,11.07f)
		Turn("Citizen_D3_B02",143.49f,360.0f)
//		SetChrPos("C390_01",-403.10f,987.91f,10.89f)
//		Turn("C390_01",40.58f,360.0f)
		SetChrPos("C390_01",-405.63f,987.56f,10.89f)
		Turn("C390_01",31.29f,360.0f)

		//	配置・カメラ：イレーク・リカリタの店で客をする
		SetChrPos("Citizen_D3_C02",-481.36f,932.41f,11.07f)
		Turn("Citizen_D3_C02",91.56f,360.0f)
//		ChangeAnimation("Citizen_D3_C02","ANI_EV_UDEGUMI", -1 , 1 )

		//	モーション	：街路をルートムーブ＜中央西Ｃ１＞
		SetChrPos("Citizen_2_C01",-480.28f	928.47f	11.07f)
		Turn("Citizen_2_C01",-44.76f,360.0f)

		//--------東通路の話せないモブ----------------------------------------
		SetChrPos("C390_02",-354.25f	1038.91f	11.09f)
		Turn("C390_02",37.39f,360.0f)

		SetChrPos("Citizen_D3_M01",-373.61f	1021.57f	11.09f)
		Turn("Citizen_D3_M01",-11.17f,360.0f)

		SetChrPos("Citizen_D3_M02",-373.17f	1019.84f	11.09f)
		Turn("Citizen_D3_M02",174.06f,360.0f)

		SetChrPos("Citizen_D3_M03",-370.02f	1022.57f	11.09f)
		Turn("Citizen_D3_M03",-143.33f,360.0f)

	}
	else //▼ダーナ編①Ａ寺院内を歩く
	{
	}
}

function "NPC_Move_t03"
{
	SetFlag( TF_NPC_MOVE_T03_MODE, 0 )

	while(1)
	{
		MoveTo(this,-381.81f,971.88f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T03_MODE, 1 )
		MoveTo(this,-394.75f,983.62f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T03_MODE, 2 )
		Wait(60)
		MoveTo(this,-381.81f,971.88f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T03_MODE, 3 )
		MoveTo(this,-382.83f,956.81f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T03_MODE, 4 )
		MoveTo(this,-388.75f,947.02f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T03_MODE, 5 )
		Wait(60)
		MoveTo(this,-382.83f,956.81f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T03_MODE, 0 )
	}
}
//★パッチ1.01対応：ルートムーブNPCの座標強制指定用ファンクション
function "NPC_Move_t03_Pos"
{
	//Citizen_2_B01専用。

	if( FLAG[TF_NPC_MOVE_T03_MODE] == 0 )
	{
		SetChrPos( "Citizen_2_B01",-382.83f,956.81f,11.07f)
		Turn("Citizen_2_B01",-174.44f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T03_MODE] == 1 )
	{
		SetChrPos( "Citizen_2_B01",-381.81f,971.88f,11.07f)
		Turn("Citizen_2_B01",133.28f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T03_MODE] == 2 )
	{
		SetChrPos( "Citizen_2_B01",-394.75f,983.62f,11.07f)
		Turn("Citizen_2_B01",-46.69f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T03_MODE] == 3 )
	{
		SetChrPos( "Citizen_2_B01",-381.81f,971.88f,11.07f)
		Turn("Citizen_2_B01",2.73f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T03_MODE] == 4 )
	{
		SetChrPos( "Citizen_2_B01",-382.83f,956.81f,11.07f)
		Turn("Citizen_2_B01",30.07f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T03_MODE] == 5 )
	{
		SetChrPos( "Citizen_2_B01",-388.75f,947.02f,11.07f)
		Turn("Citizen_2_B01",-150.55f,360.0f)
	}

}

function "NPC_Move_t04"
{
	SetFlag( TF_NPC_MOVE_T04_MODE, 0 )

	while(1)
	{
		MoveTo(this,-421.97f,886.17f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T04_MODE, 1 )
		MoveTo(this,-390.15f,899.97f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T04_MODE, 2 )
		MoveTo(this,-388.15f,925.32f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T04_MODE, 3 )
		Wait(60)
		MoveTo(this,-390.15f,899.97f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T04_MODE, 4 )
		MoveTo(this,-421.97f,886.17f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T04_MODE, 5 )
		MoveTo(this,-441.51f,904.64f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T04_MODE, 0 )
		Wait(60)
	}
}
//★パッチ1.01対応：ルートムーブNPCの座標強制指定用ファンクション
function "NPC_Move_t04_Pos"
{
	//Citizen_2_A02専用。

	if( FLAG[TF_NPC_MOVE_T04_MODE] == 0 )
	{
		SetChrPos( "Citizen_2_A02",-441.51f,904.64f,11.07f)
		Turn("Citizen_2_A02",-46.62f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T04_MODE] == 1 )
	{
		SetChrPos( "Citizen_2_A02",-421.97f,886.17f,11.07f)
		Turn("Citizen_2_A02",-112.85f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T04_MODE] == 2 )
	{
		SetChrPos( "Citizen_2_A02",-390.15f,899.97f,11.07f)
		Turn("Citizen_2_A02",-174.75f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T04_MODE] == 3 )
	{
		SetChrPos( "Citizen_2_A02",-388.15f,925.32f,11.07f)
		Turn("Citizen_2_A02",5.27f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T04_MODE] == 4 )
	{
		SetChrPos( "Citizen_2_A02",-390.15f,899.97f,11.07f)
		Turn("Citizen_2_A02",65.98f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T04_MODE] == 5 )
	{
		SetChrPos( "Citizen_2_A02",-421.97f,886.17f,11.07f)
		Turn("Citizen_2_A02",132.61f,360.0f)
	}
}

function "NPC_Move_t05"
{
	SetFlag( TF_NPC_MOVE_T05_MODE, 0 )

	while(1)
	{
		MoveTo(this,-387.01f,901.06f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T05_MODE, 1 )
		MoveTo(this,-422.19f,884.54f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T05_MODE, 2 )
		MoveTo(this,-442.50f,900.64f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T05_MODE, 3 )
		Wait(60)
		MoveTo(this,-422.19f,884.54f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T05_MODE, 4 )
		MoveTo(this,-387.01f,901.06f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T05_MODE, 5 )
		MoveTo(this,-386.18f,918.65f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T05_MODE, 0 )
		Wait(60)
	}
}
//★パッチ1.01対応：ルートムーブNPCの座標強制指定用ファンクション
function "NPC_Move_t05_Pos"
{
	//Citizen_2_A01専用。

	if( FLAG[TF_NPC_MOVE_T05_MODE] == 0 )
	{
		SetChrPos( "Citizen_2_A01",-386.18f,918.65f,11.07f)
		Turn("Citizen_2_A01",2.70f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T05_MODE] == 1 )
	{
		SetChrPos( "Citizen_2_A01",-387.01f,901.06f,11.07f)
		Turn("Citizen_2_A01",64.38f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T05_MODE] == 2 )
	{
		SetChrPos( "Citizen_2_A01",-422.19f,884.54f,11.07f)
		Turn("Citizen_2_A01",127.66f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T05_MODE] == 3 )
	{
		SetChrPos( "Citizen_2_A01",-442.50f,900.64f,11.07f)
		Turn("Citizen_2_A01",-52.33f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T05_MODE] == 4 )
	{
		SetChrPos( "Citizen_2_A01",-422.19f,884.54f,11.07f)
		Turn("Citizen_2_A01",-114.64f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T05_MODE] == 5 )
	{
		SetChrPos( "Citizen_2_A01",-387.01f,901.06f,11.07f)
		Turn("Citizen_2_A01",-176.25f,360.0f)
	}
}

function "NPC_Move_t06"
{
	SetFlag( TF_NPC_MOVE_T06_MODE, 0 )

	while(1)
	{
		MoveTo(this,-465.73f,917.53f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T06_MODE, 1 )
		Wait(60)
		MoveTo(this,-480.28f,928.47f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T06_MODE, 2 )
		MoveTo(this,-479.89f,945.39f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T06_MODE, 3 )
		Wait(60)
		MoveTo(this,-480.28f,928.47f,11.07f,0.5f,0.25f)
		SetFlag( TF_NPC_MOVE_T06_MODE, 0 )
	}
}
//★パッチ1.01対応：ルートムーブNPCの座標強制指定用ファンクション
function "NPC_Move_t06_Pos"
{
	//Citizen_2_C01専用。

	if( FLAG[TF_NPC_MOVE_T06_MODE] == 0 )
	{
		SetChrPos( "Citizen_2_C01",-480.28f,928.47f,11.07f)
		Turn("Citizen_2_C01",-53.06f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T06_MODE] == 1 )
	{
		SetChrPos( "Citizen_2_C01",-465.73f,917.53f,11.07f)
		Turn("Citizen_2_C01",128.02f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T06_MODE] == 2 )
	{
		SetChrPos( "Citizen_2_C01",-480.28f,928.47f,11.07f)
		Turn("Citizen_2_C01",-179.74f,360.0f)
	}
	else if( FLAG[TF_NPC_MOVE_T06_MODE] == 3 )
	{
		SetChrPos( "Citizen_2_C01",-479.89f,945.39f,11.07f)
		Turn("Citizen_2_C01",0.19f,360.0f)
	}
}

function "NPC_Move_t07"
{
	while(1)
	{
		MoveTo(this,-397.77f,873.08f,11.09f,0.5f,0.25f)
		Wait(60)
		MoveTo(this,-382.43f,836.94f,11.09f,0.5f,0.25f)
		Wait(60)
	}
}
function "NPC_Move_t08"
{
	while(1)
	{
		MoveTo(this,-350.33f	1049.53f	11.09f,0.5f,0.25f)
		Wait(60)
		MoveTo(this,-370.02f	1022.57f	11.09f,0.5f,0.25f)
		Wait(60)
	}
}
function "NPC_Move_t09"
{
	while(1)
	{
		MoveTo(this,-369.03f	1021.16f	11.09f,0.5f,0.25f)
		Wait(60)
//		MoveTo(this,-345.44f	1053.97f	11.09f,0.5f,0.5f)
		MoveTo(this,-312.61f	1099.72f	11.09f,0.5f,0.25f)
		Wait(60)
	}
}

function "NPC_Move_t10"
{
	while(1)
	{
		MoveTo(this,-380.41f	837.45f	11.09f,0.5f,0.25f)
		Wait(60)
		MoveTo(this,-393.71f	867.09f	11.09f,0.5f,0.25f)
		Wait(60)
	}
}

function "NPC_TeburiLoop"
{
	while(1)
	{
		Wait((80 + rand() % 120))	// 適当にばらけさせる
		ChangeAnimation("this","ANI_EV_TEBURI", -1 , 1 )
	}
}



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//■一般会話セクション

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


//──────────────────────────────
//	【衛士トラキル】
//──────────────────────────────
function "Talk_Trakil"
{
	//カメラモード制御
	if( !FLAG[TF_CAMERATALK_TRAKIL] )
	{
		SetStopFlag(STOPFLAG_TALK)
		CallFunc("system:talk_begin_zoom")		//TALK_ZOOM
	}

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：中央塔前で歩哨
		//	モーション	：歩哨をする
		//───────────────

		LookChr("this","LEADER")

		//	衛士トラキル
		TalkPopup("this",0,0,0,0,0)
		{
			"これは巫女様……！"
			"収穫祭の儀、実に見事でございました。\p"
			"今年は諸国からの参列者も"
			"錚々#4Rそうそう#Rたる顔ぶれ──\p"
			"はは、まさに歴史に残る"
			"祭事といっても過言ではありますまい。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：中央塔前で歩哨
		//	モーション	：歩哨をする
		//───────────────

		LookChr("this","LEADER")
		PlayVoice(Y8V_5742,"this",100)	//うーん

		//	衛士トラキル
		TalkPopup("this",0,0,0,0,0)
		{
			"ラステルめ……入隊試験を"
			"一発合格とは、やるじゃないか。\p"
			"フフ、巫女様も"
			"どうか褒めてやって下さい。\p"
			"中々できる事ではありません。"
			"あいつはやはり、逸材ですよ。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：中央塔前
		//	モーション	：歩哨をする
		//───────────────

		LookChr("this","LEADER")

		PlayVoice(Y8V_5745,"this",100)	//これはこれは

		//	衛士トラキル
		TalkPopup("this",0,0,0,0,0)
		{
			"これはこれは……"
			"本日もよい日和ですな。\p"
			"何かございましたら"
			"すぐに我々にお申し付け下され。\p"
			"巫女様の仰ることには従うよう、"
			"女王陛下からも命じられておりますので。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：中央塔前でラステルと話す
		//	モーション	：歩哨をする
		//───────────────
		//　　★ＧＦ初回
		if( !FLAG[GF_SUBEV_PAST_D3_TALK_RAS_TRA] )
		{
			EventCue("mp6201m:SubEV_Past_D3_Ras_Tra")	//共通会話
		}
		else
		{
			//　　★ＧＦ以降
			//　　振り返らない
			//	衛士トラキル
			TalkPopup("this",0,0,0,0,0)
			{
				"お前さんは熱心だから、なおのこと困るよ。\p"
				"熱心2行目"
				"いいか、絶対に迷惑にならないよう"
				"遠くから見るだけだぞ？"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ラステル
			TalkPopup("Rastell",0,0,0,0,0)
			{
				"はい、約束しますっ！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	衛士トラキル
			TalkPopup("this",0,0,0,0,0)
			{
				"うむ……いい返事だ。"
				"お前はきっといい衛士になるとも。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALK)
	if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		LookChr("Trakil","Rastell")
	}
}
/*
function "Talk_D3_Trakil_Rastell"
{

		//────────  一般・開始処理(過去編)  ──────────
		SetStopFlag(STOPFLAG_TALK2)
		//───────────────
		//	場所		：大峡谷（過去）・スタート地点
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		SaveCamera()
		MoveCameraAt( 0 , -415.302f , 904.617f , 14.000f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 1.647f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 5.621f , 0 )	// 基本仰角
		RotateCamera( 0 , 32.269f , 0 )				// 角度
		ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		//キャラ初期動作の記述
		LookSpd("Trakil", 1.0f, 1.0f, 1.0f)
		LookTo("Trakil", -14.70f	-147.69f	1.6f )	// 首を正面に向ける
		LookSpd("Rastell", 1.0f, 1.0f, 1.0f)
		LookTo("Rastell", -414.59f	903.49f	13.85f )	// 首を正面に向ける

		Turn("Rastell",-90.64f,360.0f)

		CallFunc("system:talkevent_begin")		//TALK_BEGIN

		ChangeSubAnimation("Rastell",SUBMOT_EYE,ANI_E_WAIT,1)
		ChangeSubAnimation("Rastell",SUBMOT_MOUTH,ANI_M_SMILE,1)

		//共通会話なので手動制御
		SetChrWork("Trakil", CWK_SCRIPTPAUSE, 1)
		SetChrWork("Trakil", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrWork("Rastell", CWK_SCRIPTPAUSE, 1)
		SetChrWork("Rastell", CWK_DEFAULT_SKIPNODE_OFF, 1)
		LookSpd("Trakil", LOOKSPD_DEFAULT, LOOKSPD_DEFAULT, LOOKSPD_DEFAULT)
		LookSpd("Rastell", LOOKSPD_DEFAULT, LOOKSPD_DEFAULT, LOOKSPD_DEFAULT)
		//───────────────────────────────

		//	衛士トラキル
		TalkPopup("Trakil",0,2,0,0,0)
		{
			"#000e#000mおや、大樹の巫女様。"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	ラステル
		TalkPopup("Rastell",0,0,0,0,0)
		{
			"巫女様っ！"
			"ご無沙汰しています！"
		}
		WaitPrompt()
		WaitCloseWindow()

		PlayVoice(Y8V_2997,"DANA",100)	//ふふ（微笑）

		//	"DANA"
		TalkPopup("DANA",0,3,350,236,0)		//一人称ダーナ：右
		{
			"#000e#000mふふ、しばらく振りですね。\p"
			"ラステルは"
			"ここで何をしているのですか？"
		}
		WaitPrompt()
		WaitCloseWindow()

		ChangeSubAnimation("Rastell",SUBMOT_EYE,ANI_E_LAUGH_S,1)

		//	衛士トラキル
		TalkPopup("Trakil",0,2,0,0,0)
		{
			"#011eそれが、親父さんの仕事を"
			"見学したいと言って聞かんのです。"
		}
		WaitPrompt()
		WaitCloseWindow()

		ChangeSubAnimation("Trakil",SUBMOT_EYE,ANI_E_CLOSE_E,1)
		LookChr("Trakil","Rastell")

		TalkPopup("Trakil",0,2,0,0,0)
		{
			"ラステル、分かってくれ。"
			"お前さんが衛士に憧れる気持ちは"
			"よーく分かるが……\p"
			"親父さんは今、王宮前の"
			"警備をなさっているんだ。"
			"お前がいては形無しだろう。"
		}
		WaitPrompt()
		WaitCloseWindow()

		ChangeSubAnimation("Rastell",SUBMOT_EYE,ANI_E_SAD_S,1)
		ChangeSubAnimation("Rastell",SUBMOT_MOUTH,ANI_M_WAIT,1)
		Turn("Rastell",-175.24f,8.0f)
		LookChr("Rastell","Trakil")

		//	ラステル
		TalkPopup("Rastell",0,0,0,0,0)
		{
			"うっ……で、でも"
			"僕だって子供じゃありません。"
		}
		WaitPrompt()
		WaitCloseWindow()

		ChangeAnimation("Rastell","ANI_EV_TEBURI", -1 , 1 )

		TalkPopup("Rastell",0,0,0,0,0)
		{
			"絶対に邪魔はしません！"
			"遠くから見るだけですから！"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	"DANA"
		TalkPopup("DANA",0,3,350,236,0)		//一人称ダーナ：右
		{
			"#000e#000mくすくす……"
			"相変わらずですね。\p"
			"『父上のような衛士になって"
			"　王都を守ってみせます！』って"
			"前に約束してくれましたよね。"
		}
		WaitPrompt()
		WaitCloseWindow()

		LookTo("Trakil", -14.70f	-147.69f	1.6f )	// 首を正面に向ける
		LookTo("Rastell", -414.59f	903.49f	13.85f )	// 首を正面に向ける
		ChangeSubAnimation("Rastell",SUBMOT_EYE,ANI_E_WAIT,1)
		ChangeSubAnimation("Rastell",SUBMOT_MOUTH,ANI_M_SMILE_S,1)
		Turn("Rastell",-90.64f,6.0f)

		PlayVoice(Y8V_5781,"Rastell",100)	//えへへ

		//	ラステル
		TalkPopup("Rastell",0,0,0,0,0)
		{
			"#021eえへへへへ……はい！"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	衛士トラキル
		TalkPopup("Trakil",0,2,0,0,0)
		{
			"#011eもう我々にとっても"
			"可愛い弟分でしてな。\p"
			"#012eいやはや、こうも熱心では"
			"敵いませんよ。"
		}
		WaitPrompt()
		WaitCloseWindow()
		SetFlag( GF_1STTALK_PAST_D3_TRAKIL, 1 )
		SetFlag( TF_CAMERATALK_TRAKIL, 0 )
		SetFlag( TF_NORMALTALK_RASTELL, 1 )

		CallFunc("system:talkevent_end_ps")		//TALK_END

		//共通会話なので手動制御
		SetChrWork(Trakil, CWK_SCRIPTPAUSE, 0)
		SetChrWork(Trakil, CWK_DEFAULT_SKIPNODE_OFF, 0)
		SetChrWork(Rastell, CWK_SCRIPTPAUSE, 0)
		SetChrWork(Rastell, CWK_DEFAULT_SKIPNODE_OFF, 0)

		Turn("Rastell",-162.34f,360.0f)
		LookChr("Trakil","Rastell")
		LookChr("Rastell","Trakil")

}
*/

//──────────────────────────────
//	【ラステル】
//──────────────────────────────
function "Talk_Rastell"
{
	//カメラモード制御
	if( FLAG[TF_NORMALTALK_RASTELL] )
	{
		SetStopFlag(STOPFLAG_TALK)
		CallFunc("system:talk_begin_zoom")		//TALK_ZOOM
	}


	if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )						//▼過去編Ⅲバハの塔へ向かう
	{
		if( FLAG[GF_QUEST_522] == QUEST_START &&
			FLAG[GF_QS522_TALK_SERACH2] &&		//【QS522】▼楽譜探しイベント② を見た
			!FLAG[GF_QS522_TALK_SERACH3] )		//【QS522】▼楽譜探しイベント③ を見た
		{
			//【QS522】奮起の演奏会（オースティン）
			CallFunc("talk:Talk_Rastell")	//▼楽譜探しイベント③
		}
		else
		{
			//▼過去編Ⅲバハの塔へ向かう
			//───────────────
			//	場所		：王都中央区（過去）・東エリア
			//───────────────
			//	配置・カメラ：東街道の道脇に立つ
			//	モーション	：歩哨
			//───────────────
			//　　★サブイベント後の会話

			LookChr("this","LEADER")

			if( !FLAG[TF_RASTELL_TALK] )
			{
				//	衛士ラステル
				TalkPopup("this",0,0,0,0,0)
				{
					"衛士隊の訓練は厳しいですが"
					"毎日とても充実しております。\p"
					"警備の任務にも就かせて"
					"もらえるようになりましたし……\p"
					"その、これからは巫女様とお会いできる"
					"機会も増えるかもしれませんね。"
				}
				WaitPrompt()
				WaitCloseWindow()

				//	衛士ラステル
				TalkPopup("this",0,0,0,0,0)
				{
					"コホン……巫女様、本日は"
					"街道に御用であらせられましょうか。\p"
					"どうかお気をつけ下さいませ。"
					"大樹の恵みがあらん事を！"
				}
				WaitPrompt()
				WaitCloseWindow()
				SetFlag( TF_RASTELL_TALK, 1 )
			}
			else
			{
				//　　★繰り返し
				//　　※カメラ切り替えなし
				//	衛士ラステル
				TalkPopup("this",0,0,0,0,0)
				{
					"コホン……街道に出られるのでしたら"
					"どうかお気をつけ下さいませ。\p"
					"大樹の恵みがあらん事を！ "
				}
				WaitPrompt()
				WaitCloseWindow()
			}
		}
	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：中央塔前でトラキルと話す
		//	モーション	：
		//───────────────
		//　　トラキルと共通
		//　　★ＧＦ以降
		if( !FLAG[GF_SUBEV_PAST_D3_TALK_RAS_TRA] )
		{
			EventCue("mp6201m:SubEV_Past_D3_Ras_Tra")	//共通会話
		}
		else
		{
			LookChr("this","LEADER")
			TurnToChr("this","LEADER",10.0)
		
			if( !FLAG[TF_RASTELL_TALK] )
			{
				//	ラステル
				TalkPopup("this",0,0,0,0,0)
				{
					"巫女様、僕はいつか"
					"父上みたいな衛士になってみせます。\p"
					"えへへ、その時は巫女様の事も"
					"守って差し上げますよ！"
				}
				WaitPrompt()
				WaitCloseWindow()

				//	"DANA"
				TalkPopup("PLAYER1",0,0,0,0,0)
				{
					"#000e#000mふふ、それは楽しみです。\p"
					"ではしっかり修行して、"
					"腕を磨かなくてはなりませんね。"
				}
				WaitPrompt()
				WaitCloseWindow()

				//　　ラステル、敬礼してみせる
				//	ラステル
				TalkPopup("this",0,0,0,0,0)
				{
					"ええ、任せてください！"
				}
				WaitPrompt()
				WaitCloseWindow()
				SetFlag( TF_RASTELL_TALK, 1 )
			}
			else
			{
				//　　★繰り返し
				//	ラステル
				TalkPopup("this",0,0,0,0,0)
				{
					"僕はいつか父上みたいに"
					"立派な衛士になってみせます。\p"
					"えへへ、そして巫女様の事も"
					"守って差し上げますから！"
				}
				WaitPrompt()
				WaitCloseWindow()
			}
		}

	}

	ResetStopFlag(STOPFLAG_TALK)
	if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		LookChr("Rastell","Trakil")
	}

}

//──────────────────────────────
//	【バロッサ】
//──────────────────────────────
function "Talk_Barossa"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：東側で露店をやっている
		//	モーション	：
		//───────────────
		if( !FLAG[TF_BAROSSA_TALK] )
		{

			PlayVoice(Y8V_5769,"this",100)	//巫女様…

			//	バロッサ
			TalkPopup("this",0,0,0,0,0)
			{
				"ダーナ様、最近どうしたんです？"
				"あちこち出かけてらっしゃいますけど。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("PLAYER1",0,0,0,0,0)
			{
				"#000e#000mええ……少し調べ物があって。\p"
				"調べ物2行目"
				"ふふ、勿論オルガ祭司長の"
				"許可は貰っていますよ？"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	バロッサ
			TalkPopup("this",0,0,0,0,0)
			{
				"忙しいんですねぇ……"
				"仕方ないんでしょうけれど。\p"
				"食事はちゃんと"
				"取ってらっしゃいますか？\p"
				"ただでさえ小柄なんですから、"
				"ちゃんと食べてくださいねぇ！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_BAROSSA_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	バロッサ
			TalkPopup("this",0,0,0,0,0)
			{
				"ダーナ様が最近"
				"元気が無いように見えてねぇ……\p"
				"また少し痩せたんじゃございませんか？\p"
				"あまり根を詰めすぎないように"
				"してくださいねぇ。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：東側で露店をやっている
		//	モーション	：
		//───────────────
		if( !FLAG[TF_BAROSSA_TALK] )
		{

			PlayVoice(Y8V_5769,"this",100)	//巫女様…

			//	バロッサ
			TalkPopup("this",0,0,0,0,0)
			{
				"聞きましたよ、ダーナ様！"
				"北方諸国の間で続いていた戦争が"
				"終結したそうでございますねぇ！\p"
				"しかも、またダーナ様の予知が"
				"和平に結びついたとか！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("PLAYER1",0,0,0,0,0)
			{
				"#000e#000mそ、それに関しては偶然ですから。\p"
				"サライ女王がうまく"
				"生かしてくれたのです。"
				"私は大したことは。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	バロッサ
			TalkPopup("this",0,0,0,0,0)
			{
				"あっはっは、ご謙遜なさって！\p"
				"いずれにせよ、これで世の中の"
				"戦争もすべて終わったんです。\p"
				"ええ、ダーナ様とサライ様がいれば、"
				"本当に天下安泰でございますねぇ！\p"
				"来年や再来年はもっと"
				"いい年になるに違いありませんよ！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("PLAYER1",0,0,0,0,0)
			{
				"#000e#000mあははは……\p"
				"（……そうだといいんだけど……）"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_BAROSSA_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//	バロッサ
			TalkPopup("this",0,0,0,0,0)
			{
				"来年や再来年は、もっと"
				"いい年になるに違いありませんよ。\p"
				"あっはっは、楽しみでございますねぇ！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：東側で露店をやっている
		//	モーション	：
		//───────────────
		if( !FLAG[TF_BAROSSA_TALK] )
		{
			//	バロッサ
			TalkPopup("this",0,0,0,0,0)
			{
				"おやまあ、最近忙しそうじゃ"
				"ございませんか！\p"
				"ご活躍の噂を聞くたびに"
				"アタシらも鼻が高うございますよ。\p"
				"あのお転婆ダーナ様が、"
				"今じゃすっかり立派になられて。\p"
				"今度おいしい果実酒でも"
				"寄進いたしますから、"
				"楽しみにしていてくださいねぇ！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_BAROSSA_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//	バロッサ
			TalkPopup("this",0,0,0,0,0)
			{
				"あのお転婆ダーナ様が、"
				"今じゃすっかり立派になられて。\p"
				"今度おいしい果実酒でも"
				"寄進いたしますから、"
				"楽しみにしていてくださいねぇ！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：東側で露店をやっている
		//	モーション	：
		//───────────────
		//　　★ＧＦ初回
		if( !FLAG[GF_1STTALK_PAST_D3_BAROSSA] )
		{
			//	バロッサ
			TalkPopup("this",0,0,0,0,0)
			{
				"あれまあ、ダーナ様！"
				"ご無沙汰でございますねぇ！\p"
				"しかしまあ……"
				"ちゃんと食べてらっしゃいますか？\p"
				"大変なお役目でしょうに、"
				"こんなに小さなお体で……\p"
				"ああ、子供の頃にもっと"
				"食べさせてあげればよかったですよ……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("PLAYER1",0,0,0,0,0)
			{
				"#000e#000mふふ、気にしないで下さい。\p"
				"昔からおばさんには"
				"沢山食べさせてもらいましたから。\p"
				"私の身長は、きっとこのくらいって"
				"決まっていたのです、ええ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　バロッサに・・・エモーション
			EmotionEx("this", 0.00f, EMO_3DOT, 0, 5, 1, 1, 1.6f)	//…
			Wait(50)
			
			//	バロッサ
			TalkPopup("this",0,0,0,0,0)
			{
				"#12Sヒソヒソ……南方の海生竜種に"
				"#12Sゴランザって奴がいるらしくてね。\p"	//（フォントやや小）\p"
				"#12Sその乳を飲むと"
				"#12S背が伸びるって噂なんだよ。"
				"#12S今度取り寄せておこうかい？"	//（フォントやや小）"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　ダーナ、瞑目して頭を垂れる
			
			TalkPopup("PLAYER1",0,0,0,0,0)
			{
				"#000e#000m#12S…………是非お願いします。"	//（フォントやや小）"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	バロッサ
			TalkPopup("this",0,0,0,0,0)
			{
				"あっはっは！"
				"かしこまりましてございますよ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("PLAYER1",0,0,0,0,0)
			{
				"#000e#000m（ふふ、おばさんには敵わないなぁ。）"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( GF_1STTALK_PAST_D3_BAROSSA, 1 )
		}
		else
		{
			//　　★ＧＦ以降
			//	バロッサ
			TalkPopup("this",0,0,0,0,0)
			{
				"ダーナ様は巫女様になっても"
				"相変わらずでございますねえ。\p"
				"王都に来たばかりの頃から"
				"お体は小さいのに、やる事は大胆で。\p"
				"あっはっは、もっともそういう所が"
				"アタシらは大好きですけどねぇ！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【商人】（青年）
//──────────────────────────────
function "Talk_Merchant"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：出口付近で露店をする
		//	モーション	：
		//───────────────
		if( !FLAG[TF_MERCHANT_TALK] )
		{
			//	商人
			TalkPopup("this",0,0,0,0,0)
			{
				"近頃ユカって職人見習いから"
				"理法具を仕入れてるのさ。\p"
				"試作品って触れ込みだが"
				"かなり出来がよくってなぁ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation("this","ANI_EV_TEBURI", -1 , 1 )

			//	商人
			TalkPopup("this",0,0,0,0,0)
			{
				"ところが、それに対抗心を燃やした"
				"レイキーって有名な職人まで"
				"理法具を持ち込むようになりやがった。\p"
				"客の評価を聞きたいらしいんだが……"
				"一流の職人だけあって"
				"文句の付けようのない傑作ぞろいだぜ。\p"
				"俺には何がしたいのかサッパリだが……"
				"ま、ともかく儲けさせてもらってるぜ。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_MERCHANT_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	商人
			TalkPopup("this",0,0,0,0,0)
			{
				"レイキーっていやあ"
				"五本の指に入る有名な理法具職人だ。\p"
//				"なんで二人が張り合ってるのかとか、"
//				"俺には判らんことばかりだが……"
				"俺には何がしたいのかサッパリだが……2"
				"ま、ともかく儲けさせてもらってるぜ。2"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：出口付近で露店をする
		//	モーション	：
		//───────────────
		if( !FLAG[TF_MERCHANT_TALK] )
		{
			CallFunc("mp6201m:Talk_Merchant_Lakey")	//共通会話
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//　　振り返らない
			//	商人
			TalkPopup("this",0,0,0,0,0)
			{
				"買うかい？　４０００リグだ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	レイキー
			TalkPopup("Lakey",0,0,0,0,0)
			{
				"安いっての！"
				"４０万はする出来だぞ！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	商人
			TalkPopup("this",0,0,0,0,0)
			{
				"そうなのか？　……ってか"
				"安いって怒られたのは初めてだぜ。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：出口付近で露店をする
		//	モーション	：
		//───────────────
		if( !FLAG[TF_MERCHANT_TALK] )
		{
			//	商人
			TalkPopup("this",0,0,0,0,0)
			{
				"大樹の巫女様といえば、"
				"バラッカの大火を防がれたのも凄いが……\p"
				"去年の赤潮を予知されたのも"
				"記憶に新しいなぁ。\p"
				"その後陛下が対策を指示されたおかげで"
				"被害も最小限で済んだんだ。\p"
				"漁村の連中もそうだが、わしら交易商人も"
				"胸をなでおろしたもんだよ。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_MERCHANT_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	商人
			TalkPopup("this",0,0,0,0,0)
			{
				"大樹の巫女様と陛下のおかげで"
				"被害も最小限で済んだんだ。\p2"
				"まったく大したお二人だぜ……！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：出口付近で露店をする
		//	モーション	：
		//───────────────
		//	商人
		TalkPopup("this",0,0,0,0,0)
		{
			"らっしゃーい！"
			"交易品ならうちに任せてくんな！\p"
			"毎朝獣車で取り寄せてる"
			"新鮮な魚介なんてどうだい！\p"
			"今日はオケアノスの肉もあるよっ！"
			"さあ買わなきゃソンソンだ！"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}

function "Talk_Merchant_Lakey"
{
			//　　振り返らない
			//	レイキー
			TalkPopup("Lakey",0,0,0,0,0)
			{
				"なななっ……おいアンタ！"
				"そりゃあ本当かぁ！？"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation("Merchant","ANI_EV_TEBURI", -1 , 1 )

			//	商人
			TalkPopup("Merchant",0,0,0,0,0)
			{
				"ああ、その理法具は"
				"アンタの娘さんが造ったんだよ。\p"
				"うちは理法具は扱ってないんだが、"
				"生活費の足しにしたいって言うんでな。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	レイキー
			TalkPopup("Lakey",0,0,0,0,0)
			{
				"うーむ、確かに"
				"俺の道具でこさえたもんだ……\p"
				"しかしユカのやつ……"
				"いつの間に理法具造りなんて……"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_MERCHANT_TALK, 1 )
}
//──────────────────────────────
//	【レイキー】
//──────────────────────────────
function "Talk_Lakey"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：上の商人と話す
		//	モーション	：
		//───────────────
		if( !FLAG[TF_MERCHANT_TALK] )
		{
		//　　商人と共通
			CallFunc("mp6201m:Talk_Merchant_Lakey")	//共通会話
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//　　振り返らない
			//	レイキー
			TalkPopup("this",0,0,0,0,0)
			{
				"うーむ……まだ荒いが"
				"いい出来だ……\p"
				"じゃ、ねえって！"
				"ユカのやつ、勝手をしやがって……！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【ユカ】
//──────────────────────────────
function "Talk_Yuka"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：物陰に隠れてレイキーに向く
		//	モーション	：
		//───────────────
		if( !FLAG[TF_YUKA_TALK] )
		{
	
			PlayVoice(Y8V_5765,"this",100)	//ふう

			//	ユカ
			TalkPopup("this",0,0,0,0,0)
			{
				"（……か、間一髪だった……"
				"　まさか父と鉢合わせするなんて……）\p"
				"（ふふ、でも父も"
				"　私の技量に驚いているようね。）\p"
				"（ふふふ……ここ数年、"
				"　内緒で腕を磨いていたの。"
				"　せいぜい打ちのめされるがいいわ……！）"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_YUKA_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	ユカ
			TalkPopup("this",0,0,0,0,0)
			{
				"（ふふふ……実はここ数年、"
				"　内緒で腕を磨いていたの。）\p"
				"（いつも飲んだくれている父よ。"
				"　せいぜい打ちのめされるがいいわ……！）"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【クライオ】
//──────────────────────────────
function "Talk_Cryo"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都西街区（過去）・入り口付近
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────

		if( !FLAG[TF_CRYO_TALK] )
		{
			
			PlayVoice(Y8V_5746,"this",100)	//どうも

			//	クライオ
			TalkPopup("this",0,0,0,0,0)
			{
				"今年の収穫祭には"
				"諸国の使節が勢ぞろいしてたよな。\p"
				"いつの間にやら随分と"
				"平和になったもんだけどよ。\p"
				"勘違いすんなよ？　元々自分らの"
				"国のことしか頭にねえような連中だ。\p"
				"ほっときゃまた勝手に争い始めるぜ。"
				"争い8行目"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_CRYO_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	クライオ
			TalkPopup("this",0,0,0,0,0)
			{
				"小国のくせに、自分らの"
				"国のことしか頭にねえような連中だ。\p "
				"ほっときゃまた勝手に争い始めるぜ。 "
				"争い4行目"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都西街区（過去）・入り口付近
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		if( !FLAG[TF_CRYO_TALK] )
		{
			//	クライオ
			TalkPopup("this",0,0,0,0,0)
			{
				"思うんだが……"
				"理力の強いヤツって得だよな～。\p"
				"結局、何をしても優秀だろ？"
				"国にも重用されるしな。\p"
				"あーあ、世の中平等じゃねえぜ。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_CRYO_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//	クライオ
			TalkPopup("this",0,0,0,0,0)
			{
				"修行で鍛えられるっつっても、"
				"生まれついての差はデカイしな。\p"
				"あーあ、世の中平等じゃねえぜ。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
//	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
//	{
//		//▼過去編Ⅱ南門へ向かう
//		//───────────────
//		//	場所		：王都西街区（過去）・入り口付近
//		//───────────────
//		//	配置・カメラ：適当な位置で風景を見る
//		//	モーション	：
//		//───────────────
//		//	//西街区以外に移す？
//		//	クライオ
//		TalkPopup("this",0,0,0,0,0)
//		{
//			"サライ陛下の時代になって"
//			"不思議といい事が続いてるけどよ。\p"
//			"別に陛下の手腕ってわけじゃ"
//			"ねーんじゃねえか？\p"
//			"別にケチをつけるつもりもねえけどよ。"
//			"あの方は寺院で修行してたんだろ？\p"
//			"上手くいってんのも、単純に"
//			"大樹の恵みってだけなんじゃねーのか？"
//		}
//		WaitPrompt()
//		WaitCloseWindow()
//
//		//　　★繰り返し
//		//	クライオ
//		TalkPopup("this",0,0,0,0,0)
//		{
//			"寺院で修行してた"
//			"女王なんて初耳だぜ。\p"
//			"いい事が続いてんのも、単純に"
//			"大樹の恵みってだけなんじゃねーのか？"
//		}
//		WaitPrompt()
//		WaitCloseWindow()
//
//	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：上の店の客をする
		//	モーション	：
		//───────────────

		if( !FLAG[TF_CRYO_TALK] )
		{
			//	クライオ
			TalkPopup("this",0,0,0,0,0)
			{
				"やれやれ、今日も景気がいいこって。\p"
				"お嬢ちゃん知ってるかい？"
				"世の中平和だけじゃねえんだぜ。\p"
				"辺境には戦争してる地域だってある。\p"
				"辺境2行目"
				"へっ、そう考えりゃエタニア人は"
				"ノホホンとしすぎてんじゃねーか？"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_CRYO_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	クライオ
			TalkPopup("this",0,0,0,0,0)
			{
				"辺境に行きゃあまだまだ"
				"戦争してる小国が……\p"
				"……ってよく見たら"
				"随分小さい嬢ちゃんだな。"
				"へっ、まだ難しかったかね。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　ダーナに冷や汗モーション
			EmotionEx("PLAYER1",0.00f,EMO_TARA,0,5,1,1,1.6f)	// 冷や汗
			Wait(45)
		}
	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【詩人セパ】
//──────────────────────────────
function "Talk_Sepa"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	//【QS522】奮起の演奏会（オースティン）
	if( FLAG[GF_QUEST_522] == QUEST_START &&
		!FLAG[GF_QS522_TALK_SERACH1] )		//【QS522】▼楽譜探しイベント① を見た
	{
		//──────────────────────────────
		//▼楽譜探しイベント①
		//──────────────────────────────
		//　　過去編のどこでもいいので、
		//　　詩人セパに話しかけるとイベント開始。
		
		LookChr("this", "LEADER")
		
		TalkPopup("PLAYER1",0,0,0,0,0)
		{
			"#0L#12S（そうだ、この人なら……）\p"
			"あの、ちょっといいかな。"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	詩人セパ
		TalkPopup("this",0,0,0,0,0)
		{
			"#000e#000mこれはこれは巫女様、"
			"どうかされましたか？"
		}
		WaitPrompt()
		WaitCloseWindow()

		TalkPopup("PLAYER1",0,0,0,0,0)
		{
			"#000e#000mえっと、詩人さんは楽譜って持ってる？\p"
			"詩人2行目"
			"竪琴で演奏できる曲でその……\p"
			"#0L#12S（オケアノスに挑む"
			"#0L#12S　景気付けってことだから……）\p"
			"#000e#000m#14Sみんなが明るく元気に"
			"なれるようなものがいいんだけど。"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	詩人セパ
		TalkPopup("this",0,0,0,0,0)
		{
			"#000e#000m明るく元気に……\p"
			"それなら定番ですが、"
			"『蒼き豊穣』辺りがよろしいですかね。"
		}
		WaitPrompt()
		WaitCloseWindow()

		TalkPopup("PLAYER1",0,0,0,0,0)
		{
			"#000e#000m『蒼き豊穣』……"
			"収穫祭でも演奏される演目だね。\p"
			"うん、いいと思う！"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	詩人セパ
		TalkPopup("this",0,0,0,0,0)
		{
			"#000e#000mふふ、それはよかった。\p"
			"ですが、楽譜はカジュラさんという"
			"娘さんに渡してしまいまして……\p"
			"今は手元にないのです。\p"
			"ですが話をすれば"
			"譲ってもらえるかもしれませんよ？"
		}
		WaitPrompt()
		WaitCloseWindow()

		TalkPopup("PLAYER1",0,0,0,0,0)
		{
			"#000e#000m分かった、それじゃあ聞いてみるね。"
		}
		WaitPrompt()
		WaitCloseWindow()

		//　　イベント終了、操作許可。
		SetFlag( GF_QS522_TALK_SERACH1, 1 )	//【QS522】▼楽譜探しイベント① を見た
	}
	else if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )		//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：音楽を奏でる
		//───────────────
		//　　演奏したまま振り返らない
		//	詩人セパ
		TalkPopup("this",0,0,0,0,0)
		{
			"#2W古き最古の　伝承は語る──"
			"大樹と理力が　導く先を──\p"
			"#2W栄光と繁栄の　歴史の中で"
			"やがて巫女の中の巫女が現れん──\p"
			"#2Wまさに世が道　違わなくば──"
			"いざ大樹の盟約　果たされん──"
		}
		WaitPrompt()
		WaitCloseWindow()

	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：音楽を奏でる
		//───────────────
		//　　演奏したまま振り返らない
		//	詩人セパ
		TalkPopup("this",0,0,0,0,0)
		{
			"#2W世が栄えるとき　悪も栄える──"
			"密かに目覚めし　邪悪な思念──\p"
			"#2W大樹に背きし異民たちは"
			"大樹を切り倒さんと斧をふるう──\p"
			"#2W……だが大いなる大樹の光は"
			"彼らの心すら満たしていった──"
		}
		WaitPrompt()
		WaitCloseWindow()

	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：音楽を奏でる
		//───────────────
		//　　演奏したまま振り返らない
		//	詩人セパ
		TalkPopup("this",0,0,0,0,0)
		{
			"#2W大樹によって　目覚めし者たち──"
			"その地に一つの王国を築いた──\p"
			"#2Wその槌の音に　世界は目覚め"
			"やがてあまたの種が集う──\p"
			"#2W花は咲き　鳥は歌う──"
			"ああここは　エタニア王国──"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：音楽を奏でる
		//───────────────
		//　　演奏したまま振り返らない
		//	詩人セパ
		TalkPopup("this",0,0,0,0,0)
		{
			"#2W西海の真珠と謳われし、"
			"美しき王都アイギアス──\p"
			"#2W最古の都に薫るは"
			"きらめく碧き　はじまりの風──\p"
			"#2W常しえの世に　巫女は舞う"
			"神代の世より　巫女は舞う──"
		}
		WaitPrompt()
		WaitCloseWindow()

		//────────────────────
		//	⇒ＬＦで１回だけ
		if( !FLAG[TF_SEPA_TALK] )
		{
			TalkPopup("PLAYER1",0,0,0,0,0)
			{
				"#000e#000m（これは……エタニアの"
				"　建国叙情譚だね。）\p"
				"（ふふ、この詩人さんは"
				"　中々の腕前みたい。）"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_SEPA_TALK, 1 )
		}
		//────────────────────

	}

	ResetStopFlag(STOPFLAG_TALK)
}
//──────────────────────────────
//	【衛士ハリル】
//──────────────────────────────
function "Talk_Haril"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：東街道の道脇に立つ
		//	モーション	：歩哨
		//───────────────
		
		PlayVoice(Y8V_5757,"this",100)	//ふむ
		
		//	衛士ハリル
		TalkPopup("this",0,0,0,0,0)
		{
			"巫女様の予知は"
			"遠く辺境の地にも及ぶのですね。\p"
			"あの犬猿の仲だったオルサンとバラルの講和は"
			"巫女様の予知がきっかけだったとか……\p"
			"いやはや、さすがでございます。"
			"どうか今後も良くお導き下さいますよう。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：東街道の道脇に立つ
		//	モーション	：歩哨
		//───────────────
		//	衛士ハリル
		TalkPopup("this",0,0,0,0,0)
		{
			"ふむ、トワル街道は"
			"いつも賑わっているな。\p"
			"いい事なのだが、今年は少々"
			"野生の竜種が出没するようだ。\p"
			"街道をゆく旅人には"
			"気をつけてほしいものだな。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【イレーク】
//──────────────────────────────
function "Talk_Irake"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：イレーク・リカリタで露店をやる
		//	モーション	：
		//───────────────
		if( !FLAG[TF_IRAKE_TALK] )
		{

			PlayVoice(Y8V_5740,"this",100)	//巫女様…（呼びかけ）

			//	イレーク
			TalkPopup("this",0,0,0,0,0)
			{
				"妹はかなりの人見知りで……"
				"接客は苦手だったんですが。\p"
				"一人ひとりのお客さんに"
				"丁寧に対応していたら、いつの間にか"
				"気に入ってくれる人が増えてきまして。\p"
				"最近じゃ、なんだか"
				"人気の看板娘みたいになってきましたよ。\p"
				"はは、世の中分からないものですね。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_IRAKE_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	イレーク
			TalkPopup("this",0,0,0,0,0)
			{
				"妹が頑張ってくれてるおかげで"
				"僕も大助かりですよ。\p"
				"はは、どうやら今年は"
				"両親にいい報告が沢山できそうです。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：イレーク・リカリタで露店をやる
		//	モーション	：
		//───────────────

		if( !FLAG[TF_IRAKE_TALK] )
		{

			PlayVoice(Y8V_5740,"this",100)	//巫女様…（呼びかけ）

			//	イレーク
			TalkPopup("this",0,0,0,0,0)
			{
				"やあこんにちは！"
				"とびきり美味しい果物はいかがです！\p"
				"今年は去年にも増して豊作で、"
				"故郷からぞくぞく届いてるんですよ。\p"
				"ははは、忙しくってかないませんけど"
				"農家にとっちゃこれ以上ない、いい年ですよ！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_IRAKE_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	イレーク
			TalkPopup("this",0,0,0,0,0)
			{
				"妹も最近は随分頑張ってまして……"
				"はは、これは兄貴として"
				"負けていられません。\p"
				"僕ももっともっと"
				"頑張らないとですね！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：イレーク・リカリタで露店をやる
		//	モーション	：
		//───────────────
		if( !FLAG[TF_IRAKE_TALK] )
		{
			//	イレーク
			TalkPopup("this",0,0,0,0,0)
			{
				"おいしい作物はいかがー！"
				"今年は特別いいできだよーっ！\p"
				"僕らの田舎で採れたばかりの"
				"とってもおいしい作物だよーっ！\p"
				"さあさあ、お嬢さんも"
				"ぜひ見ていってくださいよ！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_IRAKE_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//　　振り返らない
			//	イレーク
			TalkPopup("this",0,0,0,0,0)
			{
				"（リカリタ、緊張してるな……）\p"
				"（リカリタは可愛いし、"
				"　お客さんも結構来てくれるんだけど……）\p"
				"（うーん、もう少し様子を見て"
				"　辛そうだったら代わってやるかな……）"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：イレーク・リカリタで露店をやる
		//	モーション	：
		//───────────────
		if( !FLAG[TF_IRAKE_TALK] )
		{
			//	イレーク
			TalkPopup("this",0,0,0,0,0)
			{
				"今年とれた作物はいかがーっ！"
				"よぉくお日様を浴びてるよーっ！\p"
				"僕らは田舎から"
				"作物を売りに来てるんです。\p"
				"故郷で待ってる家族のためにも、"
				"頑張って売りきらないとですね！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_IRAKE_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	イレーク
			TalkPopup("this",0,0,0,0,0)
			{
				"甘くておいしい作物だよーっ！\p"
				"……妹のやつは人見知りで……"
				"その、どうか優しくしてやって下さいね。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【リカリタ】
//──────────────────────────────
function "Talk_Rikarita"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：イレーク・リカリタで露店をやる
		//	モーション	：
		//───────────────
		//	リカリタ
		if( !FLAG[TF_RIKARITA_TALK] )
		{
			//	リカリタ
			TalkPopup("this",0,0,0,0,0)
			{
				"#13S最近お客さんがよく来てくれるんです……\p"
				"#13S小さい声でも、うちの作物のことを"
				"#13S丁寧に説明していたら、いつの間にか……\p"
				"#13Sえへへ……なんだか嬉しいです。\p"
				"#13Sこれからも、もっともっと"
				"#13S頑張ろうっと……♪"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_RIKARITA_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	リカリタ
			TalkPopup("this",0,0,0,0,0)
			{
				"#13Sいつの間にかお客さんが"
				"#13Sよく来てくれるようになったんです……\p"
				"#13Sえへへ……なんだか嬉しいです。"
				"#13Sこれからも頑張ろうっと……♪"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：イレーク・リカリタで露店をやる
		//	モーション	：
		//───────────────

		if( !FLAG[TF_RIKARITA_TALK] )
		{
			//	リカリタ
			TalkPopup("this",0,0,0,0,0)
			{
				"#12Sい、いっらしゃ～い、ませ……！\p"
				"#12Sは、恥ずかしいけど……"
				"#12Sできることは頑張らないと……\p"
				"#12Sだってお兄ちゃん一人じゃ"
				"#12S大変なんだもの……\p"
				"#12S声は小さくても、お会計ならできるし……"
				"#12S呼び込みだって、少しくらいなら……\p"
				"#12Sそ、その……果物はいかがですか～？"
				"#12Sよ、よろしくお願いします～……"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_RIKARITA_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	リカリタ
			TalkPopup("this",0,0,0,0,0)
			{
				"#12Sいっらしゃ～い、ませ……！\p"
				"#12Sお、おいしい果物ですよ……？"
				"#12Sいかがですか……！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：イレーク・リカリタで露店をやる
		//	モーション	：
		//───────────────

		if( !FLAG[TF_RIKARITA_TALK] )
		{
			//　　振り返らない

			PlayVoice(Y8V_5766,"this",100)	//はぁ…（暗めに）

			//	リカリタ
			TalkPopup("this",0,0,0,0,0)
			{
				"#12S（うう……やっぱりわたしに"
				"#12S　店番なんて無理だよう……！）\p"
				"#12S（わたし、田舎者だし……"
				"#12S　人と話すの苦手だし……"
				"#12S　もう帰りたいよ……）\p"
				"#12S（でも……そうしたら"
				"#12S　お兄ちゃんは一人で大変だし……）\p"
				"#12S（ぐすん、どうしたらいいんだろ……）"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_RIKARITA_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	リカリタ
			TalkPopup("this",0,0,0,0,0)
			{
				"#12S（もう帰りたいけど……"
				"#12S　お兄ちゃんは一人で"
				"#12S　大変になっちゃうし……）\p"
				"#12S（ぐすん、どうしたらいいんだろ……）"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：イレーク・リカリタで露店をやる
		//	モーション	：
		//───────────────
		if( !FLAG[TF_RIKARITA_TALK] )
		{
			//　　！エモーション後、アセアセエモーションを出しつつ
			//	リカリタ
			TalkPopup("this",0,0,0,0,0)
			{
				"#12Sい、いっ…………\p"
				"#12S……………らっ………\p"
				"#10S……いらっしゃい……ませ……"	//（フォント小）"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　顔を伏せてしまう。
			EmotionEx("this", 0.00f, EMO_ASE, 0, 8, 3, 1, 1.8f )	// 「あせあせ」
			Look("this" , 0 , -20 )
			Wait(15)

			//	リカリタ
			TalkPopup("this",0,0,0,0,0)
			{
				"#10S（うう、呼び込みなんて……"
				"#10S　やっぱりわたしには無理だよう……）\p"
				"#10S（でもお兄ちゃんに迷惑かけたくないし……"
				"#10S　どうしたらいいんだろ……）"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_RIKARITA_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//　　振り返らない
			//　　アセアセエモーションを出しつつ
			EmotionEx("this", 0.00f, EMO_ASE, 0, 8, 3, 1, 1.8f )	// 「あせあせ」
			Wait(45)
			
			//	リカリタ
			TalkPopup("this",0,0,0,0,0)
			{
				"#10S（うう、呼び込みなんて……"
				"#10S　やっぱりわたしには無理だよう……）\p"
				"#10S（でもお兄ちゃんに迷惑かけたくないし……"
				"#10S　どうしたらいいんだろ……）"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)

	if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] ||			//▼過去編Ⅱ南門へ向かう
		FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		Look("Rikarita" , 0 , -20 )
	}

}

//──────────────────────────────
//	【ダリオス執政官】
//──────────────────────────────
function "Talk_Darios"
{

	if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//　　★ＧＦ初回
		if( !FLAG[GF_1STTALK_PAST_D3_DARIOS] )
		{
			//────────  一般・開始処理(過去編)  ──────────
			SetStopFlag(STOPFLAG_TALK2)
			//───────────────
			//	場所		：王都中央区（過去）・西エリア
			//───────────────
			//	配置・カメラ：奥のベンチで休む
			//	モーション	：
			//───────────────
			SaveCamera()
			MoveCameraAt( 0 , -472.337f , 940.357f , 12.393f , 0 )	// 注視点
			ChangeCameraDistance( 0 , 0.814f , 0 )		// 基本距離
			ChangeCameraElevation( 0 , 8.352f , 0 )	// 基本仰角
			RotateCamera( 0 , 301.694f , 0 )				// 角度
			ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
			SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
			RollCamera( 0 , 0.0f , 0 )				// ロール回転
			// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

			//キャラ初期動作の記述
			LookSpd("this", 1.0f, 1.0f, 1.0f)
			LookTo("this", -472.80f	940.42f	12.2f )	// 首を正面に向ける
			ChangeSubAnimation("this",SUBMOT_EYE,ANI_E_WAIT,1)
			ChangeSubAnimation("this",SUBMOT_MOUTH,ANI_M_SMILE,1)

			CallFunc("system:talkevent_begin_ps")		//TALK_BEGIN
			LookSpd("this", LOOKSPD_DEFAULT, LOOKSPD_DEFAULT, LOOKSPD_DEFAULT)
			//───────────────────────────────

			PlayVoice(Y8V_5751,"this",100)	//やあ、どうも

			TalkPopup("DANA",0,3,160,236,0)		//一人称ダーナ：左
			{
				"#000e#000mダリオス執政官。"
				"ふふ、また執務の息抜きを？"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ダリオス執政官
			TalkPopup("this",0,0,0,0,0)
			{
				"#021eわはは、王宮ではなにかと"
				"気忙しくございましてなぁ。\p"
				"#022eしかしそういう巫女様こそ。\p"
				"先日も街でお会いしたばかり……"
				"息抜き仲間とはいえ少々心配ですぞ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("DANA",0,3,160,236,0)		//一人称ダーナ：左
			{
				"#000e#000mふふっ、どうかお構いなく。\p"
				"今日はオルガ祭司長の許可を"
				"頂いておりますから。"
			}
			WaitPrompt()
			WaitCloseWindow()

			HeadYes("this" , 1 , 25)

			//	ダリオス執政官
			TalkPopup("this",0,0,0,0,0)
			{
				"おおそうか、夕刻から"
				"殿下に謁見されるのでしたな。"
			}
			WaitPrompt()
			WaitCloseWindow()

			Look("this" , 5 , -5 )
			Wait(15)

			TalkPopup("this",0,0,0,0,0)
			{
				"#011e……王太女殿下は、"
				"少々特殊なお育ちでしてな。\p"
				"幼少の頃より市井で"
				"研鑽を積まれておったのですよ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			LookTo("this", -472.80f	940.42f	12.2f )	// 首を正面に向ける

			TalkPopup("this",0,0,0,0,0)
			{
				"#012eしかし聡明さでは"
				"イレーネ様にも引けをとりませぬ。\p"
				"#021eふふ、イレーネ様も今は"
				"深く安堵していらっしゃいますぞ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("DANA",0,3,160,236,0)		//一人称ダーナ：左
			{
				"#000e#000mそうだったのですか……"
				"それはお会いするのが楽しみですね。"
			}
			WaitPrompt()
			WaitCloseWindow()

//			HeadYes("this" , 1 , 25)
//			Wait(30)

			//	ダリオス執政官
			TalkPopup("this",0,0,0,0,0)
			{
				"#010e……ええ、その上……\p"
				"このような巡りあわせになるとは。"
				"これも縁でしょうかなぁ……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　ダーナに？エモーション

			//	"DANA"
			TalkPopup("DANA",0,3,160,236,0)		//一人称ダーナ：左
			{
				"#000e#000m……………………？"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ダリオス執政官
			TalkPopup("this",0,0,0,0,0)
			{
				"#012eなになに、こちらの事ですぞ。\p"
				"#021eさあ、ほどほどでお行きなされよ。"
				"万が一遅れては一大事ですからな。"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag( GF_1STTALK_PAST_D3_DARIOS, 1 )

			DelMapMarker( SMI_DANA_SYMBOL ,PAGE_MF002, MARKER_SUBEV_PAST_D3_3, 0,0)		//サブイベント：ラステル・衛士トラキルと会う

			//　　※聞き込みフラグを立てる
			SetFlag( GF_SUBEV_PAST_D3_TALK_DARIOS, 1 )
			if( FLAG[GF_SUBEV_PAST_D3_TALK_DARIOS] && FLAG[GF_SUBEV_PAST_D3_TALK_SUBEV] )
			{
				SetFlag( GF_SUBEV_PAST_D3_TALK_ALL, 1 )
				//SetFlag( SF_MISSIONNO, MS_08_D3B )	//★冒険メモ：あの赤毛の剣士がいた、王都東の郊外へ向かおう

			}
			CallFunc("system:talkevent_end_ps")		//TALK_END
		}
		else
		{
			//　　★ＧＦ以降

			SetStopFlag(STOPFLAG_TALK)
			CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

			LookChr("this","LEADER")

			//	ダリオス執政官
			TalkPopup("this",0,0,0,0,0)
			{
				"わたくしは王太女殿下を"
				"よく存じ上げていましてな。"
				"思い出話なら一晩でも語れますぞ。\p"
				"ふふ、あの方も"
				"色々な事があったのですが……\p"
				"無事に戴冠を迎えられた。"
				"ほんに喜ばしゅうございますぞ。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【アンシア】
//──────────────────────────────
function "Talk_Anthea"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：シーアと一緒にいる
		//	モーション	：
		//───────────────
		//	アンシア
		TalkPopup("this",0,0,0,0,0)
		{
			"ミーアとシーアは双子なので、"
			"当然誕生日も同じなのですけど……\p"
			"毎年プレゼントを用意するのがシーア、"
			"いつも忘れているのがミーアという調子で。\p"
			"ふふっ、どうして"
			"こんなに違うんでしょうね。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Anthea","Thea")
}


//──────────────────────────────
//	【シーア】
//──────────────────────────────
function "Talk_Thea"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：アンシアと一緒にいる
		//	モーション	：
		//───────────────

		PlayVoice(Y8V_5775,"this",100)	//巫女様…（可愛らしく）

		//	シーア
		TalkPopup("this",0,0,0,0,0)
		{
			"今日はお母さんと"
			"ミーアちゃんにあげるプレゼントを"
			"買いに来たんです。\p"
			"うーん、何がいいかなぁ……\p"
			"ミーアちゃんは"
			"わたしより可愛いから……"
			"なにか似合うものをあげたいなぁ……"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		
		if( FLAG[GF_SUBEV_PAST_02_QUEST_C] )
		{
			//　　★クエスト達成後のセリフ
			//	シーア
			TalkPopup("this",0,0,0,0,0)
			{
				"えへへ、ミーアちゃんが"
				"見つかってよかったです。\p"
				"巫女様、今日はほんとうに"
				"ありがとうございましたっ！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
		else
		{
			//　　★クエスト中のセリフ
			//	シーア
			TalkPopup("this",0,0,0,0,0)
			{
				"ミーアちゃんたち、悪い人に"
				"さらわれてなきゃいいけど……\p"
				"お願いです、巫女様。"
				"２人を見つけてください。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
		
	}
	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【PS4】【しずくの精霊プラウ】
//──────────────────────────────
//──────────────────────────────
//	【PS4】【大河の精霊エルド】
//──────────────────────────────
function "Talk_Pula_El"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if(!FLAG[GF_1STTALK_PAST_4_PULA_EL])		//エルド・プラウＧＦ初回
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）
		//───────────────
		//	配置・カメラ：-400.28f	910.02f	11.89f	148.14f付近に精霊エルドといる
		//	モーション	：
		//───────────────
		//　　※プラウとエルドの２体を救出していると出現する。
		//　　★ＧＦ初回（サブイベント化）
		//　　振り返らない

		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）
		//───────────────
		//	配置・カメラ：-400.28f	910.02f	11.89f	148.14f付近に精霊プラウといる
		//	モーション	：
		//───────────────
		//　　※プラウとエルドの２体を救出していると出現する。
		//　　※プラウと同じ処理。

		//	大河の精霊エルド
		TalkPopup("Eld",0,0,0,0,0)
		{
			"ふう、ようやく追いついたぞプラウ！\p"
			"まったくどうして逃げるんだ……"
			"俺はお前を探しにきたんだぜ？"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	しずくの精霊プラウ
		TalkPopup("Pulau",0,0,0,0,0)
		{
			"だって、私が人と関わろうとすると"
			"兄さん怒るじゃない！\p"
			"だから……"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	大河の精霊エルド
		TalkPopup("Eld",0,0,0,0,0)
		{
			"そりゃあ、お前が人の集落へ行っては"
			"泣きながら帰ってくるからだ。\p"
			"……あまり人に期待するんじゃない。"
			"生きる世界が違うんだからな。"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	しずくの精霊プラウ
		TalkPopup("Pulau",0,0,0,0,0)
		{
			"ふふ、でもね、"
			"私ついに見つけたの！\p"
			"私が見える人……！"
			"私の力を使いこなせる人を！"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	大河の精霊エルド
		TalkPopup("Eld",0,0,0,0,0)
		{
			"な、なんだって！？\p"
			"そんなヤツ、そうそういるはずが……\p"
			"……って待てよ、俺も今日"
			"人に助けてもらったっけな……"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	しずくの精霊プラウ
		TalkPopup("Pulau",0,0,0,0,0)
		{
			"それでね、聞いて聞いて聞いて"
			"聞いて聞いてよ兄さん～！"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	大河の精霊エルド
		TalkPopup("Eld",0,0,0,0,0)
		{
			"お、おうよ、ちょっと"
			"落ち着けっての。"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	"DANA"
		TalkPopup("PLAYER1",0,0,0,0,0)
		{
			"#000e#000m（あははは……精霊に噂をされるなんて"
			"  さすがに照れ臭いなぁ……）\p"
			"（コホン、邪魔しちゃ悪いし"
			"  そろそろ行こうっと。）"
		}
		WaitPrompt()
		WaitCloseWindow()

		SetFlag(GF_1STTALK_PAST_4_PULA_EL,1)
	}
	else
	{
		if(!FLAG[TF_TALK_MOB01])		//汎用一般会話フラグ
		{
			//　　★ＧＦ以降
			//　　振り返らない
			//	しずくの精霊プラウ
			TalkPopup("Pulau",0,0,0,0,0)
			{
				"ダーナって言ってね、"
				"とっても素敵なヒトなの！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	大河の精霊エルド
			TalkPopup("Eld",0,0,0,0,0)
			{
				"やっぱりあの人か……"
				"ま、それなら納得だぜ。\p"
				"でも、あれほど大した人なんて"
				"そうそういるもんじゃないぜ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	しずくの精霊プラウ
			TalkPopup("Pulau",0,0,0,0,0)
			{
				"ふーん、そうなんだ……"
				"ダーナって凄いのね！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("PLAYER1",0,0,0,0,0)
			{
				"#000e#000m（あはは……"
				"  気づかれる前に行こうかな。）"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_TALK_MOB01,1)
		}
		else
		{
			//　　★繰り返し
			//　　振り返らない
			//	大河の精霊エルド
			TalkPopup("Eld",0,0,0,0,0)
			{
				"あの人ほど大した人なんて"
				"そうそういるもんじゃないぜ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	しずくの精霊プラウ
			TalkPopup("Pulau",0,0,0,0,0)
			{
				"ふーん、そうなんだ……"
				"ダーナって凄いのね！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【PS4】【ささやきの精霊リンデル】
//──────────────────────────────
function "Talk_Lindell"
{
	SetStopFlag(STOPFLAG_TALKTURN)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if (FLAG[GF_PAST_EPISODE_3_GO_BAHA])			//過去Ⅲ
	{
		if(!FLAG[TF_TALK_MOB02])
		{
			//▼過去編Ⅲの時代、リンデル救出後
			//───────────────
			//	場所		：王都中央区（過去）
			//───────────────
			//	配置・カメラ：-485.03f	962.35f	10.89f	-26.02f付近
			//	モーション	：
			//───────────────
			//	ささやきの精霊リンデル
			TalkPopup("Lindell",0,0,0,0,0)
			{
				"やー、都って凄いわね～。"
				"人がこんなに沢山！\p"
				"あたし、噂話とか大好きなのよね。\p"
				"なにか面白い話はないかしら。"
				"故郷への土産話にしなくっちゃ！"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_TALK_MOB02,1)
		}
		else
		{
			//　　★繰り返し
			//	ささやきの精霊リンデル
			TalkPopup("Lindell",0,0,0,0,0)
			{
				"あたし、噂話とか大好きなのよね。\p"
				"なにか面白い話はないかしら。"
				"故郷への土産話にしなくっちゃ！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else if (FLAG[GF_PAST_EPISODE_4_GO_CASTLE])			//過去Ⅳ
	{
		if(!FLAG[TF_TALK_MOB02])
		{
			//──────────────────────────────
			//▼過去編Ⅳの時代、リンデル救出後
			//───────────────
			//	場所		：王都中央区（過去）
			//───────────────
			//	配置・カメラ：-485.03f	962.35f	10.89f	-26.02f付近
			//	モーション	：
			//───────────────
			//	ささやきの精霊リンデル
			TalkPopup("Lindell",0,0,0,0,0)
			{
				"あ、ダーナじゃない！"
				"ヒソヒソ……知ってる？\p"
				"いま王都の近くに"
				"精霊が２人ほど来てるみたいよ。\p"
				"どんな連中なのかしら。"
				"あたしも気になるわね～。"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_TALK_MOB02,1)
		}
		else
		{
			//　　★繰り返し
			//	ささやきの精霊リンデル
			TalkPopup("Lindell",0,0,0,0,0)
			{
				"いま王都の近くに"
				"精霊が２人ほど来てるみたいよ。\p"
				"どんな連中なのかしら。"
				"あたしも気になるわね～。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	ResetStopFlag(STOPFLAG_TALKTURN)
}

//──────────────────────────────
//	【イオ】
//──────────────────────────────
function "Talk_Io"
{
	SetStopFlag(STOPFLAG_TALKTURN)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )		//▼過去編Ⅳ王宮前へ向かう
	{
		if(!FLAG[GF_SUBEV_PAST_04_IO_MONO])		//３層のモノリスでイオに出会っていない
		{

			PlayVoice(Y8V_6010,"Io",100)	//んー？（やや疑問）

			//　　暗転を挟んで操作許可。
			//　　★以降、繰り返し
			//	イオ
			TalkPopup("this",0,0,0,0,0)
			{
				"ま、巫女様は最近ずいぶんと"
				"忙しくしてるみたいだし……\p"
				"体に気を付けて頑張ってよね。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
		else
		{
			//　　★地下聖堂第三層をクリアした後は下記のメッセージ
			//	イオ

			PlayVoice(Y8V_6013,"Io",100)	//むふふ♪（いたずらっぽい笑い）

			TalkPopup("this",0,0,0,0,0)
			{
				"むふふ、巫女様、"
				"地下聖堂の探検楽しかったね～。\p"
				"まだ奥があるみたいだったし、"
				"お楽しみはこれからかもね。\p"
				"それにしてもあんな場所を"
				"独り占めなんてズルいな～。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		if( !FLAG[TF_TALK_MOB10] )
		{
			//　　ささっと人垣が割れ、そこを通って中央区へ
			//　　歩いていくダーナとオド見せちつつフェードアウト。
			//　　イオはそのまま東街区に配置しておく。
			//　　戻って来て話しかけると下記会話イベントを起動。

			PlayVoice(Y8V_6012,"Io",100)	//むふふ……（企んでいるような笑い）

			//	イオ
			TalkPopup("this",0,0,0,0,0)
			{
				"むふふ。"
				"巫女様、見たよ見たよ～。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("PLAYER1",0,0,0,0,0)
			{
				"#000e#000mあなたは……イオちゃん。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	イオ
			TalkPopup("this",0,0,0,0,0)
			{
				"みんなに囲まれちゃって"
				"スゴイ人気だったね～。\p"
				"うんうん、大樹の巫女たる者、"
				"そうでなくっちゃ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("PLAYER1",0,0,0,0,0)
			{
				"#000e#000mあはは……\p"
				"そういえば、あの後、"
				"探し物は見つかったの？"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	イオ
			TalkPopup("this",0,0,0,0,0)
			{
				"へ？　あー、はいはい、"
				"探し物……探し物ね、うん。\p"
				"見つかったような……"
				"見つかっていないような？\p"
				"まあ、もう少し時間が"
				"かかるのかもしれないね。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("PLAYER1",0,0,0,0,0)
			{
				"#000e#000mそ、そうなんだ？"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	イオ
			TalkPopup("this",0,0,0,0,0)
			{
				"あはは、そうそう。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("DANA",0,0,0,0,0)
			{
				"#000e#000m（相変わらずよく分からないなあ。）"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag( TF_TALK_MOB10, 1 )
		}
		else
		{
			//　　以降、繰り返しメッセージ。

			PlayVoice(Y8V_6007,"Io",100)	//巫女様♪（呼びかけ、からかい気味）

			//	イオ
			TalkPopup("this",0,0,0,0,0)
			{
				"そうそう、巫女様。"
				"またアタシと遊んでよね。\p"
				"アタシ、巫女様のこと、"
				"気に入っちゃったな～。"
			}
			WaitPrompt()
			WaitCloseWindow()

		}

	}

	ResetStopFlag(STOPFLAG_TALKTURN)
}


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//■常設モブ

//──────────────────────────────
//	【王都市民】（中年男性）
//──────────────────────────────
function "Talk_Citizen_2_A01"
{
	SetStopFlag(STOPFLAG_TALKTURN)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央中央Ａ１＞
		//───────────────
		if( !FLAG[TF_TALK_MOB04] )
		{
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"おお巫女様……！"
				"収穫祭、お疲れ様でございましたな。\p"
				"毎年収穫祭の時期は"
				"旅人で賑わうものですが……\p"
				"今年は例年にない人出で、"
				"私も驚きましたぞ。\p"
				"これも巫女様の日頃のご活躍の"
				"賜物でありましょうなぁ！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB04, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"今年の収穫祭は、例年になく"
				"賑やかでございました。\p"
				"これも巫女様の日頃のご活躍の"
				"賜物でありましょうなぁ！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央中央Ａ１＞
		//───────────────
		if( !FLAG[TF_TALK_MOB04] )
		{
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"おお、大樹の巫女様ではないですか！\p"
				"ますますご活躍ですな……！"
				"私どもも嬉しゅうございます。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　礼をする
			ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"どうか我らがエタニアに"
				"永久の恵みがあらんことを……"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB04, 1 )
			
			WaitAnimation2( "this" , -1, 1, "ANI_EV_REI",  0)
			
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"巫女様はますますご活躍の様子……"
				"私どもも嬉しゅうございます。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　礼をする
			ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"どうか我らがエタニアに"
				"永久の恵みがあらんことを……"
			}
			WaitPrompt()
			WaitCloseWindow()

			WaitAnimation2( "this" , -1, 1, "ANI_EV_REI",  0)

		}
	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央中央Ａ１＞
		//───────────────
		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"お、おや、小さい方がと思えば"
			"ダーナ様ではありませんか。"
		}
		WaitPrompt()
		WaitCloseWindow()

		ChangeAnimation("this","ANI_EV_TEBURI", -1 , 1 )

		TalkPopup("this",0,0,0,0,0)
		{
			"ははは、またお忍びですか？"
			"程ほどになさってくださいよ。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央中央Ａ１＞
		//───────────────
		//	王都市民
		if( !FLAG[TF_TALK_MOB02] )
		{
			PlayVoice(Y8V_5757,"this",100)	//ふむ
			
			TalkPopup("this",0,0,0,0,0)
			{
				"アイギアスは大陸でも有数の都。"
				"多くの旅人は迷ってしまうようですな。\p"
				"観光にお勧めなのは、東街区──"
				"連日バザールが開かれていて"
				"見ごたえたっぷりですからな。\p"
				"また西街区の、職人や細工師の家を"
				"訪ねてみるのも面白いでしょう。\p"
				"はは、ともかく見所はごまんとあります。"
				"ぜひ訪れてもらいたいものですよ。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB02, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"東街区や西街区、この中央区にも"
				"見所がごまんとあります。\p"
				"旅人にはぜひ観光を"
				"楽しんでもらいたいものですなぁ。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALKTURN)
}

//──────────────────────────────
//	【王都市民】（娘）
//──────────────────────────────
function "Talk_Citizen_2_A02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央中央Ａ２＞
		//───────────────
		if( !FLAG[TF_TALK_MOB05] )
		{
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"私、理力の扱いが下手なので、"
				"毎朝大樹にお祈りしていたんです。\p"
				"どうか理力を上手に"
				"扱えるようにしてくださいって……\p"
				"ところが気づいたんです。"
				"いつもお祈りをした後は、"
				"理力が上手に扱えている事に！\p"
				"どうやら……心を落ち着ければ"
				"私にもちゃんと扱えるみたいです。\p"
				"ふふ、今度からは"
				"心の中でお祈りを唱えてから"
				"理力を使うことにします。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB05, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"家族にも時々言われますけど……"
				"私ってせっかちみたいですね。\p"
				"ふふ、今度からは、"
				"心の中でお祈りを唱えてから"
				"理力を使うことにします。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央中央Ａ２＞
		//───────────────

		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"ふう、昨晩は灯#2Rとも#Rしの理法具を"
			"うっかり壊してしまいました。\p"
			"もう十年も使っているはずなのに、"
			"理力を注ぎすぎてしまって……\p"
			"はあ……私ったらどうして"
			"こんなに不器用なんでしょう。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央中央Ａ２＞
		//───────────────
		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"私は理力の扱いが不器用で……\p"
			"簡単な理法具すら"
			"うまく使えないんです。\p"
//			"ふう、大樹にお祈りすれば"
//			"いつかは得意になるでしょうか。"
			"ふう、この不器用を治して下さいって"
			"大樹にお祈りしてるんですけどねぇ。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央中央Ａ２＞
		//───────────────
		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"まさかイレーネ陛下が"
			"退位されるだなんて……"
			"ふう、なんだか寂しいわねぇ。\p"
			"でも王太女様も、とっても"
			"優秀な方という噂だし。\p"
			"どんな女王様になられるのかしら。"
			"ふふっ、楽しみね。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【王都市民】（中年女性）
//──────────────────────────────
function "Talk_Citizen_2_B01"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央東Ｂ１＞
		//───────────────
		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"今日はなんだか"
			"衛士の人が少ない気がするわね……\p"
			"あの赤髪の隊長さんの姿も"
			"見かけないし。\p"
			"一体どうしたのかしらね。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央東Ｂ１＞
		//───────────────
//		if( !FLAG[TF_TALK_MOB06] )
//		{
//			//	王都市民
//			TalkPopup("this",0,0,0,0,0)
//			{
//				"バハの塔は、王家が設立した"
//				"エタニア最高の研究機関なのよね。\p"
//				"世界最高の学者や研究者が"
//				"集まっているらしいけど……\p"
//				"ひねくれ者や変人も多いって聞くわ……"
//				"あんまり関わりたくはないわね……"
//			}
//			WaitPrompt()
//			WaitCloseWindow()
//
//			EmotionEx("PLAYER1",0.00f,EMO_TARA,0,5,1,1,1.8f)	// 冷や汗
//			Wait(45)
//
//			//	"DANA"
//			TalkPopup("PLAYER1",0,0,0,0,0)
//			{
//				"#000e#000m（あはは、そこまで変わった人"
//				"　ばかりじゃないと思うけど……）\p"
//				"（でもみんな研究一筋だから"
//				"　一般の人と関わりが少ないのは"
//				"　確かなのかも……）"
//			}
//			WaitPrompt()
//			WaitCloseWindow()
//
//			SetFlag( TF_TALK_MOB06, 1 )
//		}
//		else
//		{
//			//　　★繰り返し
//			//　　※カメラ切り替えなし
//			//	王都市民
//			TalkPopup("this",0,0,0,0,0)
//			{
//				"バハの塔には世界最高の学者や"
//				"研究者が集まっているらしいけど……\p"
//				"ひねくれ者や変人も多いって聞くわ……"
//				"あんまり関わりたくはないわね……"
//			}
//			WaitPrompt()
//			WaitCloseWindow()
//		}


		if( !FLAG[TF_TALK_MOB06] )
		{
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"バハの塔は、王家が設立した"
				"エタニア最高の研究機関なのよね。\p"
				"世界最高の学者や研究者が"
				"色んな研究をしているんですって。\p"
				"高度な理力技術の多くは"
				"バハの塔で生まれたらしいわよ。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB06, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"バハの塔では世界最高の学者や研究者が"
				"色んな研究をしているんですって。\p"
				"高度な理力技術の多くは"
				"バハの塔で生まれたらしいわよ。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}


	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央東Ｂ１＞
		//───────────────
		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"サライ陛下は本当に聡明な方よねぇ。\p"
			"先代の陛下ですらお困りだった難題を"
			"少しずつ解決なさっていって。\p"
			"私とそう変わらないお年なのに……"
			"ふふ、なんだか憧れてしまうわね。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央東Ｂ１＞
		//───────────────
		
		PlayVoice(Y8V_5762,"this",100)	//えーと
		
		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"王太女様っていえば……たしか"
			"幼い頃に大病を患われていたそうねえ。\p"
			"諸外国への体裁もあって"
			"一切公表されていなかったけど、"
			"生死の境を彷徨うほどだったとか。\p"
			"お名前が知られていないのも"
			"そういう理由なのかもしれないわねぇ。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【王都市民】
//──────────────────────────────
function "Talk_Citizen_2_C01"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央西Ｃ１＞
		//───────────────
//		if( !FLAG[TF_TALK_MOB07] )
//		{
//			//	王都市民
//			TalkPopup("this",0,0,0,0,0)
//			{
//				"バハの塔の研究者たちは"
//				"エタニア全土に理力塔を建造しようと"
//				"考えているようですな。\p"
//				"そうすれば、全土の地脈を活性化させ"
//				"理力を高める事が出来るとか。\p"
//				"現在は短距離でしか行えない"
//				"《転位》の制約もなくなると聞きました。\p"
//				"実現すれば素晴らしい事です……"
//				"はは、何十年かかるか知りませんが、"
//				"待ち遠しいですなぁ。"
//			}
//			WaitPrompt()
//			WaitCloseWindow()
//			SetFlag( TF_TALK_MOB07, 1 )
//		}
//		else
//		{
//			//　　★繰り返し
//			//　　※カメラ切り替えなし
//			//	王都市民
//			TalkPopup("this",0,0,0,0,0)
//			{
//				"バハの塔の研究者たちは"
//				"エタニア全土に理力塔を建造しようと"
//				"考えているようです。\p"
//				"はは、何十年かかるか知りませんが、"
//				"待ち遠しいですなぁ。"
//			}
//			WaitPrompt()
//			WaitCloseWindow()
//		}

		if( !FLAG[TF_TALK_MOB07] )
		{
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"サライ陛下は、各地の小国にも"
				"理力塔を建造するお考えのようですな。\p"
				"こうして平和な世となったのも"
				"諸国との友誼あればこそ……\p"
				"その感謝の証とのことですよ。\p"
				"完成すれば、エタニアほどでないにせよ"
				"彼らの扱える理力も増えましょう。\p"
				"それに《転位》による長距離移動も"
				"可能になるとのこと……\p"
				"はは、実現すれば素晴らしい事です。"
				"待ち遠しいですなぁ。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB07, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"サライ陛下は、各地の小国にも"
				"理力塔を建造するお考えのようですな。\p"
				"はは、私どもとしても"
				"待ち遠しいですなぁ。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央西Ｃ１＞
		//───────────────
		if( !FLAG[TF_TALK_MOB07] )
		{
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"いやはや、驚きました。"
				"北方諸国の戦争がついに終結したとか。\p"
				"サライ陛下が和平の仲立ちを"
				"なさっているとは聞いていましたが……\p"
				"はは、これほど早く成果に結びつくとは。\p"
				"彼らにも愛する家族がありましょう。"
				"今後は争いよりも平和を目指してほしいですな。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB07, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"北方諸国の戦争がついに終結したとか。\p2"
				"北方諸国2行目"
				"彼らにも愛する家族がありましょう。2"
				"今後は争いよりも平和を目指してほしいですな。2"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央西Ｃ１＞
		//───────────────
		//　　礼をする
		ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"これは巫女様、とんだ所で"
			"お会いしますな。\p"
			"わたくし、先日寺院の方々に"
			"怪我を治療していただきまして。\p"
			"はは、大変お世話になりました。"
			"ありがたき事でございます。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：街路をルートムーブ＜中央西Ｃ１＞
		//───────────────
		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"先日の武芸大会は"
			"実に素晴らしいものでしたなぁ……！\p"
			"特に決勝戦、ドラン衛士長と"
			"秘剣のアルゼンの戦いときたら！\p"
			"双方、凄まじい剣技と理力……"
			"思わず息を飲みすぎて"
			"むせてしまいましたぞ、はははは！"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}




//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//■ダーナ編③　モブ

//──────────────────────────────
//	【王都市民】（中年女性）
//──────────────────────────────
function "Talk_Citizen_D3_D01"
{
	SetStopFlag(STOPFLAG_TALKTURN)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・南エリア
		//───────────────
		//	配置・カメラ：東屋のベンチに座る//＞どこかに移動する。
		//	モーション	：
		//───────────────
		if( !FLAG[TF_TALK_MOB01] )
		{
			//　　ＰＡエモーションで振り向く
			EmotionEx("this", 0.05f, EMO_PA, 0, 5, 1, 1, 1.0f )	// 「PA」
			Wait(30)
			PlayVoice(Y8V_5772,"this",100)	//まあ

			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"これはこれは……！　もしや"
				"大樹の巫女様ではございませんか？"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　頭を下げて一礼する
			ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"ありがたき事でございます。 "
				"今日も大樹のよき恵みがあらん事を。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("PLAYER1",0,0,0,0,0)
			{
				"#000e#000mええ、大いなる大樹の"
				"よき恵みがあらん事を。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB01, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"街はイレーネ陛下ご退位の話で"
				"もちきりのようでございますよ。\p"
				"これからも、このエタニア王国に"
				"大樹のよき恵みがあらん事を。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALKTURN)
}


//──────────────────────────────
//	【王都市民】（青年）
//──────────────────────────────
function "Talk_Citizen_D3_A03"
{
	SetStopFlag(STOPFLAG_TALKTURN)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：立ち話
		//	モーション	：
		//───────────────
		//　　振り返らない
		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"俺は北方から来た旅人と"
			"友達になっちまったよ。\p"
			"今まで辺境のことなんざ"
			"興味なかったが……\p"
			"話を聞くと、これが面白くてな。"
			"今まで無関心だったのが"
			"恥ずかしくなっちまったぜ。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：西側の道端で下のキャラと話す
		//	モーション	：
		//───────────────
		//　　※カメラ切り替えなし
		//　　振り返らない
		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"そういえば……王太女様って"
			"あまりお見かけした事がないよなぁ。\p"
			"式典にもほとんど"
			"欠席なさってたじゃないか。\p"
			"……どんな人なんだろうな？"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALKTURN)
}

//──────────────────────────────
//	【王都市民】（青年）
//──────────────────────────────
function "Talk_Citizen_D3_A04"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：立ち話
		//	モーション	：
		//───────────────
		//　　上のキャラと共通
		//　　★繰り返し

		ChangeAnimation("this","ANI_EV_TEBURI", -1 , 1 )

		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"考えてみりゃあ"
			"辺境の事には無関心だったよなぁ……\p"
			"巫女様と陛下のおかげで"
			"“最も幸福な時代”なんて言われてるんだ。\p"
			"はは、俺たちももっといろんな事を"
			"考えるべきなのかもしれねえな。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：西側の道端で上のキャラと話す
		//	モーション	：
		//───────────────
		//　　※カメラ切り替えなし
		//　　振り返らない

		ChangeAnimation("this","ANI_EV_TEBURI", -1 , 1 )

		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"ああ、なんでも"
			"留学なさってたんじゃなかったか？\p"
			"噂を聞く事はあっても"
			"実際に拝見した事はないんだよな。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【旅人風の娘】
//──────────────────────────────
function "Talk_Citizen_D3_A05"
{
	SetStopFlag(STOPFLAG_TALKTURN)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：中央塔を見上げる
		//	モーション	：
		//───────────────
		if( !FLAG[TF_TALK_MOB03] )
		{
			//	旅人風の娘
			TalkPopup("this",0,0,0,0,0)
			{
				"これが噂の《塔堂》……"
				"王国最大の理力塔なのね……\p"
				"建造されたのは初代王朝の頃"
				"だそうだけど、本当に立派よね……\p"
				"巡礼に来てよかったわ。"
				"まさに王国の未来永久の繁栄を"
				"象徴しているんだもの。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB03, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	旅人風の娘
			TalkPopup("this",0,0,0,0,0)
			{
				"《塔堂》にお参りしたら、"
				"次はいよいよ大樹の寺院ね……\p"
				"巡礼の終着点《はじまりの大樹》……"
				"ドキドキするわ……！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALKTURN)
}

//──────────────────────────────
//	【王都市民】（中年男性）
//──────────────────────────────
function "Talk_Citizen_D3_A06"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：バロッサの店で客をする
		//	モーション	：
		//───────────────
		if( !FLAG[TF_TALK_MOB10] )
		{
			//　　振り返らない
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"今日は孫にねだられてなぁ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	バロッサ
			TalkPopup("Barossa",0,0,0,0,0)
			{
				"あっはっは、それで"
				"買い物して回ってるのかい。\p"
				"まあ丁度いい運動だよ。"
				"あんた腰を悪くしてから"
				"あまり出歩いてなかったでしょ。\p"
				"お孫さんに感謝して"
				"何か買ってやるんだねぇ！"
			}
			WaitPrompt()
			WaitCloseWindow()

			EmotionEx("Citizen_3_D07", 0.00f, EMO_WAI, 0, 5, 1, 0, 1.8f )	// 「ワイワイ」
			Wait(40)

			//	娘
			TalkPopup("Citizen_3_D07",0,0,0,0,0)
			{
				"わーい！　ありがと、おばちゃん！"
			}
			WaitPrompt()
			WaitCloseWindow()

			LookChr("this","Citizen_3_D07")
			Wait(10)

			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"二人してそう来るとはのう……\p"
				"ははは、こりゃあ敵わんわい。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB10, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"やれやれ、ここはわしの負けじゃなぁ。\p"
				"どれ、孫と歩きながら"
				"食べられるものでももらおうかの。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	バロッサ
			TalkPopup("Barossa",0,0,0,0,0)
			{
				"あいよ、毎度ありっ！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：バロッサの店の買い物客
		//	モーション	：
		//───────────────
		//　　※振り返らない

		if( !FLAG[TF_TALK_MOB10] )
		{
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"歳のせいか、理力が落ちてきてなぁ。"
				"理力2行目"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	バロッサ
			TalkPopup("Barossa",0,0,0,0,0)
			{
				"あっはっは、何を仰るやら！"
				"まだ耄碌#4Rもうろく#Rするような歳じゃないでしょ！\p"
				"ほらほら、下らない事言ってないで"
				"ウチ特製の香辛料でも買っていきなさいな！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"はは、では一つ"
				"滋養によい物を頼むわい。\p"
				"歳を食っとるのは事実じゃからなぁ。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB10, 1 )
		}
		else
		{
			//　　★繰り返し
			LookChr("this","LEADER")
			
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"はは、この店はいつも気前がよくてな。\p"
				"ついつい足を運んでしまうわい。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【行商人】
//──────────────────────────────
function "Talk_Citizen_D3_B02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：東街道の道脇に立つ／そばに竜車×２を止める
		//	モーション	：
		//───────────────
		//	行商人
		TalkPopup("this",0,0,0,0,0)
		{
			"さぁて、配達、配達！\p"
			"今日は積荷が山盛りなんだ。"
			"バリバリ働かねーとなぁ！"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【買い付け商人】
//──────────────────────────────
function "Talk_Citizen_D3_C02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_D3_WALK_CAPITAL] )			//▼ダーナ編③王都を歩く
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：イレーク・リカリタの店で客をする
		//	モーション	：
		//───────────────
		//　　振り向かない
		//	買い付け商人
		TalkPopup("this",0,0,0,0,0)
		{
			"ほほう、北方地方の作物か。\p"
			"麦は色艶もよし……"
			"果実も中々の大粒ではないか。\p"
			"今年はとびきり豊作のようだな。"
			"ふはは、ワシも腕が鳴るわい。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//■過去編Ⅱ　モブ

//──────────────────────────────
//	【買い物客】（中年女性）
//──────────────────────────────
function "Talk_Citizen_2_C02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────

		//	買い物客
		TalkPopup("this",0,0,0,0,0)
		{
			"そういえば、オルサンとバラルの"
			"戦争が終わったそうねぇ。\p"
			"あの二国は昔からしがらみがあって"
			"犬猿の仲だったと思うけど。\p"
			"女王様が仲立ちする事で"
			"国交を回復したんですって。\p"
			"ふふ、女王様が即位してから"
			"世の中も少しずつ"
			"変わってきている気がするわねぇ。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【商人】Citizen_D3_C03
//──────────────────────────────
function "Talk_Citizen_2_C03"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼ダーナ編③王都を歩く
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：イレーク・リカリタの店で客をする
		//	モーション	：
		//───────────────
		//　　振り向かない
		
		PlayVoice(Y8V_5758,"this",100)	//あァ？（ぶっきらぼうに）
		
		//	商人
		TalkPopup("this",0,0,0,0,0)
		{
			"アア？　なんだってぇ！？\p"
			"嬢ちゃん、声が小せえよ！"
			"もっと大声出してくんねえと！"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	リカリタ
		TalkPopup("Rikarita",0,0,0,0,0)
		{
			"#12Sごごご、ごめんなさいっ……！"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//────────────────────────────────────────
//	◆南方面
//──────────────────────────────
//	【王都市民】
//──────────────────────────────
function "Talk_Citizen_2_D01"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・南エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：ルートムーブ
		//───────────────

		EmotionEx("this", 0.05f, EMO_PA, 0, 5, 1, 1, 1.8f )	// 「PA」

		//	王都市民
		TalkPopup("this",0,0,0,0,0)
		{
			"やあ巫女様！"
			"ご機嫌麗しゅうございます！\p"
			"しかし巫女様の予知は"
			"本当に素晴らしいですな～！\p"
			"巫女様がいらっしゃると思うだけで"
			"安心して暮らせる気がいたしますよ。"
		}
		WaitPrompt()
		WaitCloseWindow()

		ChangeAnimation("this","ANI_EV_REI", -1 , 1 )
		PlayVoice(Y8V_5748,"this",100)	//ははは！

		TalkPopup("this",0,0,0,0,0)
		{
			"はっはっは、どうか今後とも"
			"この国をお導きくだされ！"
		}
		WaitPrompt()
		WaitCloseWindow()

		WaitAnimation2("this", -1, 1, "ANI_EV_REI", 0)

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【男性】
//──────────────────────────────
function "Talk_Citizen_2_D02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・南エリア
		//───────────────
		//	配置・カメラ：２人で話す
		//	モーション	：
		//───────────────
		//　　振り返らない
		//	男性
		TalkPopup("this",0,0,0,0,0)
		{
			"そうだお前、"
			"そろそろ２人目が欲しいなぁ。\p"
			"ははは、大樹にお祈りしてみるかな。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
	
	LookChr("Citizen_2_D02","Citizen_2_D03")
}

//──────────────────────────────
//	【女性】
//──────────────────────────────
function "Talk_Citizen_2_D03"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・南エリア
		//───────────────
		//	配置・カメラ：２人で話す
		//	モーション	：
		//───────────────
		//　　振り返らない
		//　　アセアセエモーション
		//	女性
		TalkPopup("this",0,0,0,0,0)
		{
			"も、もう……あなたったら。\p"
			"コホン、そういう事は"
			"お家の中で仰ってください。"
			"いいですね？"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
	
	LookChr("Citizen_2_D03","Citizen_2_D02")
}

//──────────────────────────────
//	【参拝客】
//──────────────────────────────
function "Talk_Citizen_2_D04"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_2_GO_SOUTHGATE] )			//▼過去編Ⅱ南門へ向かう
	{
		//▼過去編Ⅱ南門へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・南エリア
		//───────────────
		//	配置・カメラ：寺院方面を向く
		//	モーション	：
		//───────────────
		//	参拝客
		TalkPopup("this",0,0,0,0,0)
		{
			"大樹の巫女様のお陰で"
			"我が故郷、バラッカは救われました。\p"
			"せめて礼拝をせねば、と思いましてな。\p"
			"しかし大樹の巫女様とは"
			"どのようなお人なのでしょうな。"
			"親しみやすい方と聞きますが……"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//■過去編Ⅲ　モブ

//────────────────────────────────────────
//	◆東の橋

//──────────────────────────────
//	【旅人】Citizen_3_D01
//──────────────────────────────
function "Talk_Citizen_3_D01"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東の橋
		//───────────────
		//	配置・カメラ：ルートムーブ
		//	モーション	：
		//───────────────
		//	旅人
		TalkPopup("this",0,0,0,0,0)
		{
			"いや～、王都って広いですよね～……\p"
			"それに素晴らしい建築物ばかり！"
			"見ていて飽きませんよ～！"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【買い付け商人】Citizen_3_D02
//──────────────────────────────
function "Talk_Citizen_3_D02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東の橋
		//───────────────
		//	配置・カメラ：近くに竜車を置く
		//	モーション	：
		//───────────────
		//	買い付け商人
		TalkPopup("this",0,0,0,0,0)
		{
			"ふう、忙しいったらありゃしねえ！\p"
			"おかげで儲かってるがな、ガハハハハ！"
			"ハハハ3行目"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【行商人】
//──────────────────────────────
function "Talk_Citizen_3_D03"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東の橋
		//───────────────
		//	配置・カメラ：近くに竜車を置く
		//	モーション	：
		//───────────────

		PlayVoice(Y8V_5743,"this",100)	//ふう

		//	行商人
		TalkPopup("this",0,0,0,0,0)
		{
			"オルサン国からの"
			"工芸品を仕入れてきたんだ。\p"
			"あの辺りはよく戦争してたからなぁ、"
			"まともに交易できるなんて"
			"何十年振りかねぇ～……\p"
			"へへ、俺たち行商人にとっちゃ"
			"平和さまさまだぜ。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【行商人】
//──────────────────────────────
function "Talk_Citizen_3_D04"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東の橋
		//───────────────
		//	配置・カメラ：近くに竜車を置く
		//	モーション	：
		//───────────────

		//	行商人
		TalkPopup("this",0,0,0,0,0)
		{
			"北方諸国の戦争も"
			"終わったって噂よね。\p"
			"ふふ、今度はあっちからも"
			"仕入れてみようかな。\p"
			"腕が鳴るわねっ！"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【客】
//──────────────────────────────
function "Talk_Citizen_3_D05"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：西エリアで客をする
		//	モーション	：
		//───────────────
		//	客
		TalkPopup("this",0,0,0,0,0)
		{
			"あら、可愛いらしい売り子さんねぇ。\p"
			"あのお店、ちょっと寄ってみましょうか。"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	客
		TalkPopup("Citizen_3_D06",0,0,0,0,0)
		{
			"はは、分かった分かった。"
			"今日は君に付き合うよ。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【客】
//──────────────────────────────
function "Talk_Citizen_3_D06"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：西エリアで客をする
		//	モーション	：
		//───────────────
		//	客
		TalkPopup("this",0,0,0,0,0)
		{
			"たまには妻と"
			"散歩というのも悪くないな。\p"
			"はは、結局荷物持ちになりそうだが、"
			"まあそれもいいだろうよ。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}

//──────────────────────────────
//	【買い物客】
//──────────────────────────────
function "Talk_Citizen_3_D07"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：バロッサの店で客をする
		//	モーション	：
		//───────────────
		
		LookChr("this","LEADER")
		//	娘
		TalkPopup("this",0,0,0,0,0)
		{
			"収穫祭は人が多くて"
			"あんまり回れなかったのよね。\p"
			"ふふ、今日はお祖父ちゃんに"
			"とことん付き合ってもらおっと！"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else if( FLAG[GF_PAST_EPISODE_3_GO_BAHA] )			//▼過去編Ⅲバハの塔へ向かう
	{
		//▼過去編Ⅲバハの塔へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：バロッサの店で客をする
		//	モーション	：
		//───────────────
		//　　振り返らない
		if( !FLAG[TF_TALK_MOB12] )
		{
			//	買い物客
			TalkPopup("this",0,0,0,0,0)
			{
				"おばちゃーん、上物の肉ちょうだい！"
				"肉2行目"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	バロッサ
			TalkPopup("Barossa",0,0,0,0,0)
			{
				"あいよっ、今日はいいのが入ってるよ！\p"
				"それとこっちはお祖父さんの分。"
				"あの人最近、腰を悪くしてるでしょ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	買い物客
			TalkPopup("this",0,0,0,0,0)
			{
				"あはは、すいませ～ん……"
				"いつもおまけしてもらっちゃって。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	バロッサ
			TalkPopup("Barossa",0,0,0,0,0)
			{
				"いいんだよ、常連さんには"
				"サービスしなくっちゃねえ！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB12, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	買い物客
			TalkPopup("this",0,0,0,0,0)
			{
				"そーなんですよ、お祖父ちゃんも"
				"さすがに歳みたいで。\p"
				"でもまだまだ元気ですよ～。"
				"口だけは達者ですし。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	バロッサ
			TalkPopup("Barossa",0,0,0,0,0)
			{
				"あっはっは、やっぱりあれは"
				"耄碌するような人じゃないねぇ！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALK)
}



//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//■過去編Ⅳ　モブ


//──────────────────────────────
//	【王都市民】Citizen_4_D02
//──────────────────────────────
function "Talk_Citizen_4_D02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・南エリア
		//───────────────
		//	配置・カメラ：下のキャラと話す
		//	モーション	：座る
		//───────────────
		//　　振り返らない
		//	王都市民
		TalkPopup("Citizen_4_D02",0,0,0,0,0)
		{
			"ほほう、はるばる南方諸国から……\p"
			"エタニア王国へようこそ。"
			"あなたにとってよき旅であればいいのですが。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Citizen_4_D02","Citizen_4_D03")

}

//──────────────────────────────
//	【旅人】Citizen_4_D03
//──────────────────────────────
function "Talk_Citizen_4_D03"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{

		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・南エリア
		//───────────────
		//	配置・カメラ：上のキャラと話す
		//	モーション	：座る
		//───────────────

		ChangeAnimation("Citizen_4_D03","ANI_EV_TEBURI", -1 , 1 )
		PlayVoice(Y8V_5754,"Citizen_4_D03",100)	//はは

		//	旅人
		TalkPopup("Citizen_4_D03",0,0,0,0,0)
		{
			"ははは……それはもう。\p"
			"特に収穫祭には感動いたしました。\p"
			"あれこそまさに“最も幸福な時代”を"
			"象徴する祝祭でありましょうよ。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Citizen_4_D03","Citizen_4_D02")

}




//──────────────────────────────
//	【王都市民】Citizen_4_D04
//──────────────────────────────
function "Talk_Citizen_4_D04"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・南エリア
		//───────────────
		//	配置・カメラ：
		//	モーション	：ルートムーブ
		//───────────────
		if( !FLAG[TF_TALK_MOB08] )
		{
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"あらまあ、巫女様……！"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

			TalkPopup("this",0,0,0,0,0)
			{
				"ふふ、収穫祭のときのお姿を見てしまうと"
				"なんだか信じられませんね……\p"
				"あの随一の舞いを披露された方が"
				"こうして目の前にいらっしゃるなんて。"
			}
			WaitPrompt()
			WaitCloseWindow()
		
			WaitAnimation2("this", -1, 1, "ANI_EV_REI", 0)

			//　　一礼する。
			ChangeAnimation("this","ANI_EV_TEBURI", -1 , 1 )

			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"くすくす……なんでもありません。"
				"大いなる大樹の恵みがあらん事を。"
			}
			WaitPrompt()
			WaitCloseWindow()
			
			WaitAnimation2("this", -1, 1, "ANI_EV_TEBURI", 0)
			
			SetFlag( TF_TALK_MOB08, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"お忙しい所をお呼びとめして"
				"しまいましたね、申し訳ありません。\p"
				"どうか大いなる大樹の恵みがあらん事を。"
			}
			WaitPrompt()
			WaitCloseWindow()

			WaitAnimation2("this", -1, 1, "ANI_EV_REI", 0)

		}

	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【客】
//──────────────────────────────
function "Talk_Citizen_4_C02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：リカリタと話す
		//	モーション	：
		//───────────────
		//　　振り返らない
		if( !FLAG[TF_TALK_MOB09] )
		{
			//	リカリタ
			TalkPopup("Rikarita",0,0,0,0,0)
			{
				"#13Sは、はい、まとめて買ってもらえたら"
				"#13S３０リグにオマケしますよ？"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	客
			TalkPopup("this",0,0,0,0,0)
			{
				"はっはっは、可愛い嬢ちゃんに"
				"そう言われちゃ断れねえ！\p"
				"よし買ったぜ！"
				"またよろしく頼むよっ！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	リカリタ
			TalkPopup("Rikarita",0,0,0,0,0)
			{
				"#13Sこ、こちらこそ"
				"#13Sありがとうです……！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB09, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	客
			TalkPopup("this",0,0,0,0,0)
			{
				"はっはっは、嬢ちゃんは"
				"真面目でいい子だねぇ！\p"
				"またよろしく頼むよっ！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【客】
//──────────────────────────────
function "Talk_Citizen_4_C03"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・西エリア
		//───────────────
		//	配置・カメラ：リカリタの店を見る
		//	モーション	：
		//───────────────
		//	客
		TalkPopup("this",0,0,0,0,0)
		{
			"北方地方の作物かぁ……"
			"味に深みがあっていいのよねぇ。"
		}
		WaitPrompt()
		WaitCloseWindow()
		
		PlayVoice(Y8V_5773,"this",100)	//ふふ
		Wait(10)
		
		//	客
		TalkPopup("this",0,0,0,0,0)
		{
			"ふふ、娘さんも一生懸命だし"
			"ついつい買ってしまいそうね。"
		}
		WaitPrompt()
		WaitCloseWindow()

	}

	ResetStopFlag(STOPFLAG_TALK)
}


//──────────────────────────────
//	【旅人】Citizen_4_C04
//──────────────────────────────
function "Talk_Citizen_4_C04"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：ベンチに座る
		//	モーション	：
		//───────────────
		if( !FLAG[TF_TALK_MOB11] )
		{
			//	旅人
			TalkPopup("this",0,0,0,0,0)
			{
				"先ほど、女王陛下がおわす"
				"エタニア王宮を見てきた所でなぁ。\p"
				"収穫祭も素晴らしかったが、"
				"普段の王宮も美しい佇まいだったよ。\p"
				"ただ不思議だったのは、警固の者が"
				"随分と若い衛士だったことだな。\p"
				"ふむ、見習いだろうか。"
				"中々凛々しい少年であったが。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB11, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	旅人
			TalkPopup("this",0,0,0,0,0)
			{
				"随分と若い衛士が警固をしていたな。\p"
				"ふむ、見習いだろうか。"
				"中々凛々しい少年であったが。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Citizen_4_C04","Citizen_4_C05")
}

//──────────────────────────────
//	【旅人】Citizen_4_C05
//──────────────────────────────
function "Talk_Citizen_4_C05"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：ベンチに座る
		//	モーション	：
		//───────────────
		//	旅人
		TalkPopup("this",0,0,0,0,0)
		{
			"ふふ、利発そうな衛士さんだったわねぇ。\p"
			"精鋭部隊って言われているから"
			"いかつい人ばかりなのかと思っていたけど。\p"
			"あんな子もいるのねぇ。"
			"ちょっと身近に感じてしまうわ。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Citizen_4_C05","Citizen_4_C04")
}

//──────────────────────────────
//	【王都市民】Citizen_4_C06
//──────────────────────────────
function "Talk_Citizen_4_C06"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：立ち話
		//	モーション	：
		//───────────────
		if( !FLAG[TF_TALK_MOB13] )
		{
			CallFunc("mp6201m:Talk_Citizen_4_C06_07")	//共通会話
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"エタニアに栄光あれ！"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

			TalkPopup("this",0,0,0,0,0)
			{
				"巫女様、どうかお気をつけて"
				"行ってらっしゃいませ。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Citizen_4_C06","Citizen_4_C07")
	LookChr("Citizen_4_C07","Citizen_4_C06")
}


function "Talk_Citizen_4_C06_07"
{

		EmotionEx("Citizen_4_C06", 0.05f, EMO_PA, 0, 5, 1, 1, 1.8f )	// 「PA」
		Wait(3)
		EmotionEx("Citizen_4_C07", 0.05f, EMO_PA, 0, 5, 1, 1, 1.8f )	// 「PA」
		Wait(30)

		LookChr("Citizen_4_C06","LEADER")
		LookChr("Citizen_4_C07","LEADER")

			//	王都市民
			TalkPopup("Citizen_4_C06",0,0,0,0,0)
			{
				"まあ、これはダーナ様……！"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation("Citizen_4_C07","ANI_EV_TEBURI", -1 , 1 )

			//	王都市民
			TalkPopup("Citizen_4_C07",0,0,0,0,0)
			{
				"ふふ、丁度お噂を"
				"していた所でございます。"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation("Citizen_4_C07","ANI_EV_REI", -1 , 1 )
			PlayVoice(Y8V_5771,"Citizen_4_C07",100)	//ありがたい事でございます
	
			TalkPopup("Citizen_4_C07",0,0,0,0,0)
			{
				"今年が豊作に恵まれ、"
				"素晴らしい収穫祭となったのも"
				"ひとえに巫女様と陛下のお力ですわ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	王都市民
			TalkPopup("Citizen_4_C06",0,0,0,0,0)
			{
				"収穫祭でもみな"
				"口々に申しておりましたよ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation("Citizen_4_C06","ANI_EV_REI", -1 , 1 )

			TalkPopup("Citizen_4_C06",0,0,0,0,0)
			{
				"どうかこれからも"
				"エタニアをよくお導き下さいませ。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB13, 1 )
}


//──────────────────────────────
//	【王都市民】Citizen_4_C07
//──────────────────────────────
function "Talk_Citizen_4_C07"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・中央エリア
		//───────────────
		//	配置・カメラ：立ち話
		//	モーション	：
		//───────────────
		//　　上のキャラと同じ。
		if( !FLAG[TF_TALK_MOB13] )
		{
			CallFunc("mp6201m:Talk_Citizen_4_C06_07")	//共通会話
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし
			//	王都市民
			TalkPopup("this",0,0,0,0,0)
			{
				"お忙しいでしょうに、"
				"お疲れ様でございます。"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

			TalkPopup("this",0,0,0,0,0)
			{
				"大樹の恵みがあらん事を！  "
			}
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Citizen_4_C06","Citizen_4_C07")
	LookChr("Citizen_4_C07","Citizen_4_C06")
}



//──────────────────────────────
//	【行商人】Citizen_4_C09
//──────────────────────────────
function "Talk_Citizen_4_C09"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：出口付近／竜車を置く
		//	モーション	：
		//───────────────
		//　　振り返らない
		if( !FLAG[TF_TALK_MOB14] )
		{
			CallFunc("mp6201m:Talk_Citizen_4_C09_10")	//共通会話
		}
		else
		{
			//　　★繰り返し
			//　　※カメラ切り替えなし

			PlayVoice(Y8V_5756,"this",100)	//やれやれ…

			//	行商人
			TalkPopup("this",0,0,0,0,0)
			{
				"やれやれ、お前ってヤツは……\p"
				"そんなに王都にいたいなら"
				"知り合いの商会に奉公に出してやるわい。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	娘
			TalkPopup("Citizen_4_C10",0,0,0,0,0)
			{
				"う……それはヤダ。"
				"ぜったいヤダ！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Citizen_4_C10","Citizen_4_C09")
	LookChr("Citizen_4_C09","Citizen_4_C10")
}


function "Talk_Citizen_4_C09_10"
{

			//	娘
			TalkPopup("Citizen_4_C10",0,0,0,0,0)
			{
				"ええ～、もう帰るの！？\p"
				"ヤダヤダヤダ～っ！"
				"勝手に決めないでよ、も～！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	行商人
			TalkPopup("Citizen_4_C09",0,0,0,0,0)
			{
				"ええい、勝手に仕事に"
				"ついて来たのはお前じゃろう！\p"
				"これ以上言うことを"
				"聞かんのなら置いて行くぞ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	娘
			TalkPopup("Citizen_4_C10",0,0,0,0,0)
			{
				"まじっ！？　やったー！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　冷や汗エモーション。
			EmotionEx("Citizen_4_C09",0.00f,EMO_TARA,0,5,1,1,2.0f)	// 冷や汗
			Wait(60)

			//	行商人
			TalkPopup("Citizen_4_C09",0,0,0,0,0)
			{
				"手持ちもないくせに何を言っとる。\p"
				"ほれ、テキパキ出発の仕度をせい！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB14, 1 )
}


//──────────────────────────────
//	【娘】Citizen_4_C10
//──────────────────────────────
function "Talk_Citizen_4_C10"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] )			//▼過去編Ⅳ王宮前へ向かう
	{
		//▼過去編Ⅳ王宮前へ向かう
		//───────────────
		//	場所		：王都中央区（過去）・東エリア
		//───────────────
		//	配置・カメラ：出口付近
		//	モーション	：
		//───────────────
		//　　上のキャラと共通。
		if( !FLAG[TF_TALK_MOB14] )
		{
			CallFunc("mp6201m:Talk_Citizen_4_C09_10")	//共通会話
		}
		else
		{
			//　　★繰り返し
			//	娘
			TalkPopup("this",0,0,0,0,0)
			{
				"んもう……とにかく"
				"勝手に決めないでよね！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	行商人
			TalkPopup("Citizen_4_C09",0,0,0,0,0)
			{
				"勝手はお前の方だと言っとるじゃろ。\p"
				"ほれ、テキパキ出発の仕度をせい！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Citizen_4_C10","Citizen_4_C09")
	LookChr("Citizen_4_C09","Citizen_4_C10")
}



////////////////////////////////////////////////////////////////////////////////

//■メインイベントセクション

////////////////////////////////////////////////////////////////////////////////

//──────────────────────────────
//▼[ダーナ編③]アイギアスの街を散策する
//──────────────────────────────
function "EV_M04S040"			//ダーナ③ アイギスを散策する
{
	//開始処理ここから-----------------------------------------------
	SetStopFlag(STOPFLAG_EVENTIMPOSE)
	FadeOut(FADE_BLACK, 0)
	WaitFade()

	ResetStopFlag(STOPFLAG_CINEMA)

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))

	//街の賑わいを見せるので、NPCは撤去しない
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定				
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)
	SetChrPos("DANA", -399.13f, 880.13f, 11.09f)
	Turn("DANA", 160.32f, 360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	ChangeSubAnimation("DANA",SUBMOT_EXT2,ANI_SIGN_HIDE,1)
	LookReset("DANA")

	SetChrWork("Olga", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Olga", INFOFLAG_NOCHRATARI)
	SetChrPos("Olga", -399.60f, 879.20f, 11.09f)
	Turn("Olga", 156.77f, 360.0f)
	ChangeAnimation("Olga", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("Olga")


	SetChrPos("Citizen_2_A01",-384.70f,917.64f,11.07f)
	Turn("Citizen_2_A01",-110.99f,360.0f)
	ChangeAnimation( "Citizen_2_A01" , "ANI_WAIT", -1 , 1 )

	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )

	//カメラ設定
	MoveCameraAt( 0 , -561.528f , 1007.598f , 86.183f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 15.901f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -30.711f , 0 )	// 基本仰角
	RotateCamera( 0 , 217.735f , 0 )				// 角度
	ChangeCameraPers( 0 , 70.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 0.000, 10.000, 2.000, 0.550, 0.500)					//イベント毎に調整
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	SetFlag(SF_NOBACKGROUNDTG, 1)	//遠景描画に低解像度ターゲットを使用しない（高解像度になりますが、負荷があがります。）

	//スキップ許可
	SetSkipScript("mp6201m:EV_M04S040_ED")

	//開始処理ここまで-----------------------------------------------

	//　　画面フェードインして王都アイギアスの往来を見せていく。
	//　　(過去マップの内容によって演出は別途検討)
	
	// カット1 ----------------------------------------------------------------------------------------

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -577.336f , 980.077f , 16.978f, 200 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 15.900f , 200 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 4.421f, 200 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 228.768f , 200 )

	// モブ召還
	SetChrPos("EV_c350_01", -578.23f, 960.41f, 11.09f, 1.43f)	// 手前から橋を歩いていく男
	Turn("EV_c350_01", -75.39f, 360.0f)
	SetChrPos("EV_c350_02", -547.91f, 954.83f, 11.09f, 1.43f)	// 奥から橋を歩いてくるカップル（男）
	Turn("EV_c350_02", 99.85f, 360.0f)
	SetChrPos("EV_c351_01", -547.04f, 953.50f, 11.09f, 1.43f)	// 奥から橋を歩いてくるカップル（女）
	Turn("EV_c351_01", 99.85f, 360.0f)
	SetChrPos("EV_c350_03", -540.95f, 980.39f, 1.25f, 1.43f)	// 橋の下の広場カップル（男）
	Turn("EV_c350_03", 59.62f, 360.0f)
	SetChrPos("EV_c351_02", -542.05f, 978.55f, 1.25f, 1.43f)	// 橋の下の広場カップル（女）
	Turn("EV_c351_02", 167.36f, 360.0f)
	SetChrPos("EV_c350_03", -562.09f, 984.16f, 1.25f, 1.43f)	// 橋の下で運河を眺めている男
	Turn("EV_c350_03", -167.77, 360.0f)
	SetChrPos("EV_c350_04", -538.62f, 956.20f, 11.09f, 1.43f)	// 奥から橋を歩いてくる男
	Turn("EV_c350_04", 99.85f, 360.0f)
	SetChrPos("EV_c351_03", -532.67f, 953.71f, 11.09f, 1.43f)	// 奥から橋を歩いてくる女
	Turn("EV_c351_03", 89.19f, 360.0f)

	// フェードイン
	FadeIn(FADE_BLACK, FADE_NORMAL)
	Wait(FADE_NORMAL)

	ExecuteCmd(1, MoveTo, "EV_c350_01", -545.54f, 957.24f, 11.09f, 0.1f, 0.18f)	// 手前から橋を歩いていく男
	ExecuteCmd(2, MoveTo, "EV_c350_02", -582.28f, 958.42f, 11.09f , 0.1f, 0.20f)	// 奥から橋を歩いてくるカップル（男）
	ExecuteCmd(3, MoveTo, "EV_c351_01", -582.57f, 956.71f, 11.09f , 0.1f, 0.17f)	// 奥から橋を歩いてくるカップル（女）
	ExecuteCmd(4, MoveTo, "EV_c350_04", -585.94f, 963.10f, 11.09f , 0.1f, 0.20f)	// 奥から橋を歩いてくる男
	ExecuteCmd(5, MoveTo, "EV_c351_03", -569.26f, 957.16f, 11.09f , 0.1f, 0.18f)	// 奥から橋を歩いてくる女

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	
	Wait(30)

	// 移動停止
	StopThread(1)
	StopThread(2)
	StopThread(3)
	StopThread(4)
	StopThread(5)

	// カット2 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_NORMAL)

//	PlayVoice(Y8V_5841, "VOCHR_EVENT", 70)	//ガヤ
	PlaySE(SE_M04S040_01, 80, 1, 100, 0, 1.0f, 0)	//ガヤ

	// カメラ
	MoveCameraAt( 0 , -492.715f , 861.660f , 5.189f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.101f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -13.134f , 0 )	// 基本仰角
	RotateCamera( 0 , 104.130f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// モブ召還
	SetChrPos("EV_c350_01", -512.24f, 861.27f, 1.44f)	// 芝生広場で会話してるカップル（男）
	Turn("EV_c350_01", -178.43f, 360.0f)
	SetChrPos("EV_c351_01", -512.42f, 863.33f, 1.43f)	// 芝生広場で会話してるカップル（女）
	Turn("EV_c351_01", 24.10f, 360.0f)
	SetChrPos("EV_c350_02", -516.07f, 872.42f, 1.41f)	// 広場でひとりでいる男
	Turn("EV_c350_02", -107.36f, 360.0f)
	SetChrPos("EV_c351_02", -510.63f, 861.45f, 1.43f )	// 奥から歩いてくる女
	Turn("EV_c351_02", -106.22f, 360.0f)
	SetChrPos("EV_c350_03", -483.37f, 863.99f, 1.43f )	// 手前から歩いてくる男
	Turn("EV_c350_03", 73.84f, 360.0f)
	SetChrPos("EV_c350_04",-500.41f,869.34f,1.465f)		// 丸い広場で歓談してる四人（左男）
	Turn("EV_c350_04", -158.25f, 360.0f)
	SetChrPos("EV_c350_05", -499.45f, 871.24f, 1.465f )	// 丸い広場で歓談してる四人（右男）
	Turn("EV_c350_05", 13.44f, 360.0f)
	SetChrPos("EV_c351_03", -498.77f, 869.58f, 1.465f )	// 丸い広場で歓談してる四人（左女）
	Turn("EV_c351_03", 120.03f, 360.0f)
	SetChrPos("EV_c351_04", -500.80f, 870.90f, 1.465f )	// 丸い広場で歓談してる四人（右女）
	Turn("EV_c351_04", -50.51f, 360.0f)
	SetChrPos("EV_c351_05", -504.41f, 856.57f, 1.43f )	// 木の下でひとりでいる女
	Turn("EV_c351_05", -154.70f, 360.0f)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -488.239f , 861.698f , 2.965f, 150 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 7.101f , 150 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -4.651f, 150 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 77.962f , 150 )

	ExecuteCmd(1, MoveTo, "EV_c350_03", -513.73f, 858.68f, 2.68f, 0.1f, 0.18f)	// 手前から歩いてくる男
	ExecuteCmd(2, MoveTo, "EV_c351_02", -484.80f, 868.96f, 1.43f , 0.1f, 0.18f)	// 奥から歩いてくる女

	// フェード待ち
	Wait(FADE_NORMAL)
	
	Wait(60)
	EmotionEx("EV_c350_02", 0.05f, EMO_WAI, 0, 5, 3, 0, 1.5f )	// 「ワイワイ」
	Wait(10)
	EmotionEx("EV_c350_04", 0.05f, EMO_WAI, 0, 5, 3, 0, 1.5f )	// 「ワイワイ」
	Wait(30)
	EmotionEx("EV_c351_03", 0.05f, EMO_WAI, 0, 5, 2, 0, 1.5f )	// 「ワイワイ」

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	
//	Wait(30)
	Wait(15)

	// 移動停止
	StopThread(1)
	StopThread(2)
	
//	StopVoice(Y8V_5841)
	StopSE(SE_M04S040_01, 300)
	
	// カット3 ----------------------------------------------------------------------------------------
	
	// クロスフェード
	CrossFade(FADE_NORMAL)
	
	// カメラ
	MoveCameraAt( 0 , -432.078f , 1047.346f , 63.125f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 15.900f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.972f , 0 )	// 基本仰角
	RotateCamera( 0 , 43.658f , 0 )				// 角度
	ChangeCameraPers( 0 , 70.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -248.736f , 896.534f , 33.101f, 220 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 15.900f , 220 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -7.826f, 220 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 57.880f , 220 )
	
	// フェード待ち
	Wait(FADE_NORMAL)

	Wait(80)

	//	マップ名称 テキスト（色替え）王都アイギアス──
	VisualName("visual/mapname/mn_6201m.itp", VN_NAMEMAP, -1, -1,VN_MAPNAME_TIME)//王都アイギアス

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	Wait(35)
	
	// カット4 ------------------------------------------------------------------------------------------

	//　　往来を二人で歩いて行くダーナとオルガ。

//	PlayVoice(Y8V_5841, "VOCHR_EVENT", 70)	//ガヤ
	PlaySE(SE_M04S040_01, 80, 1, 2000, 0, 1.0f, 0)	//ガヤ

	// クロスフェード
	CrossFade(FADE_NORMAL)

	// カメラ
	MoveCameraAt( 0 , -413.630f , 889.704f , 25.596f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 14.003f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -61.717f , 0 )	// 基本仰角
	RotateCamera( 0 , 348.112f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	//SetDoF(0, LERP_LINEAR, 5.000, 120.000, 2.000, 0.700, 0.500)					//イベント毎に調整

	SetFlag(SF_NOBACKGROUNDTG, 0)	//遠景描画に低解像度ターゲットを使用しない（高解像度になりますが、負荷があがります。）

	// モブ召還
	SetChrPos("EV_c350_01", -402.07f, 892.09f, 11.15f, 1.43f)	// 手前から奥に歩いていく男
	Turn("EV_c350_01", -20.89f, 360.0f)
	SetChrPos("EV_c351_01", -405.40f, 886.42f, 11.12f, 1.43f)	// 手前から奥に歩いていく女
	Turn("EV_c351_01", -26.85f, 360.0f)
	SetChrPos("EV_c351_02", -393.67f, 868.53f, 11.09f, 1.43f)	// 中間地点から奥に歩いていく女
	Turn("EV_c351_02", -19.74f, 360.0f)
	SetChrPos("EV_c350_02", -386.99f, 847.60f, 11.09f, 1.43f)	// 奥から手前に歩いてくる男
	Turn("EV_c350_02", 148.39f, 360.0f)
	SetChrPos("EV_c351_03", -403.05f, 894.58f, 11.15f, 1.43f)	// 塔堂側を歩いて横切る女
	Turn("EV_c351_03", 64.39f, 360.0f)
	SetChrPos("EV_c350_03", -389.19f, 893.41f, 10.89f, 1.43f)	// 左の隅でしゃべってる風の二人（男Ａ）
	Turn("EV_c350_03", 128.34f, 360.0f)
	SetChrPos("EV_c350_04", -392.32f, 894.11f, 11.07f, 1.43f)	// 左の隅でしゃべってる風の二人（男Ｂ）
	Turn("EV_c350_04", -74.18f, 360.0f)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -412.317f , 891.579f , 12.698f, 162 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 6.803f , 162 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -5.763f , 162 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 340.171f , 162 )

	// フェード待ち
	Wait(FADE_NORMAL)

	// モブ移動
	ExecuteCmd(7, MoveTo, "EV_c351_03", -427.58f, 885.44f, 11.07f, 0.1f, 0.18f)

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -402.997f , 887.588f , 12.698f, 180 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.403f, 180)
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 2.672f , 180 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 227.692f , 180 )

	// 移動
	ExecuteCmd(1, MoveTo, "DANA", -402.55f, 887.64f, 11.15f, 0.1f, 0.20f)
	Wait(5)
	ExecuteCmd(2, MoveTo, "Olga", -403.02f, 886.63f, 11.12f, 0.1f, 0.18f)

	ResetChrInfoFlag("EV_c350_01",INFOFLAG_NOATARI)
	ResetChrInfoFlag("EV_c351_01",INFOFLAG_NOATARI)
	ResetChrInfoFlag("EV_c351_02",INFOFLAG_NOATARI)
	ResetChrInfoFlag("EV_c350_02",INFOFLAG_NOATARI)

	// モブ移動
	ExecuteCmd(3, MoveTo, "EV_c350_01", -346.77f, 764.37f, 11.09f, 0.1f, 0.20f)
	Wait(5)
	ExecuteCmd(4, MoveTo, "EV_c351_01", -349.50f, 761.99f, 11.09f, 0.1f, 0.20f)
	Wait(5)
	ExecuteCmd(5, MoveTo, "EV_c351_02", -347.66f, 763.94f, 11.09f, 0.1f, 0.20f)
	Wait(5)
	ExecuteCmd(6, MoveTo, "EV_c350_02", -409.71f, 898.03f, 11.51f, 0.1f, 0.20f)

	// 移動待ち
	WaitThread(1)
	WaitThread(2)
	
	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	FadeBGM(70,30)
	SoundEfx( SEFX_EV_HILL, 15 )
	
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)
	
	TalkMes("DANA","#6113V#070e#000m相変わらず王都はすごい賑わいだね。","賑わい2行目","")
	WaitPrompt()
	WaitCloseWindow()

	// カット5 -----------------------------------------------------------------------------------------

	StopSE(SE_M04S040_01, 6000)

	// クロスフェード
	CrossFade(FADE_FAST)

	// モブ移動停止
	StopThread(3)
	StopThread(4)
	StopThread(5)
	StopThread(6)
	StopThread(7)
	
	// カメラ
	MoveCameraAt( 0 , -402.531f , 887.049f , 12.678f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.955f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 4.888f , 0 )	// 基本仰角
	RotateCamera( 0 , 8.195f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 位置調整・表情・モーション
	SetChrPos("Olga", -402.92f, 886.32f, 11.07f)
	Turn("Olga", -165.63f, 360.0f)
	LookChr("Olga", "DANA")
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)	// 目

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -402.689f , 887.026f , 12.678f , 100 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.899f , 100 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 4.029f , 100 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 8.768f , 100 )

	// フェード待ち
	Wait(FADE_FAST)

	LookChr("DANA", "Olga")
	TurnToChr("DANA", "Olga", 8.0f)
	Wait(10)

	ChangeAnimation( "DANA", "ANI_EV_RYOTESIRI_S", -1, 1 )	// 両手 尻組み
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_LAUGH_S, 1)	// 目
	LookRoll("DANA", 10.0f)	// かしげる

	TalkMes("DANA","#6114V#000e#080mね、オルガちゃん。",
		"謁見までまだ時間があるんだよね？","")
	WaitPrompt()
	WaitCloseWindow()

	HeadYes("Olga", 1, 25)	// キャラ, うなずき回数, 速さ

	TalkMes("Olga","#6115V#000e#000mああ、夕刻の約束だが、",
		"お前まさか……","")
	WaitPrompt()
	WaitCloseWindow()


	LookRoll("DANA", 0.0f)	// かしげる
	ChangeAnimation( "DANA", "ANI_EV_RYOTESIRI_E", -1, 1 )	// 両手 尻組み
	WaitAnimation2( "DANA" , -1, 1, "ANI_EV_RYOTESIRI_E",  0)
	
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_CLOSE_S, 1)	// 目
	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て


	TalkMes("DANA","#6116V#080mふふ、みんなの暮らしを知らずして、",
		"なぜ大樹の巫女を名乗れましょう。","")
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "Olga", "ANI_EV_RYOTEKOSI_S", -1, 1 )	// 両手腰

	TalkMes("Olga","#6117V#000e#000mまったく、こんな時くらい",
		"大人しくしていられないのか？","")
	WaitPrompt()
	WaitCloseWindow()

	// カット6 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_NORMAL)

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	// カメラ
	MoveCameraAt( 0 , -402.727f , 887.172f , 12.718f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.074f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 6.440f , 0 )	// 基本仰角
	RotateCamera( 0 , 304.347f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 非表示・再表示
	SetChrInfoFlag("Olga", INFOFLAG_INVISIBLE)	// 非表示

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -402.548f , 887.188f , 12.718f , 600 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 0.906f , 600 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 1.856f, 600 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 24.001f , 600 )

	// フェード待ち
	Wait(FADE_NORMAL)

	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_CLOSE_E, 1)	// 目
	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_E", -1, 1 )	// 手胸当て

	//	"DANA"
	TalkMes("DANA","#6118V#000m……こんな時だからこそ、だと思うな。","","")
	WaitPrompt()
	TalkMes("DANA","#6119V#011e#000m新しい女王様を迎える王都の人たちが",
		"何をどう感じて暮らしているのか……","")
	WaitPrompt()

	
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_CLOSE_E, 1)	// 目
	LookRoll("DANA", 10.0f)	// かしげる


	TalkMes("DANA","#6120V#080m少しでも知っておくことは",
		"私たちにとって大事なことだよね。","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(20)

	// カット7 ----------------------------------------------------------------------------------------

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	// クロスフェード
	CrossFade(FADE_CROSS)
	
	// カメラ
	MoveCameraAt( 0 , -402.737f , 887.680f , 12.678f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.114f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -1.765f , 0 )	// 基本仰角
	RotateCamera( 0 , 196.419f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	
	// 非表示・再表示
	ResetChrInfoFlag("Olga", INFOFLAG_INVISIBLE)	// 再表示

	// 位置調整・表情・モーション
	ChangeAnimation( "Olga", "ANI_WAIT", -1, 1 )	// 待機

	// モブ召還
	SetChrPos("EV_c350_01", -402.07f, 892.09f, 11.15f, 1.43f)	// 手前から奥に歩いていく男
	Turn("EV_c350_01", -20.89f, 360.0f)
	SetChrPos("EV_c351_01", -405.40f, 886.42f, 11.12f, 1.43f)	// 手前から奥に歩いていく女
	Turn("EV_c351_01", -26.85f, 360.0f)
	SetChrPos("EV_c351_02", -393.67f, 868.53f, 11.09f, 1.43f)	// 中間地点から奥に歩いていく女
	Turn("EV_c351_02", -19.74f, 360.0f)
	SetChrPos("EV_c350_02", -386.99f, 847.60f, 11.09f, 1.43f)	// 奥から手前に歩いてくる男
	Turn("EV_c350_02", 148.39f, 360.0f)

	ResetChrInfoFlag("EV_c350_01",INFOFLAG_NOATARI)
	ResetChrInfoFlag("EV_c351_01",INFOFLAG_NOATARI)
	ResetChrInfoFlag("EV_c351_02",INFOFLAG_NOATARI)
	ResetChrInfoFlag("EV_c350_02",INFOFLAG_NOATARI)
	
	// モブ移動
	ExecuteCmd(3, MoveTo, "EV_c350_01", -346.77f, 764.37f, 11.09f, 0.1f, 0.20f)
	Wait(5)
	ExecuteCmd(4, MoveTo, "EV_c351_01", -349.50f, 761.99f, 11.09f, 0.1f, 0.20f)
	Wait(5)
	ExecuteCmd(5, MoveTo, "EV_c351_02", -347.66f, 763.94f, 11.09f, 0.1f, 0.20f)
	Wait(5)
	ExecuteCmd(6, MoveTo, "EV_c350_02", -409.71f, 898.03f, 11.51f, 0.1f, 0.20f)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE ,-402.908f , 887.692f , 12.678f, 100 )

	// フェード待ち
	Wait(FADE_CROSS)

	ChangeAnimation( "Olga", "ANI_EV_UDEGUMI_S", -1, 1 )	// 腕組
	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_CLOSE_S, 1)	// 目

	TalkMes("Olga","#6121V#011e#000mフン、もっともらしいことを……","","")
	WaitPrompt()
	TalkMes("Olga","#6122V#000e#000mいいか、必ず",
		"夕刻までに王宮に来るのだぞ。","")
	WaitPrompt()
	WaitCloseWindow()
	
	LookRoll("DANA", 0.0f)	// かしげる
	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て

	// ダーナ
	
	// Popupではなく字幕モードで表示 2018.03.26 m.arai
	TalkMes("DANA","#6123V#080e#080mありがとう、オルガちゃん。","","")
//	TalkPopup("DANA", 0, 1, 0, 0, 0) {
//		"#6123V#080e#080mありがとう、オルガちゃん。"
//	}
	
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "Olga", "ANI_EV_UDEGUMI_E", -1, 1 )	// 腕組


	TalkMes("Olga","#6124V#012e#000mこのまま王宮へ向かい、",
		"貴賓室に監禁するつもりだったが……","")
	WaitPrompt()
	ChangeAnimation( "Olga", "ANI_EV_RYOTEKOSI_S", -1, 1 )	// 両手腰
	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_CLOSE_S, 1)	// 目
	Look("Olga", 35.0f, 0.0f)

	TalkMes("Olga","#6125V#041e#000mまた繋ぎ合わせた手拭いを伝って、",
		"窓から逃げられても敵わん。","")
	WaitPrompt()
	WaitCloseWindow()

	//　　ダーナに冷や汗エモーション。
	EmotionEx("DANA", 0.00f, EMO_TARA, 0, 5, 1, 1, 1.0f)	//冷や汗
	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_E", -1, 1 )	// 手胸当て
	Wait(45)

	TalkMes("DANA","#6126V#000mさ、さすがにそれは",
		"もうしないと思うけど……","")
	WaitPrompt()
	WaitCloseWindow()

	Look("Olga", 0.0f, 0.0f)
	LookChr("Olga", "DANA")

	TalkMes("Olga","#6127V#042e#000mフン、どうだろうな……","","")
	WaitPrompt()
	TalkMes("Olga","#6128V#000m#010lお忍びのため、自室に隠し扉を作る",
		"“お転婆巫女”に言われてもな。","")
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_HOHOKAKI", -1, 1 )	// 頬かき

	//	"DANA"
	TalkMes("DANA","#6129V#100e#000mあ、あはは、バレてたの？","","")
	WaitPrompt()
	WaitCloseWindow()


	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_LOOKC_S, 1)	// 目
	ChangeAnimation( "Olga", "ANI_EV_RYOTEKOSI_E", -1, 1 )	// 両手腰

	//	"Olga"
	TalkMes("Olga","#6130V#032e#000m#000lお前の腕なら万が一はないと思うが、",
		"とにかく悪目立ちをするな。","")
	WaitPrompt()
	TalkMes("Olga","#6131V何か問題が起きたら、",
		"すぐに私に連絡を入れろ。","")
	WaitPrompt()

	WaitAnimation2( "Olga" , -1, 1, "ANI_EV_RYOTEKOSI_E",  0)	
	ChangeAnimation( "Olga", "ANI_EV_UDEGUMI_S", -1, 1 )	// 腕組

	TalkMes("Olga","#6132V#030e#000mくれぐれも厄介事に",
		"一人で首を突っ込むんじゃない。","")
	WaitPrompt()
	WaitCloseWindow()
	
	// カット8 ----------------------------------------------------------------------------------------
	
	// クロスフェード
	CrossFade(FADE_CROSS)
	
	// モブ移動停止
	StopThread(3)
	StopThread(4)
	StopThread(5)
	StopThread(6)
	
	// モブ彼方へ
	SetChrPos("EV_c350_01", -100000.00f, 0.00f, 0.00f)
	SetChrPos("EV_c350_02", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c350_03", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c350_04", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c350_05", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c351_01", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c351_02", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c351_03", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c351_04", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c351_05", -100000.00f,0.00f,0.00f)

	SetChrInfoFlag("EV_c350_01",INFOFLAG_NOATARI)
	SetChrInfoFlag("EV_c351_01",INFOFLAG_NOATARI)
	SetChrInfoFlag("EV_c351_02",INFOFLAG_NOATARI)
	SetChrInfoFlag("EV_c350_02",INFOFLAG_NOATARI)
	
	// カメラ
//	MoveCameraAt( 0 , -402.795f , 886.880f , 12.638f , 0 )	// 注視点
//	ChangeCameraDistance( 0 , 1.674f , 0 )		// 基本距離
//	ChangeCameraElevation( 0 , 4.618f , 0 )	// 基本仰角
//	RotateCamera( 0 , 306.223f , 0 )				// 角度
//	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
//	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
//	RollCamera( 0 , -0.0f , 0 )				// ロール回転
//	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	MoveCameraAt( 0 , -402.795f , 886.880f , 12.688f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.654f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 7.393f , 0 )	// 基本仰角
	RotateCamera( 0 , 13.395f , 0 )				// 角度
	ChangeCameraPers( 0 , 41.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転


	// 位置調整・表情・モーション
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)	// 目

	// フェード待ち
	Wait(FADE_CROSS)
	
	ChangeAnimation( "DANA", "ANI_EV_RYOTEMAE_S", -1, 1 )	// 両手 前組み
	LookChr("DANA", "Olga")

	TalkMes("DANA","#6133V#080e#080mふふ、わかりました。",
		"それじゃあ、行ってくるね。","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)
	
	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -402.795f , 886.880f , 13.750f, 150 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.282f , 150 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -7.420f , 150 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 338.655f , 150 )

	Wait(45)

	//　　操作許可。
	//　　王宮までの間に配置されたＮＰＣたちから
	//　　話を聞くことができ、エタニアの繁栄や
	//　　現女王の善政ぶりについての情報が得られる。
	//　　女王交代の噂も広まっており、次期女王に関する噂も。
	//　　中には歴代の中でもお転婆巫女と評される
	//　　ダーナに関する噂も聞くことができる。
	//　　必要な情報を聞いて王宮の衛士に話しかけることで
	//　　イベントが進むが、最終的な仕様はマップ完成後に確定する。
	//　　(サブイベント、一般へ)

	//　　画面フェードアウト。

//	StopSE(SE_M04S040_01, 500)

	// フェードアウト
	FadeOut(FADE_BLACK, FADE_NORMAL)
	WaitFade()
	
	Wait(10)
	
	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	
	//終了処理ここから----------------------------------------------------
	CallFunc("mp6201m:EV_M04S040_ED")
}

function "EV_M04S040_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	// 彼方へ
	SetChrPos("Olga", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c350_01", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c350_02", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c350_03", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c350_04", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c350_05", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c351_01", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c351_02", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c351_03", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c351_04", -100000.00f,0.00f,0.00f)
	SetChrPos("EV_c351_05", -100000.00f,0.00f,0.00f)

	SetChrInfoFlag("EV_c350_01",INFOFLAG_NOATARI)
	SetChrInfoFlag("EV_c351_01",INFOFLAG_NOATARI)
	SetChrInfoFlag("EV_c351_02",INFOFLAG_NOATARI)
	SetChrInfoFlag("EV_c350_02",INFOFLAG_NOATARI)

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_DANA")

	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	ChangeAnimation("Olga", "ANI_WAIT", -1, 1)

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ
	SetFlag(SF_NOBACKGROUNDTG, 0)	//遠景描画に低解像度ターゲットを使用しない（高解像度になりますが、負荷があがります。）
	SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	SetFlag(GF_04MP6201_IN_AIGIUS,1)	//ダーナ③ アイギスを散策する
	//SetDiaryCharaFlag( DRCHA_OLGA, DRCHA_FLAG_INFO1, 1 )	//★人物メモ：追加情報の開放１（オルガ）
	
	//マップマーカー
	SetMapMarker( SMI_DANA_SYMBOL ,PAGE_MF002, MARKER_EV_M04S050, -567.98f, 1258.85f, 23.00f, -567.98f, 1258.85f,MARKER_EV_M04S050,MN_F_MP6204M,0)		//メイン：過去編エタニア王宮
	SetMapMarker( SMI_DANA_SYMBOL ,PAGE_MF002, MARKER_SUBEV_PAST_D3_1, -347.43f, 907.85f, 1.43f , -347.43f, 907.85f,MARKER_SUBEV_PAST_D3_1,MN_F_MP6202M,0)		//サブイベント：東街区に入った
	SetMapMarker( SMI_DANA_SYMBOL ,PAGE_MF002, MARKER_SUBEV_PAST_D3_2, -414.58f, 902.92f, 12.15f , -414.58f, 902.92f,MARKER_SUBEV_PAST_D3_2,MN_F_MP6201M,0)		//サブイベント：ラステル・衛士トラキルと会う
	SetMapMarker( SMI_DANA_SYMBOL ,PAGE_MF002, MARKER_SUBEV_PAST_D3_3, -472 ,940 ,11 , -472  ,940 ,MARKER_SUBEV_PAST_D3_3,MN_F_MP6201M,0)		//サブイベント：ダリオス執行官と話す

	CallFunc("mp6201m:init")

	//イベント後の再配置
	SetChrPos("LEADER", -403.71f, 889.71f, 11.15f)
	Turn("LEADER", 156.84f, 360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt( 0 , -403.706f , 889.705f , 13.017f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.400f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 14.000f , 0 )	// 基本仰角
	RotateCamera( 0 , 23.174f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	CallFunc("system:camera_reset")

	VisualName("visual/portrait/ep_0030.itp",VN_NAMEMAP2,-1,-1,VN_MAPNAME_TIME)//ダーナ③

	ResetStopFlag(STOPFLAG_EVENTIMPOSE)

	SoundEfx( SEFX_HILL, 15 )

	FadeIn(FADE_BLACK,FADE_FAST)
	//WaitFade()

	//終了処理ここまで----------------------------------------------------

}


//──────────────────────────────
//▼参道の障害が消滅する(mp6201m)
//──────────────────────────────
function "EV_M04S191"			//過去Ⅱ ダーナが参道に着く	
{
	//開始処理ここから-----------------------------------------------

	CallFunc("system:event_begin")

	//SetStopFlag(STOPFLAG_EVENT)
	//FadeOut(FADE_BLACK, 0)
	//WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定				
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)
	SetChrPos("DANA", -357.17f, 818.91f, 12.54f)
	Turn("DANA", -114.33f, 360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	ChangeSubAnimation("DANA",SUBMOT_EXT2,ANI_SIGN_HIDE,1)
	LookReset("DANA")

	//カメラ設定
	MoveCameraAt( 0 , -356.477f , 818.687f , 14.077f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.860f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 5.101f , 0 )	// 基本仰角
	RotateCamera( 0 , 324.748f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 90.000, 0.000, 0.550, 0.500)					//イベント毎に調整
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("")	//選択肢イベントとしてスキップ不可

	//開始処理ここまで-----------------------------------------------

	FadeIn(FADE_BLACK, FADE_FAST)
	Wait(FADE_FAST)

	//　　マップに入るとイベント開始。
	//　　水晶石のＬＰを調べるとイベント開始。
	//	テキスト（色替え）
	TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
	{
		"#7C水晶石が不思議な光を湛えている……" 
		"#7Cヒモロギの苗木を植えますか？" 
	}
	WaitPrompt()
	WaitCloseWindow()

	//選択肢
	SetFlag(TF_MENU_SELECT, 0)
	MenuReset()
	MenuType(MENUTYPE_POPUP)
	MenuAdd(1, "はい")
	MenuAdd(2, "いいえ")
	MenuOpen( TF_MENU_SELECT , -1 , ADOLMENU_PPOSY , -2 , -2 , 10 , 0)
	WaitMenu(0)
	MenuClose(10, 0)

	//─────────────────────────
	//	⇒はい
	if (FLAG[TF_MENU_SELECT] == 1){
		
		// フェードアウト
		FadeOut(FADE_BLACK, FADE_FAST)
		WaitFade()
		
		// カメラ
		MoveCameraAt( 0 , -361.985f , 816.855f , 13.997f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 1.221f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , -5.385f , 0 )	// 基本仰角
		RotateCamera( 0 , 141.079f , 0 )				// 角度
		ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		
		// ポートレート読み込み
		Portrait_Load(0, "system/black.itp" )		//擬似フェードアウト用
		Portrait_Create(0, 0, 0, 0, 0, 64,64, 0.0f, 0x00ffffff, 0x00000000)
		
		// 位置調整・表情・モーション
		SetChrPos("DANA", -362.38f, 816.69f, 12.55f)
		Turn("DANA", -114.33f, 360.0f)
		ChangeAnimation( "DANA", "ANI_EV_PRAY", -1, 1 )	// 祈る
		ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_CLOSE, 1)	// 目
		Wait(10)

		MapAnime("gim_himorogi" , "on")		// ヒモロギ
		
		// カメラ移動
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -362.087f , 816.873f , 14.077f , 300 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.221f , 300 )
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -0.801f , 300 )
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 149.964f , 300 )
		
		// フェードイン
		FadeIn(FADE_BLACK, FADE_FAST)
		WaitFade()
		
		// ダーナ
		TalkPopup("DANA", 0, 2, 0, 0, 0) {
			"#010e#000mお願い……"
			"アドルさんの道を切り拓いて！"
		}
		WaitPrompt()
		WaitCloseWindow()

		StopBGM(120)
		PlaySE(SE_M04S191_01, 100, 0, 0, 0, 1.0f, 0)
		SetEnvSEPlayState(-1, 0)	//環境SE全停止

		//　　画面ホワイトアウトしてアドル編へ接続。
		FadeOut(FADE_WHITE, FADE_SLOW)
		WaitFade()

		// カメラ停止
		StopThread(1000)
		StopThread(1001)
		StopThread(1002)
		StopThread(1003)

		Wait(60)
		
		// 擬似フェードアウト表示
		Portrait_Anime(0 ,PR_ANIME_SCALE, 30.0f, 17.0f, 0, 0, 0)
		Portrait_Anime(0 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)

		// フェードイン（白）
		FadeIn(FADE_WHITE, FADE_NORMAL)
		WaitFade()

		// フェードアウト（黒）
		FadeOut(FADE_BLACK, 0)
		WaitFade()

		CallFunc("mp6201m:EV_M04S191_ED")

	}
	//	⇒いいえ
	if (FLAG[TF_MENU_SELECT] == 2){

		//　　そのまま操作許可。
		FadeOut(FADE_BLACK, FADE_FAST)
		Wait(FADE_FAST)

		//終了処理はスキップ禁止
		SetSkipScript("")

		//イベント前のキャラ情報を復帰
		RestoreEventState()

		//隠したものを復帰。
		ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

		//キャラモーション初期化
		CallFunc("system:reset_chrmot_DANA")

		//パーティキャラを解放
		ReleaseEventPartyChr()

		//マップパラメーターリセット
		ResetMapParam(-1)

		//イベント後の再配置
		SetChrPos("LEADER", -358.60f, 818.78f, 12.54f)
		Turn("LEADER", 62.29f, 360.0f)

		ResetPartyPos()
		ResetFollowPoint()
		Wait(1) //処理待ち用

		//カメラ位置復帰
		MoveCameraAt( 0 , -358.595f , 818.785f , 14.390f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 5.911f , 0 )	// 基本仰角
		RotateCamera( 0 , -19.155f , 0 )				// 角度
		ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転

		CallFunc("system:camera_reset")

		ResetStopFlag(STOPFLAG_EVENT)

		FadeIn(FADE_BLACK, FADE_FAST)
		//WaitFade()

		//終了処理ここまで----------------------------------------------------
	}	
}

function "EV_M04S191_ED"
{
		//終了処理はスキップ禁止
		SetSkipScript("")

		//イベント前のキャラ情報を復帰
		RestoreEventState()

		//過去Ⅱ　終了処理呼び出し
		CallFunc("system:ReturnFrom_EPISODE_2")

		// ポートレートリリース
		Portrait_Close(-1)
		Portrait_Unload(-1)

		//マップマーカー
		DelMapMarker( SMI_DANA_SYMBOL ,PAGE_MF002, MARKER_EV_M04S191, 0,0)		//メイン：過去Ⅱ ダーナが参道に着く

		//隠したものを復帰。
		//ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

		//キャラモーション初期化
		CallFunc("system:reset_chrmot_DANA")

		//パーティキャラを解放
		//ReleaseEventPartyChr()

		//マップパラメーターリセット
		ResetMapParam(-1)

		//NowLoading 時の Tips 表示をカット
		SetFlag(TF_LOADING_TIPS_OFF, 1)

		//CallFunc("system:camera_reset")

		StopBGM(60)
		SetFlag(SF_NOCHANGEBGM, 1)

		LoadArg("map/mp6201/mp6201.arg")
		EventCue("mp6201:EV_M04S200")

		SetEnvSEPlayState(-1, 0)	//環境SE全停止

		ResetStopFlag(STOPFLAG_EVENT)

}
//終了処理ここまで----------------------------------------------------




//──────────────────────────────
//▼過去Ⅲ　ダーナが塔へ向かう３
//──────────────────────────────
function "EV_M05S072"			//過去Ⅲ　ダーナが塔へ向かう３
{
	//開始処理ここから-----------------------------------------------
	CallFunc("system:event_begin")	//EB開始処理

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK, 0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定				
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)
	SetChrPos("DANA",-384.67f, 908.00f, 11.07f)
	Turn("DANA",47.76f,360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	ChangeSubAnimation("DANA",SUBMOT_EXT2,ANI_SIGN_HIDE,1)

	SetChrWork("Odo", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Odo", INFOFLAG_NOCHRATARI)
	SetChrPos("Odo",-386.33f, 906.34f, 11.07f)
	Turn("Odo",-137.00f,360.0f)
	ChangeAnimation("Odo", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Odo", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Odo", SUBMOT_MOUTH, ANI_M_WAIT, 1)
//	ChangeSubAnimation("Odo", SUBMOT_EXT1, ANI_E_LOOKC, 1)


	//カメラ設定
	MoveCameraAt( 0 , -385.462f , 907.352f , 13.177f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.920f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.872f , 0 )	// 基本仰角
	RotateCamera( 0 , 84.957f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 1.000, 100.000, 1.000, 0.700, 0.600)					//イベント毎に調整
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp6201m:EV_M05S072_ED")

	//開始処理ここまで-----------------------------------------------

	//　　フェードインして中央区の路上で向き合っている。
	//　　ダーナと理法士オド。

	// カット1 ------------------------------------------------------------------------------------------

	LookChr("DANA", "Odo")
	LookChr("Odo", "DANA")

	Wait(10)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -385.462f , 907.352f , 12.717f , 55 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.920f , 55 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -2.872f , 55 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 84.957f , 55 )

	// フェードイン
	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()
	
	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	// 理法士オド
	TalkPopup("Odo", 0, 2, 0, 0, 0) {
		"──さて、自分は塔堂に戻るんで、"
			"ここで失礼させていただきますよ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_RYOTEMAE_S", -1, 1 )	// 両手 前組み

	// ダーナ
	TalkPopup("DANA", 0, 1, 0, 0, 0) {
		"#000e#000mオドさん、どうも"
		"ありがとうございました。"
	}
	WaitPrompt()
	WaitCloseWindow()

	HeadNo("Odo", 1, 30)	// キャラ, 回数, 速さ

	// 理法士オド
	TalkPopup("Odo", 0, 2, 0, 0, 0) {
		"#011e#000mいやいや、こちらこそ。\p"
		"#012e#000mそれにしてもお転婆巫女様も"
		"やりにくくなっちまいましたなぁ。\p"
		"また住人に囲まれちまわないよう"
		"気をつけて行ってください。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_RYOTEMAE_E", -1, 1 )	// 両手 前組み
	//PlayVoice(Y8V_3004,"DANA",100)	//あはは…（苦笑）

	// ダーナ
	TalkPopup("DANA", 0, 0, 0, 0, 0) {
		"#000e#000mあはは……そ、そうですね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カット2 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_CROSS)
	
	// カメラ
	MoveCameraAt( 0 , -385.749f , 907.039f , 12.677f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.920f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 5.722f , 0 )	// 基本仰角
	RotateCamera( 0 , 10.470f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// フェード待ち
	Wait(FADE_CROSS)

	LookTo("Odo", -386.482f , 907.951f , 13.237f)	// 座標：東のほう

	// 理法士オド
	TalkPopup("Odo", 0, 1, 0, 0, 0) {
		"ご存じでしょうが《バハの塔》は"
		"ここを東に抜けて橋を渡った先です。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Odo", "DANA")

	// 理法士オド
	TalkPopup("Odo", 0, 1, 0, 0, 0) {
		"そんじゃ、自分はこれにて。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て

	// ダーナ
	TalkPopup("DANA", 0, 2, 0, 0, 0) {
		"#000e#000mええ、お気をつけて。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　塔堂方面へ去っていく理法士オド。
	//　　オドを見送ってダーナが一人つぶやく。

	LookReset("Odo")
	Turn("Odo", 15.78f, 8.0f)

	// 移動
	ExecuteCmd(1, MoveTo, "Odo", -390.34f, 899.43f, 11.07f, 0.1f, 0.18f)
	Wait(45)
	
	// カット3 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_FAST)
	
	// 移動停止
	StopThread(1)

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	
	// カメラ
	MoveCameraAt( 0 , -384.826f , 907.614f , 12.637f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 0.760f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 1.996f , 0 )	// 基本仰角
	RotateCamera( 0 , 4.437f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -384.878f , 907.651f , 12.617f , 300 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 0.760f , 300 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -6.311f , 300 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 341.804f , 300 )

	// フェード待ち
	Wait(FADE_FAST)

	LookReset("DANA")

	// ダーナ
	TalkPopup("DANA", 0, 2, 0, 0, 0) {
		"#011e#000m……とにかくアドルさんの目指す"
		"《バハの塔》へ向かわなくちゃ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_E", -1, 1 )	// 手胸当て

	// ダーナ
	TalkPopup("DANA", 0, 2, 0, 0, 0) {
		"#012e#020l#000mエタニアが……"
		"この地が滅ぶ原因を探るためにも。"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)
	//　　ここで操作許可。

	FadeOut(FADE_BLACK, FADE_NORMAL)
	WaitFade()
	
	//終了処理ここから----------------------------------------------------
	CallFunc("mp6201m:EV_M05S072_ED")
}

function "EV_M05S072_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	// 移動停止
	StopThread(1)

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_DANA")

	SetChrPos("Odo", -100000.00f, 0.00f, 0.00f)	// 彼方へ

	ChangeAnimation("Odo", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Odo", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Odo", SUBMOT_MOUTH, ANI_M_WAIT, 1)
//	ChangeSubAnimation("Odo", SUBMOT_EXT1, ANI_E_LOOKC, 1)

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)
	
	//フラグ処理
	SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	//SetFlag(GF_05MP6201M_GOTO_BAHA, 1)		//過去Ⅲ　ダーナが塔へ向かう３

	CallFunc("mp6201m:init")

	//マップマーカー
	CallFunc("system:SetMarkerDANA")
	SetMapMarker( SMI_DANA_SYMBOL ,PAGE_MF003, MARKER_EV_M05S080, -74.28f, 1381.96f, 65.75f, -74.28f, 1381.96f,MARKER_EV_M05S080,MN_F_MP6103M,0)				//メイン：過去Ⅲ　ダーナが塔に到着する
	//SetMapMarker( SMI_DANA_SUBEVENT ,PAGE_MF003, MARKER_SUBEV_PAST_3_Q0, 21.41f, 1316.90f, 66.94f, 21.41f, 1316.90f,MARKER_SUBEV_PAST_3_Q0,MN_F_MP6103M,0)		// 過去編Ⅲ：巫女の施し（開封前）
	//SetMapMarker( SMI_DANA_SUBEVENT ,PAGE_MP6511, MARKER_SUBEV_PAST_3_Q2, -159.92f,243.92f,8.00f, -159.92f,243.92f,MARKER_SUBEV_PAST_3_Q2,MN_D_MP6511,0)		// 過去編Ⅲ：精霊救出D（リンデル

	//イベント後の再配置
	SetChrPos("LEADER",-388.63f,910.08f,11.07f)
	Turn("LEADER",176.31f,360.0f)
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt( 0 , -388.632f , 910.077f , 12.939f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 14.000f , 0 )	// 基本仰角
	RotateCamera( 0 , 1.065f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	CallFunc("system:camera_reset")

	VisualName("visual/portrait/ep_0130.itp",VN_NAMEMAP2,-1,-1,VN_MAPNAME_TIME)//過去Ⅲ

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK, FADE_FAST)
	//WaitFade()

}


////////////////////////////////////////////////////////////////////////////////

//■サブイベントセクション

////////////////////////////////////////////////////////////////////////////////

//──────────────────────────────
//	【ダーナ編③サブイベント：ラステル・衛士トラキルと会う】
//──────────────────────────────
function "SubEV_Past_D3_Ras_Tra"		//ラステル・衛士トラキルと会う
{
	CallFunc("system:event_begin")	// イベントボックス起動

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK, 0)
	WaitFade()
	
	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	//ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA", -413.92f, 904.17f, 12.15f)
	Turn("DANA", 123.68f, 360.0f)
	ChangeAnimation( "DANA" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("DANA")
	SetChrInfoFlag( "DANA" , INFOFLAG_NOCHRATARI)

	SetChrWork("Rastell", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Rastell", -415.77f, 904.32f, 12.15f)
	Turn("Rastell", -175.91f, 360.0f)
	ChangeAnimation( "Rastell" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("Rastell",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("Rastell",SUBMOT_MOUTH,ANI_M_WAIT,1)
	LookReset("Rastell")
	SetChrInfoFlag( "Rastell" , INFOFLAG_NOCHRATARI)
	
	SetChrWork("Trakil", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Trakil", -415.74f, 906.27f, 12.25f)
	Turn("Trakil", 0.00f, 360.0f)
	ChangeAnimation("Trakil","ANI_EV_WAIT_BUKI", -1 , 1 )	//	モーション	：歩哨待機
	ChangeSubAnimation("Trakil",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("Trakil",SUBMOT_MOUTH,ANI_M_WAIT,1)
	LookReset("Trakil")
	SetChrInfoFlag( "Trakil" , INFOFLAG_NOCHRATARI)

	SetChrPos("eq4029_1",-415.74f,906.27f,12.25f)			//槍
	SetParent( "eq4029_1" , "Trakil", "Null_Rhand" )		//槍
	ChangeAnimation("eq4029_1","ANI_WAIT_c380", -1 , 1 )	//	c380用

	// カメラ
	MoveCameraAt( 0 , -414.982f , 904.794f , 13.740f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.267f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -1.542f , 0 )	// 基本仰角
	RotateCamera( 0 , 33.980f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 80.000 ,0.000 ,0.700 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6201m:SubEV_Past_D3_Ras_Tra_ED")

//開始処理ここまで-----------------------------------------------


	LookChr("Trakil", "Rastell")
	LookChr("Rastell", "Trakil")
	Wait(10)
	
	// カメラ移動
//	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -414.982f , 904.794f , 13.740f , 60 )

	// フェードイン
	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()
	
	// カメラ待ち
//	WaitThread(1000)
	
	EmotionEx("Trakil", 0.00f, EMO_PA, 0, 5, 1, 1, 1.3f )	// 「PA」
	LookChr("Trakil", "DANA")
	Wait(35)
	
	//	衛士トラキル
	TalkPopup("Trakil",0,2,0,0,0)
	{
		"#000e#000mおや、大樹の巫女様。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Rastell", "DANA")
	TurnToChr("Rastell", "DANA", 8.0f)

	PlayVoice(Y8V_6016,"Rastell",100)	//えへへ

	//	ラステル
	TalkPopup("Rastell",0,2,0,0,0)
	{
		"#000e#080m巫女様っ！"
		"ご無沙汰しています！"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("DANA", "Rastell")
	PlayVoice(Y8V_2997,"DANA",100)	//ふふ（微笑）

	//	"DANA"
	TalkPopup("DANA",0,1,0,0,0)	
	{
		"#000e#000mふふ、しばらく振りですね。\p"
		"ラステルは"
		"ここで何をしているのですか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeSubAnimation("Rastell",SUBMOT_EYE,ANI_E_LAUGH_S,1)

	//	衛士トラキル
	TalkPopup("Trakil",0,2,0,0,0)
	{
		"#011eそれが、親父さんの仕事を"
		"見学したいと言って聞かんのです。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeSubAnimation("Trakil",SUBMOT_EYE,ANI_E_CLOSE_E,1)
	LookChr("Trakil","Rastell")

	TalkPopup("Trakil",0,2,0,0,0)
	{
		"ラステル、分かってくれ。"
		"お前さんが衛士に憧れる気持ちは"
		"よーく分かるが……\p"
		"親父さんは今、王宮前の"
		"警備をなさっているんだ。"
		"お前がいては形無しだろう。"
	}
	WaitPrompt()
	WaitCloseWindow()

	Turn("Rastell",-175.24f,9.0f)
	LookChr("Rastell","Trakil")
	ChangeSubAnimation("Rastell",SUBMOT_EYE,ANI_E_SAD_S,1)
	ChangeSubAnimation("Rastell",SUBMOT_MOUTH,ANI_M_WAIT,1)

	//	ラステル
	TalkPopup("Rastell",0,2,0,0,0)
	{
		"うっ……で、でも"
		"僕だって子供じゃありません。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation("Rastell","ANI_EV_TEBURI", -1 , 1 )

	TalkPopup("Rastell",0,2,0,0,0)
	{
		"絶対に邪魔はしません！"
		"遠くから見るだけですから！"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_SEKI", -1, 1 )	// 咳払い

	//	"DANA"
	TalkPopup("DANA",0,1,0,0,0)
	{
		"#000e#000mくすくす……"
		"相変わらずですね。\p"
		"『父上のような衛士になって"
		"　王都を守ってみせます！』って"
		"前に約束してくれましたよね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeSubAnimation("Rastell",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("Rastell",SUBMOT_MOUTH,ANI_M_SMILE_S,1)
	LookChr("Rastell", "DANA")
	TurnToChr("Rastell", "DANA", 8.0f)

	PlayVoice(Y8V_6017,"Rastell",100)	//はいっ！

	//	ラステル
	TalkPopup("Rastell",0,2,0,0,0)
	{
		"#021eえへへへへ……はい！"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Trakil", "DANA")

	//	衛士トラキル
	TalkPopup("Trakil",0,2,0,0,0)
	{
		"#011eもう我々にとっても"
		"可愛い弟分でしてな。\p"
		"#012eいやはや、こうも熱心では"
		"敵いませんよ。"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	Wait(10)
	
	// フェードアウト
	FadeOut(FADE_BLACK, FADE_NORMAL)
	WaitFade()

//終了処理ここから----------------------------------------------------
	CallFunc("mp6201m:SubEV_Past_D3_Ras_Tra_ED")

}
function "SubEV_Past_D3_Ras_Tra_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ立て
	SetFlag( TF_CAMERATALK_TRAKIL, 0 )
	SetFlag( TF_NORMALTALK_RASTELL, 1 )
	SetFlag( GF_SUBEV_PAST_D3_TALK_RAS_TRA, 1 )

	DelMapMarker( SMI_DANA_SYMBOL ,PAGE_MF002, MARKER_SUBEV_PAST_D3_2, 0,0)		//サブイベント：ラステル・衛士トラキルと会う

	CallFunc("mp6201m:init")
	CallFunc("mp6201m:NPC_Move_t03_Pos")		//★パッチ1.01対応：ルートムーブNPCの座標強制指定
	CallFunc("mp6201m:NPC_Move_t04_Pos")		//★パッチ1.01対応：ルートムーブNPCの座標強制指定
	CallFunc("mp6201m:NPC_Move_t05_Pos")		//★パッチ1.01対応：ルートムーブNPCの座標強制指定
	CallFunc("mp6201m:NPC_Move_t06_Pos")		//★パッチ1.01対応：ルートムーブNPCの座標強制指定

	//イベント後の再配置
	SetChrPos("LEADER",-409.26f, 901.72f, 12.07f)
	Turn("LEADER",-36.00f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt( 0 , -409.259f , 901.718f , 13.937f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 14.411f , 0 )	// 基本仰角
	RotateCamera( 0 , 36.000f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)
	//WaitFade()

//終了処理ここまで----------------------------------------------------

}
//──────────────────────────────
//	【過去クエスト②Ａ：かくれんぼの話を聞く】
//──────────────────────────────
function "SubEV_Past_02_Quest_A"
{

	//　　王都中央区マップ(mp6201m)へ入るとイベント開始。
	//　　どこからか声が聞こえてくる。

//開始処理ここから----------------------------------------------------

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK, 0)
	WaitFade()
	
	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	//ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	ChangeAnimation( "DANA" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("DANA")
	SetChrInfoFlag( "DANA" , INFOFLAG_NOCHRATARI)

	SetChrWork("Thea", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Thea",-407.00f, 896.75f, 11.15f)
	Turn("Thea",-22.87f,360.0f)
	ChangeAnimation( "Thea" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("Thea",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("Thea",SUBMOT_MOUTH,ANI_M_WAIT,1)
//	ChangeSubAnimation("Thea",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("Thea")
	SetChrInfoFlag( "Thea" , INFOFLAG_NOCHRATARI)

	Look("Thea", 0.0f, -10.0f)	// うつむく
	ChangeSubAnimation("Thea",SUBMOT_EYE,ANI_E_SAD_CLOSE,1)

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 250.000 ,1.000 ,0.700 ,0.30)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6201m:SubEV_Past_02_Quest_A_ED")

//開始処理ここまで-----------------------------------------------

	// カット1 ----------------------------------------------------------------------------------------

	// ▼東区から来た ---------------------------
	if (FLAG[SF_LASTENTRY_NO] == 3) {
		
		// カメラ
		MoveCameraAt( 0 , -384.979f , 907.476f , 12.962f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 1.240f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , -1.343f , 0 )	// 基本仰角
		RotateCamera( 0 , 273.850f , 0 )				// 角度
		ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		SetChrPos("DANA",-379.85f, 907.72f, 11.07f)
		Turn("DANA",95.03f,360.0f)
		
		// 移動
		ExecuteCmd(1, MoveTo, "DANA", -384.35f, 907.98f, 11.07f, 0.1f, 0.235f)

		// カメラ移動
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -384.936f , 907.431f , 12.562f , 65 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 0.760f , 65 )
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -2.202f , 65 )
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 294.196f , 65 )
		
		// フェードイン
		FadeIn(FADE_BLACK,FADE_NORMAL)
		WaitFade()

		// 移動待ち
		WaitThread(1)

		// カメラ待ち
		WaitThread(1000)
		WaitThread(1001)
		WaitThread(1002)
		WaitThread(1003)

		// ？？？
		SetName("？？？")
		TalkPopup("Thea",0,3,400,210,0) {
			"#000mふぇぇん……ひっく、ひっく……"
		}
		WaitPrompt()
		WaitCloseWindow()
		SetName("")

		//　　ダーナにＰＡエモーション。
		EmotionEx("DANA", 0.00f, EMO_PA, 0, 5, 1, 1, 1.0f )	// 「PA」
		ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SUP_S, 1)	// 目
		LookChr("DANA", "Thea")
		Wait(40)
		
	}
	
	// ▼西区から来た ---------------------------
	else {
		
		// カメラ
		MoveCameraAt( 0 , -430.862f , 885.566f , 13.102f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 1.960f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , -5.105f , 0 )	// 基本仰角
		RotateCamera( 0 , 125.456f , 0 )				// 角度
		ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		SetChrPos("DANA",-433.41f, 882.93f, 11.08f)
		Turn("DANA",-145.92f,360.0f)
		
		// 移動
		ExecuteCmd(1, MoveTo, "DANA", -431.26f, 885.79f, 11.07f, 0.1f, 0.235f)

		// カメラ移動
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -430.862f , 885.566f , 12.522f , 65 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.480f , 65 )
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -4.532f , 65 )
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 113.998f , 65 )

		// フェードイン
		FadeIn(FADE_BLACK,FADE_NORMAL)
		WaitFade()

		// 移動待ち
		WaitThread(1)

		// カメラ待ち
		WaitThread(1000)
		WaitThread(1001)
		WaitThread(1002)
		WaitThread(1003)

		// ？？？
		SetName("？？？")
		TalkPopup("Thea",0,3,150,210,0) {
			"#000mふぇぇん……ひっく、ひっく……"
		}
		WaitPrompt()
		WaitCloseWindow()
		SetName("")

		//　　ダーナにＰＡエモーション。
		EmotionEx("DANA", 0.00f, EMO_PA, 0, 5, 1, 1, 1.0f )	// 「PA」
		ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SUP_S, 1)	// 目
		LookChr("DANA", "Thea")
		Wait(40)
		
	}

	// ▼ここから共通 ---------------------------

	// カット2 ----------------------------------------------------------------------------------------

	//　　ふと見ると塔堂の前でシーアが立ち尽くしている。

	// クロスフェード
	CrossFade(FADE_FAST)

	// カメラ
//	MoveCameraAt( 0 , -406.816f , 896.397f , 12.502f , 0 )	// 注視点
//	ChangeCameraDistance( 0 , 1.000f , 0 )		// 基本距離
//	ChangeCameraElevation( 0 , -0.803f , 0 )	// 基本仰角
//	RotateCamera( 0 , 345.940f , 0 )				// 角度
//	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
//	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
//	RollCamera( 0 , 0.0f , 0 )				// ロール回転
//	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	MoveCameraAt( 0 , -406.816f , 896.397f , 12.362f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -0.803f , 0 )	// 基本仰角
	RotateCamera( 0 , 345.940f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 位置調整・表情・モーション
	SetChrPos("DANA",-405.61f, 893.86f, 11.15f)
	Turn("DANA",160.05f,360.0f)


//	// カメラ移動
//	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -406.816f , 896.397f , 12.362f , 35 )

	// フェード待ち
	Wait(FADE_FAST)

	// カメラ待ち
	WaitThread(1000)

	// シーア
	TalkPopup("Thea",0,2,0,0,0) {
		"#000mやっぱり見つからないよぅ……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　歩いてフレームインしてくるダーナ。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -406.576f , 896.181f , 12.342f , 60 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.180f , 60 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 12.374f , 60 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 333.331f , 60 )
	
	Wait(10)
	
	// 移動
	ExecuteCmd(1, MoveTo, "DANA", -406.30f, 895.56f, 11.15f, 0.1f, 0.16f)
	WaitThread(1)

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	// ダーナ
	TalkPopup("DANA",0,1,0,0,0) {
		"#000e#000mシーアちゃん？"
		"一体どうしたの……？"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Thea", "DANA")

	TalkPopup("Thea",0,0,0,0,0)
	{
		"#062e#000mみ、巫女様ぁ……\p"
		"#061e#000m実は、かくれんぼを"
		"してたんですけど……\p"
		"ミーアちゃんもあの子も"
		"全然みつからなくて……\p"
		"#062e#000mもしかして、二人とも悪い人に"
		"さらわれちゃったんじゃ……"
	}
	WaitPrompt()
	WaitCloseWindow()


	//　　ダーナに冷や汗エモーション
	EmotionEx("DANA", 0.00f, EMO_TARA, 0, 5, 1, 1, 1.0f )	// 「冷や汗」
	Wait(45)

	// ダーナ
	TalkPopup("DANA",0,1,0,0,0) {
		"#000e#000mそ、それはどうかなぁ。"
		"あれ、でも“あの子”っていうのは……\p"
		"もしかして新しいお友達ができたの？"
	}
	WaitPrompt()
	WaitCloseWindow()

	HeadYes("Thea" ,1 , 25)

	TalkPopup("Thea",0,0,0,0,0)
	{
		"#061eあ、はい……"
		"今朝会ったばかりなんですけど。\p"
		"#062eピンクのふわふわした髪で"
		"とっても可愛らしい女の子なんです。\p"
		"わたしたちより１つか２つ年上かな……\p"
		"わたしたち2行目"
		"#061e……ううっ、もし何かあったら"
		"わたしのせいだよぅ……"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA" , "ANI_EV_TEBURI", -1 , 1 )

	//	"DANA"
	TalkPopup("DANA",0,0,0,0,0)
	{
		"#000e#000mシ、シーアちゃん、"
		"少し落ち着いて。"
	}
	WaitPrompt()
	WaitCloseWindow()

	WaitAnimation2( "DANA" , -1, 1, "ANI_EV_TEBURI",  0)

	LookReset("DANA")
	ChangeAnimation( "DANA", "ANI_EV_SIAN_S", -1, 1 )	// 思案

	TalkPopup("DANA",0,0,0,0,0)
	{
		"#011e#000m#0L（だいぶ困ってるみたいだね……）\p"
		"（新しい友達の方は判らないけど"
		"  ミーアちゃんのかくれんぼは手強いし。）\p"
		"（……ここはやっぱり……）"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	Wait(10)
	
	// カット3 ----------------------------------------------------------------------------------------

	//　　シーアに向き直るダーナ。

	// クロスフェード
	CrossFade(FADE_CROSS)

	// カメラ
	MoveCameraAt( 0 , -406.854f , 896.328f , 12.422f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.700f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -5.960f , 0 )	// 基本仰角
	RotateCamera( 0 , 241.934f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// フェード待ち
	Wait(FADE_CROSS)
	
	ChangeAnimation( "DANA", "ANI_EV_SIAN_E", -1, 1 )	// 思案
	LookChr("DANA", "Thea")
	
	// ダーナ
	TalkPopup("DANA",0,2,0,0,0) {
		"#012e#080mシーアちゃん、よかったら"
		"私も手伝おうか。\p"
		"元気を出して！"
		"#080e#080m向こうが２人ならこっちも２人。\p"
		"私たちで探せば、きっと見つかるよ。"
		"私6行目"
	}
	WaitPrompt()
	WaitCloseWindow()

	// シーア
	TalkPopup("Thea",0,1,0,0,0) {
		"巫女様……\p"
		"あ、ありがとうございます！"
		"どうかよろしくお願いしますっ！"
	}
	WaitPrompt()
	WaitCloseWindow()

	PlayVoice(Y8V_2997,"DANA",100)	//ふふ（微笑）
	ChangeAnimation( "DANA", "ANI_EV_GUTSPOSE_S", -1, 1 )	// ガッツポーズ

	// ダーナ
	TalkPopup("DANA",0,0,0,0,0) {
		"#021e#080mふふ、任せて！"
		"これでもかくれんぼは得意だからね！"
	}
	WaitPrompt()
	WaitCloseWindow()

	WaitAnimation2("DANA", -1, 1, "ANI_EV_GUTSPOSE_S", 0)
	ChangeAnimation( "DANA", "ANI_EV_GUTSPOSE_E", -1, 1 )	// ガッツポーズ
//	WaitAnimation2("DANA", -1, 1, "ANI_EV_GUTSPOSE_E", 0)

	//　　ダーナ、辺りを見渡してみる
	LookSpd("DANA", 0.1f, 0.1f, 0.1f )// ゆっくりめに首向き
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_LAUGH_E, 1)	// 目
	Look("DANA" 24, 0)
	Wait(30)
	Look("DANA" -40, 0)
	Wait(30)
	LookReset("DANA")

	ChangeAnimation( "DANA", "ANI_EV_UDEGUMI_S", -1, 1 )	// 腕組
	// ダーナ
	TalkPopup("DANA",0,2,0,0,0) {
		"#011e#000mうーん、理力を使うのは"
		"さすがに反則かな……？\p"
		"#012e#000mまあさすがに王都からは"
		"出ていないだろうし。\p"
		"元気な子供たちが"
		"隠れそうな場所を探してみよう。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookSpd( "DANA", LOOKSPD_DEFAULT, LOOKSPD_DEFAULT, LOOKSPD_DEFAULT )

	//　　ここで操作許可
	
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	PlaySE(SE_QUEST_ADD, 100, 0, 0, 0, 1.0f, 0)		// クエスト追加

	//	システムテキスト
	TalkPopup(UNDEF,0,5,0,0,0)
	{
		"#8S"
		"#-1W#4Cエタニアクエスト#8C【双子のかくれんぼ】#4Cを開始した！#10W" 
		"#8S"
	}
	WaitPrompt()
	WaitCloseWindow()


//終了処理ここから----------------------------------------------------
	CallFunc("mp6201m:SubEV_Past_02_Quest_A_ED")
}
function "SubEV_Past_02_Quest_A_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ立て
	SetFlag( GF_SUBEV_PAST_02_QUEST_A, 1 )
	//SetFlag( SF_MISSIONNO, MS_08_02B )	//★冒険メモ：かくれんぼで見つからない子供たちを探そう

	CallFunc("mp6201m:init")

	//マップマーカー
	DelMapMarker( SMI_DANA_SYMBOL ,PAGE_MF002, MARKER_EV_M04S191, 0,0)		//メイン：過去Ⅱ ダーナが参道に着く （クエスト中一時的に消す）

	SetMapMarker( SMI_DANA_SYMBOL ,PAGE_MF002, MARKER_SUBEV_PAST02_5, -518.88f, 1144.06f, 25.80f , -518.88f, 1144.06f,MARKER_SUBEV_PAST02_5,MN_F_MP6204M,0)		//過去編Ⅱ：子供を見つける(迷子クエスト)

	//イベント後の再配置
	SetChrPos("LEADER",-405.94f, 894.67f, 11.15f)
	Turn("LEADER",156.84f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt( 0 , -405.940f , 894.672f , 13.017f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 14.000f , 0 )	// 基本仰角
	RotateCamera( 0 , 23.156f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)
	//WaitFade()

//終了処理ここまで----------------------------------------------------
}



//──────────────────────────────
//	【過去編Ⅱ：現代に戻るイベント】
//──────────────────────────────
function "SubEV_Past_02_Return"
{

	//　　再訪時にヒモロギを調べると起動。

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	TurnToChr( LEADER , this , 7.5f )
	Wait(10)

	SetFlag( TF_MENU_SELECT, 0 )
	YesNoMenu(TF_MENU_SELECT,"#7Cヒモロギの木に祈りを捧げますか？",1)
	
	//────────────────────
	//	⇒はい
	if( FLAG[TF_MENU_SELECT] )	// Yesを選んだ
	{
	//開始処理ここから-----------------------------------------------
		ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
	
		CallFunc("system:event_begin_fast")
	
		//イベント開始前情報の保存
		SaveEventState()
		SaveCamera()
	
		//パーティ状態のリセット
		CallFunc("system:party_reset")
	
		//環境の初期化・不要なものを隠す
		ClearDebris()
		//ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
		//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))
	
		//キャラ初期状態の設定				
		SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("DANA",-362.69f,816.46f,12.55f)
		Turn("DANA",-115.00f,360.0f)
		ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
		ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
		ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
		ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
		LookReset("DANA")
	
		//BGM設定◆
		//PlayBGM( BGM_FIELD_101 , XX )
	
		//カメラ設定
		MoveCameraAt( 0 , -361.627f , 817.947f , 13.946f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 0.681f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , -2.731f , 0 )	// 基本仰角
		RotateCamera( 0 , 154.868f , 0 )				// 角度
		ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	
		// 被写界深度の設定
		SetDoF(0, LERP_LINEAR, 2.000, 10.000, 2.000, 0.550, 0.500)					//イベント毎に調整
		// グレアの設定
		SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整
	
		// ポートレート読み込み
		Portrait_Load(0, "system/black.itp" )		//擬似フェードアウト用
		Portrait_Create(0, 0, 0, 0, 0, 64,64, 0.0f, 0x00ffffff, 0x00000000)
	
		//スキップ許可
		SetSkipScript("mp6201m:SubEV_Past_02_Return_ED")
	
		//開始処理ここまで-----------------------------------------------
	
		FadeIn(FADE_BLACK, FADE_NORMAL)
		Wait(FADE_NORMAL)
	
		//	  　ダーナがヒモロギに祈りを捧げ、
		//	  　過去編の遷移エフェクト表示して画面アウト。
	
		ChangeAnimation( "DANA", "ANI_EV_PRAY_S", -1, 1 )	// 祈り開始
		ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_CLOSE_S, 1)	// 目
		ChrEffect2( "DANA" , 3900600 , "Bone_root", "", 0 , 0 , 0 , 0.0f,0.0f,0, 1.0f, 1.0f)	//オーラ（ループ）
		
//		Wait(80)
//		Effect2( 3900620, -933.959f , 674.442f , 49.244f, 90.00f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.0f, 1.0f)	// ヒモロギ苗エフェクト
	
		Effect2(3900570, -361.627f , 817.947f , 13.946f, 0.0f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.7f, 1.0f)	// 過去に飛ぶ時の画面切り替えエフェクト
		PlaySE(SE_GO_KAKO_1, 100, 1, 1500, 0, 1.0f, 0)	//水晶石と交信エフェクトループ
	
		//Wait(180)
		Wait(90)
		PlaySE(SE_GO_KAKO_2, 80, 0, 0, 0, 1.0f, 0)	//	発光（過去編ワープ）
		Wait(60)
		PlaySE(SE_GO_KAKO_2, 80, 0, 0, 0, 1.0f, 0)	//	発光（過去編ワープ）
		Wait(30)

		StopBGM(120)
		PlaySE(SE_GO_KAKO_3, 100, 0, 0, 0, 1.0f, 0)	//	ホワイトアウト
		SetEnvSEPlayState(-1, 0)	//環境SE全停止
		StopSE(SE_GO_KAKO_1, 2000)
	
		// フェードアウト
		FadeOut(FADE_WHITE, FADE_SLOW)
		Wait(30)
		PlaySE(SE_GO_KAKO_2, 70, 0, 0, 0, 1.0f, 0)	//	発光（過去編ワープ）
		WaitFade()
		
		Wait(60)
		
		// 擬似フェードアウト表示
		Portrait_Anime(0 ,PR_ANIME_SCALE, 30.0f, 17.0f, 0, 0, 0)
		Portrait_Anime(0 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)
	
		// フェードイン
		FadeIn(FADE_WHITE, FADE_NORMAL)
		WaitFade()
		
		// フェードアウト
		FadeOut(FADE_BLACK, 0)
		WaitFade()
	
		//	  　※ここで、過去編で入手したアイテムの入手処理を行う。
		//	  　現代編の水晶石の前に復帰して操作許可を戻す。	
	
	//終了処理ここから----------------------------------------------------
		CallFunc("mp6201m:SubEV_Past_02_Return_ED")
	}
	//	⇒いいえ
	else
	{
		//	  　そのまま操作許可を戻す
	
	//終了処理ここから----------------------------------------------------
		CrossFade(FADE_CROSS)
		SetStopFlag(STOPFLAG_NOCHARACLIP)
	
		//イベント後の再配置
		//SetChrPos("LEADER",-362.69f,816.46f,12.55f)
		//Turn("LEADER",-115.00f,360.0f)
		ResetPartyPos()
		ResetFollowPoint()
		//Wait(1) //処理待ち用
	
		RestoreCamera(0,0)
		ResetCameraObserver(0)
		ResetCameraZPlane()
		Wait(FADE_CROSS)
	
		ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
	//終了処理ここまで----------------------------------------------------
	}
	//────────────────────
}
function "SubEV_Past_02_Return_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//過去Ⅱ　終了処理呼び出し
	CallFunc("system:ReturnFrom_EPISODE_2")

	//エフェクトの停止
	StopEffect(-1,ALL,1)

	//エフェクトリリース
	ReleaseEffect("efx_ev04.ite")

	// ポートレートリリース
	Portrait_Close(-1)
	Portrait_Unload(-1)

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_DANA")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	CallFunc("system:camera_reset")

	//NowLoading 時の Tips 表示をカット
	SetFlag( TF_LOADING_TIPS_OFF, 1 )

	LoadArg("map/mp6201/mp6201.arg")
	EventCue("mp6201:SubEV_Past_02_Return_Relocate")

	//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//【過去編Ⅱ：水晶石を調べて再訪する】（続き）
//──────────────────────────────
function "SubEV_Past_02_Rearrive2"
{
//開始処理ここから----------------------------------------------------
	
	CallFunc("system:event_begin")

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	//ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//過去Ⅱ　開始処理呼び出し
	CallFunc("system:BackTo_EPISODE_2")

	//キャラ初期状態の設定
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA",-362.69f,816.46f,12.55f)
	Turn("DANA",-115.00f,360.0f)
	ChangeAnimation( "DANA", "ANI_EV_PRAY", -1, 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_CLOSE_S,1)	
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("DANA")
	SetChrInfoFlag( "DANA" , INFOFLAG_NOCHRATARI)

	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )

	//カメラ設定
	MoveCameraAt( 0 , -361.627f , 817.947f , 13.946f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 0.681f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.731f , 0 )	// 基本仰角
	RotateCamera( 0 , 154.868f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 80.000 ,1.000 ,0.700 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6201m:SubEV_Past_02_Rearrive2_ED")

//開始処理ここまで-----------------------------------------------

	//　　対応する過去編の、終点にあるヒモロギ前にフェードイン。
	//　　ダーナが祈りを捧げている状態。
	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	//Wait(30)
	ChangeAnimation( "DANA", "ANI_EV_PRAY_E", -1, 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_CLOSE_E,1)
	Wait(30)

	//　　暗転を挟んで過去編ダーナに操作許可を戻す。
	FadeOut(FADE_BLACK, FADE_FAST)
	WaitFade()

	if(!FLAG[GF_1ST_REARRIVE])
	{
		// チュートリアルポートレート読み込み
		Portrait_Load(0, "system/black.itp" )		//擬似フェードアウト用
		Portrait_Create(0, 0, 0, 0, 0, 64,64, 0.0f, 0x00ffffff, 0x00000000)
		Portrait_Load(1, "visual/help/hp_00.itp" )	// 背景用
		Portrait_Create(1, HELP_POS_X, HELP_POS_Y, 0, 0, HELP_SCALE_X, HELP_SCALE_Y, 0.0f, 0x00ffffff, 0x00000000)
		Portrait_Load(2, "visual/help/hp_a44b.itp" )	// help_a44b：意識交代
		Portrait_Create(2, HELP_POS_X, HELP_POS_Y, 0, 0, HELP_SCALE_X, HELP_SCALE_Y, 0.0f, 0x00ffffff, 0x00000000)

		// チュートリアル =================================================================================
		if ( !FLAG[SF_2NDSTART] ) {		// 2周目判定
			
			//自動送り禁止
			ResetStopFlag(STOPFLAG_AUTOMESSAGE)
			Wait(10)

			// 擬似フェードアウト表示
			Portrait_Anime(0 ,PR_ANIME_SCALE, 30.0f, 17.0f, 0, 0, 0)
			Portrait_Anime(0 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)
			FadeIn(FADE_BLACK, 0)
			WaitFade()

			// ポートレート表示
				PlaySE(SE_TUTORIAL, 100, 0, 0, 0, 1.0f, 0)		//チュートリアル
			Portrait_Anime(1, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, FADE_NORMAL)	// チュートリアル背景
			Portrait_Anime(2, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, FADE_NORMAL)
			Wait(FADE_NORMAL)
			Message2(1, TOPIC_BUTTUN_X, TOPIC_BUTTUN_Y, "", "", "", "", "", "", "", "", "", "")		//ボタン入力可能を提示
			WaitPrompt()
			Portrait_Anime(1, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f, FADE_FAST)	// チュートリアル背景
			Portrait_Anime(2, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f, FADE_FAST)
			Wait(FADE_FAST)
			Portrait_Close(1)
			Portrait_Close(2)
			
			// 擬似フェードアウト削除
			FadeOut(FADE_BLACK, 0)
			WaitFade()
			Portrait_Close(0)

			//自動送り許可
			SetStopFlag(STOPFLAG_AUTOMESSAGE)
		
		}
		// ================================================================================================
	}

//終了処理ここから----------------------------------------------------
	CallFunc("mp6201m:SubEV_Past_02_Rearrive2_ED")
}
function "SubEV_Past_02_Rearrive2_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
//	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ立て
	if(!FLAG[GF_1ST_REARRIVE])
	{
		// ポートレートリリース 	2018.04.25 m.arai
		Portrait_Close(-1)
		Portrait_Unload(-1)

		SetFlag(GF_1ST_REARRIVE,1)		//始めて過去編再訪した
	}

	CallFunc("mp6201m:init")

	//イベント後の再配置
	SetChrPos("LEADER",-364.58f,815.58f,12.55f)
	Turn("LEADER",65.00f,360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	//MoveCameraAt( 0 , 0.0f , 0.0f , 0.0f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 0.0f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 0.0f , 0 )		// 基本仰角
	//RotateCamera( 0 , 0.0f , 0 )				// 角度
	//ChangeCameraPers( 0 , 0.0f , 0 )			// 視野角
	//SetCameraZPlane( 0 , 0.0f )					// ZPlane
	//RollCamera( 0 , 0.0f , 0 )					// ロール回転

	RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	CallFunc("system:camera_reset")

	VisualName("visual/portrait/ep_0120.itp",VN_NAMEMAP,-1,-1,VN_MAPNAME_TIME)	//過去Ⅱ
	
	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK, FADE_FAST)
	//WaitFade()

//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【サブイベント：ラステルと話す】
//──────────────────────────────
function "SubEV_Past_03_Rastell"
{

//　　中央区・東門前でラステルが歩哨をしている。
//　　近づくとイベントが起動。

//開始処理ここから----------------------------------------------------

	CallFunc("system:event_begin_impose")

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	//ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA",-395.75f,995.91f,11.07f)
	Turn("DANA",-144.29f,360.0f)
	ChangeAnimation( "DANA" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookChr( "DANA", "Rastell2" )
	SetChrInfoFlag( "DANA" , INFOFLAG_NOCHRATARI)

	SetChrWork("Rastell2", CWK_DEFAULT_SKIPNODE_OFF, 1)
//	SetChrPos("Rastell2",-394.81f,997.29f,11.07f)
//	Turn("Rastell2",37.86f,360.0f)
	SetChrPos("Rastell2",-395.03f	997.09f	11.07f)
	Turn("Rastell2",37.86f,360.0f)
	ChangeAnimation("Rastell2","ANI_EV_WAIT_BUKI", -1 , 1 )	//	モーション	：歩哨待機
	ChangeSubAnimation("Rastell2",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("Rastell2",SUBMOT_MOUTH,ANI_M_WAIT,1)
//	ChangeSubAnimation("Rastell2",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookChr( "Rastell2", "DANA" )
	SetChrInfoFlag( "Rastell2" , INFOFLAG_NOCHRATARI)

	SetChrPos("eq4029_2",-394.81f,997.29f,11.07f)			//槍
	SetParent( "eq4029_2" , "Rastell2", "Null_Rhand" )		//槍
	ChangeAnimation( "eq4029_2", "ANI_WAIT_c321", -1, 1 )	//ラステル用

	SetFlag(SF_CHARANORECVSHADOW,1)	//キャラ影受けない

	//カメラ設定
//	MoveCameraAt( 0 , -396.018f , 996.373f , 12.618f , 0 )	// 注視点
//	ChangeCameraDistance( 0 , 1.199f , 0 )		// 基本距離
//	ChangeCameraElevation( 0 , 0.515f , 0 )	// 基本仰角
//	RotateCamera( 0 , 290.508f , 0 )				// 角度
//	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
//	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
//	RollCamera( 0 , 0.0f , 0 )				// ロール回転
//	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	MoveCameraAt( 0 , -395.789f , 996.459f , 12.618f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.269f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 0.515f , 0 )	// 基本仰角
	RotateCamera( 0 , 290.501f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 60.000 ,1.000 ,0.700 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6201m:SubEV_Past_03_Rastell_ED")

//開始処理ここまで-----------------------------------------------

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	FadeBGM(70,30)
	SoundEfx( SEFX_EV_HILL, 15 )

	//　　ラステルにＰＡエモーション
	EmotionEx("Rastell2", 0.00f, EMO_PA, 0, 5, 1, 1, 1.0f)	//パッ
	Wait(35)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	TalkMes("Rastell2",
		"#6271V#000e#000mあ……")
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_RYOTEMAE_S", -1, 1 )	// 両手 前組み

	TalkMes("DANA",
		"#6272V#000e#000mまあ、ラステル。",
		"ついに衛士の任に就いたのですね。")
	WaitPrompt()

	TalkMes("DANA",
		"#6273Vうーん、見れば見るほど",
		"立派になって。")
	WaitPrompt()
	WaitCloseWindow()

	//　　直立不動となってダーナに向き直るラステル。
//	ChangeSubAnimation("Rastell2", SUBMOT_EYE, ANI_E_MAJI_S, 1)	// 目
//	PlayVoice(Y8V_5787,"Rastell",100)	//はい！（フォーマル返答）

	TalkMes("Rastell2",
		"#6274V#000mはっ、大樹の巫女様におかれましては",
		"ご機嫌麗しゅうございます。")
	WaitPrompt()

	TalkMes("Rastell2",
		"#6275V#051e本日はどのようなご用件で",
		"あらせられましょうか。")
	WaitPrompt()
	WaitCloseWindow()

	//　　ダーナに冷や汗エモーション
	EmotionEx("DANA", 0.04f, EMO_TARA, 0, 5, 1, 1, 0.75f)	//冷や汗
	Wait(45)

//	ChangeSubAnimation("Rastell2", SUBMOT_EYE, ANI_E_SAD_CLOSE_E, 1)	// 目

	TalkMes("DANA",
		"#6276V#000e#000mあらせられましょうか、って……")
	WaitPrompt()

	TalkMes("DANA",
		"#6277Vい、いくら何でもそこまで",
		"畏まらなくてもよいのでは……")
	WaitPrompt()
	WaitCloseWindow()

	CrossFade(FADE_FAST)

	SetShadowBound(4.0f,4.0f)
	SetChrInfoFlag("DANA",INFOFLAG_INVISIBLE)

	MoveCameraAt( 0 , -395.060f , 997.016f , 12.767f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.469f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 5.074f , 0 )	// 基本仰角
	RotateCamera( 0 , 277.872f , 0 )				// 角度
	ChangeCameraPers( 0 , 36.200f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 5.7f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(FADE_FAST)

	ChangeSubAnimation("Rastell2", SUBMOT_EYE, ANI_E_SAD_CLOSE_S, 1)	// 目
//	ChangeSubAnimation("Rastell2", SUBMOT_EYE, ANI_E_MAJI_CLOSE_S, 1)	// 目
	Look("Rastell2" , -5 , -20 )
	Wait(15)

//	PlayVoice(Y8V_5786,"Rastell",100)	//いえ（フォーマル返答）

	//	衛士ラステル
	TalkMes("Rastell2",
		"#6278V滅相もございません。")
	WaitPrompt()

	TalkMes("Rastell2",
		"#6279Vこれまで未熟な自分が",
		"巫女様に働いた数々の無礼……")
	WaitPrompt()

	TalkMes("Rastell2",
		"#6280V今となって思い返してみると、",
		"汗顔の至りでございます。")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -395.060f , 997.016f , 12.717f, 400 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.710f , 400 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE ,-13.749f , 400 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 3.794f , 400 )
	ExecuteCmd(1003, RollCamera, INTERPOLATE_SPHERE , -5.3f , 400 )

	//MoveCameraAt( 0 , -395.060f , 997.016f , 12.717f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.710f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -13.749f , 0 )	// 基本仰角
	//RotateCamera( 0 , 3.794f , 0 )				// 角度
	//ChangeCameraPers( 0 , 36.200f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	//RollCamera( 0 , -5.3f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(30)

	VisualName("visual/chrname/cn_c320.itp", VN_NAMEVOICE, VN_CHRNAME_RB_X, VN_CHRNAME_RB_Y,VN_NPCNAME_TIME)	//ラステル

	Wait(60)

	ChangeSubAnimation("Rastell2",SUBMOT_EYE,ANI_E_MAJI_CLOSE_E,1)
	Look("Rastell2" , 0 , 0 )
	LookChr("Rastell2","DANA")

	//時限式選択肢
	//◆SE無効化コマンド置換用
	SetFlag(TF_MENU_SELECT,0)
	MenuReset()
	MenuAdd( 1 , "" )
	MenuOpen( TF_MENU_SELECT , 0 ,0 , 0 , 0 , 0 , 0 )
	WaitMenu(VN_NPCNAME_SKIP) //ウェイトしたい数値
	MenuClose(0,0)

	if(FLAG[TF_MENU_SELECT] == 1 )
	{
		CrossFade(FADE_FAST)
		VisualNameEnd()
		StopThread(1000)
		StopThread(1001)
		StopThread(1002)
		StopThread(1003)
		ChangeSubAnimation("Rastell2",SUBMOT_EYE,ANI_E_MAJI,1)
		
		MoveCameraAt( 0 , -395.060f , 997.016f , 12.717f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 1.710f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , -13.749f , 0 )	// 基本仰角
		RotateCamera( 0 , 3.794f , 0 )				// 角度
		ChangeCameraPers( 0 , 36.200f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
		RollCamera( 0 , -5.3f , 0 )				// ロール回転
		 ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		Wait(FADE_FAST)
	}
	else
	{
		Wait(30)
	}

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	TalkMes("Rastell2",
		"#6281Vこれからは分をわきまえ、",
		"衛士の名に恥じぬ働きをもって",
		"償うべきと心得ております。")
	WaitPrompt()
	WaitCloseWindow()

	CrossFade(FADE_FAST)
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)


	ResetChrInfoFlag("DANA",INFOFLAG_INVISIBLE)

	SetShadowBound(96.0f,96.0f)

	MoveCameraAt( 0 , -395.789f , 996.459f , 12.618f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.269f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 0.515f , 0 )	// 基本仰角
	RotateCamera( 0 , 290.501f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 20000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(FADE_FAST)

	//　　ダーナに冷や汗エモーション
	EmotionEx("DANA",0.04f,EMO_TARA,0,5,1,1,0.75f)	// 冷や汗
	Wait(45)

	TalkMes("DANA",
		"#6282V#000e#000mラ、ラステル……？")
	WaitPrompt()

	TalkMes("DANA",
		"#6283V#0L（そっか、新人衛士の中でも",
		"　特に実直で勤勉だって聞いたような。）")
	WaitPrompt()
	
	TalkMes("DANA",
		"#6284V#0L（憧れているドランの",
		"　影響もあるかもしれないけど……）")
	WaitPrompt()

	Look("DANA" , 0 , -1 )

	TalkMes("DANA",
		"#6285V#000e#000m……何だか他人行儀で面白くないなあ。","面白2行目")
	WaitPrompt()
	WaitCloseWindow()

	//PlayVoice(Y8V_5784,"Rastell",100)	//うーん

	LookRoll("Rastell2", 10.0f)	// かしげる
	ChangeSubAnimation("Rastell2", SUBMOT_EYE, ANI_E_WAIT, 1)	// 目
	Wait(10)

	TalkMes("Rastell2",
		"#6286V巫女様？　いかがなさいましたか？","巫女様2行目")
	WaitPrompt()
	WaitCloseWindow()

	LookRoll("Rastell2", 0.0f)	// かしげる戻す

	LookChr("DANA","Rastell2")
	HeadNo("DANA", 1, 30)	// キャラ, 回数, 速さ

	TalkMes("DANA",
		"#6287V#000e#000mあ、いえ……")
	WaitPrompt()
	WaitCloseWindow()

	//　　ダーナにＰＡエモーション
	EmotionEx("DANA", 0.00f, EMO_PA, 0, 5, 1, 1, 1.0f)	//パッ
	Wait(35)

	TalkMes("DANA",
		"#6288V#000e#000mあら……？")
	WaitPrompt()
	
	ChangeAnimation( "DANA", "ANI_EV_RYOTEMAE_E", -1, 1 )	// 両手 前組み
	
	TalkMes("DANA",
		"#6289Vふふ、肩に糸くずがついていますね。")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	//　　ダーナ、ラステルに近づく。
	
	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -395.161f , 996.931f , 12.718f , 60 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.199f , 60 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -6.074f , 60 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 284.494f , 60 )
	
	Wait(15)

	// 移動
	ExecuteCmd(1, MoveTo, "DANA", -395.36f,996.55f,11.07f, 0.1f, 0.16f)
	WaitThread(1)

	Wait(15)

	//	ナレーション
	TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
	{
		"#7Cダーナはラステルの肩についていた"
		"#7C糸くずを優しく払った。"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	//　　ラステルに！エモーション。
	EmotionEx("Rastell2", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f)	//！
	ChangeSubAnimation("Rastell2", SUBMOT_EYE, ANI_E_SUP_S, 1)	// 目
	ChangeSubAnimation("Rastell2", SUBMOT_MOUTH, ANI_M_SUP_S, 1)	// 口
	Wait(35)
	//　　アセアセエモーションで赤くなる。
	EmotionEx("Rastell2", 0.00f, EMO_ASE, 0, 5, 1, 1, 1.0f)	//汗汗
	ChangeSubAnimation("Rastell2",SUBMOT_EXT2,ANI_C_RED_S,1)		//頬：赤

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	EarthQuake(0.02,0.02,5)
	TalkMes("Rastell2",
		"#6290V#070e#070mわあっ！？")
	WaitPrompt()
	WaitCloseWindow()

	ChangeSubAnimation("Rastell2", SUBMOT_EYE, ANI_E_SAD_CLOSE_S, 1)	// 目
	Look("Rastell2" , -30 , -15 )

	TalkMes("Rastell2",
		"#6291V#000mそ、そんなに顔を近づけて",
		"何を考えているんですか！？")
	WaitPrompt()
	WaitCloseWindow()

	//　　ダーナに「！」エモーション。
	EmotionEx("DANA", 0.05f, EMO_PA, 0, 5, 1, 1, 1.0f )	// 「PA」
	Wait(35)

	ChangeAnimation( "DANA", "ANI_EV_SEKI", -1, 1 )	// 咳払い
//	PlayVoice(Y8V_2997,"DANA",100)	//ふふ（微笑）

	TalkMes("DANA",
		"#6292V#000e#000mふふっ……やっぱり",
		"ラステルはラステルですね。")
	WaitPrompt()
	WaitCloseWindow()

	TalkMes("Rastell2",
		"#6293V#062e#000mそ、それはそうですよ……")
	WaitPrompt()
	
	TalkMes("Rastell2",
		"#6294Vだから、少しでも早く",
		"父上のような衛士になりたいのです。")
	WaitPrompt()
	
	TalkMes("Rastell2",
		"#6295V#061eそうでないと……")
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て

	TalkMes("DANA",
		"#6296V#000e#000m覚えていますよ。あなたとの約束……")
	WaitPrompt()

	TalkMes("DANA",
		"#6297V立派な衛士となって",
		"私のことを守ってくれるのでしょう？")
	WaitPrompt()
	WaitCloseWindow()

	//　　ラステルに「！」エモーション
	ChangeSubAnimation("Rastell2",SUBMOT_EYE,ANI_E_CLOSE_E,1)
	EmotionEx("Rastell2", 0.00f, EMO_EX, 0, 5, 1, 1, 1.0f)	// 「！」
	Wait(35)
	Look("Rastell2" , 0 , 0 )
	LookChr("Rastell2","DANA")

	//	衛士ラステル
	TalkMes("Rastell2",
		"#6298Vあ……え、ええ。")
	WaitPrompt()

	ChangeSubAnimation("Rastell2",SUBMOT_EXT2,ANI_C_RED_E,1)		//頬：赤

	TalkMes("Rastell2",
		"#6299V#061e#000mコホン……その通りです。",
		"そのためにもっと頑張らなくては……")
	WaitPrompt()
	WaitCloseWindow()

	//	"DANA"
	TalkMes("DANA",
		"#6300V#000e#000mそうですか、あなたもちゃんと",
		"覚えていてくれたのですね。")
	WaitPrompt()

	TalkMes("DANA",
		"#6301Vラステルならきっと……",
		"その日がくるのが楽しみです。")
	WaitPrompt()
	WaitCloseWindow()

	ChangeSubAnimation("Rastell2", SUBMOT_EYE, ANI_E_CLOSE_E, 1)	// 目
	ChangeSubAnimation("Rastell2", SUBMOT_MOUTH, ANI_M_SMILE_S, 1)	// 口

	TalkMes("Rastell2",
		"#6302V#080mは、はいっ！")
	WaitPrompt()
	WaitCloseWindow()

	//　　イベント終了、操作許可
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

//終了処理ここから----------------------------------------------------
	CallFunc("mp6201m:SubEV_Past_03_Rastell_ED")
}
function "SubEV_Past_03_Rastell_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
//	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)


	ResetChrInfoFlag("DANA",INFOFLAG_INVISIBLE)
	SetFlag(SF_CHARANORECVSHADOW,0)	//キャラ影受ける

	//フラグ立て
	SetFlag( GF_SUBEV_PAST_03_RASTELL, 1 )		// 過去編Ⅲ：【サブイベント：ラステルと話す】を見た

	//SetDiaryCharaFlag(DRCHA_RASTELL,DRCHA_FLAG_OPEN,1)	//ラステル人物手帳登録

	CallFunc("mp6201m:init")
	CallFunc("mp6201m:NPC_Move_t03_Pos")		//★パッチ1.01対応：ルートムーブNPCの座標強制指定
	CallFunc("mp6201m:NPC_Move_t04_Pos")		//★パッチ1.01対応：ルートムーブNPCの座標強制指定
	CallFunc("mp6201m:NPC_Move_t05_Pos")		//★パッチ1.01対応：ルートムーブNPCの座標強制指定
	CallFunc("mp6201m:NPC_Move_t06_Pos")		//★パッチ1.01対応：ルートムーブNPCの座標強制指定

	//イベント後の再配置
	SetChrPos("LEADER",-396.63f,994.69f,11.07f)
	Turn("LEADER",35.71f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt( 0 , -396.630f , 994.690f , 12.939f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 14.000f , 0 )	// 基本仰角
	RotateCamera( 0 , -64.690f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	//RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	CallFunc("system:camera_reset")

	ActiveVoiceStart(EACT_EVID_0502, 1, 0)	//ラステルと話した後

	ResetStopFlag(STOPFLAG_EVENT)

	SoundEfx( SEFX_HILL, 15 )

	FadeIn(FADE_BLACK, FADE_FAST)
	//WaitFade()

//終了処理ここまで----------------------------------------------------
}

function "SubEV_Past_04_io_baro"
{

//　　中央区・東門前でラステルが歩哨をしている。
//　　近づくとイベントが起動。

//開始処理ここから----------------------------------------------------

	CallFunc("system:event_begin_impose")

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA",-393.48f,923.00f,11.07f)
	Turn("DANA",161.98f,360.0f)
	ChangeAnimation( "DANA" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookChr( "DANA", "Io" )
	SetChrInfoFlag( "DANA" , INFOFLAG_NOCHRATARI)

	SetChrWork("Io", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Io",-395.48f,926.22f,11.07f)
	Turn("Io",128.99f,360.0f)
	ChangeAnimation( "Io" , "ANI_EV_MUHUHU", -1 , 1 )
	ChangeSubAnimation("Io",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("Io",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("Io",SUBMOT_EXT1,ANI_E_LOOKC,1)
	SetChrInfoFlag( "Io" , INFOFLAG_NOCHRATARI)

	SetChrPos("Barossa",-398.12f,929.81f,10.89f)
	Turn("Barossa",-54.23f,360.0f)

	SetChrWork("Barossa", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Barossa",-398.12f,929.81f,10.89f)
	Turn("Barossa",-54.23f,360.0f)
	ChangeAnimation( "Barossa" , "ANI_WAIT", -1 , 1 )
	LookChr("Barossa","Io")

	SetChrPos("Citizen_D3_A06",-393.89f,928.59f,11.07f)
	Turn("Citizen_D3_A06",99.05f,360.0f)
	SetChrPos("Citizen_3_D07",-392.99f,929.32f,11.07f)
	Turn("Citizen_3_D07",72.50f,360.0f)

	SetFlag(SF_CHARANORECVSHADOW,1)	//キャラ影受けない


	//カメラ設定
	MoveCameraAt( 0 , -395.839f , 925.967f , 12.196f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 5.559f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 3.349f , 0 )	// 基本仰角
	RotateCamera( 0 , 47.094f , 0 )				// 角度
	ChangeCameraPers( 0 , 42.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 90.000 ,1.000 ,0.700 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6201m:SubEV_Past_04_io_baro_ED")

//開始処理ここまで-----------------------------------------------
	Wait(10)

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	//　　バロッサの屋台の前にイオがいる。
	//　　イオかバロッサに話しかけるとイベント。

	FadeBGM(70,30)
	SoundEfx( SEFX_EV_HILL, 15 )

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	TalkMes("DANA","#6336V#000e#000mあれ、もしかしてイオちゃん？","","")
	WaitPrompt()
	TalkMes("DANA","#6337V#000e#000mこんなところで",
		"何をやっているのかな？","")
	WaitPrompt()
	WaitCloseWindow()

	EmotionEx("Io", 0.00f,EMO_PA,0,5,1,1,1.0f )
	Look("Io" , 0 , 15 )
	Wait(35)

	LookChr("Io" , "DANA")	
	ChangeAnimation( "Io" , "ANI_EV_MUHUHU_E", -1 , 1 )

	//	イオ
	TalkMes("Io","#6338Vモグっ？","","")
	WaitPrompt()

	WaitAnimation2( "Io" , -1, 1, "ANI_EV_MUHUHU_E",  0)
	ChangeAnimation( "Io" , "ANI_EV_TEBURI", -1 , 1 )
	
	//	name2()
	TalkMes("Io","#6339V#021e#080mモガモグ、モゴゴゴ！","","")
	WaitPrompt()
	WaitCloseWindow()

	//　　イオは背中を向けて滅茶苦茶食べている状態
	//　　ダーナに冷や汗エモーション
	EmotionEx("DANA", 0.00f,EMO_TARA,0,5,1,1,1.0f )
	Wait(45)

	TalkMes("DANA","#6340V#000e#000mわ、ちゃんと待ってるから",
		"ゆっくり食べたほうがいいよ。","")
	WaitPrompt()
	WaitCloseWindow()

	CrossFade(FADE_FAST)
	ChangeAnimation( "Io" , "ANI_WAIT", -1 , 1 )
	SetChrPos("Barossa",-398.23f,929.00f,10.89f)
	Turn("Barossa",-54.23f,360.0f)

	MoveCameraAt( 0 , -395.160f , 925.864f , 12.371f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 5.960f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 14.073f , 0 )	// 基本仰角
	RotateCamera( 0 , 347.743f , 0 )				// 角度
	ChangeCameraPers( 0 , 38.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -395.347f , 926.092f , 12.421f, 120 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.739f , 120 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 4.793f, 120 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 354.741f , 120 )

	//MoveCameraAt( 0 , -395.347f , 926.092f , 12.421f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 3.739f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 4.793f , 0 )	// 基本仰角
	//RotateCamera( 0 , 354.741f , 0 )				// 角度
	//ChangeCameraPers( 0 , 38.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ExecuteCmd( 1, MoveTo, "DANA", -394.87f,924.56f,11.07f , 0.1f, 0.21f )
	//SetChrPos("DANA",-394.87f,924.56f,11.07f)
	//Turn("DANA",129.64f,360.0f)

	Wait(30)
	Turn("Io",-14.90f,8.0f)
	LookChr("Io","DANA")
	Wait(10)
	ChangeAnimation( "Io" , "ANI_EV_MUHUHU_S", -1 , 1 )

	//　　イオ、笑顔で振り向く。
	//	イオ
	TalkMes("Io","#6341V#0Lモグモグモグ～♪","","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(20)

	CrossFade(FADE_CROSS)
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	MoveCameraAt( 0 , -397.159f , 927.429f , 12.495f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.079f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 3.138f , 0 )	// 基本仰角
	RotateCamera( 0 , 202.977f , 0 )				// 角度
	ChangeCameraPers( 0 , 34.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(FADE_CROSS)

	LookChr("Barossa","DANA")

	//	バロッサ
	TalkMes("Barossa","#6342V最近この辺りで見る子だけど、",
		"巫女様の知り合いだったのかい？","")
	WaitPrompt()

	//	name2()
	TalkMes("Barossa","#6343Vお腹空かせてたみたいだから",
		"ついサービスしちゃったけど……","")
	WaitPrompt()
	WaitCloseWindow()

	LookChr("DANA","Barossa")

	//	"DANA"
	TalkMes("DANA","#6344V#061e#000mすみません、私が払いますから。","払う2行目","")
	WaitPrompt()
	WaitCloseWindow()

	HeadNo("Barossa", 1 , 35 )

	//	バロッサ
	TalkMes("Barossa","#6345Vあっはは！　いいんですよ！",
		"巫女様にはいつも助けられてるんです。","")
	WaitPrompt()

	//	name2()
	TalkMes("Barossa","#6346Vこれくらいは何ともありませんよ。","","")
	WaitPrompt()
	WaitCloseWindow()

	CrossFade(FADE_CROSS)

	MoveCameraAt( 0 , -395.604f , 925.710f , 12.396f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.029f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 5.273f , 0 )	// 基本仰角
	RotateCamera( 0 , 45.615f , 0 )				// 角度
	ChangeCameraPers( 0 , 35.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	Wait(FADE_CROSS)

	ChangeAnimation( "Io" , "ANI_EV_MUHUHU_E", -1 , 1 )

	//	イオ
	TalkMes("Io","#6347V#080mぷはぁ～！　満腹満腹！","","")
	WaitPrompt()
	WaitCloseWindow()

	LookChr("DANA" , "Io")

	//	name2()
	TalkMes("Io","#6348V#022eよーし巫女様、そんじゃいこっか！","","")
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA" , "ANI_EV_UDEGUMI_S", -1 , 1 )

	//	"DANA"
	TalkMes("DANA","#6349V#000e#000m全くもう……って、行くってどこに？","","")
	WaitPrompt()
	WaitCloseWindow()

	WaitAnimation2( "Io" , -1, 1, "ANI_EV_MUHUHU_E",  0)
	ChangeAnimation( "Io" , "ANI_EV_TEBURI", -1 , 1 )

	//	イオ
	TalkMes("Io","#6350Vそりゃあ、巫女様に",
		"ついて行くに決まってるよ。","")
	WaitPrompt()
	WaitCloseWindow()
	
	LookReset("DANA")

	//	"DANA"
	TalkMes("DANA","#6351V#000e#000mうーん、それはダメだよ。",
		"私はやるべきことがあるから。","")
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "Io" , "ANI_EV_RYOTEKOSI_S", -1 , 1 )

	//	イオ
	TalkMes("Io","#6352V#061e#000mええ～～、仕方ないなあ。","","")
	WaitPrompt()

	//	name2()
	TalkMes("Io","#6353V#062e#020lま、巫女様は最近ずいぶんと",
		"忙しくしてるみたいだし……","")
	WaitPrompt()

	LookChr("DANA","Io")

	//	name2()
	TalkMes("Io","#6354V#052e#080m#022l体に気を付けて頑張ってよね。","","")
	WaitPrompt()
	WaitCloseWindow()

	HeadYes("DANA", 1 , 30 )

	//	"DANA"
	TalkMes("DANA","#6355V#000e#000mえ……う、うん、ありがとう。","","")
	WaitPrompt()
	TalkMes("DANA","#6356V#0L#000e（何だろう、意外とあっさり引き下がったなあ。）",
		"引き下がる2行目","")
	WaitPrompt()
	WaitCloseWindow()
	
	Wait(10)

	CrossFade(FADE_NORMAL)

	MoveCameraAt( 0 , -395.530f , 926.221f , 12.371f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.719f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -3.101f , 0 )	// 基本仰角
	RotateCamera( 0 , 47.060f , 0 )				// 角度
	ChangeCameraPers( 0 , 35.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , -4.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -395.530f , 926.221f , 12.446f , 400 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.270f  , 400 )
//	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 4.793f, 160 )
//	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 354.741f , 160 )

	//MoveCameraAt( 0 , -395.530f , 926.221f , 12.446f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.270f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -3.098f , 0 )	// 基本仰角
	//RotateCamera( 0 , 47.037f , 0 )				// 角度
	//ChangeCameraPers( 0 , 35.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	//RollCamera( 0 , -4.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(FADE_NORMAL)

	Wait(35)

	ChangeSubAnimation("Io",SUBMOT_EYE,ANI_E_ANGERSMILE_S,1)
	//	イオ
	TalkMes("Io","#6357V#0L#020l#080mむふふ……","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(30)

	//　　イベント終了、操作許可
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

//終了処理ここから----------------------------------------------------
	CallFunc("mp6201m:SubEV_Past_04_io_baro_ED")
}
function "SubEV_Past_04_io_baro_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
//	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	SetFlag(SF_CHARANORECVSHADOW,0)	//キャラ影受ける

	//フラグ立て
	SetFlag( GF_SUBEV_PAST_04_IO_BARO, 1 )			// 過去編Ⅳ：【サブイベント：過去編Ⅳでのイオとの会話】

	CallFunc("mp6201m:init")
	CallFunc("mp6201m:NPC_Move_t03_Pos")		//★パッチ1.01対応：ルートムーブNPCの座標強制指定
	CallFunc("mp6201m:NPC_Move_t04_Pos")		//★パッチ1.01対応：ルートムーブNPCの座標強制指定
	CallFunc("mp6201m:NPC_Move_t05_Pos")		//★パッチ1.01対応：ルートムーブNPCの座標強制指定
	CallFunc("mp6201m:NPC_Move_t06_Pos")		//★パッチ1.01対応：ルートムーブNPCの座標強制指定

	//イベント後の再配置
	SetChrPos("LEADER",-392.78f,923.91f,11.07f)
	Turn("LEADER",-62.43f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt( 0 , -392.776f , 923.914f , 12.925f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 9.096f , 0 )	// 基本仰角
	RotateCamera( 0 , 52.419f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	SoundEfx( SEFX_HILL, 15 )

	FadeIn(FADE_BLACK, FADE_FAST)
	//WaitFade()

//終了処理ここまで----------------------------------------------------
}

////////////////////////////////////////////////////////////////////////////////

//■ストッパー・ＬＰセクション

////////////////////////////////////////////////////////////////////////////////

//──────────────────────────────
//	【ＬＰ：過去編Ⅱで植えたヒモロギを調べる】
//──────────────────────────────
function "LP_Past_04_01"
{

	//　　中央区南エリアに、過去編Ⅱで植えたヒモロギがある。
	//　　ＬＰで調べると以下のメッセージ。

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	TurnToChr( LEADER , this , 7.5f )
	Wait(10)

	//	ナレーション
	TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
	{
		"#7C以前植えたヒモロギの木がある。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//────────────────────
	//	⇒ＬＦで１回のみ
	if( FLAG[GF_PAST_EPISODE_4_GO_CASTLE] &&			//▼過去編Ⅳ王宮前へ向かう
		!FLAG[GF_SUBEV_PAST_04_LP] )					// 過去編Ⅳ：【ＬＰ：過去編Ⅱで植えたヒモロギを調べる】初回を見た
	{
		TalkPopup("LEADER",0,0,0,0,0)
		{
			"#000e#000mふふ、元気はよさそうだね。\p"
			"いつかアドルさんたちを"
			"導いてくるはず……\p"
			"さあ、今は王宮へ向かわなくちゃ。"
		}
		WaitPrompt()
		WaitCloseWindow()
		
		//フラグ立て
		SetFlag( GF_SUBEV_PAST_04_LP, 1 )		// 過去編Ⅳ：【ＬＰ：過去編Ⅱで植えたヒモロギを調べる】初回を見た
	}
	//────────────────────

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
//	SetChrPos("LEADER",26.33f,2.00f,0.30f)
//	Turn("LEADER",-90.00f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【ストッパー：山門方面へ行けない】
//──────────────────────────────
function "Stopper_Past_D3_01"
{
	//	mp6101m	-400.00f	881.77f	11.09f	-18.50f付近

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼ダーナ編③王都を歩く
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000m女王様に謁見しないまま"
		"帰るわけにいかないよね。\p"
		"街を一回りしたら"
		"王宮に行ってみよう。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　再配置して操作許可。

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-401.45f,884.74f,11.07f)
	Turn("LEADER",157.00f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	WaitFade()
	Wait(FADE_CROSS)

	//アクティブボイス
	if (!FLAG[GF_AVOICE_0402])
	{
		ActiveVoiceStop(ACTIVEVOICESTOP_WINDOWOFF)
		ActiveVoiceStart(EACT_EVID_0402, 1, 0)	//街から出ようとしてやめるストッパー後
	}

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【ストッパー：西街道方面へ行けない】
//──────────────────────────────
function "Stopper_Past_D3_02"
{
	//	mp6101m	-492.93f	950.13f	11.09f	72.03f付近

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼ダーナ編③王都を歩く
	if( !FLAG[GF_SUBEV_PAST_D3_ST_1ST] )
	{
		//　　★ＧＦ初回
		TalkPopup("LEADER",0,0,0,0,0)
		{
			"#000e#000mロディニア街道か……"
			"穀倉地帯が広がってるんだよね。\p"
			"今年の豊作ぶりをこの目で"
			"見ておきたい気もするけど……\p"
			"……コホン、さすがに"
			"オルガちゃんに怒られるよね。"
			"今日の所はやめておこう。"
		}
		WaitPrompt()
		WaitCloseWindow()
	
		//　　再配置して操作許可。
		//　　※ここでアクティブボイスが鳴る想定	◆未入力
		SetFlag( GF_SUBEV_PAST_D3_ST_1ST, 1 )	// ダーナ編③：【ストッパー：西街道方面へ行けない】初回
	}
	else
	{
	//　　★ＧＦ以降
		TalkPopup("LEADER",0,0,0,0,0)
		{
			"#000e#000mロディニア街道……"
			"きょ、今日の所はやめておこう。"
		}
		WaitPrompt()
		WaitCloseWindow()
	
	//　　再配置して操作許可。
	}

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-489.95f,949.64f,11.07f)
	Turn("LEADER",-81.07f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	//アクティブボイス
	if (!FLAG[GF_AVOICE_0402])
	{
		ActiveVoiceStop(ACTIVEVOICESTOP_WINDOWOFF)
		ActiveVoiceStart(EACT_EVID_0402, 1, 0)	//街から出ようとしてやめるストッパー後
	}

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【ストッパー：東街道方面へ行けない】
//──────────────────────────────
function "Stopper_Past_D3_03"
{
	//　　※エピソードに関わらず、-282.49f	1142.12f	11.09f	-156.76f付近の扉は開けておく
	//▼ダーナ編③王都を歩く
	//	mp6101m	-388.57f	996.22f	11.09f	-156.79f付近

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000mこの先はトワル街道だね。\p"
		"王国を横断する“東の大動脈”……"
		"いつも行きかう人で賑わっているけど……\p"
		"この後謁見もあるし、"
		"今日の所はやめておこう。2"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　再配置して操作許可。

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-390.52f,994.18f,11.07f)
	Turn("LEADER",37.69f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	//アクティブボイス
	if (!FLAG[GF_AVOICE_0402])
	{
		ActiveVoiceStop(ACTIVEVOICESTOP_WINDOWOFF)
		ActiveVoiceStart(EACT_EVID_0402, 1, 0)	//街から出ようとしてやめるストッパー後
	}

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【ストッパー：中央区→山門方面へ行けない】
//──────────────────────────────
function "Stopper_Past_02_01"
{
	//	mp6101m	-364.76f	801.66f	12.54f	-20.00f付近

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅱ南門へ向かう
	
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000m（この先は大樹の寺院だね。）\p"
		"（手続きの方はオルガちゃんに"
		"　任せておこう。）\p"
		"（今はしっかり"
		"　アドルさんを導かなくちゃね。）"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　再配置して操作許可。

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-367.55f,807.70f,12.55f)
	Turn("LEADER",156.77f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【ストッパー：中央区→西街道方面へ行けない】
//──────────────────────────────
function "Stopper_Past_02_02"
{
//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅱ南門へ向かう
	
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000mこの先はロディニア街道だね。"
		"訪ねる用事はなさそうかな。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　再配置して操作許可。

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-489.95f,949.64f,11.07f)
	Turn("LEADER",-81.07f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【ストッパー：中央区→東街道方面へ行けない】
//──────────────────────────────
function "Stopper_Past_02_03"
{
//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅱ南門へ向かう
	
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000mこの先はトワル街道だね。"
		"訪ねる用事はなさそうかな。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　再配置して操作許可。

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-390.52f,994.18f,11.07f)
	Turn("LEADER",37.69f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【ストッパー：かくれんぼ中 水晶石のほうへ行けない】
//──────────────────────────────
function "Stopper_Past_02_07"
{
//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅱ南門へ向かう
	
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000m先を急ぎたいところだけど、"
		"かくれんぼの子供たちを探さなくっちゃ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　再配置して操作許可。

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-404.42f, 891.28f, 11.15f)
	Turn("LEADER",157.36f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【ストッパー：中央区→西街道方面へ行けない】
//──────────────────────────────
function "Stopper_Past_03_02"
{
//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅲバハの塔へ向かう
	
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000mバハの塔はこっちじゃないね。"
		"東街道に向かわないと。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　再配置して操作許可。

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-489.95f,949.64f,11.07f)
	Turn("LEADER",-81.07f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【ストッパー：中央区→東街区へ行けない】
//──────────────────────────────
function "Stopper_Past_03_03"
{
//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅲバハの塔へ向かう
	
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000m今日は街を回っている時間は"
		"なさそうかな。\p"
		"……バハの塔に向かおう。"
		"何か分かるといいんだけど……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　再配置して操作許可。

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-388.15f,908.45f,11.07f)
	Turn("LEADER",98.91f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【ストッパー：中央区→西街区へ行けない】
//──────────────────────────────
function "Stopper_Past_03_04"
{
//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅲバハの塔へ向かう
	
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000m今日は街を回っている時間は"
		"なさそうかな。\p"
		"……バハの塔に向かおう。"
		"何か分かるといいんだけど……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　再配置して操作許可。

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-428.46f,889.11f,11.07f)
	Turn("LEADER",-140.45f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【ストッパー：中央区→南方面へ行けない】
//──────────────────────────────
function "Stopper_Past_03_05"
{
	//	mp6201m	-401.55f	884.93f	11.07f	-17.70f付近

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅲバハの塔へ向かう
	
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000m（寺院に戻るのは"
		"　何か掴めてからにしよう。）\p"
		"（今はバハの塔に向かわないと。）"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　再配置して操作許可。

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-401.45f,884.74f,11.07f)
	Turn("LEADER",157.00f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【ストッパー：西街道方面へ行けない】
//──────────────────────────────
function "Stopper_Past_04_02"
{

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅳ王宮前へ向かう
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000m街道に出る必要はなさそうだね。"
	}
	WaitPrompt()
	WaitCloseWindow()

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-489.95f,949.64f,11.07f)
	Turn("LEADER",-81.07f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【ストッパー：東街道方面へ行けない】
//──────────────────────────────
function "Stopper_Past_04_03"
{

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	TalkPopup("LEADER",0,0,0,0,0)
	{
		"#000e#000m街道に出る必要はなさそうだね。"
	}
	WaitPrompt()
	WaitCloseWindow()

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-390.52f,994.18f,11.07f)
	Turn("LEADER",37.69f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//	【【QS522】奮起の演奏会▽楽譜探しイベント③（３）】　過去編Ⅲの場合再配置
//──────────────────────────────
function "QS_522_Event2_Relocate"
{
	//	  　現代編の水晶石の前に復帰して操作許可を戻す。

	CallFunc("system:event_begin")

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_DANA")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	CallFunc("mp6201m:init")

	//イベント後の再配置
	SetChrPos("LEADER", -402.53f, 886.75f, 11.07f)
	Turn("LEADER", 157.19f, 360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	//MoveCameraAt( 0 , 0.0f , 0.0f , 0.0f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 0.0f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 0.0f , 0 )		// 基本仰角
	//RotateCamera( 0 , 0.0f , 0 )				// 角度
	//ChangeCameraPers( 0 , 0.0f , 0 )			// 視野角
	//SetCameraZPlane( 0 , 0.0f )					// ZPlane
	//RollCamera( 0 , 0.0f , 0 )					// ロール回転

	RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)
	//WaitFade()
}