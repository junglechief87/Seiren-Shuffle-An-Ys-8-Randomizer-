#include "inc/mons.h"
#include "inc/def.h"
#include "inc/flag.h"
#include "inc/se.h"
#include "inc/scr_inc.h"
#include "inc/3dicon.h"
#include "inc/skilldef.h"
#include "inc/vo.h"
#include "inc/music.h"
#include "inc/efx.h"

//----------------------------------------------------------------------------//
//                                                                            //
// mp630x	オクトゥスミニマップ    			                                              //
//                                                                            //
//----------------------------------------------------------------------------//
///////////////////////////////////////////////////////////////////////////////
// 初期化スクリプト
///////////////////////////////////////////////////////////////////////////////
//-------------------------------------------

function "init"
{
	

	//ノード制御呼び出し
	CallFunc("mp630x:node_ctrl")

	//ノード制御呼び出し
	CallFunc("mp630x:open_event")

}


//function "open_event"
//{
//	if (FLAG[GF_06MP6305_TALK_HYDRA] && !FLAG[GF_06MP6301_RETURN_CENTER]){
//		EventCue("mp6301:EV_M06S150", 1)
//	}
//	if (FLAG[GF_06MP6306_TALK_MINOS] && !FLAG[GF_06MP6301_OPEN_INSECT]){
//		EventCue("mp6301:EV_M06S170")
//	}
//	if (FLAG[GF_06MP6307_TALK_NESTOR] && !FLAG[GF_06MP6301_OPEN_HEAVENS]){
//		EventCue("mp6301:EV_M06S190")
//	}
//	if (FLAG[GF_06MP6350_GET_MISTILTEINN] && !FLAG[GF_06MP6301_GOTO_BOSSROOM]){
//		EventCue("mp6301:EV_M06S220")
//	}
//}

function "node_ctrl" 	//分割先のマップでも呼び出します
{
	//マップノード制御
	if (FLAG[GF_06MP6301_OPEN_BOSSROOM]) {
		// ストッパー解除
		MapAnime("gate_rings" , "on" )
		MapAnime("gate_main"  , "on" )
	} else {
		MapAnime("gate_rings" , "off" )
		MapAnime("gate_main"  , "off" )
	}

	//-- 小ボス対応 ------------------------------------------------------
	if (FLAG[GF_MP630x_SMALLBOSS_00] || FLAG[GF_TBOX_DUMMY113]) {
		MapAnime("emblem_s1" , "off" )		//【紋章と六角ライン】
	
		// ストッパー解除
		MapAnime("stop_s1"   , "off" )		//【ストッパー】
		MapAnime("stop2_s1"  , "off" )		//【足場】
	
		//セフィロトON
		MapAnime("mark_s1"   , "on" )		//進化の系統樹のマーク

		//小ボス消去
		SetChrPos("ev_mons01" , -100000.00f,0.00f,0.00f)
	} else {
		MapAnime("emblem_s1" , "on" )		//【紋章と六角ライン】
		MapAnime("stop_s1"   , "on" )		//【ストッパー】
		MapAnime("stop2_s1"  , "on" )		//【足場】
		MapAnime("mark_s1"   , "off" )		//進化の系統樹のマーク
	}
	if (FLAG[GF_MP630x_SMALLBOSS_01] || FLAG[GF_TBOX_DUMMY113]) {
		MapAnime("emblem_s2" , "off" )		//【紋章と六角ライン】
	
		// ストッパー解除
		MapAnime("stop_s2"   , "off" )		//【ストッパー】
		MapAnime("stop2_s2"  , "off" )		//【足場】
	
		//セフィロトON
		MapAnime("mark_s2"   , "on" )		//進化の系統樹のマーク

		//小ボス消去
		SetChrPos("ev_mons02" , -100000.00f,0.00f,0.00f)
	} else {
		MapAnime("emblem_s2" , "on" )		//【紋章と六角ライン】
		MapAnime("stop_s2"   , "on" )		//【ストッパー】
		MapAnime("stop2_s2"  , "on" )		//【足場】
		MapAnime("mark_s2"   , "off" )		//進化の系統樹のマーク
	}
	if (FLAG[GF_MP630x_SMALLBOSS_02] || FLAG[GF_TBOX_DUMMY113]) {
		MapAnime("emblem_s3" , "off" )		//【紋章と六角ライン】
	
		// ストッパー解除
		MapAnime("stop_s3"   , "off" )		//【ストッパー】
		MapAnime("stop2_s3"  , "off" )		//【足場】
	
		//セフィロトON
		MapAnime("mark_s3"   , "on" )		//進化の系統樹のマーク

		//小ボス消去
		SetChrPos("ev_mons03" , -100000.00f,0.00f,0.00f)
	} else {
		MapAnime("emblem_s3" , "on" )		//【紋章と六角ライン】
		MapAnime("stop_s3"   , "on" )		//【ストッパー】
		MapAnime("stop2_s3"  , "on" )		//【足場】
		MapAnime("mark_s3"   , "off" )		//進化の系統樹のマーク
	}
	if (FLAG[GF_MP630x_SMALLBOSS_03] || FLAG[GF_TBOX_DUMMY113]) {
		MapAnime("emblem_s4" , "off" )		//【紋章と六角ライン】
	
		// ストッパー解除
		MapAnime("stop_s4"   , "off" )		//【ストッパー】
		MapAnime("stop2_s4"  , "off" )		//【足場】
	
		//セフィロトON
		MapAnime("mark_s4"   , "on" )		//進化の系統樹のマーク

		//小ボス消去
		SetChrPos("ev_mons04" , -100000.00f,0.00f,0.00f)
	} else {
		MapAnime("emblem_s4" , "on" )		//【紋章と六角ライン】
		MapAnime("stop_s4"   , "on" )		//【ストッパー】
		MapAnime("stop2_s4"  , "on" )		//【足場】
		MapAnime("mark_s4"   , "off" )		//進化の系統樹のマーク
	}
	if (FLAG[GF_MP630x_SMALLBOSS_04] || FLAG[GF_TBOX_DUMMY113]) {
		MapAnime("emblem_s5" , "off" )		//【紋章と六角ライン】
	
		// ストッパー解除
		MapAnime("stop_s5"   , "off" )		//【ストッパー】
		MapAnime("stop2_s5"  , "off" )		//【足場】
	
		//セフィロトON
		MapAnime("mark_s5"   , "on" )		//進化の系統樹のマーク

		//小ボス消去
		SetChrPos("ev_mons05" , -100000.00f,0.00f,0.00f)
	} else {
		MapAnime("emblem_s5" , "on" )		//【紋章と六角ライン】
		MapAnime("stop_s5"   , "on" )		//【ストッパー】
		MapAnime("stop2_s5"  , "on" )		//【足場】
		MapAnime("mark_s5"   , "off" )		//進化の系統樹のマーク
	}
	if (FLAG[GF_MP630x_SMALLBOSS_05] || FLAG[GF_TBOX_DUMMY113]) {
		MapAnime("emblem_s6" , "off" )		//【紋章と六角ライン】
	
		// ストッパー解除
		MapAnime("stop_s6"   , "off" )		//【ストッパー】
		MapAnime("stop2_s6"  , "off" )		//【足場】
	
		//セフィロトON
		MapAnime("mark_s6"   , "on" )		//進化の系統樹のマーク

		//小ボス消去
		SetChrPos("ev_mons06" , -100000.00f,0.00f,0.00f)
	} else {
		MapAnime("emblem_s6" , "on" )		//【紋章と六角ライン】
		MapAnime("stop_s6"   , "on" )		//【ストッパー】
		MapAnime("stop2_s6"  , "on" )		//【足場】
		MapAnime("mark_s6"   , "off" )		//進化の系統樹のマーク
	}
	if (FLAG[GF_MP630x_SMALLBOSS_06] || FLAG[GF_TBOX_DUMMY113]) {
		MapAnime("emblem_s7" , "off" )		//【紋章と六角ライン】
	
		// ストッパー解除
		MapAnime("stop_s7"   , "off" )		//【ストッパー】
		MapAnime("stop2_s7"  , "off" )		//【足場】
	
		//セフィロトON
		MapAnime("mark_s7"   , "on" )		//進化の系統樹のマーク

		//小ボス消去
		SetChrPos("ev_mons07" , -100000.00f,0.00f,0.00f)
	} else {
		MapAnime("emblem_s7" , "on" )		//【紋章と六角ライン】
		MapAnime("stop_s7"   , "on" )		//【ストッパー】
		MapAnime("stop2_s7"  , "on" )		//【足場】
		MapAnime("mark_s7"   , "off" )		//進化の系統樹のマーク
	}
	if (FLAG[GF_MP630x_SMALLBOSS_07] || FLAG[GF_TBOX_DUMMY113]) {
		MapAnime("emblem_s8" , "off" )		//【紋章と六角ライン】
	
		// ストッパー解除
		MapAnime("stop_s8"   , "off" )		//【ストッパー】
		MapAnime("stop2_s8"  , "off" )		//【足場】
	
		//セフィロトON
		MapAnime("mark_s8"   , "on" )		//進化の系統樹のマーク

		//小ボス消去
		SetChrPos("ev_mons08" , -100000.00f,0.00f,0.00f)
	} else {
		MapAnime("emblem_s8" , "on" )		//【紋章と六角ライン】
		MapAnime("stop_s8"   , "on" )		//【ストッパー】
		MapAnime("stop2_s8"  , "on" )		//【足場】
		MapAnime("mark_s8"   , "off" )		//進化の系統樹のマーク
	}
	if (FLAG[GF_MP630x_SMALLBOSS_08] || FLAG[GF_TBOX_DUMMY113]) {
		MapAnime("emblem_s9" , "off" )		//【紋章と六角ライン】
	
		// ストッパー解除
		MapAnime("stop_s9"   , "off" )		//【ストッパー】
		MapAnime("stop2_s9"  , "off" )		//【足場】
	
		//セフィロトON
		MapAnime("mark_s9"   , "on" )		//進化の系統樹のマーク

		//小ボス消去
		SetChrPos("ev_mons09" , -100000.00f,0.00f,0.00f)
	} else {
		MapAnime("emblem_s9" , "on" )		//【紋章と六角ライン】
		MapAnime("stop_s9"   , "on" )		//【ストッパー】
		MapAnime("stop2_s9"  , "on" )		//【足場】
		MapAnime("mark_s9"   , "off" )		//進化の系統樹のマーク
	}
	if (FLAG[GF_MP630x_SMALLBOSS_09] || FLAG[GF_TBOX_DUMMY113]) {
		MapAnime("emblem_s10" , "off" )		//【紋章と六角ライン】
	
		// ストッパー解除
		MapAnime("stop_s10a"   , "off" )		//【ストッパー】
		MapAnime("stop2_s10a"  , "off" )		//【足場】
		MapAnime("stop_s10b"   , "off" )		//【ストッパー】
		MapAnime("stop2_s10b"  , "off" )		//【足場】
	
		//セフィロトON
		MapAnime("mark_s10"   , "on" )		//進化の系統樹のマーク

		//小ボス消去
		SetChrPos("ev_mons10" , -100000.00f,0.00f,0.00f)
	} else {
		MapAnime("emblem_s10" , "on" )		//【紋章と六角ライン】
		MapAnime("stop_s10a"   , "on" )		//【ストッパー】
		MapAnime("stop2_s10a"  , "on" )		//【足場】
		MapAnime("stop_s10b"   , "on" )		//【ストッパー】
		MapAnime("stop2_s10b"  , "on" )		//【足場】
		MapAnime("mark_s10"   , "off" )		//進化の系統樹のマーク
	}

	//-- 中ボス対応 ------------------------------------------------------
	if (FLAG[GF_06MP6301_OPEN_STAIRS]) {	//卵へ続く階段が現れる
		// オベリスク消灯
		MapAnime("emblem_m4" , "off" )
	
		// ストッパー解除
		MapAnime("stop_m4"   , "off" )
		MapAnime("stop2_m4"  , "off" )
	
		//セフィロトON
		MapAnime("mark_m4"   , "on" )
	} else {
		MapAnime("emblem_m4" , "on" )
		MapAnime("stop_m4"   , "on" )
		MapAnime("stop2_m4"  , "on" )
		MapAnime("mark_m4"   , "off" )
	}
	if (FLAG[GF_06MP6301_OPEN_HEAVENS]) {	//天の回廊へ進めるようになる
		// オベリスク消灯
		MapAnime("emblem_m3" , "off" )
	
		// ストッパー解除
		MapAnime("stop_m3"   , "off" )
		MapAnime("stop2_m3"  , "off" )
	
		//セフィロトON
		MapAnime("mark_m3"  , "on" )
	} else {
		MapAnime("emblem_m3" , "on" )
		MapAnime("stop_m3"   , "on" )
		MapAnime("stop2_m3"  , "on" )
		MapAnime("mark_m3"   , "off" )
	}
	if (FLAG[GF_06MP6301_OPEN_INSECT]) {	//蟲の回廊へ進めるようになる

		// オベリスク消灯
		MapAnime("emblem_m2" , "off" )
	
		// ストッパー解除
		MapAnime("stop_m2"   , "off" )
		MapAnime("stop2_m2"  , "off" )
	
		//セフィロトON
		MapAnime("mark_m2"   , "on" )
	} else {
		MapAnime("emblem_m2" , "on" )
		MapAnime("stop_m2"   , "on" )
		MapAnime("stop2_m2"  , "on" )
		MapAnime("mark_m2"   , "off" )
	}
	if (FLAG[GF_06MP6301_RETURN_CENTER]) {	//オクトゥス中央の間に戻る 

		//オベリスク消灯
		MapAnime("emblem_m1" , "off" )

		//ストッパー解除
		MapAnime("stop_m1"   , "off" )
		MapAnime("stop2_m1"  , "off" )

		//セフィロトON
		MapAnime("mark_m1"   , "on" )
	} else {
		MapAnime("emblem_m1" , "on" )
		MapAnime("stop_m1"   , "on" )
		MapAnime("stop2_m1"  , "on" )
		MapAnime("mark_m1"   , "off" )
	}
}

//-------------------------------------------
// 小ボスを倒した①
function "dead_check_s_boss01"
{

	// キャラを止めたりの処理が必要
	SetFlag(SF_ALLMUTEKI,1)		//無敵ＯＮ
		Wait(150)											//……ボス死亡モーション見せる＆ドロップアイテムを拾う時間
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()
	ResetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_EVENT)
	SaveCamera()
	SetFlag(SF_ALLMUTEKI,0)		//無敵ＯＦＦ

	ClearDebris()
	//StopBGM(90)

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )
	ChangeAnimation( "PLAYER1" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER2" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER3" , "ANI_WAIT", -1 , 0 )

	//	Wait(60)	// 死亡アニメを待つ

//	Wait(30)

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	// マップのアニメ設定

	//【紋章と六角ライン】
	MoveCameraAt( 0 , 84.000f , -133.000f , -16.000f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 22.100f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 18.406f , 0 )	// 基本仰角
	RotateCamera( 0 , 254.228f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	PlayBGM(BGM_DUNGEON_501, 0)

	ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE , 34.200f , 55 )		// 基本距離
	ExecuteCmd(1001, ChangeCameraElevation, INTERPOLATE_SPHERE , 39.696f  , 55 )	// 基本仰角
	ExecuteCmd(1002, RotateCamera, INTERPOLATE_SPHERE , 279.236f , 55 )				// 角度
	
	SetSkipScript("mp630x:dead_check_s_boss01_ED")

	FadeIn(FADE_BLACK,FADE_FAST)
	WaitFade()

	Wait(40)

	// クロスフェード
	CrossFade(FADE_FAST)
	MapAnime("emblem_s1" , "off" )
	PlaySE(SE_GIM_SCFI_1A,100,0,0,0,1.0f,0)		//gimse エンブレム消灯
	Wait(FADE_FAST)

	Wait(25)

	// クロスフェード
	CrossFade(FADE_NORMAL)

	// ストッパー解除
	MoveCameraAt( 0 , 36.075f , -89.388f , -10.037f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 25.200f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 10.000f , 0 )	// 基本仰角
	RotateCamera( 0 , 0.151f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	Wait(FADE_NORMAL)
//	WaitFade()
//	Wait(5)

	ExecuteCmd(1003, ChangeCameraDistance, INTERPOLATE_SPHERE , 33.300f , 45 )		// 基本距離
	ExecuteCmd(1004, ChangeCameraElevation, INTERPOLATE_SPHERE , 15.134f , 45 )	// 基本仰角

	WaitThread(1003)
	WaitThread(1004)
	
	Wait(10)

	ExecuteCmd(1005, ChangeCameraElevation, INTERPOLATE_SPHERE , 37.123f , 125 )	// 基本仰角
	ExecuteCmd(1006, RotateCamera, INTERPOLATE_SPHERE , 308.927f , 125 )				// 角度

	Wait(15)

	// ストッパー解除
	MapAnime("stop_s1" , "open" )
	MapAnime("stop2_s1" , "open" )
	PlaySE(SE_GIM_SCFI_2,100,0,0,0,1.0f,0)		//gimse ストッパー消える
	PlaySE(SE_GIM_SCFI_4,100,0,0,0,1.0f,0)		//gimse 移動床

	Wait(40)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(10)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(40)

	// 終了処理が必要
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)
//	StopThread(1007)

	CallFunc("mp630x:dead_check_s_boss01_ED")
}

function "dead_check_s_boss01_ED"
{
	SetSkipScript("")

	//フラグセット
	SetFlag(GF_MP630x_SMALLBOSS_00,1)			// mp630x 小ボス撃破①

	//小ボス消去
	SetChrPos("ev_mons01" , -100000.00f,0.00f,0.00f)

	// ボス戦闘時の処理を行いましたので、解除していない項目の解除を行っています
	//戦闘終了処理ここから-----------------------------------------------
	
		//イベントバトル用CallFunc-------------------------
		//CallFunc("system:boss_end")							//……イベントバトル用の色々な処理を行うfunction
		// フラグ解除等（SF_BOSS_BATTLEのみイベント内で対処して下さい）
		SetFlag(SF_CANTSAVE,0)			//セーブ不可
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止解除
		SetFlag( SF_REDENTRYLINE, 0)	// エントリー表示を赤色に
		//SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	
		//封鎖解除・ボス消去-------------------------------
		MapAnime("CT_boss", "off")							//……逃げられないストッパー解除。マップによってアニメ名は異なります。
		SetFlag(SF_BOSS_BATTLE,0)							//ボス戦中

	CallFunc("mp630x:init")

	ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	RestoreCamera(0,0)
	ResetCameraObserver(0)

	ResetPartyPos()
	ResetFollowPoint()

	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	FadeIn(FADE_BLACK,FADE_FAST)
	ResetStopFlag(STOPFLAG_EVENT)
}

//-------------------------------------------
// 小ボスを倒した②
function "dead_check_s_boss02"
{

	// キャラを止めたりの処理が必要
	SetFlag(SF_ALLMUTEKI,1)		//無敵ＯＮ
		Wait(150)											//……ボス死亡モーション見せる＆ドロップアイテムを拾う時間
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()
	ResetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_EVENT)
	SaveCamera()
	SetFlag(SF_ALLMUTEKI,0)		//無敵ＯＦＦ

	ClearDebris()
	//StopBGM(90)

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )
	ChangeAnimation( "PLAYER1" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER2" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER3" , "ANI_WAIT", -1 , 0 )

	//	Wait(60)	// 死亡アニメを待つ

//	Wait(30)

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	// マップのアニメ設定

	//【紋章と六角ライン】
	MoveCameraAt( 0 , 120.000f , -84.000f , -50.000f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 24.900f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 18.070f , 0 )	// 基本仰角
	RotateCamera( 0 , 71.818f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	PlayBGM(BGM_DUNGEON_501, 0)

	ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE , 38.200f , 55 )		// 基本距離
	ExecuteCmd(1001, ChangeCameraElevation, INTERPOLATE_SPHERE , 46.214f  , 55 )	// 基本仰角
	ExecuteCmd(1002, RotateCamera, INTERPOLATE_SPHERE , 110.090f , 55 )				// 角度

	SetSkipScript("mp630x:dead_check_s_boss02_ED")

	FadeIn(FADE_BLACK,FADE_FAST)
	WaitFade()

	Wait(40)

	// クロスフェード
	CrossFade(FADE_FAST)
	MapAnime("emblem_s2" , "off" )
	PlaySE(SE_GIM_SCFI_1A,100,0,0,0,1.0f,0)		//gimse エンブレム消灯
	Wait(FADE_FAST)

	Wait(25)

	// クロスフェード
	CrossFade(FADE_NORMAL)

	// ストッパー解除
	MoveCameraAt( 0 , 65.876f , -45.518f , -41.013f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 17.200f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 24.337f , 0 )	// 基本仰角
	RotateCamera( 0 , 252.548f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	Wait(FADE_NORMAL)
//	WaitFade()
//	Wait(5)

	ExecuteCmd(1003, ChangeCameraDistance, INTERPOLATE_SPHERE , 24.300f , 125 )		// 基本距離
	ExecuteCmd(1004, ChangeCameraElevation, INTERPOLATE_SPHERE , 25.988f , 125 )	// 基本仰角
	ExecuteCmd(1005, RotateCamera, INTERPOLATE_SPHERE , 238.056f , 125 )				// 角度

	Wait(15)

	// ストッパー解除
	MapAnime("stop_s2" , "open" )
	MapAnime("stop2_s2" , "open" )
	PlaySE(SE_GIM_SCFI_2,100,0,0,0,1.0f,0)		//gimse ストッパー消える
	PlaySE(SE_GIM_SCFI_4,100,0,0,0,1.0f,0)		//gimse 移動床

	Wait(40)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(10)
//	PlaySE("SE_GIM_PLANT_FALL1", 100, 0,  0, 0, 1.0f, 0)
//	EarthQuake(0.1f,0.1f,10)
	Wait(25)

	// 終了処理が必要
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

//	Wait(50)

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
//	StopThread(1006)
//	StopThread(1007)

	CallFunc("mp630x:dead_check_s_boss02_ED")
}

function "dead_check_s_boss02_ED"
{
	SetSkipScript("")
	//フラグセット
	SetFlag(GF_MP630x_SMALLBOSS_01,1)			// mp630x 小ボス撃破②

	//小ボス消去
	SetChrPos("ev_mons02" , -100000.00f,0.00f,0.00f)

	// ボス戦闘時の処理を行いましたので、解除していない項目の解除を行っています
	//戦闘終了処理ここから-----------------------------------------------
	
		//イベントバトル用CallFunc-------------------------
		//CallFunc("system:boss_end")							//……イベントバトル用の色々な処理を行うfunction
		// フラグ解除等（SF_BOSS_BATTLEのみイベント内で対処して下さい）
		SetFlag(SF_CANTSAVE,0)			//セーブ不可
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止解除
		SetFlag( SF_REDENTRYLINE, 0)	// エントリー表示を赤色に
		//SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	
		//封鎖解除・ボス消去-------------------------------
		MapAnime("CT_boss", "off")							//……逃げられないストッパー解除。マップによってアニメ名は異なります。
		SetFlag(SF_BOSS_BATTLE,0)							//ボス戦中

	CallFunc("mp630x:init")

	ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	RestoreCamera(0,0)
	ResetCameraObserver(0)

	ResetPartyPos()
	ResetFollowPoint()

	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	FadeIn(FADE_BLACK,FADE_FAST)
	ResetStopFlag(STOPFLAG_EVENT)
}

//-------------------------------------------
// 小ボスを倒した③
function "dead_check_s_boss03"
{

	// キャラを止めたりの処理が必要
	SetFlag(SF_ALLMUTEKI,1)		//無敵ＯＮ
		Wait(150)											//……ボス死亡モーション見せる＆ドロップアイテムを拾う時間
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()
	ResetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_EVENT)
	SaveCamera()
	SetFlag(SF_ALLMUTEKI,0)		//無敵ＯＦＦ

	ClearDebris()
	//StopBGM(90)

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )
	ChangeAnimation( "PLAYER1" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER2" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER3" , "ANI_WAIT", -1 , 0 )

	//	Wait(60)	// 死亡アニメを待つ

//	Wait(30)

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	// マップのアニメ設定

	//【紋章と六角ライン】
	MoveCameraAt( 0 , 108.000f , 7.000f , -62.000f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 20.200f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 16.560f , 0 )	// 基本仰角
	RotateCamera( 0 , 47.166f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	PlayBGM(BGM_DUNGEON_501, 0)

	ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE , 33.600f , 55 )		// 基本距離
	ExecuteCmd(1001, ChangeCameraElevation, INTERPOLATE_SPHERE , 42.607f  , 55 )	// 基本仰角
	ExecuteCmd(1002, RotateCamera, INTERPOLATE_SPHERE , 13.874f , 55 )				// 角度

	SetSkipScript("mp630x:dead_check_s_boss03_ED")

	FadeIn(FADE_BLACK,FADE_FAST)
	WaitFade()

	Wait(40)

	// クロスフェード
	CrossFade(FADE_FAST)
	MapAnime("emblem_s3" , "off" )
	PlaySE(SE_GIM_SCFI_1A,100,0,0,0,1.0f,0)		//gimse エンブレム消灯
	Wait(FADE_FAST)

	Wait(25)

	// クロスフェード
	CrossFade(FADE_NORMAL)

	// ストッパー解除
	MoveCameraAt( 0 , 66.045f , 38.544f , -57.014f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 10.600f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 26.993f , 0 )	// 基本仰角
	RotateCamera( 0 , 320.017f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	Wait(FADE_NORMAL)
//	WaitFade()
//	Wait(5)

	ExecuteCmd(1003, MoveCameraAt, INTERPOLATE_SPHERE , 69.354f , 40.442f , -57.014f, 125 )		// 基本距離
	ExecuteCmd(1004, ChangeCameraDistance, INTERPOLATE_SPHERE , 16.500f , 125 )		// 基本距離
	ExecuteCmd(1005, ChangeCameraElevation, INTERPOLATE_SPHERE , 33.623f , 125 )	// 基本仰角
	ExecuteCmd(1006, RotateCamera, INTERPOLATE_SPHERE , 348.413f , 125 )				// 角度

	Wait(15)

	// ストッパー解除
	MapAnime("stop_s3" , "open" )
	MapAnime("stop2_s3" , "open" )
	PlaySE(SE_GIM_SCFI_2,100,0,0,0,1.0f,0)		//gimse ストッパー消える
	PlaySE(SE_GIM_SCFI_4,100,0,0,0,1.0f,0)		//gimse 移動床

	Wait(40)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(10)
//	PlaySE("SE_GIM_PLANT_FALL1", 100, 0,  0, 0, 1.0f, 0)
//	EarthQuake(0.1f,0.1f,10)
	Wait(40)

	// 終了処理が必要
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

//	Wait(50)

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)
//	StopThread(1007)

	CallFunc("mp630x:dead_check_s_boss03_ED")
}

function "dead_check_s_boss03_ED"
{
	SetSkipScript("")
	
	//フラグセット
	SetFlag(GF_MP630x_SMALLBOSS_02,1)			// mp630x 小ボス撃破③

	//小ボス消去
	SetChrPos("ev_mons03" , -100000.00f,0.00f,0.00f)

	// ボス戦闘時の処理を行いましたので、解除していない項目の解除を行っています
	//戦闘終了処理ここから-----------------------------------------------
	
		//イベントバトル用CallFunc-------------------------
		//CallFunc("system:boss_end")							//……イベントバトル用の色々な処理を行うfunction
		// フラグ解除等（SF_BOSS_BATTLEのみイベント内で対処して下さい）
		SetFlag(SF_CANTSAVE,0)			//セーブ不可
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止解除
		SetFlag( SF_REDENTRYLINE, 0)	// エントリー表示を赤色に
		//SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	
		//封鎖解除・ボス消去-------------------------------
		MapAnime("CT_boss", "off")							//……逃げられないストッパー解除。マップによってアニメ名は異なります。
		SetFlag(SF_BOSS_BATTLE,0)							//ボス戦中

	CallFunc("mp630x:init")

	ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	RestoreCamera(0,0)
	ResetCameraObserver(0)

	ResetPartyPos()
	ResetFollowPoint()

	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	FadeIn(FADE_BLACK,FADE_FAST)
	ResetStopFlag(STOPFLAG_EVENT)
}
//-------------------------------------------
// 小ボスを倒した④
function "dead_check_s_boss04"
{

	// キャラを止めたりの処理が必要
	SetFlag(SF_ALLMUTEKI,1)		//無敵ＯＮ
		Wait(150)											//……ボス死亡モーション見せる＆ドロップアイテムを拾う時間
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()
	ResetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_EVENT)
	SaveCamera()
	SetFlag(SF_ALLMUTEKI,0)		//無敵ＯＦＦ

	ClearDebris()
	//StopBGM(90)

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )
	ChangeAnimation( "PLAYER1" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER2" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER3" , "ANI_WAIT", -1 , 0 )

	//	Wait(60)	// 死亡アニメを待つ

//	Wait(30)

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	// マップのアニメ設定

	//【紋章と六角ライン】
	MoveCameraAt( 0 , -12.000f , 63.000f , -88.000f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 33.200f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 39.403f , 0 )	// 基本仰角
	RotateCamera( 0 , 118.540f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	PlayBGM(BGM_DUNGEON_501, 0)

	ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE , 27.100f , 65 )		// 基本距離
	ExecuteCmd(1001, ChangeCameraElevation, INTERPOLATE_SPHERE , 15.650f  , 65 )	// 基本仰角
	ExecuteCmd(1002, RotateCamera, INTERPOLATE_SPHERE , 179.612f , 65 )				// 角度

	SetSkipScript("mp630x:dead_check_s_boss04_ED")

	FadeIn(FADE_BLACK,FADE_FAST)
	WaitFade()

	Wait(50)

	// クロスフェード
	CrossFade(FADE_FAST)
	MapAnime("emblem_s4" , "off" )
	PlaySE(SE_GIM_SCFI_1A,100,0,0,0,1.0f,0)		//gimse エンブレム消灯
	Wait(FADE_FAST)

	Wait(20)

	// クロスフェード
	CrossFade(FADE_NORMAL)

	// ストッパー解除
	MoveCameraAt( 0 , 34.876f , 62.528f , -86.518f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 17.600f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 18.519f , 0 )	// 基本仰角
	RotateCamera( 0 , 250.048f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	Wait(FADE_NORMAL)
//	WaitFade()
//	Wait(5)

	ExecuteCmd(1003, MoveCameraAt, INTERPOLATE_SPHERE , 36.541f , 61.592f , -86.518f, 120 )		// 基本距離
	ExecuteCmd(1004, ChangeCameraDistance, INTERPOLATE_SPHERE , 25.900f , 120 )		// 基本距離
	ExecuteCmd(1005, ChangeCameraElevation, INTERPOLATE_SPHERE , 42.019f , 120 )	// 基本仰角
	ExecuteCmd(1006, RotateCamera, INTERPOLATE_SPHERE , 280.990f , 120 )				// 角度

	Wait(15)

	// ストッパー解除
	MapAnime("stop_s4" , "open" )
	MapAnime("stop2_s4" , "open" )
	PlaySE(SE_GIM_SCFI_2,100,0,0,0,1.0f,0)		//gimse ストッパー消える
	PlaySE(SE_GIM_SCFI_4,100,0,0,0,1.0f,0)		//gimse 移動床

	Wait(40)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(10)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(50)

	// 終了処理が必要
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

//	Wait(50)

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)
//	StopThread(1007)

	CallFunc("mp630x:dead_check_s_boss04_ED")
}

function "dead_check_s_boss04_ED"
{
	SetSkipScript("")
	
	//フラグセット
	SetFlag(GF_MP630x_SMALLBOSS_03,1)			// mp630x 小ボス撃破④

	//小ボス消去
	SetChrPos("ev_mons04" , -100000.00f,0.00f,0.00f)

	// ボス戦闘時の処理を行いましたので、解除していない項目の解除を行っています
	//戦闘終了処理ここから-----------------------------------------------
	
		//イベントバトル用CallFunc-------------------------
		//CallFunc("system:boss_end")							//……イベントバトル用の色々な処理を行うfunction
		// フラグ解除等（SF_BOSS_BATTLEのみイベント内で対処して下さい）
		SetFlag(SF_CANTSAVE,0)			//セーブ不可
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止解除
		SetFlag( SF_REDENTRYLINE, 0)	// エントリー表示を赤色に
		//SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	
		//封鎖解除・ボス消去-------------------------------
		MapAnime("CT_boss", "off")							//……逃げられないストッパー解除。マップによってアニメ名は異なります。
		SetFlag(SF_BOSS_BATTLE,0)							//ボス戦中

	CallFunc("mp630x:init")

	ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	RestoreCamera(0,0)
	ResetCameraObserver(0)

	ResetPartyPos()
	ResetFollowPoint()

	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	FadeIn(FADE_BLACK,FADE_FAST)
	ResetStopFlag(STOPFLAG_EVENT)
}

//-------------------------------------------
// 小ボスを倒した⑤
function "dead_check_s_boss05"
{

	// キャラを止めたりの処理が必要
	SetFlag(SF_ALLMUTEKI,1)		//無敵ＯＮ
		Wait(150)											//……ボス死亡モーション見せる＆ドロップアイテムを拾う時間
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()
	ResetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_EVENT)
	SaveCamera()
	SetFlag(SF_ALLMUTEKI,0)		//無敵ＯＦＦ

	ClearDebris()
	//StopBGM(90)

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )
	ChangeAnimation( "PLAYER1" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER2" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER3" , "ANI_WAIT", -1 , 0 )

	//	Wait(60)	// 死亡アニメを待つ

//	Wait(30)

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	// マップのアニメ設定

	//【紋章と六角ライン】
	MoveCameraAt( 0 , 24.000f , -84.000f , -126.000f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 44.900f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 15.580f , 0 )	// 基本仰角
	RotateCamera( 0 , 31.288f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	PlayBGM(BGM_DUNGEON_501, 0)


	ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE , 32.100f, 65 )		// 基本距離
	ExecuteCmd(1001, ChangeCameraElevation, INTERPOLATE_SPHERE , 38.521f  , 65 )	// 基本仰角
	ExecuteCmd(1002, RotateCamera, INTERPOLATE_SPHERE , 343.308f , 65 )				// 角度

	SetSkipScript("mp630x:dead_check_s_boss05_ED")

	FadeIn(FADE_BLACK,FADE_FAST)
	WaitFade()

	Wait(50)

	// クロスフェード
	CrossFade(FADE_FAST)
	MapAnime("emblem_s5" , "off" )
	PlaySE(SE_GIM_SCFI_1A,100,0,0,0,1.0f,0)		//gimse エンブレム消灯
	Wait(FADE_FAST)

	Wait(20)

	// クロスフェード
	CrossFade(FADE_NORMAL)

	// ストッパー解除
	MoveCameraAt( 0 , 35.719f , -10.285f , -114.037f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 16.300f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 5.481f , 0 )	// 基本仰角
	RotateCamera( 0 , 334.019f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	Wait(FADE_NORMAL)
//	WaitFade()
//	Wait(5)

	ExecuteCmd(1003, MoveCameraAt, INTERPOLATE_SPHERE , 33.419f , -4.315f , -114.037f, 135 )		// 基本距離
	ExecuteCmd(1004, ChangeCameraDistance, INTERPOLATE_SPHERE , 26.400f , 135 )		// 基本距離
	ExecuteCmd(1005, ChangeCameraElevation, INTERPOLATE_SPHERE , 42.019f , 135 )	// 基本仰角
	ExecuteCmd(1006, RotateCamera, INTERPOLATE_SPHERE , 309.735f , 135 )				// 角度

	Wait(15)

	// ストッパー解除
	MapAnime("stop_s5" , "open" )
	MapAnime("stop2_s5" , "open" )
	PlaySE(SE_GIM_SCFI_2,100,0,0,0,1.0f,0)		//gimse ストッパー消える
	PlaySE(SE_GIM_SCFI_4,100,0,0,0,1.0f,0)		//gimse 移動床

	Wait(40)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(10)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(40)

	// 終了処理が必要
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

//	Wait(50)

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)
//	StopThread(1007)

	CallFunc("mp630x:dead_check_s_boss05_ED")
}

function "dead_check_s_boss05_ED"
{
	SetSkipScript("")
	
	//フラグセット
	SetFlag(GF_MP630x_SMALLBOSS_04,1)			// mp630x 小ボス撃破⑤

	//小ボス消去
	SetChrPos("ev_mons05" , -100000.00f,0.00f,0.00f)

	// ボス戦闘時の処理を行いましたので、解除していない項目の解除を行っています
	//戦闘終了処理ここから-----------------------------------------------
	
		//イベントバトル用CallFunc-------------------------
		//CallFunc("system:boss_end")							//……イベントバトル用の色々な処理を行うfunction
		// フラグ解除等（SF_BOSS_BATTLEのみイベント内で対処して下さい）
		SetFlag(SF_CANTSAVE,0)			//セーブ不可
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止解除
		SetFlag( SF_REDENTRYLINE, 0)	// エントリー表示を赤色に
		//SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	
		//封鎖解除・ボス消去-------------------------------
		MapAnime("CT_boss", "off")							//……逃げられないストッパー解除。マップによってアニメ名は異なります。
		SetFlag(SF_BOSS_BATTLE,0)							//ボス戦中

	CallFunc("mp630x:init")

	ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	RestoreCamera(0,0)
	ResetCameraObserver(0)

	ResetPartyPos()
	ResetFollowPoint()

	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	FadeIn(FADE_BLACK,FADE_FAST)
	ResetStopFlag(STOPFLAG_EVENT)
}

//-------------------------------------------
// 小ボスを倒した⑥
function "dead_check_s_boss06"
{

	// キャラを止めたりの処理が必要
	SetFlag(SF_ALLMUTEKI,1)		//無敵ＯＮ
		Wait(150)											//……ボス死亡モーション見せる＆ドロップアイテムを拾う時間
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()
	ResetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_EVENT)
	SaveCamera()
	SetFlag(SF_ALLMUTEKI,0)		//無敵ＯＦＦ

	ClearDebris()
	//StopBGM(90)

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )
	ChangeAnimation( "PLAYER1" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER2" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER3" , "ANI_WAIT", -1 , 0 )

	//	Wait(60)	// 死亡アニメを待つ

//	Wait(30)

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	// マップのアニメ設定

	//【紋章と六角ライン】
	MoveCameraAt( 0 , 0.000f , -56.000f , -108.000f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 44.600f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 48.398f , 0 )	// 基本仰角
	RotateCamera( 0 , 0.078f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	PlayBGM(BGM_DUNGEON_501, 0)

	ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE , 25.100f, 55 )		// 基本距離
	ExecuteCmd(1001, ChangeCameraElevation, INTERPOLATE_SPHERE , 25.009f  , 55 )	// 基本仰角
	ExecuteCmd(1002, RotateCamera, INTERPOLATE_SPHERE , 20.137f , 55 )				// 角度

	SetSkipScript("mp630x:dead_check_s_boss06_ED")

	FadeIn(FADE_BLACK,FADE_FAST)
	WaitFade()
	
	Wait(40)

	// クロスフェード
	CrossFade(FADE_FAST)
	MapAnime("emblem_s6" , "off" )
	PlaySE(SE_GIM_SCFI_1A,100,0,0,0,1.0f,0)		//gimse エンブレム消灯
	Wait(FADE_FAST)

	Wait(20)

	// クロスフェード
	CrossFade(FADE_NORMAL)

	// ストッパー解除
	MoveCameraAt( 0 , -48.034f , -15.235f , -112.038f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 19.200f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 8.332f , 0 )	// 基本仰角
	RotateCamera( 0 , 336.253f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	Wait(FADE_NORMAL)
//	WaitFade()
//	Wait(5)

	ExecuteCmd(1003, MoveCameraAt, INTERPOLATE_SPHERE , -50.271f , -12.099f , -109.805f, 125 )		// 基本距離
	ExecuteCmd(1004, ChangeCameraDistance, INTERPOLATE_SPHERE , 31.000f , 125 )		// 基本距離
	ExecuteCmd(1005, ChangeCameraElevation, INTERPOLATE_SPHERE , 24.727f , 125 )	// 基本仰角
	ExecuteCmd(1006, RotateCamera, INTERPOLATE_SPHERE , 311.242f , 125 )				// 角度

	Wait(15)

	// ストッパー解除
	MapAnime("stop_s6" , "open" )
	MapAnime("stop2_s6" , "open" )
	PlaySE(SE_GIM_SCFI_2,100,0,0,0,1.0f,0)		//gimse ストッパー消える
	PlaySE(SE_GIM_SCFI_4,100,0,0,0,1.0f,0)		//gimse 移動床

	Wait(40)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(10)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(50)

	// 終了処理が必要
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

//	Wait(50)

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)
//	StopThread(1007)

	CallFunc("mp630x:dead_check_s_boss06_ED")
}

function "dead_check_s_boss06_ED"
{
	SetSkipScript("")
	
	//フラグセット
	SetFlag(GF_MP630x_SMALLBOSS_05,1)			// mp630x 小ボス撃破⑥

	//小ボス消去
	SetChrPos("ev_mons06" , -100000.00f,0.00f,0.00f)

	// ボス戦闘時の処理を行いましたので、解除していない項目の解除を行っています
	//戦闘終了処理ここから-----------------------------------------------
	
		//イベントバトル用CallFunc-------------------------
		//CallFunc("system:boss_end")							//……イベントバトル用の色々な処理を行うfunction
		// フラグ解除等（SF_BOSS_BATTLEのみイベント内で対処して下さい）
		SetFlag(SF_CANTSAVE,0)			//セーブ不可
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止解除
		SetFlag( SF_REDENTRYLINE, 0)	// エントリー表示を赤色に
		//SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	
		//封鎖解除・ボス消去-------------------------------
		MapAnime("CT_boss", "off")							//……逃げられないストッパー解除。マップによってアニメ名は異なります。
		SetFlag(SF_BOSS_BATTLE,0)							//ボス戦中

	CallFunc("mp630x:init")

	ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	RestoreCamera(0,0)
	ResetCameraObserver(0)

	ResetPartyPos()
	ResetFollowPoint()

	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	FadeIn(FADE_BLACK,FADE_FAST)
	ResetStopFlag(STOPFLAG_EVENT)
}

//-------------------------------------------
// 小ボスを倒した⑦
function "dead_check_s_boss07"
{

	// キャラを止めたりの処理が必要
	SetFlag(SF_ALLMUTEKI,1)		//無敵ＯＮ
		Wait(150)											//……ボス死亡モーション見せる＆ドロップアイテムを拾う時間
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()
	ResetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_EVENT)
	SaveCamera()
	SetFlag(SF_ALLMUTEKI,0)		//無敵ＯＦＦ

	ClearDebris()
	//StopBGM(90)

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )
	ChangeAnimation( "PLAYER1" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER2" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER3" , "ANI_WAIT", -1 , 0 )

	//	Wait(60)	// 死亡アニメを待つ

//	Wait(30)

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	// マップのアニメ設定

	//【紋章と六角ライン】
	MoveCameraAt( 0 , -120.000f , -14.000f , -61.039f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 30.300f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 8.422f , 0 )	// 基本仰角
	RotateCamera( 0 , 293.997f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	PlayBGM(BGM_DUNGEON_501, 0)

	ExecuteCmd(1000, MoveCameraAt , INTERPOLATE_SPHERE ,-120.000f , -14.000f , -64.264f , 65 )	// 注視点
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 18.900f, 65 )		// 基本距離
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 16.983f  , 65 )	// 基本仰角
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 256.705f , 65 )				// 角度

	SetSkipScript("mp630x:dead_check_s_boss07_ED")

	FadeIn(FADE_BLACK,FADE_FAST)
	WaitFade()

	Wait(50)

	// クロスフェード
	CrossFade(FADE_FAST)
	MapAnime("emblem_s7" , "off" )
	PlaySE(SE_GIM_SCFI_1A,100,0,0,0,1.0f,0)		//gimse エンブレム消灯
	Wait(FADE_FAST)

	Wait(20)

	// クロスフェード
	CrossFade(FADE_NORMAL)

	// ストッパー解除
	MoveCameraAt( 0 , -72.064f , -33.093f , -68.037f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 13.700f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 21.400f , 0 )	// 基本仰角
	RotateCamera( 0 , 17.546f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	Wait(FADE_NORMAL)
//	WaitFade()
//	Wait(5)

	ExecuteCmd(1004, MoveCameraAt, INTERPOLATE_SPHERE , -71.968f , -29.239f , -68.037f, 125 )		// 基本距離
	ExecuteCmd(1005, ChangeCameraDistance, INTERPOLATE_SPHERE , 17.800f , 125 )		// 基本距離
	ExecuteCmd(1006, ChangeCameraElevation, INTERPOLATE_SPHERE , 30.548f , 125 )	// 基本仰角
	ExecuteCmd(1007, RotateCamera, INTERPOLATE_SPHERE , 44.263f , 125 )				// 角度

	Wait(15)

	// ストッパー解除
	MapAnime("stop_s7" , "open" )
	MapAnime("stop2_s7" , "open" )
	PlaySE(SE_GIM_SCFI_2,100,0,0,0,1.0f,0)		//gimse ストッパー消える
	PlaySE(SE_GIM_SCFI_4,100,0,0,0,1.0f,0)		//gimse 移動床

	Wait(40)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(10)
//	PlaySE("SE_GIM_PLANT_FALL1", 100, 0,  0, 0, 1.0f, 0)
//	EarthQuake(0.1f,0.1f,10)
	Wait(40)

	// 終了処理が必要
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

//	Wait(50)

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)
	StopThread(1007)

	CallFunc("mp630x:dead_check_s_boss07_ED")
}

function "dead_check_s_boss07_ED"
{
	SetSkipScript("")
	
	//フラグセット
	SetFlag(GF_MP630x_SMALLBOSS_06,1)			// mp630x 小ボス撃破⑦

	//小ボス消去
	SetChrPos("ev_mons07" , -100000.00f,0.00f,0.00f)

	// ボス戦闘時の処理を行いましたので、解除していない項目の解除を行っています
	//戦闘終了処理ここから-----------------------------------------------
	
		//イベントバトル用CallFunc-------------------------
		//CallFunc("system:boss_end")							//……イベントバトル用の色々な処理を行うfunction
		// フラグ解除等（SF_BOSS_BATTLEのみイベント内で対処して下さい）
		SetFlag(SF_CANTSAVE,0)			//セーブ不可
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止解除
		SetFlag( SF_REDENTRYLINE, 0)	// エントリー表示を赤色に
		//SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	
		//封鎖解除・ボス消去-------------------------------
		MapAnime("CT_boss", "off")							//……逃げられないストッパー解除。マップによってアニメ名は異なります。
		SetFlag(SF_BOSS_BATTLE,0)							//ボス戦中

	CallFunc("mp630x:init")

	ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	RestoreCamera(0,0)
	ResetCameraObserver(0)

	ResetPartyPos()
	ResetFollowPoint()

	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	FadeIn(FADE_BLACK,FADE_FAST)
	ResetStopFlag(STOPFLAG_EVENT)
}

//-------------------------------------------
// 小ボスを倒した⑧
function "dead_check_s_boss08"
{

	// キャラを止めたりの処理が必要
	SetFlag(SF_ALLMUTEKI,1)		//無敵ＯＮ
		Wait(150)											//……ボス死亡モーション見せる＆ドロップアイテムを拾う時間
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()
	ResetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_EVENT)
	SaveCamera()
	SetFlag(SF_ALLMUTEKI,0)		//無敵ＯＦＦ

	ClearDebris()
	//StopBGM(90)

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )
	ChangeAnimation( "PLAYER1" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER2" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER3" , "ANI_WAIT", -1 , 0 )

	//	Wait(60)	// 死亡アニメを待つ

//	Wait(30)

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	// マップのアニメ設定

	//【紋章と六角ライン】
	MoveCameraAt( 0 , -72.000f , 98.000f , -41.039f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 35.300f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 5.736f , 0 )	// 基本仰角
	RotateCamera( 0 , 216.939f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	PlayBGM(BGM_DUNGEON_501, 0)

	ExecuteCmd(1000, MoveCameraAt , INTERPOLATE_SPHERE ,-72.000f , 98.000f , -44.760f , 65 )	// 注視点
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 23.300f, 65 )		// 基本距離
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 29.544f  , 65 )	// 基本仰角
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 180.821f , 65 )				// 角度

	SetSkipScript("mp630x:dead_check_s_boss08_ED")

	FadeIn(FADE_BLACK,FADE_FAST)
	WaitFade()

	Wait(50)

	// クロスフェード
	CrossFade(FADE_FAST)
	MapAnime("emblem_s8" , "off" )
	PlaySE(SE_GIM_SCFI_1A,100,0,0,0,1.0f,0)		//gimse エンブレム消灯
	Wait(FADE_FAST)

	Wait(20)

	// クロスフェード
	CrossFade(FADE_NORMAL)

	// ストッパー解除
	MoveCameraAt( 0 , -108.632f , 50.618f , -51.773f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 16.200f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 16.784f , 0 )	// 基本仰角
	RotateCamera( 0 , 207.804f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	Wait(FADE_NORMAL)
//	WaitFade()
//	Wait(5)

	ExecuteCmd(1004, MoveCameraAt, INTERPOLATE_SPHERE , -108.584f , 47.089f , -49.541f, 125 )		// 基本距離
	ExecuteCmd(1005, ChangeCameraDistance, INTERPOLATE_SPHERE , 27.300f , 125 )		// 基本距離
	ExecuteCmd(1006, ChangeCameraElevation, INTERPOLATE_SPHERE , 25.597f , 125 )	// 基本仰角
	ExecuteCmd(1007, RotateCamera, INTERPOLATE_SPHERE , 222.436f , 125 )				// 角度

	Wait(15)

	// ストッパー解除
	MapAnime("stop_s8" , "open" )
	MapAnime("stop2_s8" , "open" )
	PlaySE(SE_GIM_SCFI_2,100,0,0,0,1.0f,0)		//gimse ストッパー消える
	PlaySE(SE_GIM_SCFI_4,100,0,0,0,1.0f,0)		//gimse 移動床

	Wait(40)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(10)
//	PlaySE("SE_GIM_PLANT_FALL1", 100, 0,  0, 0, 1.0f, 0)
//	EarthQuake(0.1f,0.1f,10)
	Wait(50)

	// 終了処理が必要
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

//	Wait(50)

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)
	StopThread(1007)

	CallFunc("mp630x:dead_check_s_boss08_ED")
}

function "dead_check_s_boss08_ED"
{
	SetSkipScript("")
	
	//フラグセット
	SetFlag(GF_MP630x_SMALLBOSS_07,1)			// mp630x 小ボス撃破⑧

	//小ボス消去
	SetChrPos("ev_mons08" , -100000.00f,0.00f,0.00f)

	// ボス戦闘時の処理を行いましたので、解除していない項目の解除を行っています
	//戦闘終了処理ここから-----------------------------------------------
	
		//イベントバトル用CallFunc-------------------------
		//CallFunc("system:boss_end")							//……イベントバトル用の色々な処理を行うfunction
		// フラグ解除等（SF_BOSS_BATTLEのみイベント内で対処して下さい）
		SetFlag(SF_CANTSAVE,0)			//セーブ不可
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止解除
		SetFlag( SF_REDENTRYLINE, 0)	// エントリー表示を赤色に
		//SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	
		//封鎖解除・ボス消去-------------------------------
		MapAnime("CT_boss", "off")							//……逃げられないストッパー解除。マップによってアニメ名は異なります。
		SetFlag(SF_BOSS_BATTLE,0)							//ボス戦中

	CallFunc("mp630x:init")

	ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	RestoreCamera(0,0)
	ResetCameraObserver(0)

	ResetPartyPos()
	ResetFollowPoint()

	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	FadeIn(FADE_BLACK,FADE_FAST)
	ResetStopFlag(STOPFLAG_EVENT)
}

//-------------------------------------------
// 小ボスを倒した⑨
function "dead_check_s_boss09"
{

	// キャラを止めたりの処理が必要
	SetFlag(SF_ALLMUTEKI,1)		//無敵ＯＮ
		Wait(150)											//……ボス死亡モーション見せる＆ドロップアイテムを拾う時間

	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()
	ResetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_EVENT)
	SaveCamera()
	SetFlag(SF_ALLMUTEKI,0)		//無敵ＯＦＦ

	ClearDebris()
	//StopBGM(90)

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )
	ChangeAnimation( "PLAYER1" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER2" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER3" , "ANI_WAIT", -1 , 0 )

	//	Wait(60)	// 死亡アニメを待つ

//	Wait(30)

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	// マップのアニメ設定

	//【紋章と六角ライン】
	MoveCameraAt( 0 , -84.000f , -105.000f , -25.287f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 53.700f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 8.530f , 0 )	// 基本仰角
	RotateCamera( 0 , 331.089f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	PlayBGM(BGM_DUNGEON_501, 0)

	ExecuteCmd(1000, MoveCameraAt , INTERPOLATE_SPHERE ,-84.000f , -105.000f , -29.752f , 65 )	// 注視点
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 26.001f, 65 )		// 基本距離
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 34.437f  , 65 )	// 基本仰角
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 349.329f , 65 )				// 角度

	SetSkipScript("mp630x:dead_check_s_boss09_ED")

	FadeIn(FADE_BLACK,FADE_FAST)
	WaitFade()
	
	Wait(50)

	// クロスフェード
	CrossFade(FADE_FAST)
	MapAnime("emblem_s9" , "off" )
	MapAnime("mark_s9"   , "on" )		//進化の系統樹のマーク
	PlaySE(SE_GIM_SCFI_1A,100,0,0,0,1.0f,0)		//gimse エンブレム消灯
	Wait(FADE_FAST)

	Wait(20)

	// クロスフェード
	CrossFade(FADE_NORMAL)

	// ストッパー解除
	MoveCameraAt( 0 , -39.358f , -75.110f , -22.036f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 15.300f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 17.141f , 0 )	// 基本仰角
	RotateCamera( 0 , 219.372f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

//	Wait(FADE_NORMAL)
//	WaitFade()
//	Wait(5)

	ExecuteCmd(1004, MoveCameraAt, INTERPOLATE_SPHERE , -33.988f , -76.641f , -17.323f, 125 )		// 基本距離
	ExecuteCmd(1005, ChangeCameraDistance, INTERPOLATE_SPHERE , 20.400f , 125 )		// 基本距離
	ExecuteCmd(1006, ChangeCameraElevation, INTERPOLATE_SPHERE , 24.695f , 125 )	// 基本仰角
	ExecuteCmd(1007, RotateCamera, INTERPOLATE_SPHERE , 196.068f , 125 )				// 角度

	Wait(15)

	// ストッパー解除
	MapAnime("stop_s9" , "open" )
	MapAnime("stop2_s9" , "open" )
	PlaySE(SE_GIM_SCFI_2,100,0,0,0,1.0f,0)		//gimse ストッパー消える
	PlaySE(SE_GIM_SCFI_4,100,0,0,0,1.0f,0)		//gimse 移動床

	Wait(40)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(10)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(40)

	// 終了処理が必要
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

//	Wait(50)

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)
	StopThread(1007)

	CallFunc("mp630x:dead_check_s_boss09_ED")
}

function "dead_check_s_boss09_ED"
{
	SetSkipScript("")
	
	//フラグセット
	SetFlag(GF_MP630x_SMALLBOSS_08,1)			// mp630x 小ボス撃破⑨

	//小ボス消去
	SetChrPos("ev_mons09" , -100000.00f,0.00f,0.00f)

	// ボス戦闘時の処理を行いましたので、解除していない項目の解除を行っています
	//戦闘終了処理ここから-----------------------------------------------
	
		//イベントバトル用CallFunc-------------------------
		//CallFunc("system:boss_end")							//……イベントバトル用の色々な処理を行うfunction
		// フラグ解除等（SF_BOSS_BATTLEのみイベント内で対処して下さい）
		SetFlag(SF_CANTSAVE,0)			//セーブ不可
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止解除
		SetFlag( SF_REDENTRYLINE, 0)	// エントリー表示を赤色に
		//SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	
		//封鎖解除・ボス消去-------------------------------
		MapAnime("CT_boss", "off")							//……逃げられないストッパー解除。マップによってアニメ名は異なります。
		SetFlag(SF_BOSS_BATTLE,0)							//ボス戦中

	CallFunc("mp630x:init")

	ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	RestoreCamera(0,0)
	ResetCameraObserver(0)

	ResetPartyPos()
	ResetFollowPoint()

	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	FadeIn(FADE_BLACK,FADE_FAST)
	ResetStopFlag(STOPFLAG_EVENT)
}

//-------------------------------------------
// 小ボスを倒した⑩
function "dead_check_s_boss10"
{

	// キャラを止めたりの処理が必要
	SetFlag(SF_ALLMUTEKI,1)		//無敵ＯＮ
	Wait(150)											//……ボス死亡モーション見せる＆ドロップアイテムを拾う時間

	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()
	ResetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_EVENT)
	SaveCamera()
	SetFlag(SF_ALLMUTEKI,0)		//無敵ＯＦＦ

	ClearDebris()
	//StopBGM(90)

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )
	ChangeAnimation( "PLAYER1" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER2" , "ANI_WAIT", -1 , 0 )
	ChangeAnimation( "PLAYER3" , "ANI_WAIT", -1 , 0 )

//	Wait(60)	// 死亡アニメを待つ


//	Wait(30)

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	// マップのアニメ設定

	//【紋章と六角ライン】
	MoveCameraAt( 0 , -96.000f , -154.000f , 3.162f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 61.500f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 4.597f , 0 )	// 基本仰角
	RotateCamera( 0 , 329.663f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	PlayBGM(BGM_DUNGEON_501, 0)

	ExecuteCmd(1000, MoveCameraAt , INTERPOLATE_SPHERE ,-96.000f , -154.000f , -6.512f , 65 )	// 注視点
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 34.700f, 65 )		// 基本距離
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 22.782f  , 65 )	// 基本仰角
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 301.071f , 65 )				// 角度

	SetSkipScript("mp630x:dead_check_s_boss10_ED")

	FadeIn(FADE_BLACK,FADE_FAST)
	WaitFade()

	Wait(50)

	// クロスフェード
	CrossFade(FADE_FAST)
	MapAnime("emblem_s10" , "off" )
	MapAnime("mark_s10"   , "on" )		//進化の系統樹のマーク
	PlaySE(SE_GIM_SCFI_1A,100,0,0,0,1.0f,0)		//gimse エンブレム消灯
	Wait(FADE_FAST)

	Wait(20)

	// クロスフェード
	CrossFade(FADE_NORMAL)

	// ストッパー解除_a
	MoveCameraAt( 0 , -35.281f , -134.140f , -11.773f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 27.500f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 25.960f , 0 )	// 基本仰角
	RotateCamera( 0 , 258.293f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1000.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	Wait(FADE_NORMAL)
//	WaitFade()
//	Wait(5)

	ExecuteCmd(1004, MoveCameraAt, INTERPOLATE_SPHERE , -29.030f , -137.914f , -11.773f, 80 )		// 基本距離
	ExecuteCmd(1005, ChangeCameraDistance, INTERPOLATE_SPHERE , 34.600f , 80 )		// 基本距離
	ExecuteCmd(1006, ChangeCameraElevation, INTERPOLATE_SPHERE , 38.746f , 80 )	// 基本仰角
	ExecuteCmd(1007, RotateCamera, INTERPOLATE_SPHERE , 283.415f , 80 )				// 角度

//	Wait(20)

	// ストッパー解除
	MapAnime("stop_s10a" , "open" )
	MapAnime("stop2_s10a" , "open" )
	PlaySE(SE_GIM_SCFI_2,100,0,0,0,1.0f,0)		//gimse ストッパー消える
	PlaySE(SE_GIM_SCFI_4,100,0,0,0,1.0f,0)		//gimse 移動床

	Wait(40)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(10)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
//	Wait(40)

	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)
	WaitThread(1007)

	// ストッパー解除_b
	ExecuteCmd(1008, MoveCameraAt, INTERPOLATE_SPHERE , 30.610f , -172.605f , -11.773f, 120 )		// 基本距離
	ExecuteCmd(1009, ChangeCameraDistance, INTERPOLATE_SPHERE , 34.600f , 120 )		// 基本距離
	ExecuteCmd(1010, ChangeCameraElevation, INTERPOLATE_SPHERE , 46.131f , 120 )	// 基本仰角
	ExecuteCmd(1011, RotateCamera, INTERPOLATE_SPHERE , 287.807f , 120 )				// 角度

	Wait(60)

	// ストッパー解除
	MapAnime("stop_s10b" , "open" )
	MapAnime("stop2_s10b" , "open" )
	PlaySE(SE_GIM_SCFI_2,100,0,0,0,1.0f,0)		//gimse ストッパー消える
	PlaySE(SE_GIM_SCFI_4,100,0,0,0,1.0f,0)		//gimse 移動床

	Wait(30)	//SE
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(10)
	PlaySE(SE_GIM_SCFI_4A,80,0,0,0,1.0f,0)		//gimse どすん
	EarthQuake(0.1f,0.1f,10)
	Wait(40)

	// 終了処理が必要
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)
	StopThread(1007)
	StopThread(1008)
	StopThread(1009)
	StopThread(1010)
	StopThread(1011)

	CallFunc("mp630x:dead_check_s_boss10_ED")
}

function "dead_check_s_boss10_ED"
{
	SetSkipScript("")
	//フラグセット
	SetFlag(GF_MP630x_SMALLBOSS_09,1)			// mp630x 小ボス撃破⑩

	//小ボス消去
	SetChrPos("ev_mons10" , -100000.00f,0.00f,0.00f)

	// ボス戦闘時の処理を行いましたので、解除していない項目の解除を行っています
	//戦闘終了処理ここから-----------------------------------------------
	
		//イベントバトル用CallFunc-------------------------
		//CallFunc("system:boss_end")							//……イベントバトル用の色々な処理を行うfunction
		// フラグ解除等（SF_BOSS_BATTLEのみイベント内で対処して下さい）
		SetFlag(SF_CANTSAVE,0)			//セーブ不可
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止解除
		SetFlag( SF_REDENTRYLINE, 0)	// エントリー表示を赤色に
		//SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	
		//封鎖解除・ボス消去-------------------------------
		MapAnime("CT_boss", "off")							//……逃げられないストッパー解除。マップによってアニメ名は異なります。
		SetFlag(SF_BOSS_BATTLE,0)							//ボス戦中

	CallFunc("mp630x:init")

	ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	RestoreCamera(0,0)
	ResetCameraObserver(0)

	ResetPartyPos()
	ResetFollowPoint()

	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	FadeIn(FADE_BLACK,FADE_FAST)
	ResetStopFlag(STOPFLAG_EVENT)
}

//-----------------

