#include "inc/mons.h"
#include "inc/def.h"
#include "inc/flag.h"
#include "inc/se.h"
#include "inc/music.h"
#include "inc/scr_inc.h"
#include "inc/3dicon.h"
#include "inc/skilldef.h"
#include "inc/vo.h"
//#include "inc/fish.h"
#include "inc/temp/mp1110.h"

//-------------------------------------------
// 1110：
//-------------------------------------------
// initスクリプト
function "init"
{
	CallFunc("rng:expMult")
	//遠景不必要ノード削除◆マップ作業者用
	MapHide( "@BG2_mp1102" , 0 )
	MapHide( "@BG2_mp1110" , 0 )
	MapHide( "@BG2_mp1113" , 0 )


	//魚影制御------------------------------------------------
//	if( rand()%100 > 25) {
//		//配置しない
//		SetChrPos( "fish1",-100000.00f,0.00f,0.00f)
//		SetFishingSpotState(FISH_SPOT_F001_TESTES1, FISH_SPOTSTATE_DISABLED)
//	}
//	if( rand()%100 > 25) {
//		//配置しない
//		SetChrPos( "fish2",-100000.00f,0.00f,0.00f)
//		SetFishingSpotState(FISH_SPOT_F001_TESTES2, FISH_SPOTSTATE_DISABLED)
//	}
//	if( rand()%100 > 25) {
//		//配置しない
//		SetChrPos( "fish3",-100000.00f,0.00f,0.00f)
//		SetFishingSpotState(FISH_SPOT_F001_TESTES3, FISH_SPOTSTATE_DISABLED)
//	}
//	if( rand()%100 > 25) {
//		//配置しない
//		SetChrPos( "fish4",-100000.00f,0.00f,0.00f)
//		SetFishingSpotState(FISH_SPOT_F001_TESTES4, FISH_SPOTSTATE_DISABLED)
//	}
//	if( rand()%100 > 25) {
//		//配置しない
//		SetChrPos( "fish5",-100000.00f,0.00f,0.00f)
//		SetFishingSpotState(FISH_SPOT_F001_TESTES5, FISH_SPOTSTATE_DISABLED)
//	}
//	if( rand()%100 > 25) {
//		//配置しない
//		SetChrPos( "fish6",-100000.00f,0.00f,0.00f)
//		SetFishingSpotState(FISH_SPOT_F001_TESTES6, FISH_SPOTSTATE_DISABLED)
//	}
//	if( rand()%100 > 25) {
//		//配置しない
//		SetChrPos( "fish7",-100000.00f,0.00f,0.00f)
//		SetFishingSpotState(FISH_SPOT_F001_TESTES7, FISH_SPOTSTATE_DISABLED)
//	}

	//漂流物制御------------------------------------------------
	CallFunc("mp1110:RandBoxInit")	//漂流物の初期化

	//-----------------------------------------------------------

	//ノード設定
	MapHide( "EVENT_ground" , 0 )
	MapHide( "skyfog2" , 0 )		//濃霧非表示

	// ストッパー
	MapAnime( "CT_EVENT" , "open" )

	// イベントエリア/設定制御
	EventAreaEnable( "evb2_S001_kusa1" , 0 )
	EventAreaEnable( "evb2_S001_kusa2" , 0 )
	EventAreaEnable( "evb2_S001_hama1" , 0 )
	EventAreaEnable( "evb2_S001_hama2" , 0 )
	EventAreaEnable( "evb2_S001_umi" , 0 )
	EventAreaEnable( "Stopper_MP1110_1" , 0 )
	EventAreaEnable( "Stopper_MP1110_2" , 0 )

	//がれきLP範囲
	SetChrWork( LP_STOP_1110_1113 , CWK_CHECKRADIUS , 5.0f )
	SetChrWork( CP_STOP_1110_1113 , CWK_CHECKRADIUS , 5.0f )

	if( FLAG[SF_EVENT_ON] )
	{
		if( FLAG[GF_05MP6330_LOOK_MONOLITH] && !FLAG[GF_NPC_5_03_GOTO_GHOSTHIP] ){
			MapHide( "skyfog2" , 1 )		//濃霧表示する
			MapHide( "BG2_sky1" , 0 )		//元の空非表示
			MapHide( "BG2_sky2" , 0 )		//元の空非表示

			SetFog(FOG_BOTH, 0x00828c9e, 0.0f, 120.0f , 2.0f, 0.3f, 0.9f, FOGPARAM_MAP_DEFAULT, FOGPARAM_MAP_DEFAULT, 0)
			SetFogBack(FOG_BOTH, 0x00939aa0, 200.0f, 1000.0f , 1.0f , 0.7f , 0.9f , FOGPARAM_MAP_DEFAULT, FOGPARAM_MAP_DEFAULT, 0 )
			SetMapLightColor( 1.0f, 1.0f, 1.0f, 1.0f, 0.8f )
		}
		// イベントエリア/設定制御
		if( FLAG[GF_02MP1110_REMOVE_OBSTACLE] )
		{
			MapAnime( "mp1110_stop01" , "open" )
			SetChrPos( "CP_STOP_1110_1113",-100000.00f,0.00f,0.00f)
			SetChrPos( "LP_STOP_1110_1113",-100000.00f,0.00f,0.00f)
		}
		else if( FLAG[GF_02MP1110_REMOVE_OBSTACLE_1ST] )
		{
			SetChrWork("LP_STOP_1110_1113", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに
			SetChrWork("CP_STOP_1110_1113", CWK_CHECKOFF, 0)		// 協力イベントルックポイントをオンに
		}
		else
		{
			SetChrWork("LP_STOP_1110_1113", CWK_CHECKOFF, 0)		// 普通のルックポイントをオンに
			SetChrWork("CP_STOP_1110_1113", CWK_CHECKOFF, 1)		// 協力イベントルックポイントをオフに
		}
		
		if (FLAG[GF_02MP1110_REMOVE_OBSTACLE])		// 倒木を撤去した
		{
			SetFlag( GF_02MP1110_REMOVE_OBSTACLE_1ST , 1 )			// 倒木を撤去する（前半）
		}
		
		// 倒木を撤去するイベントの制御（倒木を撤去するまでは閉じ込め）
		if ( !FLAG[GF_02MP1110_REMOVE_OBSTACLE] &&	// 倒木を撤去する
		FLAG[GF_02MP1110_REMOVE_OBSTACLE_1ST] )		// 倒木を撤去する（前半）
		{
			FixPlayerChr(PARTY_ADOL)	// アドルおひとり様モードON
			
			// ストッパー（system.scpでワープも禁止にしてます）
			EventAreaEnable( "Stopper_MP1110_1" , 1 )
			EventAreaEnable( "Stopper_MP1110_2" , 1 )

			LoadChr("Barbaross")	//"バルバロス船長"
			LoadChr("Dogi"	)		//"ドギ"			
			LoadChr("Paro"	)		//"リトル・パロ"	
			LoadChr("Sahad"	)		//"サハド"	
			LoadChr("Laxia"	)		//"ラクシャ"	

			SetChrPos( "Laxia",258.60f, -1509.49f, 6.20f)
			Turn("Laxia", 96.88f, 360.0f)
			ChangeAnimation( "Laxia", "ANI_EV_UDEGUMI", -1, 1 )
			SetChrPos( "Sahad",258.52f, -1506.54f, 6.12f)
			Turn("Sahad", 59.47f, 360.0f)
			ChangeAnimation( "Sahad", "ANI_EV_RYOTEKOSI", -1, 1 )
			SetChrPos( "Dogi",254.67f, -1503.35f, 6.15f)
			Turn("Dogi", 19.41f, 360.0f)
			ChangeAnimation( "Dogi", "ANI_EV_YARUKI", -1, 1 )
			SetChrPos( "Barbaross",251.80f, -1502.40f, 6.27f)
			Turn("Barbaross", 8.05f, 360.0f)
			SetChrInfoFlag("Paro", INFOFLAG_NOATARI)	// アタリ無視
			SetChrPos( "Paro",251.80f, -1502.40f, 6.27f)
			SetParent("Paro", "Barbaross", "Null_paro")
			ChangeAnimation( "Paro", "ANI_WAIT5", -1, 1 )

			ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
			
		}
		
		// イベント発生制御
		if( FLAG[SF_BOSS_BATTLE] )
		{
			//リトライ
			SetWork( WK_BGM , BGM_Nothing )		//BGM消す
			EventCue("mp1110:Retry_M01S010")
		}
		else
		{
			if( FLAG[GF_00MP0011b_DIVE_OCEAN] && !FLAG[GF_01MP1110_GET_SWORD] )
			{
				EventAreaEnable( "evb2_S001_kusa1" , 1 )
				EventAreaEnable( "evb2_S001_kusa2" , 1 )
				EventAreaEnable( "evb2_S001_hama1" , 1 )
				EventAreaEnable( "evb2_S001_hama2" , 1 )
				EventAreaEnable( "evb2_S001_umi" , 1 )

				SetChrPos("eq0000b",  285.60f	-1462.60f	 0.81f)
				ChangeAnimation( "eq0000b" , "ANI_WAIT", -1 , 1 )
				SetChrPos("eq3000b",  285.60f	-1462.60f	 0.81f)	//追加(大草)
				ChangeAnimation( "eq3000b" , "ANI_WAIT", -1 , 1 )	//追加(大草)
	//			SetChrPos("LP_sword",285.60f	-1462.60f	-0.61f)

				SetFlag(SF_TOWNMODE,1)	//剣を振れなくする
				ChrNodeHide( "ADOL" , "Null_wp", 1, 1 )	//剣を消す
				SetWork( WK_BGM , BGM_Nothing )		//BGM消す
			}
		}
		
	//ＮＰＣマーカーセット
		CallFunc("system:SetMarkerNPC")
	}

	//マップ名表示
	if(!FLAG[SF_LOADINIT] && !FLAG[GF_MPxxxx_MAP_NAME_NO_DRAW] && !FLAG[TF_MAPNAME_SHOWN])
	{
		if( FLAG[SF_LASTENTRY_NO] == 0 )
		{	
			//珊瑚礁側
			VisualName("visual/mapname/mn_1110.itp",VN_NAMEMAP2,-1,-1,VN_MAPNAME_TIME)//名知らず海岸
			SetFlag( TF_MAPNAME_SHOWN, 1 )				// 地名表示した（テンポラリ）
		}
	}

	//サウンド制御
	if( FLAG[GF_02MP1110_REMOVE_OBSTACLE_1ST] && !FLAG[GF_02MP1110_REMOVE_OBSTACLE] ){	//
		SetWork( WK_BGM , BGM_EVENT_004 )
	}

}

//////////////////////////////////////////////////////////////////////
//■漂流物
//////////////////////////////////////////////////////////////////////
function "RandBoxInit"
{
	//漂流物制御------------------------------------------------
	if( !FLAG[GF_MP1110_RANDBOX01] ){
		//初回強制配置
		SetFlag( TF_RANDBOX_POINT_1, 1 )
		SetFlag( TF_RANDBOX_CAL, 10 )
	}
	if( FLAG[TF_RANDBOX_CAL] == 0 ){
		//配置計算

		if( rand()%100 < 50) {
			//配置しない
			SetFlag( TF_RANDBOX_CAL, -1 )

		} else {
			if(rand()%100 < 70) {
				//ポイント１に配置
				SetFlag( TF_RANDBOX_POINT_1, 1 )
				SetFlag( TF_RANDBOX_CAL, (rand()%10 +1) )

			} else {
				//ポイント２に配置
				SetFlag( TF_RANDBOX_POINT_2, 1 )
				SetFlag( TF_RANDBOX_CAL, (rand()%10 +1) )
			}
		}
		//箱
		if( rand()%100 < 33) {
			//配置する
			SetFlag( TF_RANDBOX_POINT_3, 1 )
		}
	}

	//配置処理
	if( FLAG[TF_RANDBOX_POINT_1] ){

		if( FLAG[TF_RANDBOX_CAL] <= 2 ){
			SetChrPos("RBOX1_1",  199.32f	-1386.70f	3.02f)

		} else if( FLAG[TF_RANDBOX_CAL] <= 4 ){
			SetChrPos("RBOX1_2",  199.32f	-1386.70f	3.02f)

		} else if( FLAG[TF_RANDBOX_CAL] <= 6 ){
			SetChrPos("RBOX1_3",  199.32f	-1386.70f	3.02f)

		} else if( FLAG[TF_RANDBOX_CAL] <= 8 ){
			SetChrPos("RBOX1_4",  199.32f	-1386.70f	3.02f)

		} else if( FLAG[TF_RANDBOX_CAL] <= 10 ){
			if(FLAG[GF_01MP1201_MEET_BARBAROSS])	//バルバロスに出会うまではセイレン麦は設置しない
			{
				SetChrPos("RBOX1_5",  199.32f	-1386.70f	3.02f)
			}
		}
	}
	if( FLAG[TF_RANDBOX_POINT_2] ){

		if( FLAG[TF_RANDBOX_CAL] <= 2 ){
			SetChrPos("RBOX2_1",  301.28f	-1463.44f	-0.29f)

		} else if( FLAG[TF_RANDBOX_CAL] <= 4 ){
			SetChrPos("RBOX2_2",  301.28f	-1463.44f	-0.29f)

		} else if( FLAG[TF_RANDBOX_CAL] <= 6 ){
			SetChrPos("RBOX2_3",  301.28f	-1463.44f	-0.29f)

		} else if( FLAG[TF_RANDBOX_CAL] <= 8 ){
			SetChrPos("RBOX2_4",  301.28f	-1463.44f	-0.29f)

		} else if( FLAG[TF_RANDBOX_CAL] <= 10 ){
			if(FLAG[GF_01MP1201_MEET_BARBAROSS])	//バルバロスに出会うまではセイレン麦は設置しない
			{
				SetChrPos("RBOX2_5",  301.28f	-1463.44f	-0.29f)
			}
		}
	}
	//箱
	if( FLAG[TF_RANDBOX_POINT_3] ){

		if( rand()%100 < 50) {
			SetChrPos("RBOX3_1",  281.30f	-1454.24f	-0.10f)
		} else {
			SetChrPos("RBOX3_2",  281.30f	-1454.24f	-0.10f)
		}
	}

	//開けていたら消す
	if( FLAG[TF_RANDBOX1] ){
		SetChrPos( "RBOX1_1",-100000.00f,0.00f,0.00f)
		SetChrPos( "RBOX1_2",-100000.00f,0.00f,0.00f)
		SetChrPos( "RBOX1_3",-100000.00f,0.00f,0.00f)
		SetChrPos( "RBOX1_4",-100000.00f,0.00f,0.00f)
		SetChrPos( "RBOX1_5",-100000.00f,0.00f,0.00f)
	}
	if( FLAG[TF_RANDBOX2] ){
		SetChrPos( "RBOX2_1",-100000.00f,0.00f,0.00f)
		SetChrPos( "RBOX2_2",-100000.00f,0.00f,0.00f)
		SetChrPos( "RBOX2_3",-100000.00f,0.00f,0.00f)
		SetChrPos( "RBOX2_4",-100000.00f,0.00f,0.00f)
		SetChrPos( "RBOX2_5",-100000.00f,0.00f,0.00f)
	}
	if( FLAG[TF_RANDBOX3] ){
		SetChrPos( "RBOX3_1",-100000.00f,0.00f,0.00f)
		SetChrPos( "RBOX3_2",-100000.00f,0.00f,0.00f)
	}
}

function "RandBox1_1"
{
//	SetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_TALK)

	ChangeAnimation( "PLAYER1" , "ANI_GET_ITEM", -1 , 1 )
	Wait(10)
	ChangeAnimation( "this" , "ANI_OPEN", -1 , 1 )

	GetItem(ICON3D_MT_N1_BONE,1)
	GetItemMessageExPlus( ICON3D_MT_N1_BONE, 1 , ITEMMSG_SE_NORMAL , "を手に入れた。" , 0 , 0 )
	WaitPrompt()
	WaitCloseWindow()

	SetFlag( TF_RANDBOX1, 1 )
	SetFlag( GF_MP1110_RANDBOX01, 1 )		//取った

	SetChrWork("this", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに

//	ResetStopFlag(STOPFLAG_PC)
	ResetStopFlag(STOPFLAG_TALK)
}

function "RandBox1_2"
{
//	SetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_TALK)

	ChangeAnimation( "PLAYER1" , "ANI_GET_ITEM", -1 , 1 )
	Wait(10)
	ChangeAnimation( "this" , "ANI_OPEN", -1 , 1 )

	GetItem(ICON3D_FD_SEA_SALT,1)
	GetItemMessageExPlus( ICON3D_FD_SEA_SALT, 1 , ITEMMSG_SE_NORMAL , "を手に入れた。" , 0 , 0 )
	WaitPrompt()
	WaitCloseWindow()

	SetFlag( TF_RANDBOX1, 1 )
	SetFlag( GF_MP1110_RANDBOX01, 1 )		//取った

	SetChrWork("this", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに

//	ResetStopFlag(STOPFLAG_PC)
	ResetStopFlag(STOPFLAG_TALK)
}

function "RandBox1_3"
{
//	SetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_TALK)

	ChangeAnimation( "PLAYER1" , "ANI_GET_ITEM", -1 , 1 )
	Wait(10)
	ChangeAnimation( "this" , "ANI_OPEN", -1 , 1 )

	GetItem(ICON3D_FD_SEA_SHELLFISH,1)
	GetItemMessageExPlus( ICON3D_FD_SEA_SHELLFISH, 1 , ITEMMSG_SE_NORMAL , "を手に入れた。" , 0 , 0 )
	WaitPrompt()
	WaitCloseWindow()

	SetFlag( TF_RANDBOX1, 1 )
	SetFlag( GF_MP1110_RANDBOX01, 1 )		//取った

	SetChrWork("this", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに

//	ResetStopFlag(STOPFLAG_PC)
	ResetStopFlag(STOPFLAG_TALK)
}

function "RandBox1_4"
{
//	SetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_TALK)

	ChangeAnimation( "PLAYER1" , "ANI_GET_ITEM", -1 , 1 )
	Wait(10)
	ChangeAnimation( "this" , "ANI_OPEN", -1 , 1 )

	GetItem(ICON3D_FISHBAIT_WORM,1)
	GetItemMessageExPlus( ICON3D_FISHBAIT_WORM, 1 , ITEMMSG_SE_NORMAL , "を手に入れた。" , 0 , 0 )
	WaitPrompt()
	WaitCloseWindow()

	SetFlag( TF_RANDBOX1, 1 )
	SetFlag( GF_MP1110_RANDBOX01, 1 )		//取った

	SetChrWork("this", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに

//	ResetStopFlag(STOPFLAG_PC)
	ResetStopFlag(STOPFLAG_TALK)
}

function "RandBox1_5"
{
//	SetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_TALK)

	ChangeAnimation( "PLAYER1" , "ANI_GET_ITEM", -1 , 1 )
	Wait(10)
	ChangeAnimation( "this" , "ANI_OPEN", -1 , 1 )

	GetItem(ICON3D_FD_WHEAT,1)
	GetItemMessageExPlus( ICON3D_FD_WHEAT, 1 , ITEMMSG_SE_NORMAL , "を手に入れた。" , 0 , 0 )
	WaitPrompt()
	WaitCloseWindow()

	SetFlag( TF_RANDBOX1, 1 )
	SetFlag( GF_MP1110_RANDBOX01, 1 )		//取った

	SetChrWork("this", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに

//	ResetStopFlag(STOPFLAG_PC)
	ResetStopFlag(STOPFLAG_TALK)
}

function "RandBox2_1"
{
//	SetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_TALK)

	ChangeAnimation( "PLAYER1" , "ANI_GET_ITEM", -1 , 1 )
	Wait(10)
	ChangeAnimation( "this" , "ANI_OPEN", -1 , 1 )

	GetItem(ICON3D_MT_N2_BONE,1)
	GetItemMessageExPlus( ICON3D_MT_N2_BONE, 1 , ITEMMSG_SE_NORMAL , "を手に入れた。" , 0 , 0 )
	WaitPrompt()
	WaitCloseWindow()

	SetFlag( TF_RANDBOX2, 1 )
	SetFlag( GF_MP1110_RANDBOX01, 1 )		//取った

	SetChrWork("this", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに

//	ResetStopFlag(STOPFLAG_PC)
	ResetStopFlag(STOPFLAG_TALK)
}
function "RandBox2_2"
{
//	SetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_TALK)

	ChangeAnimation( "PLAYER1" , "ANI_GET_ITEM", -1 , 1 )
	Wait(10)
	ChangeAnimation( "this" , "ANI_OPEN", -1 , 1 )

	GetItem(ICON3D_MT_N2_STONE,1)
	GetItemMessageExPlus( ICON3D_MT_N2_STONE, 1 , ITEMMSG_SE_NORMAL , "を手に入れた。" , 0 , 0 )
	WaitPrompt()
	WaitCloseWindow()

	SetFlag( TF_RANDBOX2, 1 )
	SetFlag( GF_MP1110_RANDBOX01, 1 )		//取った

	SetChrWork("this", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに

//	ResetStopFlag(STOPFLAG_PC)
	ResetStopFlag(STOPFLAG_TALK)
}

function "RandBox2_3"
{
//	SetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_TALK)

	ChangeAnimation( "PLAYER1" , "ANI_GET_ITEM", -1 , 1 )
	Wait(10)
	ChangeAnimation( "this" , "ANI_OPEN", -1 , 1 )

	GetItem(ICON3D_MT_R1_FLOWER,1)
	GetItemMessageExPlus( ICON3D_MT_R1_FLOWER, 1 , ITEMMSG_SE_NORMAL , "を手に入れた。" , 0 , 0 )
	WaitPrompt()
	WaitCloseWindow()

	SetFlag( TF_RANDBOX2, 1 )
	SetFlag( GF_MP1110_RANDBOX01, 1 )		//取った

	SetChrWork("this", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに

//	ResetStopFlag(STOPFLAG_PC)
	ResetStopFlag(STOPFLAG_TALK)
}

function "RandBox2_4"
{
//	SetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_TALK)

	ChangeAnimation( "PLAYER1" , "ANI_GET_ITEM", -1 , 1 )
	Wait(10)
	ChangeAnimation( "this" , "ANI_OPEN", -1 , 1 )

	GetItem(ICON3D_FISHBAIT_WORM,2)
	GetItemMessageExPlus( ICON3D_FISHBAIT_WORM, 2 , ITEMMSG_SE_NORMAL , "を手に入れた。" , 0 , 0 )
	WaitPrompt()
	WaitCloseWindow()

	SetFlag( TF_RANDBOX2, 1 )
	SetFlag( GF_MP1110_RANDBOX01, 1 )		//取った

	SetChrWork("this", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに

//	ResetStopFlag(STOPFLAG_PC)
	ResetStopFlag(STOPFLAG_TALK)
}
function "RandBox2_5"
{
//	SetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_TALK)

	ChangeAnimation( "PLAYER1" , "ANI_GET_ITEM", -1 , 1 )
	Wait(10)
	ChangeAnimation( "this" , "ANI_OPEN", -1 , 1 )

	GetItem(ICON3D_FD_WHEAT,3)
	GetItemMessageExPlus( ICON3D_FD_WHEAT, 3 , ITEMMSG_SE_NORMAL , "を手に入れた。" , 0 , 0 )
	WaitPrompt()
	WaitCloseWindow()

	SetFlag( TF_RANDBOX2, 1 )
	SetFlag( GF_MP1110_RANDBOX01, 1 )		//取った

	SetChrWork("this", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに

//	ResetStopFlag(STOPFLAG_PC)
	ResetStopFlag(STOPFLAG_TALK)
}

function "RandBox3_1"
{
//	SetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_TALK)

	ChangeAnimation( "PLAYER1" , "ANI_GET_ITEM", -1 , 1 )
	Wait(10)
	ChangeAnimation( "this" , "ANI_OPEN", -1 , 1 )

	GetItem(ICON3D_FD_MEAT_01,2)
	GetItemMessageExPlus( ICON3D_FD_MEAT_01, 2 , ITEMMSG_SE_NORMAL , "を手に入れた。" , 0 , 0 )
	WaitPrompt()
	WaitCloseWindow()

	SetFlag( TF_RANDBOX3, 1 )
	SetFlag( GF_MP1110_RANDBOX01, 1 )		//取った

	SetChrWork("this", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに

//	ResetStopFlag(STOPFLAG_PC)
	ResetStopFlag(STOPFLAG_TALK)
}

function "RandBox3_2"
{
//	SetStopFlag(STOPFLAG_PC)
	SetStopFlag(STOPFLAG_TALK)

	ChangeAnimation( "PLAYER1" , "ANI_GET_ITEM", -1 , 1 )
	Wait(10)
	ChangeAnimation( "this" , "ANI_OPEN", -1 , 1 )

	GetItem(ICON3D_FD_VG_PUMPKIN,1)
	GetItemMessageExPlus( ICON3D_FD_VG_PUMPKIN, 1 , ITEMMSG_SE_NORMAL , "を手に入れた。" , 0 , 0 )
	WaitPrompt()
	WaitCloseWindow()

	SetFlag( TF_RANDBOX3, 1 )
	SetFlag( GF_MP1110_RANDBOX01, 1 )		//取った

	SetChrWork("this", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに

//	ResetStopFlag(STOPFLAG_PC)
	ResetStopFlag(STOPFLAG_TALK)
}

//---------------------------------------------------------------
//一般会話
function "Talk_Laxia"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM
	
	//───────────────
	//場所		：mp1110の倒木の前
	//───────────────
	//配置・カメラ：
	//モーション	：腕組
	//───────────────
	
	//　　※カメラ切り替えなし。
	//　　※なおこのタイミングは、クエストイベントなどは起こせないようにする。
	
	LookChr("this", "LEADER")

	// ラクシャ
	TalkPopup("this",0,0,0,0,0)
	{
		"いくら男性四人とはいえ"
		"動かせるものでしょうか……\p"
		"い、いえ、その……"
		"やってみなければ判りませんね……"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	ResetStopFlag(STOPFLAG_TALK)
}

function "Talk_Sahad"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	//───────────────
	//場所		：mp1110の倒木の前
	//───────────────
	//配置・カメラ：
	//モーション	：腰に手を当てる
	//───────────────

	//　　※カメラ切り替えなし。
	//　　※なおこのタイミングは、クエストイベントなどは起こせないようにする。
	
	LookChr("this", "LEADER")

	// サハド
	TalkPopup("this",0,0,0,0,0)
	{
		"この先に漂流者がいるんだろ？"
		"何とかしなくっちゃなぁ。\p"
		"よしアドル、いっちょ号令を頼むぜ！"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	ResetStopFlag(STOPFLAG_TALK)
}

function "Talk_Barbaross"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	//───────────────
	//場所		：mp1110の倒木の前
	//───────────────
	//配置・カメラ：
	//モーション	：肩にパロをとめている状態にする
	//───────────────

	//　　※カメラ切り替えなし。
	//　　※なおこのタイミングは、クエストイベントなどは起こせないようにする。
	
	LookChr("this", "LEADER")

	// バルバロス
	TalkPopup("this",0,0,0,0,0)
	{
		"重量もかなりありそうだが、"
		"この人数であれば動かせるかもしれんな。\p"
		"アドル、早速試してみるとしよう。"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	LookChr("Paro", "ADOL")
	
	// パロ
	TalkPopup("Paro",0,0,0,0,0)
	{
		"#5Cガンバレ　ガンバレ！"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	LookReset("Paro")
	
	ResetStopFlag(STOPFLAG_TALK)
}

function "Talk_Dogi"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	//───────────────
	//場所		：mp1110の倒木の前
	//───────────────
	//配置・カメラ：
	//モーション	：やる気
	//───────────────

	//　　※カメラ切り替えなし。
	//　　※なおこのタイミングは、クエストイベントなどは起こせないようにする。
	
	LookChr("this", "LEADER")

	// ドギ
	TalkPopup("this",0,0,0,0,0)
	{
		"さあアドル、とっとと"
		"取り掛かるとしようぜ！"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	ResetStopFlag(STOPFLAG_TALK)
}

function "EV_M01S000_kani_move"
{
	//イベント中はサイズを小さくするように変更しました(ANI_WAIT2:小サイズ待機,ANI_WALK2:小サイズ歩き)(大草)
	ChangeAnimation( "c500_00" , "ANI_WALK2", -1 , 1 )
	ExecuteCmd( 1, MoveToEx, "c500_00", 297.137f , -1467.270f , 0.021f, 0.1f, 0.02f, 0, 0 )
	WaitThread(1)
	ChangeAnimation( "c500_00" , "ANI_WAIT2", -1 , 1 )
	Wait(40)

	ChangeAnimation( "c500_00" , "ANI_WALK2", -1 , 1 )
	ExecuteCmd( 1, MoveToEx, "c500_00", 296.028f , -1467.703f , 0.090f, 0.1f, 0.03f, 0, 0 )
	WaitThread(1)
	ChangeAnimation( "c500_00" , "ANI_WAIT2", -1 , 1 )
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//■メインイベントセクション

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function "EV_M01S000"		//セイレン島に漂着する
{
//開始処理ここから----------------------------------------------------

	SetStopFlag(STOPFLAG_EVENTIMPOSE)
	ResetStopFlag(STOPFLAG_CINEMA)	//字幕背景消し

	FadeOut(FADE_BLACK,0)
	WaitFade()

//	SaveEventState()
	SaveCamera()

	ResetMotion( "ALL" , 1 )
	StopEffect(-1,ALL,1)
	StopEmotion( "ALL" )
	ResetMoveVec("PARTYALL")

	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))

	//SetFlag(SF_CAMP_CANT_EQUIP,1)	//装備メニュー禁止
	//SetFlag(SF_CAMP_CANT_SKILL,0)	//スキルメニュー許可

	SetChrInfoFlag( "ADOL" , INFOFLAG_NOCHRATARI )
	SetChrPos("ADOL",297.60f,-1468.00f,-0.5f)
	Turn("ADOL",-135.00f,360.0f)
	ChangeAnimation( "ADOL" , "ANI_EV_TAORE", -1 , 1 )
	ChangeSubAnimation(ADOL,SUBMOT_EYE,ANI_E_KOMA_S,1)
	ChangeSubAnimation(ADOL,SUBMOT_MOUTH,ANI_M_WAIT,1)
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)

	// かにぃ配置
	SetChrInfoFlag( "c500_00" , INFOFLAG_NOCHRATARI )
	SetChrPos("c500_00",296.82f,-1467.68f,0.06f)
	Turn("c500_00",29.67f,360.0f)

	Portrait_Load(0, "system/black.itp" )		//擬似フェードアウト用
	Portrait_Create(0, 0, 0, 0, 0, 1920,1080, 0.0f, 0x00ffffff, 0x00000000)

	Portrait_Load(  1 , "visual/portrait/chap20.itp" )	//第一部エフェクトタイトル
	Portrait_Create(1 , -64 , 28 , 
					0 , 0 , 2048 , 1024 , 
					0.0f , 0x00ffffff , 0x00000000 )


//仰向け倒れ：継続				ANI_EV_TAORE
//仰向け倒れ→状態起こし		ANI_EV_TAORE_E
//状態起こし：継続				ANI_EV_TAORESIT
//状態起こし→立ち上がる		ANI_EV_TAORESIT_E

	// 冒頭イベント用高解像度地面ON
	MapAnime( "EVENT_ground" , "on" )
	MapHide( "EVENT_ground" , 1 )

	MoveCameraAt( 0 , 297.062f , -1468.352f , 0.228f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 0.789f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.032f , 0 )	// 基本仰角
	RotateCamera( 0 , 222.202f , 0 )				// 角度
	ChangeCameraPers( 0 , 46.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 14.4f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 2.000, 7.000 ,2.000 ,0.300 ,1.000)
	SetDoFFocus(0, 0, 2.0)

	// グレアの設定
//	SetGlare(0, LERP_LINEAR, 0.000, 0.000 ,1.000 ,1.000 ,1.300 ,0.000 ,1.000)
	SetGlare(0, LERP_LINEAR, 0.000, 0.000 ,1.000 ,1.000 ,0.200 ,0.000 ,1.000)	//暗転からフェードイン

	StopBGM(0)

	//シャドウ調整
	SetShadowBound( 1.0f, 1.0f )
	SetShadowOffset(10 )

	SetSkipScript("mp1110:EV_M01S000_ED")

//開始処理ここまで-----------------------------------------------

	//★エフェクトタイトル////////////////////////////////////////////////
	Wait(30)

	//擬似フェードアウト
	Portrait_Anime(  0 , PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f,0)
	FadeIn(FADE_BLACK,0)
	WaitFade()

	Portrait_Anime(  1 , PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f,FADE_SLOW)
	Wait(30)

	//時限式選択肢
	//◆SE無効化コマンド置換用
	SetFlag(TF_MENU_SELECT,0)
	MenuReset()
	MenuAdd( 1 , "" )
	MenuOpen( TF_MENU_SELECT , 0 ,0 , 0 , 0 , 0 , 0 )
	WaitMenu(180) //ウェイトしたい数値
	MenuClose(0,0)

	Portrait_Anime(  1 , PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f,45)
	Wait(45)
	Wait(30)

	//擬似フェードアウト
	FadeOut(FADE_BLACK,0)
	WaitFade()
	Portrait_Anime(  0 , PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f,0)

	Portrait_Close(  -1 )
	Portrait_Unload( -1 )

	/////////////////////////////////////////////////////////////////////

	SetEnvSEPlayState(1110001, 1)
	SetEnvSEPlayState(1110002, 1)
	SetEnvSEPlayState(1110101, 1)
	SetEnvSEPlayState(1110102, 1)

	Wait(30)

//---------------------------------------------------------------------------------------------
//アドル気がつく＆かにぃ移動

	FadeIn(FADE_BLACK,160)
	// 被写界深度の設定
	SetDoF(150, LERP_LINEAR, 2.000, 7.000 ,0.000 ,0.300 ,1.000)

	Wait(60)

	//　　オープニング終了後、画面暗転のまま
	//　　波音が次第にはっきりと聞こえてくる。
	//　　フェードインすると砂浜でアドルがうつ伏せに倒れている。
	//　　意識を取り戻して、眩しそうに目を開くアドル。
	//　　ＢＧＭは流さない。環境ＳＥのループのみ。



	ExecuteCmd( 1000, MoveCameraAt, INTERPOLATE_SPHERE ,297.062f , -1468.352f , 0.228f , 210 )	// 注視点
	ExecuteCmd( 1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.342f , 210 )					// 基本距離
	ExecuteCmd( 1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -2.028f , 210 )					// 基本仰角
	ExecuteCmd( 1003, RotateCamera, INTERPOLATE_SPHERE , 222.135f , 210 )							// 角度
//	ExecuteCmd( 1004, ChangeCameraPers, INTERPOLATE_SPHERE , 60.000f , 0 )						// 視野角
//	ExecuteCmd( 1005, SetCameraZPlane, INTERPOLATE_SPHERE , 0.100f , 300.000f )					// ZPlane

	//MoveCameraAt( 0 , 297.062f , -1468.352f , 0.228f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.342f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -2.028f , 0 )	// 基本仰角
	//RotateCamera( 0 , 222.135f , 0 )				// 角度
	//ChangeCameraPers( 0 , 46.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 14.4f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(40)

	ChangeAnimation( "c500_00" , "ANI_WALK2", -1 , 1 )
	ExecuteCmd( 1, MoveToEx, "c500_00", 296.58f,-1468.14f,0.08f, 0.1f, 0.08f, 0, 1 )
	//SetChrPos("c500_00",296.58f,-1468.14f,0.08f)
	//Turn("c500_00",29.67f,360.0f)

	WaitThread(1)
	ChangeAnimation( "c500_00" , "ANI_WAIT2", -1 , 1 )


	Wait(60)

	ChangeAnimation( "c500_00" , "ANI_WALK2", -1 , 1 )
	ExecuteCmd( 1, MoveToEx, "c500_00", 296.06f,-1468.61f,0.13f, 0.1f, 0.11f, 0, 1 )
	//SetChrPos("c500_00",296.06f,-1468.61f,0.13f)
	//Turn("c500_00",29.67f,360.0f)

	Wait(40)

	//	テキスト
	ChangeSubAnimation(ADOL,SUBMOT_EYE,ANI_E_SAD_S,1)
	ChangeSubAnimation(ADOL,SUBMOT_EYE,ANI_E_SAD_S,1)
//	ChangeSubAnimation(ADOL,SUBMOT_EXT1,ANI_E_SAD_S,1)//追加


	WaitThread(1000)

//---------------------------------------------------------------------------------------------
//起き上がるアドル

	//　　よろめきつつも何とか立ち上がるアドル。
	//　　照りつける日差しに手をかざして周囲を見回す。
	//　　快晴で穏やかな海と空がどこまでも広がっている。

	CrossFade(FADE_NORMAL)

	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,0.000 ,1.000 ,0.600 ,0.000 ,1.000)

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 4.000, 160.000 ,1.000 ,0.500 ,0.700)
	SetDoFFocus( 0, 0, 0 )

	//シャドウ調整
	SetShadowBound( 8.0f, 8.0f )

	SetEnvSEPlayState(1110003, 1)	//鳥復活


	ResetStopFlag(STOPFLAG_CINEMA)	//字幕背景消し

	MoveCameraAt( 0 , 297.164f , -1468.461f , 0.180f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.199f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 17.591f , 0 )	// 基本仰角
	RotateCamera( 0 , 358.150f , 0 )				// 角度
	ChangeCameraPers( 0 , 46.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	// かにぃ移動
	ExecuteFunc( 999 , "mp1110:EV_M01S000_kani_move" )

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , 297.543f , -1467.612f , 0.726f , 160 )
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.199f , 160 )
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -7.074f , 160 )
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 305.997f , 160 )

	//MoveCameraAt( 0 , 297.543f , -1467.612f , 0.726f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.199f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -7.074f , 0 )	// 基本仰角
	//RotateCamera( 0 , 305.997f , 0 )				// 角度
	//ChangeCameraPers( 0 , 46.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(30)
	ChangeAnimation( "ADOL" , "ANI_EV_TAORE_E", -1 , 1 )
	PitchChr("ADOL", -5.74f, 20)

	Wait(40)

//	SetGlare(20, LERP_LINEAR, 0.000, 0.000 ,1.000 ,1.000 ,0.900 ,0.000 ,1.000)
//	SetGlare(120, LERP_SLOWDOWN, 0.000, 0.000 ,1.000 ,1.000 ,0.200 ,0.000 ,1.000)

	Wait(15)
	ChangeSubAnimation(ADOL,SUBMOT_EYE,ANI_E_MAJI_S,1)
	
	LookSpd("ADOL" , 0.07 , 0.07 ,0.07 )
	Look( "ADOL", 0 , 65 )

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)

	TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
	{
		"#7Cここはどこだろう……"
	}

	WaitPrompt()
	WaitCloseWindow()

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , 297.147f , -1467.583f , 1.123f , 65 )
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.869f , 65 )
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE ,-16.435f , 65 )
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 357.462f  , 65 )

	//MoveCameraAt( 0 , 297.147f , -1467.583f , 1.123f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.869f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -16.435f , 0 )	// 基本仰角
	//RotateCamera( 0 , 357.462f , 0 )				// 角度
	//ChangeCameraPers( 0 , 46.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Look( "ADOL", -40 , 65 )


	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)

	TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
	{
		"#7Cどうやらどこかの",
		"#7C浜辺に打ち上げられたようだ。"
	}
	WaitPrompt()
	WaitCloseWindow()


////---------------------------------------------------------------------------------------------
////空を見てキョロキョロ
//
//	CrossFade(FADE_NORMAL)
//	ResetShadowBound()
//
//	SetChrInfoFlag( "c500_00" , INFOFLAG_INVISIBLE )
//	// やや逆光
//
//
//	MoveCameraAt( 0 , 298.447f , -1467.146f , 1.960f , 0 )	// 注視点
//	ChangeCameraDistance( 0 , 0.100f , 0 )		// 基本距離
//	ChangeCameraElevation( 0 , -46.402f , 0 )	// 基本仰角
//	RotateCamera( 0 , 276.606f , 0 )				// 角度
//	ChangeCameraPers( 0 , 58.000f , 0 )			// 視野角
//	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
//	RollCamera( 0 , 0.0f , 0 )				// ロール回転
//	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
//
//
//	WaitFade()
//	Wait(15)
//
//	ExecuteCmd( 1000, MoveCameraAt, INTERPOLATE_SPHERE , 298.447f , -1467.146f , 1.960f , 90 )	// 注視点
//	ExecuteCmd( 1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 0.100f , 90 )					// 基本距離
//	ExecuteCmd( 1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 2.123f, 90 )					// 基本仰角
//	ExecuteCmd( 1003, RotateCamera, INTERPOLATE_SPHERE , 316.350f , 90 )							// 角度
////	ExecuteCmd( 1004, ChangeCameraPers, INTERPOLATE_SPHERE , 60.000f , 0 )						// 視野角
////	ExecuteCmd( 1005, SetCameraZPlane, INTERPOLATE_SPHERE , 0.100f , 300.000f )					// ZPlane
//
//	//MoveCameraAt( 0 , 298.447f , -1467.146f , 1.960f , 0 )	// 注視点
//	//ChangeCameraDistance( 0 , 0.100f , 0 )		// 基本距離
//	//ChangeCameraElevation( 0 , 2.123f , 0 )	// 基本仰角
//	//RotateCamera( 0 , 316.350f , 0 )				// 角度
//	//ChangeCameraPers( 0 , 58.000f , 0 )			// 視野角
//	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
//	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
//
//	WaitThread(1000)
//	WaitThread(1001)
//	WaitThread(1002)
//	WaitThread(1003)
//	WaitThread(1004)
//	WaitThread(1005)
//
//	Wait(30)
//
//	ExecuteCmd(1001, RotateCamera, INTERPOLATE_SPHERE , 265.000f  , 90 )
//	WaitThread(1001)
//	Wait(30)
//
//	ExecuteCmd(1001, RotateCamera, INTERPOLATE_SPHERE , 5.000f  , 90 )
//	WaitThread(1001)
//	Wait(30)
//	Look( "ADOL", -30 , 35 )
//
//	TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
//	{
//		"#7Cどうやらどこかの",
//		"#7C浜辺に打ち上げられたようだ。"
//	}
//	WaitPrompt()
//	WaitCloseWindow()

	CrossFade(FADE_CROSS)
	SetShadowBound( 4.0f, 4.0f )

	// 冒頭イベント用高解像度地面OFF
	MapAnime( "EVENT_ground" , "off" )
	MapHide( "EVENT_ground" , 0 )

	PitchChr("ADOL", 0, 0)

	ResetStopFlag(STOPFLAG_CINEMA)	//字幕背景消し
	MoveCameraAt( 0 , 297.600f , -1468.000f , 0.530f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.400f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 3.500f , 0 )	// 基本仰角
	RotateCamera( 0 , 110.336f , 0 )				// 角度
	ChangeCameraZoom( 0 , 1.000f , 0 )			// ズーム値
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 3.0f , 0 )
	LookReset( "ADOL" )
	ChangeSubAnimation(ADOL,SUBMOT_EYE,ANI_E_CLOSE_S,1)
	ChangeAnimation( "ADOL" , "ANI_EV_TAORESIT", -1 , 1 )

	ChangeAnimation( "ADOL" , "ANI_EV_TAORESIT_E", -1 , 1 )
//	Wait(25)

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 297.600f , -1467.990f , 1.640f , 80 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.000f , 80 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -14.500f , 80 )
	//ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 89.36f , 80 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 100.36f , 80 )
	ExecuteCmd(1004, RollCamera, INTERPOLATE_SPHERE , -3.00f , 80 )


	ChangeSubAnimation(ADOL,SUBMOT_EYE,ANI_E_MAJI_S,1)
	ChangeSubAnimation(ADOL,SUBMOT_EXT1,ANI_E_MAJI_S,1)
	ChangeSubAnimation(ADOL,SUBMOT_MOUTH,ANI_M_MAJI,1)
	Look( "ADOL" , 3.0f , 4.0f )
	WaitAnimation2( "ADOL" , -1, 1, "ANI_EV_TAORESIT_E",  0)

	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)

	Wait(15)

	
	CrossFade(FADE_CROSS)
	SetShadowBound( 8.0f, 8.0f )

	MoveCameraAt( 0 , 297.634f , -1467.998f , 1.250f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.500f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 10.000f , 0 )	// 基本仰角
	RotateCamera( 0 , 4.000f , 0 )				// 角度
	ChangeCameraZoom( 0 , 1.000f , 0 )			// ズーム値
	ChangeCameraPers( 0 , 66.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )
	ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.000f , 180 )

	ChangeAnimation( "ADOL" , "ANI_EV_ROTATE_L90", -1 , 1 )
	LookReset( "ADOL" )

	Wait(30)
	Look( "ADOL" , 30.0f , 0.0f )
	Wait(65)
	Look( "ADOL" , -30.0f , 0.0f )
	WaitFade()

	TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
	{
		"#7C周囲に人の気配はない……",
	}
	WaitPrompt()
	WaitCloseWindow()

	LookReset( "ADOL")

	TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
	{
		"#7Cただ寄せては返す"
		"#7C波の音だけが耳に響いてくる。"
	}
	WaitPrompt()
	WaitCloseWindow()

//	SetStopFlag(STOPFLAG_CINEMA)	//字幕背景表示
//	Wait(10)
//	TalkMes(UNDEF,"#7C周囲に人の気配はない……","","")
//	WaitPrompt()
//	LookReset( "ADOL")
//	TalkMes(UNDEF,"#7Cただ寄せては返す",
//		"波の音だけが耳に響いてくる。","")
//	WaitPrompt()
//	WaitCloseWindow()

	//　　操作許可(可能ならばフラつくような歩きモーション)。
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()
	WaitThread(1000)

//終了処理ここから----------------------------------------------------
	CallFunc("mp1110:EV_M01S000_ED")
}

function "EV_M01S000_ED"	// EV_M01S000の終了スクリプト
{
	SetSkipScript("")		//スキップ機能無効化

	RestoreEventState()

	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	CallFunc("system:reset_chrmot_ADOL")

	//マップパラメーターリセット
	ResetMapParam( -1 )

	Portrait_Close(  -1 )
	Portrait_Unload( -1 )

	SetShadowOffset( 0 )

	//イシオスブレード消去
 	EquipWeapon(ADOL,-1)
	//RemovePartyEquip( ICON3D_WP_ADOL_011 , 1 )
 	DeleteItem(ICON3D_WP_ADOL_011, 1)	//イシオスブレード

	// 通常
	if ( !FLAG[SF_GALLERY_EVENT] )
	{
		SetFlag(SF_TOWNMODE,1)	//剣を振れなくする
		SetFlag( SF_SETRAMSAVE , 1)
		SetFlag( GF_01MP1110_DRIFT, 1 )			// 漂着した
		//SetFlag( SF_MISSIONNO, MS_01_01 )	//★冒険メモ：周囲を調べてみよう。
		SetMapMarker( SMI_EVENTPT_MAIN,	PAGE_F001, MARKER_EV_M01S010, 285.60f,	-1462.60f, 0.81f, 285.60f,	-1462.60f, 0, MN_F_SOUTHWEST_PLANE_MP1110,0)	//イベントマーカー（メイン）	// mp1110	錆びた剣

		SetFlag(GF_GALL_EV_01_01,1)		// M01S000:セイレン島に漂着する
		
		CallFunc("mp1110:init" )

		SetChrPos(PLAYER1,297.60f,-1468.00f,0.01f)
		Turn(PLAYER1,134.00f,360.0f)
		ResetPartyPos()
		ResetFollowPoint()
		//Wait(1) //処理待ち用

		RestoreCamera(0,0)
		CallFunc("system:camera_reset")

		ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
		RotateCamera( 0 , 54.000f , 0 )				// 角度
		FixCamera()

		FadeIn(FADE_BLACK,FADE_FAST)
		WaitFade()

		ResetChrInfoFlag( "c500_00" , INFOFLAG_INVISIBLE )
		ResetStopFlag(STOPFLAG_EVENTIMPOSE)

		//手動地名表示
		VisualName("visual/mapname/mn_1110.itp",VN_NAMEMAP2,-1,-1,VN_MAPNAME_TIME)//名知らず海岸
		SetFlag( TF_MAPNAME_SHOWN, 1 )				// 地名表示した（テンポラリ）
	}
	// イベントギャラリー中
	else
	{
		FadeBGM(100,15)
		SoundEfx( SEFX_DEFAULT, 15 )
		SetEnvSEPlayState(-1, 0)	//環境SE全停止
		GalleryEvEnd(0)		// イベントギャラリー終了（スクリプトから強制的に抜けていろいろ処理してくれる）
		ResetStopFlag(STOPFLAG_EVENTIMPOSE)
	}


//終了処理ここまで----------------------------------------------------
}

function "EV_M01S010"		//錆びた剣を入手する
{
//開始処理ここから----------------------------------------------------

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

	LoadChr("ev_m0107_01")	//"イベント用ラビィ１"
	LoadChr("ev_m0107_02")	//"イベント用ラビィ２"
	LoadChr("ev_m0107_03")	//"イベント用ラビィ３"

	SaveEventState()
	SaveCamera()

	ClearDebris()
	ResetMotion( "ALL" , 1 )
	StopEffect(-1,ALL,1)
	StopEmotion( "ALL" )
	ResetMoveVec("PARTYALL")

	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))

	SetChrInfoFlag( "ADOL" , INFOFLAG_NOCHRATARI )
	SetChrPos("ADOL",284.85f,-1462.25f,0.39f)
	Turn("ADOL",-87.00f,360.0f)
	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)

//通常待機→戦闘待機			ANI_EV_SETARM

	ChangeAnimation( "eq0000b" , "ANI_WAIT2", -1 , 1 )

	MoveCameraAt( 0 , 285.685f , -1462.345f , 0.700f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.900f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 7.000f , 0 )	// 基本仰角
	RotateCamera( 0 , 100.000f , 0 )				// 角度
	ChangeCameraPers( 0 , 41.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	SetShadowBound(8.0,8.0)

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 100.000 ,0.000 ,0.150 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

//開始処理ここまで-----------------------------------------------

	ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.100f , 90 )
	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()
	Wait(30)

	//　　砂浜に突き立った錆びた剣の
	//　　ルックポイントを調べるとイベント開始。
	//	テキスト

	TalkPopup("UNDEF",0,3,STOPPER_PPOSX,STOPPER_PPOSY,0)
	{
		"#7C漂着物だろうか……",
		"#7C古びた剣が砂浜に突き立っている。\p"
		"#7C手に取りますか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	//─────────────────────────
	SetFlag(TF_MENU_SELECT,0)
	MenuReset()
	MenuType(MENUTYPE_POPUP)
	MenuAdd(1,"はい")
	MenuAdd(2,"いいえ")
	MenuOpen( TF_MENU_SELECT , -1 , ADOLMENU_PPOSY , -2 , -2 , 10 , 0)
	WaitMenu(0)
	MenuClose(10,0)

	if (FLAG[TF_MENU_SELECT] == 1)
	{
		//	⇒はい

		FadeOut(FADE_BLACK,FADE_FAST)
		ChangeAnimation( "ADOL" , "ANI_EV_KENTORI", -1 , 1 )// ◆

		WaitFade()

		StopThread(1000)

		SetChrPos("eq0000b",  -100000.00f	0.00f	0.00f)
		SetChrPos("eq3000b",  -100000.00f	0.00f	0.00f)//追加(大草)
//		SetChrPos("LP_sword", -100000.00f	0.00f	0.00f)
	
//		Message("#7Cアドルは#2C『#9I錆びた剣』#4Cを手に取って装備した。")
		GetItemMessageExPlus(-1 , 0 , ITEMMSG_SE_BETTER , "アドルは#2C『#9I錆びた剣』#0Cを手に取って装備した。" , 0 , 0 )
		WaitPrompt()
		WaitCloseWindow()
		SetFlag( GF_01MP1110_GET_SWORD, 1 )			// 錆びたショートソードを手に入れた

		//　　宝箱ジングルを鳴らす。
		GetItem(ICON3D_WP_ADOL_009, 1)
		EquipWeapon(ADOL,		ICON3D_WP_ADOL_009		)			//今回の検証版では自動装備してしまう。

		SetFlag(SF_CAMP_CANT_EQUIP,0)	//装備メニュー解除
		SetFlag(SF_TOWNMODE,0)	//剣が振れる
		ChrNodeHide( "ADOL" , "Null_wp", 0, 1 )	//剣を出す

		ChangeAnimation( "ADOL" , "ANI_EV_DISARM_S", -1 , 1 )// ◆
		
		MoveCameraAt( 0 , 284.850f , -1462.250f , 1.435f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 2.100f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 7.000f , 0 )	// 基本仰角
		RotateCamera( 0 , 287.000f , 0 )				// 角度
		ChangeCameraPers( 0 , 41.000f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転

		SetDoF(0, LERP_LINEAR, 3.000, 90.000 ,0.000 ,0.150 ,0.500)

		//スキップ許可
		SetSkipScript("mp1110:EV_M01S010_ED")


		ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.500f , 45 )
		FadeIn(FADE_BLACK,FADE_FAST)
		WaitFade()
		WaitThread(1000)
		
		PlaySE(SE_M01S010_01, 80, 0,  0, 0, 1.0f, 0)	//わんこ
		//Wait(10)
	
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 284.850f , -1462.250f , 1.855f , 25  )
		Wait(15)
		EmotionEx("ADOL", -0.01f,EMO_EX,0,5,1,1,1.0f )
		Wait(15)
		ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_ANGER_S,1)
		ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKR_S,1)
		Turn("ADOL",3.00f,10.0f)
		Look("ADOL" , 30.0f , 0 )
		WaitThread(1000)
		Wait(30)

		//　　メッセージウィンドウを閉じると同時に
		//　　アドルに「！」エモーションを表示。
		//		狼型の獣たちに取り囲まれていることに気づき、
		//		そのまま戦闘へと突入する。
		//		戦闘中にスキルのチュートリアルを表示する。

		PlayBGM(BGM_BOSS_002, 0)

		CrossFade(FADE_FAST)
		MoveCameraAt( 0 , 268.580f , -1464.860f , 3.350f , 0 )	// 注視点
		//ChangeCameraDistance( 0 , 3.9000f , 0 )		// 基本距離
		ChangeCameraDistance( 0 , 2.6000f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 4.5000f , 0 )	// 基本仰角
		RotateCamera( 0 , 85.000f , 0 )				// 角度
		ChangeCameraPers( 0 , 45.000f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
		RollCamera( 0 , 15.0f , 0 )				// ロール回転
		
	
	//	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_LINEAR , 278.590f , -1463.270f , 1.300f ,60 )
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_LINEAR , 278.590f , -1463.270f , 1.550f ,60 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_LINEAR , 2.900f , 60 )
	//	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_LINEAR , 4.500f , 60 )
		ExecuteCmd(1002, RotateCamera, INTERPOLATE_LINEAR , 75.000f , 60 )
		ExecuteCmd(1003, RollCamera, INTERPOLATE_LINEAR , 10.000f , 60 )

		ExecuteFunc( 100 , "mp1110:SB_M01S010_ev_m0107_01_move" )
		WaitThread(100)
		Wait(40)

		WaitThread(1000)
		WaitThread(1001)
		WaitThread(1002)
		WaitThread(1003)

		CrossFade(FADE_FAST)
		MoveCameraAt( 0 , 280.845f , -1462.975f , 1.150f , 0 )	// 注視点
//		ChangeCameraDistance( 0 , 6.300f , 0 )		// 基本距離
		ChangeCameraDistance( 0 , 8.900f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 13.000f , 0 )	// 基本仰角
		RotateCamera( 0 , 320.000f , 0 )				// 角度
		ChangeCameraPers( 0 , 45.000f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
		RollCamera( 0 , -2.0f , 0 )				// ロール回転

		SetShadowBound(16.0f,16.0f)


		ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE , 6.300f , 90 )
//		ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE , 6.900f , 90 )
		ExecuteCmd(1001, RotateCamera, INTERPOLATE_SPHERE , 310.000f , 90 )
		ExecuteCmd(1002, RollCamera, INTERPOLATE_SPHERE , -7.000f , 90 )

		ExecuteFunc( 101 , "mp1110:SB_M01S010_ev_m0107_02_move" )
		Wait(15)
		ExecuteFunc( 102 , "mp1110:SB_M01S010_ev_m0107_03_move" )
		Wait(30)

		LookReset( "ADOL" )
		ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_ANGER_S,1)
		ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKC_S,1)
		TurnToChr("ADOL","ev_m0107_01",10.0f)
		Wait(10)
		ChangeAnimation( "ADOL" , "ANI_EV_SETARM", -1 , 1 )
		WaitAnimation( "ADOL" , -1, 1 )

		WaitThread(101)
		WaitThread(102)

		WaitThread(1000)
		WaitThread(1001)
		WaitThread(1002)

		FadeOut(FADE_BLACK,FADE_NORMAL)
		WaitFade()

		CallFunc("mp1110:EV_M01S010_ED")

	}
	else
	{
		FadeOut(FADE_BLACK,FADE_NORMAL)
		WaitFade()

		//終了処理ここから----------------------------------------------------

		RestoreEventState()

		ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

		CallFunc("system:reset_chrmot_ADOL")

		//マップパラメーターリセット
		ResetMapParam( -1 )

		//エフェクトの停止
		StopEffect(-1,ALL,1)

		SetChrPos("PLAYER1",284.85f,-1462.25f,0.39f)
		Turn("PLAYER1",-87.00f,360.0f)
		ResetPartyPos()
		ResetFollowPoint()
		//Wait(1) //処理待ち用

		RestoreCamera(0,0)
		CallFunc("system:camera_reset")

		FadeIn(FADE_BLACK,FADE_FAST)
		WaitFade()

		ResetStopFlag(STOPFLAG_EVENT)
		//終了処理ここまで----------------------------------------------------
	}
	//─────────────────────────
}

function "EV_M01S010_ED"
{
	//終了処理ここから----------------------------------------------------

	SetSkipScript("")		//スキップ機能無効化

	RestoreEventState()

	SetChrPos("ev_m0107_01",-100000.00f,0.00f,0.00f)
	SetChrPos("ev_m0107_02",-100000.00f,0.00f,0.00f)
	SetChrPos("ev_m0107_03",-100000.00f,0.00f,0.00f)

	CallFunc("system:reset_chrmot_ADOL")

	//マップパラメーターリセット
	ResetMapParam( -1 )

	//エフェクトの停止
	StopEffect(-1,ALL,1)

	//フラグ処理
	SetFlag( GF_01MP1110_GET_SWORD, 1 )			// 錆びたショートソードを手に入れた
	SetFlag(SF_CAMP_CANT_EQUIP,0)		// 装備メニュー許可

	//マーカー
	DelMapMarker( SMI_EVENTPT_MAIN,	PAGE_F001, MARKER_EV_M01S010, 0, 0)	//イベントマーカー（メイン）	// mp1110	錆びた剣

	EventCue("mp1110:Retry_M01S010")
	//終了処理ここまで----------------------------------------------------
}

function "SB_M01S010_ev_m0107_01_move"
{
	SetChrPos("ev_m0107_01",268.58f	-1464.86f	2.97f)
	TurnToChr("ev_m0107_01","ADOL",360.0f)
	ResetChrInfoFlag( "ev_m0107_01" , INFOFLAG_INVISIBLE )

	ChangeAnimation( "ev_m0107_01" , "ANI_RUN", -1 , 1 )
	ExecuteCmd( 1, MoveTo, "ev_m0107_01", 278.60f	-1463.30f	0.98f, 0.1f, 0.7f )
	WaitThread(1)
	ChangeAnimation( "ev_m0107_01" , "ANI_EV_IKAKU", -1 , 1 )
	ExecuteCmd( 1, TurnToChr, "ev_m0107_01", "ADOL",10.0f )
	Wait(17)
	PlaySE(SE_M01S010_02, 80, 0,  0, 0, 1.0f, 0)	//検証版用仮	
	Wait(8)
	PlaySE(SE_M01S010_02, 80, 0,  0, 0, 1.0f, 0)	//検証版用仮	
	
	WaitThread(1)
//	ChangeAnimation( "ev_m0107_01" , "ANI_WAIT", -1 , 1 )
}
function "SB_M01S010_ev_m0107_02_move"
{
	SetChrPos("ev_m0107_02",273.93f	-1466.54f	1.99f)
	TurnToChr("ev_m0107_02","ADOL",360.0f)
	ResetChrInfoFlag( "ev_m0107_02" , INFOFLAG_INVISIBLE )

	ChangeAnimation( "ev_m0107_02" , "ANI_RUN", -1 , 1 )
	ExecuteCmd( 2, MoveTo, "ev_m0107_02", 279.76f	-1465.90f	0.90f, 0.1f, 0.7f )
	WaitThread(2)
	ExecuteCmd( 2, TurnToChr, "ev_m0107_02", "ADOL",10.0f )
	WaitThread(2)
//	ChangeAnimation( "ev_m0107_02" , "ANI_EV_IKAKU", -1 , 1 )
	ChangeAnimation( "ev_m0107_02" , "ANI_WAIT", -1 , 1 )
}
function "SB_M01S010_ev_m0107_03_move"
{
	SetChrPos("ev_m0107_03",272.55f	-1458.97f	1.67f)
	TurnToChr("ev_m0107_03","ADOL",360.0f)
	ResetChrInfoFlag( "ev_m0107_03" , INFOFLAG_INVISIBLE )

	ChangeAnimation( "ev_m0107_03" , "ANI_RUN", -1 , 1 )
	ExecuteCmd( 3, MoveTo, "ev_m0107_03", 279.76f	-1459.35f	0.65f, 0.1f, 0.7f )
	WaitThread(3)
	ExecuteCmd( 3, TurnToChr, "ev_m0107_03", "ADOL",10.0f )
	WaitThread(3)
	ChangeAnimation( "ev_m0107_03" , "ANI_WAIT", -1 , 1 )
}

function "Retry_M01S010"
{
	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK,0)
	WaitFade()

	//ボス配置・アニメ--------------------------------
	//チュートリアル戦闘用準備
	SetFlag( TF_KILLENEMY_CNT, 0 )

	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))

	SetChrPos("tu_m0107_01",277.01f,-1461.40f,1.13f)
	Turn("tu_m0107_01",-89.12f,360.0f)
	//	SetChrPos("tu_m0107_02",282.36f,-1466.60f,0.63f)
	//	Turn("tu_m0107_02",-143.21f,360.0f)
	SetChrPos("tu_m0107_02",283.15f,-1465.79f,0.57f)
	Turn("tu_m0107_02",-143.21f,360.0f)
	SetChrPos("tu_m0107_03",287.12f,-1458.50f,-0.01f)
	Turn("tu_m0107_03",40.68f,360.0f)
	//SetChrPos("tu_m0107_03",290.84f,-1460.59f,0.01f)
	//Turn("tu_m0107_03",63.31f,360.0f)

	// 必ずプレイヤーを発見し、見失わないようにする
	SetChrWork("tu_m0107_01", CWK_DRANGE, 9999.0f)
	SetChrWork("tu_m0107_01", CWK_LRANGE, 9999.0f)
	SetChrWork("tu_m0107_01", CWK_DANGLE, 360.0f)
	SetChrWork("tu_m0107_01", CWK_LANGLE, 360.0f)
	SetChrWork("tu_m0107_01", CWK_LCOUNT, 99999)
	SetChrWork("tu_m0107_01", CWK_AREAOVER, 9999.0f)

	SetChrWork("tu_m0107_02", CWK_DRANGE, 9999.0f)
	SetChrWork("tu_m0107_02", CWK_LRANGE, 9999.0f)
	SetChrWork("tu_m0107_02", CWK_DANGLE, 360.0f)
	SetChrWork("tu_m0107_02", CWK_LANGLE, 360.0f)
	SetChrWork("tu_m0107_02", CWK_LCOUNT, 99999)
	SetChrWork("tu_m0107_02", CWK_AREAOVER, 9999.0f)

	SetChrWork("tu_m0107_03", CWK_DRANGE, 9999.0f)
	SetChrWork("tu_m0107_03", CWK_LRANGE, 9999.0f)
	SetChrWork("tu_m0107_03", CWK_DANGLE, 360.0f)
	SetChrWork("tu_m0107_03", CWK_LANGLE, 360.0f)
	SetChrWork("tu_m0107_03", CWK_LCOUNT, 99999)
	SetChrWork("tu_m0107_03", CWK_AREAOVER, 9999.0f)

	SetChrPos("eq0000b",  -100000.00f	0.00f	0.00f)
	SetChrPos("eq3000b",  -100000.00f	0.00f	0.00f)//追加(大草)
//	SetChrPos("LP_sword", -100000.00f	0.00f	0.00f)

	//PLAYER配置--------------------------------------
	//SetChrPos("PLAYER1",284.18f,-1462.47f,0.43f)
	//Turn("PLAYER1",80.47f,360.0f)
	SetChrPos(PLAYER1,284.85f,-1462.25f,0.39f)
	Turn(PLAYER1,80.47f,360.0f)

	//カメラ設定--------------------------------------
	// argの設定を上書きする
	//SetYs8Camera(7.0f, 60.0f, 10.0f, 0.0f, 0.0f)

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	RotateCamera( 0 , 75.000f , 0 )				// 角度
	FixCamera()

	//イベントバトル用CallFunc------------------------
	CallFunc("system:boss_start")

	//その他処理--------------------------------------
	PlayBGM(BGM_BOSS_002, 0)
	MapAnime("CT_EVENT","close")	//逃げられないストッパー起動

	EventAreaEnable( "evb2_S001_kusa1" , 0 )
	EventAreaEnable( "evb2_S001_kusa2" , 0 )
	EventAreaEnable( "evb2_S001_hama1" , 0 )
	EventAreaEnable( "evb2_S001_hama2" , 0 )
	EventAreaEnable( "evb2_S001_umi" 	, 0 )

	SetFlag(SF_TOWNMODE,0)	//剣が振れる
	ChrNodeHide( "ADOL" , "Null_wp", 0, 1 )	//剣を出す

	SetFlag(SF_FORCELEARN_SKILL,1)	//スキルを強制的に覚えさせる
	SetFlag(SF_CANTLEARN_SKILL,0)	//スキル習得禁止を解除

	FadeIn(FADE_BLACK,FADE_FAST)
	WaitFade()

	ResetStopFlag(STOPFLAG_EVENT)

	//------------------------------------------------
}

function "battleend_check"
{
	//敵を全部倒したかチェックする
	SetFlag( TF_KILLENEMY_CNT, (FLAG[TF_KILLENEMY_CNT]+1) )
	if( FLAG[TF_KILLENEMY_CNT] == 3 )
	{
		//無敵ON・色々終了させる---------------------------
		SetFlag(TF_KILLENEMY_CNT, 0)

		SetFlag(SF_ALLMUTEKI,1)		//無敵ＯＮ

		Wait(60)
		StopBGM(120)
		Wait(45)

		//イベントバトル用CallFunc-------------------------
	// SF_BOSS_BATTLEのみイベント内で対処して下さい
		//CallFunc("system:boss_end")

		//MTDのSE鳴らさない
		SetFlag( SF_NOUSE_MTDSE, 1 )

		FadeOut(FADE_BLACK,FADE_SLOW)
		WaitFade()

		SetStopFlag(STOPFLAG_EVENT)
		SaveCamera()

		SetFlag(SF_ALLMUTEKI,0)		//無敵ＯＦＦ

		//エフェクトの停止
		StopEffect(-1,ALL,1)

		EarthQuake( 0 , 0 , 0 )		//揺れ止める
		Blur(BLUR_TYPE_AFTERIMAGE,0,0)	//ブラー止める

		//モブどかす
		ResetChrPos((CHRTYPE_MONS | REMOVE_POS))

		// フラグ解除等（SF_BOSS_BATTLEのみイベント内で対処して下さい）
		SetFlag(SF_CANTSAVE,0)			//セーブ不可
		SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止解除
		SetFlag( SF_REDENTRYLINE, 0)	// エントリー表示を赤色に
		//SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ

		//ボス戦はHP回復のみ
		HP_Recover( 9999 )

		Wait(30)	//ボスモードの解除を待つウェイト

		CallFunc("system:camera_reset")

		//MTDのSE鳴らす
		SetFlag( SF_NOUSE_MTDSE, 0 )

	//封鎖解除・ボス消去-------------------------------
		MapAnime("CT_EVENT","open")	//逃げられないストッパー開ける

		ResetChrPos((CHRTYPE_MONS | REMOVE_POS))

	//事後処理-----------------------------------------
			////-----------------------------------
			//// タイムアタック中
			//if (FLAG[SF_TIMEATK])
			//{
			//	EndTimeAtk()		// タイムアタック終了（スクリプトから強制的に抜けていろいろ処理してくれる）
			//}
			////-----------------------------------

		if( FLAG[SF_EVENT_ON] )
		{
			EventCue("mp1110:EV_M01S011")
			ResetStopFlag(STOPFLAG_EVENT)
		}
		else
		{
			// ボスラッシュ？
			FadeIn(FADE_BLACK,FADE_FAST)
			WaitFade()

			ResetStopFlag(STOPFLAG_EVENT)
		}
		//------------------------------------------------
	}
}

function "EV_M01S011"		//のどの渇きに気づく
{
//開始処理ここから----------------------------------------------------

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK,0)
	WaitFade()

	SaveEventState()
	SaveCamera()

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )

	CallFunc("system:party_reset")

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))

	SetChrInfoFlag( "ADOL" , INFOFLAG_NOCHRATARI )
	SetChrPos("ADOL",284.85f,-1462.25f,0.39f)
	Turn("ADOL",80.47f,360.0f)
	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )
	SetChrWork( "ADOL" , CWK_BATTLEMODE , 1 )
	ChangeAnimation( "ADOL" , "ANI_WAIT", -1 , 1 )

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	// チュートリアルポートレート読み込み
	Portrait_Load(0, "system/black.itp" )		//擬似フェードアウト用
	Portrait_Create(0, 0, 0, 0, 0, 64,64, 0.0f, 0x00ffffff, 0x00000000)
	Portrait_Load(1, "visual/help/hp_00.itp" )	// 背景用
	Portrait_Create(1, HELP_POS_X, HELP_POS_Y, 0, 0, HELP_SCALE_X, HELP_SCALE_Y, 0.0f, 0x00ffffff, 0x00000000)
	Portrait_Load(2, "visual/help/hp_b04.itp" )	// help_b04：スキルの修得とセット
	Portrait_Create(2, HELP_POS_X, HELP_POS_Y, 0, 0, HELP_SCALE_X, HELP_SCALE_Y, 0.0f, 0x00ffffff, 0x00000000)
	Portrait_Load(3, "visual/help/hp_b05.itp" )	// help_b05：スキルの使い方
	Portrait_Create(3, HELP_POS_X, HELP_POS_Y, 0, 0, HELP_SCALE_X, HELP_SCALE_Y, 0.0f, 0x00ffffff, 0x00000000)

	//MoveCameraAt( 0 , 284.850f , -1462.250f , 1.550f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 4.300f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 9.000f , 0 )	// 基本仰角
	//RotateCamera( 0 , 75.000f , 0 )				// 角度
	//ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	
	MoveCameraAt( 0 , 284.858f , -1462.252f , 1.584f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.129f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.282f , 0 )	// 基本仰角
	RotateCamera( 0 , 296.836f , 0 )				// 角度
	ChangeCameraPers( 0 , 57.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.6f , 60 )

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 100.000 ,0.000 ,0.150 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	SetShadowBound(36.0f,36.0f)

	SetChrWork( "ADOL" , CWK_BATTLEMODE , 0 )

	SetSkipScript("mp1110:EV_M01S011_ED")		//スキップ許可
	
	//アドル、ダメージモーション

//開始処理ここまで-----------------------------------------------

	//──────────────────────────────
	//▼チュートリアル：スキルのセット（mp1110）				◆2/17変更点
	//──────────────────────────────
	//	※「▼錆びた剣を入手する」の雑魚モンスタは
	//　　オオカミ２匹にする。
	//　　またこの戦闘ラストでスキルを閃くようにする。
	//	※「▼錆びた剣を入手する」撃破イベントを以下に変更。

//	PlaySE(SE_TUTORIAL, 100, 0, 0, 0, 1.0f, 0)	//チュートリアル
	PlaySE( SE_SKILLLEARN , 80 , 0,  0, 0, 1.0f, 0)	//BGM無音なので音量少し控える

	//	ナレーション
//	Message("#1Cアドルは戦いの中で、新しい技（スキル）を閃いた。")
//	WaitPrompt()
	TalkPopup("UNDEF",0,5,0,0,0)
	{
		"#8S"
		"#-1W#4Cアドルは戦いの中で、新しいスキルを閃いた。#10W"
		"#8S"
	}
	// 《技#2Rスキル#R》
	Wait(10)
	WaitPrompt()
	WaitCloseWindow()

	//　　⇒ここで「スキル」のチュートリアル画像を表示する。

	//自動送り禁止
	ResetStopFlag(STOPFLAG_AUTOMESSAGE)

	// チュートリアル =================================================================================
	if ( !FLAG[SF_2NDSTART] ) {		// 2周目判定
		
		//自動送り禁止
		ResetStopFlag(STOPFLAG_AUTOMESSAGE)
		Wait(10)

		// 擬似フェードアウト表示
		Portrait_Anime(0 ,PR_ANIME_SCALE, 30.0f, 17.0f, 0, 0, 0)
		Portrait_Anime(0 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)
		FadeIn(FADE_BLACK, 0)
		WaitFade()

		// ポートレート表示
		PlaySE(SE_TUTORIAL, 100, 0, 0, 0, 1.0f, 0)		//チュートリアル
		Portrait_Anime(1, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, FADE_NORMAL)	// チュートリアル背景
		Portrait_Anime(2, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, FADE_NORMAL)
		Wait(FADE_NORMAL)
		Message2(1, TOPIC_BUTTUN_X, TOPIC_BUTTUN_Y, "", "", "", "", "", "", "", "", "", "")		//ボタン入力可能を提示
		WaitPrompt()
		Portrait_Anime(2, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f, FADE_NORMAL)

		// ポートレート表示
		PlaySE( SE_PAGE , 100 , 0,  0, 0, 1.0f, 0)		// SE：ページめくり
		Portrait_Anime(3, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, FADE_NORMAL)
		Wait(FADE_NORMAL)
		Message2(1, TOPIC_BUTTUN_X, TOPIC_BUTTUN_Y, "", "", "", "", "", "", "", "", "", "")		//ボタン入力可能を提示
		WaitPrompt()
		Portrait_Anime(1, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f, FADE_FAST)	// チュートリアル背景
		Portrait_Anime(3, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f, FADE_FAST)
		Wait(FADE_FAST)
		
		// 擬似フェードアウト削除
		FadeOut(FADE_BLACK, 0)
		WaitFade()
		
		Portrait_Close(0)
		Portrait_Close(1)
		Portrait_Close(2)
		Portrait_Close(3)

		//自動送り許可
		SetStopFlag(STOPFLAG_AUTOMESSAGE)
	
	}
	// ================================================================================================


	Wait(10)
	TalkPopup("UNDEF",0,3,STOPPER_PPOSX,STOPPER_PPOSY,0)
	{
		"#7C……この先も油断はできそうにない。"
		"#7C念のためにスキルをセットしておこう。"
	}
	WaitPrompt()
	WaitCloseWindow()

	FadeOut(FADE_BLACK,0)
	WaitFade()


//------------------------------------------------------------------------
//チュートリアル　スキルセット

	SetSkipScript("")		//スキップ禁止

	//自動送り許可
	SetStopFlag(STOPFLAG_AUTOMESSAGE)
	
	// ポートレートリリース
	Portrait_Close(-1)
	Portrait_Unload(-1)

	Wait(10)

	//特定の条件で覚えていない事がある？　念のため強制入手。
	GetSkill(PARTY_ADOL, SKILL_ADOL_SP_C1, 1)
	
	SetFlag(SF_CAMP_CANT_FORMATION,1)	// 編成メニュー禁止
	SetFlag(SF_CAMP_CANT_DIARY,1)		// 冒険日誌メニュー禁止
	SetFlag(SF_CAMP_CANT_MAP,1)			// 地図メニュー禁止
	SetFlag(SF_CAMP_CANT_EQUIP,1)		// 装備メニュー禁止
	SetFlag(SF_CAMP_CANT_SYSTEM,1)		// システムメニュー禁止
	SetFlag(SF_CAMP_CANT_ITEM,1)		// アイテムメニュー禁止
	SetFlag(SF_CAMP_CANT_SKILL,0)	//スキルメニュー解除

	SetFlag(GF_01MP7301_GET_SKILL,1)	// いい技を思いついた
	SetFlag(SF_CAMP_CLOSE_CHECK,1)	// キャンプ閉じ時にチュートリアル判定を行う
	
	// キャンプメニューを開く
	CampMenu(CM_CAMP)
	
	SetFlag(GF_01MP7301_SET_SKILL,1)	// スキルを装備した
	SetFlag(SF_CAMP_CLOSE_CHECK,0)			// キャンプ閉じ時にチュートリアル判定を行う　解除
	
	SetFlag(SF_CAMP_CANT_FORMATION,0)	// 編成メニュー解除
	SetFlag(SF_CAMP_CANT_DIARY,0)		// 冒険日誌メニュー解除
	SetFlag(SF_CAMP_CANT_MAP,0)			// 地図メニュー解除
	SetFlag(SF_CAMP_CANT_EQUIP,0)		// 装備メニュー解除
	SetFlag(SF_CAMP_CANT_SYSTEM,0)		// システムメニュー解除
	SetFlag(SF_CAMP_CANT_ITEM,0)		// アイテムメニュー解除

	Wait(30)

	ChangeAnimation( "ADOL" , "ANI_EV_ZEEWAIT2", -1 , 1 )
	// 顔：苦痛
	ChangeSubAnimation(ADOL,SUBMOT_EYE,ANI_E_MAJI,1)
	ChangeSubAnimation(ADOL,SUBMOT_MOUTH,ANI_M_MAJI,1)

	MoveCameraAt( 0 , 284.858f , -1462.252f , 1.211f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.598f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 15.419f , 0 )	// 基本仰角
	RotateCamera( 0 , 233.254f , 0 )				// 角度
	ChangeCameraPers( 0 , 51.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	ExecuteCmd( 1000, MoveCameraAt, INTERPOLATE_SPHERE ,284.858f , -1462.252f , 1.583f , 140 )	// 注視点
	ExecuteCmd( 1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.897f , 140 )					// 基本距離
	ExecuteCmd( 1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -5.455f , 140 )					// 基本仰角
	ExecuteCmd( 1003, RotateCamera, INTERPOLATE_SPHERE , 104.597f , 140 )							// 角度
//	ExecuteCmd( 1004, ChangeCameraPers, INTERPOLATE_SPHERE , 60.000f , 0 )						// 視野角
//	ExecuteCmd( 1005, SetCameraZPlane, INTERPOLATE_SPHERE , 0.100f , 300.000f )					// ZPlane

	//MoveCameraAt( 0 , 284.858f , -1462.252f , 1.583f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 3.897f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -5.455f , 0 )	// 基本仰角
	//RotateCamera( 0 , 104.597f , 0 )				// 角度
	//ChangeCameraPers( 0 , 51.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	SetSkipScript("mp1110:EV_M01S011_ED")		//スキップ許可

//チュートリアルここまで
//------------------------------------------------------------------------

	FadeIn(FADE_BLACK,FADE_SLOW)

	// 顔：真剣
	ChangeSubAnimation(ADOL,SUBMOT_EYE,ANI_E_MAJI_S,1)
	
	LookSpd( "ADOL", 0.03, 0.03, 0.03 )
	Look( "ADOL" , 0.0f , -10.0f )
	//Look( "ADOL" , 0.0f , 20.0f )
	Wait(60)
	EmotionEx("ADOL", 0.00f,EMO_3DOT,0,5,1,1,1.15f )

	Wait(52)

	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	

	//	テキスト
	TalkPopup("UNDEF",0,3,STOPPER_PPOSX,STOPPER_PPOSY,0)
	{
		"#7C漂流したことで"
		"#7C身体#4R からだ#Rが疲弊しきっている……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//アドル、ダメージモーションEND
	ChangeAnimation( "ADOL" , "ANI_EV_ZEEWAIT2_E", -1 , 1 )

	//Look( "ADOL" , 0.0f , 20.0f )

	
	//	name2()
	TalkPopup("UNDEF",0,3,STOPPER_PPOSX,STOPPER_PPOSY,0)
	{
		"#7Cここに留まっているのも危険だ……"
		"#7Cとにかく奥へ向かってみよう。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "ADOL" , "ANI_EV_ZEEWAIT_E", -1 , 1 )


	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()
	Wait(15)

//終了処理ここから----------------------------------------------------

	CallFunc("mp1110:EV_M01S011_ED")
}

function "EV_M01S011_ED"
{
	SetSkipScript("")		//スキップ機能無効化

	RestoreEventState()

	Portrait_Close(  -1 )
	Portrait_Unload( -1 )

	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	CallFunc("system:reset_chrmot_ADOL")

	//マップパラメーターリセット
	ResetMapParam( -1 )

	//ボス戦終了処理
	SetFlag( SF_SETRAMSAVE, 1 )
	SetFlag( SF_BOSS_BATTLE, 0 )		//ボス戦終了
	SetFlag( SF_CANTSAVE, 0 )			//セーブ許可
	SetFlag(SF_CAMP_CANT_FORMATION, 0)	// キャンプメニュー：編成禁止解除
	SetFlag(SF_CANTUSE_SKILL ,0)	//SPゲージ溜まる

	SetFlag(SF_CAMP_CANT_FORMATION,0)	// 編成メニュー解除
	SetFlag(SF_CAMP_CANT_DIARY,0)		// 冒険日誌メニュー解除
	SetFlag(SF_CAMP_CANT_MAP,0)			// 地図メニュー解除
	SetFlag(SF_CAMP_CANT_EQUIP,0)		// 装備メニュー解除
	SetFlag(SF_CAMP_CANT_SYSTEM,0)		// システムメニュー解除
	SetFlag(SF_CAMP_CANT_ITEM,0)		// アイテムメニュー解除

	//フラグ処理
	SetFlag(GF_01MP7301_GET_SKILL,1)	// いい技を思いついた
	SetFlag(GF_01MP7301_SET_SKILL,1)	// スキルを装備した
	SetFlag(GF_01MP1110_BATTLE_WIN,1)	// オオカミを倒した
	//SetFlag( SF_MISSIONNO, MS_01_02 )	//★冒険メモ：島の奥へ向かってみよう。

	SetFlag(SF_CAMP_CANT_SKILL,0)	//スキルメニュー解除
	SetFlag(SF_CAMP_CANT_ITEM,0)		// アイテムメニュー解除

	SetFlag( GF_HELP_B04, 1 )	// チュートリアル：スキルの修得とセット
	SetFlag( GF_HELP_B05, 1 )	// チュートリアル：スキルの使い方

	CallFunc( "mp1110:init" )

	SetChrPos("PLAYER1",285.15f,-1462.09f,0.37f)
	Turn("PLAYER1",63.56f,360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	PlayBGM(BGM_FIELD_101, 15)	//

	MoveCameraAt( 0 , 285.150f , -1462.090f , 2.212f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 4.639f , 0 )	// 基本仰角
	RotateCamera( 0 , 116.443f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)
	//WaitFade()

//終了処理ここまで----------------------------------------------------
}


//仮
function "EV_M01S011B"
{

	SetStopFlag(STOPFLAG_EVENT)

		PlayBGM(BGM_FIELD_101, 0)

		//──────────────────────────────
		//　　※スキルを装備し、キャンプメニューを閉じるとイベント起動。
		//	テキスト
		TalkPopup("UNDEF",0,3,STOPPER_PPOSX,STOPPER_PPOSY,0)
		{
			"#7C漂流したことで"
			"#7C身体（からだ）が疲弊しきっている……"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	name2()
		TalkPopup("UNDEF",0,3,STOPPER_PPOSX,STOPPER_PPOSY,0)
		{
			"#7Cここに留まっているのも危険だ……"
			"#7Cとにかく奥へ向かってみよう。"
		}
		WaitPrompt()
		WaitCloseWindow()

		//　　操作許可(ここからは通常)
		//──────────────────────────────

	ResetStopFlag(STOPFLAG_EVENT)

}

//──────────────────────────────
//▼倒木を撤去する１(mp1110)
//──────────────────────────────
//　　アドルが漂着した浜辺に進み、
//　　倒木のＬＰ(必要人数表示)を調べるとイベント開始。
//　　フェードインして倒木を見上げている三人。

function "EV_M02S070"		//倒木を撤去する
{
//開始処理ここから----------------------------------------------------

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	LoadChr("Barbaross")	//"バルバロス船長"
	LoadChr("Dogi"	)		//"ドギ"			
	LoadChr("Paro"	)		//"リトル・パロ"	

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))

	//キャラ初期状態の設定			
	SetChrInfoFlag( "ADOL" , INFOFLAG_NOCHRATARI )
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL",255.92f, -1509.41f, 6.33f )
	Turn("ADOL",81.95f,360.0f)
	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	Look("ADOL" , -30 , 10 )

	SetChrInfoFlag( "LAXIA" , INFOFLAG_NOCHRATARI )
	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA",256.25f, -1508.13f, 6.28f )
	Turn("LAXIA",72.01f,360.0f)
	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("LAXIA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("LAXIA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	Look("LAXIA" , 0 , 10 )

	SetChrInfoFlag( "SAHAD" , INFOFLAG_NOCHRATARI )
	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD",254.30f, -1507.05f, 6.55f )
	Turn("SAHAD",13.28f,360.0f)
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_EXT1,ANI_E_LOOKC,1)
	Look("SAHAD" , 20 , 10 )

	SetChrInfoFlag( "Barbaross" , INFOFLAG_INVISIBLE )
	SetChrInfoFlag( "Barbaross" , INFOFLAG_NOCHRATARI )
	SetChrWork("Barbaross", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Barbaross",257.81f, -1506.65f, 6.16f )
	Turn("Barbaross",47.56f,360.0f)
	ChangeSubAnimation("Barbaross",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("Barbaross",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("Barbaross",SUBMOT_EXT1,ANI_E_LOOKC,1)

	SetChrInfoFlag( "Dogi" , INFOFLAG_INVISIBLE )
	SetChrInfoFlag( "Dogi" , INFOFLAG_NOCHRATARI )
	SetChrWork("Dogi", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Dogi",257.81f, -1506.65f, 6.16f )
	Turn("Dogi",47.56f,360.0f)
	ChangeSubAnimation("Dogi",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("Dogi",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("Dogi",SUBMOT_EXT1,ANI_E_LOOKC,1)

	SetChrWork("Paro", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag( "Paro" , INFOFLAG_INVISIBLE )
	SetChrInfoFlag( "Paro" , INFOFLAG_NOCHRATARI )
	SetChrInfoFlag( "Paro",INFOFLAG_FLING )
	SetChrPos("Paro", 257.30f, -1503.55f, 10.47f)
	Turn("Paro",  40.51f ,360.0f)


	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )

	// チュートリアルポートレート読み込み
	Portrait_Load(0, "system/black.itp" )		//擬似フェードアウト用
	Portrait_Create(0, 0, 0, 0, 0, 64,64, 0.0f, 0x00ffffff, 0x00000000)
	Portrait_Load(1, "visual/help/hp_00.itp" )	// 背景用
	Portrait_Create(1, HELP_POS_X, HELP_POS_Y, 0, 0, HELP_SCALE_X, HELP_SCALE_Y, 0.0f, 0x00ffffff, 0x00000000)
	Portrait_Load(2, "visual/help/hp_a24.itp" )	// help_a24：支援イベント
	Portrait_Create(2, HELP_POS_X, HELP_POS_Y, 0, 0, HELP_SCALE_X, HELP_SCALE_Y, 0.0f, 0x00ffffff, 0x00000000)

	//カメラ設定
	MoveCameraAt( 0 , 254.922f , -1508.517f , 8.456f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.900f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.768f , 0 )	// 基本仰角
	RotateCamera( 0 , 119.852f , 0 )				// 角度
	ChangeCameraPers( 0 , 45.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 4.000, 120.000 ,0.000 ,0.550 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp1110:EV_M02S070_ED")

//開始処理ここまで-----------------------------------------------

	FadeBGM(70,30)

	// カットX ----------------------------------------------------------------------------------------

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, 254.922f , -1508.517f , 7.896f, 60)				// 基本距離

	// フェードイン
	FadeIn(FADE_BLACK,FADE_SLOW)
	WaitFade()

	// カメラ待ち
	WaitThread(1000)

	ChangeAnimation( "LAXIA", "ANI_EV_UDEGUMI_S", -1, 1 )

	TalkPopup("LAXIA",0,1,0,0,0)
	{
		"#000e#000mこれは……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"SAHAD"
	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#000e#000mお？　どうやらデカい倒木が"
		"道を塞いじまってるみたいだな。"
	}
	WaitPrompt()
	WaitCloseWindow()

	HeadNo("LAXIA" , 1 , 30)

	//	"LAXIA"
	TalkPopup("LAXIA",0,1,0,0,0)
	{
		"#000e#000mとても通れそうにありませんね……"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("SAHAD" , "ADOL")

	//	"SAHAD"
	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#000e#000m目的地はこの先なんだろ？"
		"何とか撤去するしかないんじゃねーか。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("LAXIA" , "SAHAD")
	LookChr("ADOL" , "SAHAD")

	//	"LAXIA"
	TalkPopup("LAXIA",0,1,0,0,0)
	{
		"#000e#000mこ、これを……"
		"わたくしたちで、ですか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カットX ----------------------------------------------------------------------------------------

	CrossFade(FADE_CROSS)

	SetChrPos("ADOL", 255.37f, -1508.36f, 6.38f)
	Turn("ADOL", 176.23f, 360.0f)

	SetChrPos("LAXIA", 255.87f, -1506.99f, 6.32f)
	Turn("LAXIA", 79.12f, 360.0f)

	SetChrPos("SAHAD", 254.30f, -1507.05f, 6.55f)
	Turn("SAHAD", -66.54f, 360.0f)

	// カメラ
	MoveCameraAt( 0 , 255.451f , -1507.436f , 7.949f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.210f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -0.578f , 0 )	// 基本仰角
	RotateCamera( 0 , 84.824f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	LookChr("SAHAD" , "LAXIA")

	Wait(FADE_CROSS)

	ChangeAnimation("SAHAD", "ANI_EV_YARUKI_S", -1, 1)

	//	"SAHAD"
	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#080e#080mガハハ、とりあえず"
		"嬢ちゃんはそこで休んでな。\p"
		"まずはワシとアドルで……"
	}
	WaitPrompt()
	WaitCloseWindow()

//	FadeBGM(70,10)

	Wait(20)

	//	謎の声(ボイス)

	SetName("甲高い声")
	TalkPopup("Paro",0,3,400,50,0)
	{
		"#5281V#5Cアカイノ、ハッケン！\p"
		"#5282V#5Cあどる、ハッケン！"

	}
	WaitPrompt()
	WaitCloseWindow()
	SetName("")

	//　　アドルたちに「？」エモーション表示。
	EmotionEx("ADOL",0.05f,0,1,5,1,1,0.95f)	// ？
	EmotionEx("SAHAD",0.05f,0,1,5,1,1,1.15f)	// ？
	EmotionEx("LAXIA",0.05f,0,1,5,1,1,0.8f)	// ？

	ChangeAnimation("SAHAD", "ANI_EV_YARUKI_E", -1, 1)
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_SAD_S,1)
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_WAIT,1)
	Wait(40)
	ChangeAnimation( "SAHAD", "ANI_EV_TEBURI", -1, 1 )	// 手振り
	LookChr("ADOL", "LAXIA")

	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#1568V#062e#000mお？　嬢ちゃん、"
		"変な声を出さないでくれよ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	HeadNo("LAXIA" , 1 , 25)

	//	"LAXIA"
	TalkPopup("LAXIA",0,1,0,0,0)
	{
		"#0618V#000e#000mわ、わたくしではありません！\p"
		"#0619Vどうやら上空から"
		"聞こえてきたようですが……"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("LAXIA" , "Paro")

	// カットX ----------------------------------------------------------------------------------------


	//　　上空から一羽のオウムが降りてきて瓦礫の上にとまる。
	//　　もしくはアドルの腕に止まる？

	CrossFade(FADE_NORMAL)

	SetChrPos("ADOL", 255.85f, -1507.95f, 6.32f)
	Turn("ADOL", 176.23f, 360.0f)
	SetChrPos("LAXIA", 256.37f, -1506.87f, 6.25f)
	Turn("LAXIA", 103.74f, 360.0f)
	SetChrPos("SAHAD", 255.87f, -1505.79f, 6.34f)
	Turn("SAHAD", 55.42f, 360.0f)
	SetChrPos("SAHAD", 255.87f, -1505.79f, 6.34f)
	Turn("SAHAD", 55.42f, 360.0f)

	SetChrPos("Paro",253.43f,-1507.81f,13.38f)
	Turn("Paro",-96.72f,360.0f)
	SetChrInfoFlag("Paro" , INFOFLAG_FLING)
	SetChrInfoFlag("Paro" , INFOFLAG_NOATARI)

	MoveCameraAt( 0 , 253.250f , -1507.167f , 9.894f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.681f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -22.377f , 0 )	// 基本仰角
	RotateCamera( 0 , 88.378f , 0 )				// 角度
	ChangeCameraPers( 0 , 48.001f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -3.2f , 0 )				// ロール回転

//	PlaySE(SE_M02S070_01, 100, 0, 0, 0, 1.0f, 0)	//	羽ばたきループ
	ChangeAnimation("Paro", "ANI_FLY_RUN", -1, 1)
	ResetChrInfoFlag("Paro", INFOFLAG_INVISIBLE)
	//ExecuteCmd(1, MoveTo, "Paro", 253.60f, -1507.83f, 9.47f, 0.1f, 0.4f)
	ExecuteCmd(2, MoveZ, "Paro", 9.40f, 0, INTERPOLATE_COS, 60)

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_COS,  253.250f , -1507.167f , 9.150f , 120)					// 注視点
	//ExecuteCmd(1001, RotateCamera, INTERPOLATE_SPHERE, 71.366f, 100)		// 角度

	//MoveCameraAt( 0 , 253.250f , -1507.167f , 9.150f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 4.681f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -22.377f , 0 )	// 基本仰角
	//RotateCamera( 0 , 88.378f , 0 )				// 角度
	//ChangeCameraPers( 0 , 48.001f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , -3.2f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	LookChr("ADOL", "Paro")
	LookChr("SAHAD", "Paro")
	WaitThread(2)
	ChangeAnimation( "Paro" , "ANI_FLY_E", -1 , 1 )
	
//	PlaySE(SE_M02S070_02, 100, 0, 0, 0, 1.0f, 0)	//	羽ばたき終わり

	WaitThread(1000)
	WaitThread(1001)

	CrossFade(FADE_NORMAL)
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_WAIT,1)

	ChangeAnimation("Paro", "ANI_WAIT4", -1, 1)
	SetChrPos("Paro", 253.60f, -1507.83f, 9.40f)
	Turn("Paro", -96.72f, 360.0f)
	Look("Paro", 0, -30)

	MoveCameraAt( 0 , 254.448f , -1507.769f , 9.005f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.921f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 38.135f , 0 )	// 基本仰角
	RotateCamera( 0 , 326.226f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.001f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -4.6f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	LookChr("SAHAD", "Paro")

//	ChangeAnimation("Paro", "ANI_FLY2_E", -1, 1)

	Wait(FADE_NORMAL)

	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#1569V#000e#000mこいつは確か……\p"
		"#1570V船長殿が言葉を教えていた"
		"オウムじゃなかったか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"LAXIA"
	TalkPopup("LAXIA",0,2,0,0,0)
	{
		"#0620V#000e#000mええ、そのようです。\p"
		"#0621Vそういえば、あなた……"
		"名前は決まったのでしょうか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カットX ----------------------------------------------------------------------------------------

	CrossFade(FADE_NORMAL)
	MoveCameraAt( 0 , 253.716f , -1507.742f , 9.458f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.121f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 18.997f , 0 )	// 基本仰角
	RotateCamera( 0 , 13.117f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.001f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 11.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	SetChrPos("Paro", 253.59f, -1507.77f, 9.32f)
	Turn("Paro", -96.72f, 360.0f)

	Wait(FADE_NORMAL)

	SetName("オウム")
	TalkPopup("Paro",0,2,0,0,0)
	{
		"#5283V#5Cナマエ……\p"
		"#5284V#5Cオレサマ、ナマエ、“りとるぱろ”。"

	}
	WaitPrompt()
	WaitCloseWindow()
	SetName("")


	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 253.716f , -1507.742f , 9.458f , 200 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.421f, 200 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -13.926f , 200 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 39.588f  , 200 )

	//MoveCameraAt( 0 , 253.716f , -1507.742f , 9.458f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.421f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -13.926f , 0 )	// 基本仰角
	//RotateCamera( 0 , 39.588f , 0 )				// 角度
	//ChangeCameraPers( 0 , 40.001f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	//RollCamera( 0 , 11.0f , 0 )				// ロール回転


	VisualName("visual/chrname/cn_c202.itp", VN_NAMEVOICE, VN_CHRNAME_RB_X, VN_CHRNAME_RB_Y,VN_NPCNAME_TIME) //リトルパロ

	Wait(60)

	//時限式選択肢
	//◆SE無効化コマンド置換用
	SetFlag(TF_MENU_SELECT,0)
	MenuReset()
	MenuAdd( 1 , "" )
	MenuOpen( TF_MENU_SELECT , 0 ,0 , 0 , 0 , 0 , 0 )
	WaitMenu(VN_NPCNAME_SKIP) //ウェイトしたい数値
	MenuClose(0,0)

	if(FLAG[TF_MENU_SELECT] == 0 )
	{
		Wait(30)
		Wait(20)
	}

	// カットX ----------------------------------------------------------------------------------------

	CrossFade(FADE_CROSS)
	VisualNameEnd()

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	MoveCameraAt( 0 , 254.448f , -1507.769f , 9.005f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.921f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 38.135f , 0 )	// 基本仰角
	RotateCamera( 0 , 326.226f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.001f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , -4.6f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(FADE_CROSS)

	//	"SAHAD"
	SetName("")
	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#1571V#000e#000mおお、ちゃんと喋るじゃねーか。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"LAXIA"
	TalkPopup("LAXIA",0,2,0,0,0)
	{
		"#0622V#000e#000mリトル・パロ……"
		"それがあなたの名前なのですね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	TalkPopup("Paro",0,1,0,0,0)
	{
		"#5285V#5Cりとるぱろ、デンレイヤク。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　サハドに「？」エモーション表示。
	EmotionEx("SAHAD", 0.05f, 0, 1, 5, 1, 1, 1.0f)	// ？
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_SAD_CLOSE_S,1)

	Wait(40)
	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#1572V#062e#000mデンレイヤク？"
		"一体何のこった？"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	リトルパロ
	TalkPopup("Paro",0,1,0,0,0)
	{
		"#5286V#5Cデンレイヤク、"
		"#5Cイロイロ　ツタエル。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"LAXIA"
	TalkPopup("LAXIA",0,2,0,0,0)
	{
		"#0623V#000e#000mひょっとして“伝令役”の"
		"ことではないでしょうか。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	リトルパロ
	TalkPopup("Paro",0,1,0,0,0)
	{
		"#5287V#5Cオレサマ、ツタエル。"
		"#5Cエサ、モラウ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　突如、バサバサと翼をはためかせて
	//　　飛び去ってしまうリトルパロ。

//	PlaySE(SE_M02S070_03, 100, 0, 0, 0, 1.0f, 0)	//	飛び立つ
	ChangeAnimation("Paro", "ANI_FLY2_S", -1, 1)
	WaitAnimation2("Paro", -1, 1, "ANI_FLY2_S", 0)
	ExecuteCmd(1, MoveTo, "Paro", 251.52f, -1506.20f, 9.40f, 0.1f, 0.35f)
	ExecuteCmd(2, MoveZ, "Paro", 11.47f, 0, INTERPOLATE_COS, 80)
	Wait(60)
	SetChrInfoFlag("Paro", INFOFLAG_INVISIBLE)
	StopThread(1)
	StopThread(2)
	//ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 253.585f , -1507.692f , 10.312f , 80 )	// 注視点	

	WaitThread(1000)

//	FadeBGM(100,30)

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )

	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#000e#000mお？　行っちまったぞ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)

	// カットX ----------------------------------------------------------------------------------------

	CrossFade(FADE_FAST)
	LookReset("LAXIA")
	LookReset("ADOL")
	LookChr("SAHAD", "LAXIA")

	LookSpd("SAHAD" , 0.10, 0.10 , 0.10 )

	SetChrPos("ADOL", 255.52f, -1507.82f, 6.37f)
	Turn("ADOL", 170.30f, 360.0f)
	SetChrPos("LAXIA", 256.02f, -1507.01f, 6.30f)
	Turn("LAXIA", 103.74f, 360.0f)
	SetChrPos("SAHAD", 256.12f, -1505.67f, 6.30f)
	Turn("SAHAD", 47.53f, 360.0f)
	
	MoveCameraAt( 0 , 255.562f , -1507.002f , 7.750f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.798f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -1.447f , 0 )	// 基本仰角
	RotateCamera( 0 , 282.892f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(FADE_FAST)

	HeadNo("LAXIA" , 1 , 35)

	//	"LAXIA"
	TalkPopup("LAXIA",0,2,0,0,0)
	{
		"#011e#000mどうやら伝令役を務めてもらうには、"
		"まだまだ訓練が必要そうですね。"
	}
	WaitPrompt()
	WaitCloseWindow()


	//	"SAHAD"
	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#011e#000m仕方がねーな……"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("SAHAD" , "ADOL")
	ChangeAnimation( "SAHAD" , "ANI_EV_RYOTEKOSI_S", -1 , 1 )
	//	"SAHAD"
	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#012eよし、アドル！"
		"とりあえず作業に取り掛かるとしよーぜ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("ADOL" , "SAHAD")
	Wait(15)
	HeadYes("ADOL" , 1 , 20)
	Wait(30)

	//　　画面一旦フェードアウトしてメッセージ表示。
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	//	テキスト
	TalkPopup(UNDEF, 0, 3, STOPPER_PPOSX, STOPPER_PPOSY, 0)
	{
		"#7Cその後、アドルとサハドは"
		"#7C何とか倒木を撤去しようとしたが……\p"
		"#7C二人の力では巨大な倒木が動く気配はなく、"
		"#7Cいたずらに時間が過ぎていった。\p"
		"#7C一旦、漂流村へ戻って相談しようと"
		"#7C話がまとまった、その時──"
	}
	WaitPrompt()
	WaitCloseWindow()


	// カットX ----------------------------------------------------------------------------------------

	//　　画面フェードインして、
	//　　互いに向き合っているアドル、ラクシャ、サハド。

	SetChrPos("ADOL" , 253.20f, -1506.60f, 6.71f)
	Turn("ADOL" , 107.91f , 360.00f)
	SetChrPos("LAXIA" , 254.25f, -1505.57f, 6.50f )
	Turn("LAXIA" , 84.23f , 360.00f)
	SetChrPos("SAHAD" , 251.76f, -1505.45f, 6.71f)
	Turn("SAHAD" , -70.54f , 360.00f)

	ChangeAnimation( "LAXIA", "ANI_WAIT", -1, 1 )

	ResetChrInfoFlag( "Dogi" , INFOFLAG_INVISIBLE )
	ResetChrInfoFlag( "Barbaross" , INFOFLAG_INVISIBLE )

	SetChrPos("Barbaross" , 235.06f, -1490.48f, 7.55f)
	Turn("Barbaross" , -57.75f , 360.00f)
	LookChr("Barbaross" , "ADOL")
	SetChrPos("Dogi" ,238.42f, -1490.20f, 7.14f)
	Turn("Dogi" , -53.47f , 360.00f)
	LookChr("Dogi" , "ADOL")

	Wait(10)

	MoveCameraAt( 0 , 253.566f , -1505.788f , 7.979f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.940f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -0.660f , 0 )	// 基本仰角
	RotateCamera( 0 , 90.029f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 253.493f , -1505.538f , 7.979f , 120 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.940f , 120 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -0.946f , 120 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 109.220f , 120 )

	StopBGM(120)

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	SetChrWork("SAHAD", CWK_FORCELIPSYNC, 1)	// 強制クチパク
	Wait(30)
	ChangeAnimation( "SAHAD", "ANI_EV_RYOTEKOSI_TEBURI", -1, 1 )	// 両手腰手振り
	Wait(30)
	SetChrWork("SAHAD", CWK_FORCELIPSYNC, 0)	// 強制クチパク

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)


//	FadeBGM(70,10)

	//	男の声
	SetName("男の声")
	TalkPopup(UNDEF,0,2,400,50,0)
	{
		"#3658V#18Sおーい、アドル！"
	}
	WaitPrompt()
	WaitCloseWindow()
	SetName("")

//	FadeBGM(100,30)

	//　　３人に「！」エモーション表示。
	EmotionEx("ADOL", 0.0f,2,5,5,1,1,1.5f)	// ！
	EmotionEx("LAXIA", 0.0f,2,5,5,1,1,1.3f)	// ！
	EmotionEx("SAHAD", 0.0f,2,5,5,1,1,1.5f)	// ！
	ChangeAnimation( "SAHAD", "ANI_EV_RYOTEKOSI_E", -1, 1 )	// 両手腰


	SetParent("Paro", "Barbaross", "Null_paro")
	ChangeAnimation("Paro", "ANI_FLY3_WAIT", -1, 1)
	LookReset("Paro")
	
	Wait(30)
	WaitAnimation2("SAHAD", -1, 1, "ANI_EV_RYOTEKOSI_E", 0)
	LookChr("ADOL" , "Dogi")
	LookChr("LAXIA" , "Dogi")
	LookChr("SAHAD" , "Dogi")
	Turn("SAHAD", 179.32f, 8.0f)
	
	ExecuteCmd(1, MoveTo, "Barbaross" , 249.94f, -1501.47f, 6.33f , 0.1f , 0.20f )
	Wait(10)
	ExecuteCmd(1, MoveTo, "Dogi" ,251.01f, -1500.01f, 6.07f , 0.1f , 0.20f )	

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 253.389f , -1505.171f , 7.979f , 60 )					// 注視点
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.940f, 60 )					// 基本距離
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -2.379f , 60 )					// 基本仰角
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 69.971f , 60 )					// 角度

	Wait(30)

	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	Wait(20)

	TalkPopup("LAXIA",0,1,0,0,0)
	{
		"#000e#000mあれは……"
	}
	WaitPrompt()
	WaitCloseWindow()


	//　　ドギとバルバロスが歩いてくるのを見せて
	//　　一旦画面フェードアウト。

	Wait(20)

	PlayBGM(BGM_EVENT_004, 0)
	FadeBGM(100, 0)

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	StopThread(1)
	StopThread(2)

	//　　アドル、ラクシャ、サハドがバルバロス＆ドギと
	//　　向き合って会話している状態に再配置。
	//　　可能ならばリトルパロは船長の肩に止まらせる。

	SetChrPos("ADOL", 253.35f, -1505.88f, 6.63f)
	Turn("ADOL", -167.15f, 360.0f)
	SetChrPos("LAXIA", 254.25f, -1505.57f, 6.50f)
	Turn("LAXIA", 153.48f, 360.0f)
	SetChrPos("SAHAD", 252.38f, -1505.00f, 6.59f)
	Turn("SAHAD", -120.18f, 360.0f)
	SetChrPos("Barbaross" , 252.27f, -1503.54f, 6.39f )
	Turn("Barbaross" , -56.31f , 360.00f)
	SetChrPos("Dogi" ,253.71f, -1503.25f, 6.22f )
	Turn("Dogi" , 5.24f , 360.00f)
	SetChrPos("Paro" ,252.09f, -1503.75f, 8.14f )
	Turn("Paro" , -47.05f , 360.00f)
	ChangeAnimation("Paro", "ANI_FLY3_E", -1, 1)
	
	LookChr("LAXIA" , "Barbaross")
	LookChr("ADOL" , "Barbaross")
	LookChr("Dogi" , "LAXIA")
	LookChr("Barbaross" , "LAXIA")

	ResetChrInfoFlag( "Paro" , INFOFLAG_INVISIBLE )
	
	MoveCameraAt( 0 , 253.872f , -1504.743f , 8.238f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.822f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -1.864f , 0 )	// 基本仰角
	RotateCamera( 0 , 69.926f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(20)

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, 253.872f , -1504.743f , 7.938f, 50)					// 注視点

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	FadeIn(FADE_BLACK,FADE_FAST)
	WaitFade()

	WaitThread(1000)

	ChangeAnimation( "LAXIA", "ANI_EV_TEBURI", -1, 1 )

	TalkPopup("LAXIA",0,1,0,0,0)
	{
		"#000e#000m……それではリトル・パロに聞いて"
		"駆けつけてくれたのですか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	HeadYes("Dogi" , 1 , 25)

	//	"Dogi"
	TalkPopup("Dogi",0,2,0,0,0)
	{
		"#011e#000mま、そういうこった。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeSubAnimation("Dogi",SUBMOT_EYE,ANI_E_CLOSE_E,1)

	//　　バルバロスがパロを見やる。

	Look("Barbaross" , 40 , 0)

	TalkPopup("Barbaross",0,2,0,0,0)
	{
		"#000e#000mフフ、早速役に立ってくれたようだな。\p"
		"この状況で連絡を取り合うには"
		"彼は欠かせない存在になるかもしれん。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("SAHAD" , "Paro")

	//	"SAHAD"
	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#000e#000m驚いたぞ、お前、"
		"なかなかデキるヤツだったんだな。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	リトルパロ
	TalkPopup("Paro",0,2,0,0,0)
	{
		"#5Cイロイロ　シラセテヤル。"
		"#5Cアリガタク　オモウガヨイ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Dogi" , "Paro")

	//	name2()
	TalkPopup("Paro",0,2,0,0,0)
	{
		"#5Cダカラ、エサ、ヨコセ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	EmotionEx("LAXIA", 0.00f, EMO_TARA, 0, 5, 1, 1, 1.0f )	// 「冷や汗」

	Wait(40)

	ChangeAnimation( "LAXIA", "ANI_EV_UDEGUMI_S", -1, 1 )
	
	//　　ラクシャに冷や汗エモーションを表示。
	TalkPopup("LAXIA",0,1,0,0,0)
	{
		"#000e#000mせ、船長が教えたにしては、"
		"言葉づかいが荒い気もするのですが……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	リトルパロ
	TalkPopup("Paro",0,2,0,0,0)
	{
		"#5Cサハド、オオザッパ！"
		"#5Cラクシャ、オッカナイ！"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeSubAnimation("Dogi",SUBMOT_EYE,ANI_E_CLOSE_S,1)
	ChangeAnimation( "Dogi", "ANI_EV_RYOTEKOSI_S", -1, 1 )
	LookReset("Dogi")

	//	"SAHAD"
	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#000e#000mお？"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookReset("Barbaross")

	//	"Barbaross"
	TalkPopup("Barbaross",0,2,0,0,0)
	{
		"#011e#000mふむ……"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Barbaross" , "Dogi")
	LookChr("ADOL" , "Dogi")
	LookChr("SAHAD" , "Dogi")
	LookChr("LAXIA" , "Dogi")

	ChangeSubAnimation("Barbaross",SUBMOT_EYE,ANI_E_CLOSE_E,1)

	//　　ドギを見やるアドル、ラクシャ、バルバロス。

	Wait(30)

	EmotionEx("Dogi", 0.0f, "EMO_3DOT", 0, 5, 1, 1, 1.0f)	// 「…」

	Wait(52)

	TalkPopup("Dogi",0,2,0,0,0)
	{
		"#000mあー、俺が話しかけるうちに"
		"色々と覚えちまったみたいでな……\p"
		"#062e#000mうっかりすると、いらんことまで"
		"伝えられちまいそうだ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　アドル、ラクシャ、サハドに冷や汗エモーション。
	EmotionEx("ADOL", 0.00f, EMO_TARA, 0, 5, 1, 1, 1.0f )	// 「冷や汗」
	EmotionEx("LAXIA", 0.00f, EMO_TARA, 0, 5, 1, 1, 1.0f )	// 「冷や汗」
	EmotionEx("SAHAD", 0.00f, EMO_TARA, 0, 5, 1, 1, 1.0f )	// 「冷や汗」

	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_SAD_CLOSE_S,1)
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_SAD_CLOSE_S,1)

	Wait(40)

	LookReset("LAXIA")
	HeadNo("LAXIA" ,1 , 25 )
	TalkPopup("LAXIA",0,1,0,0,0)
	{
		"#000e#000mそ、それは……お互いに"
		"気をつけたほうがよさそうですね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Dogi" , "LAXIA")
	ChangeAnimation( "Dogi", "ANI_EV_RYOTEKOSI_E", -1, 1 )

	//	"Dogi"
	TalkPopup("Dogi",0,2,0,0,0)
	{
		"#000mお、おう。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Dogi" , "ADOL")
	ChangeAnimation( "Dogi", "ANI_EV_TEBURI", -1, 1 )	// 手振り

	TalkPopup("Dogi",0,2,0,0,0)
	{
		"#000e#000m……それはそうとアドル。"
		"こいつが通り道を塞いでいる倒木か？"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT_S,1)
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_WAIT_S,1)

	//　　カメラ引いて大木をフレームインさせる。
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, 253.932f , -1503.741f , 8.118f , 70)					// 注視点
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE, 3.022f, 70)					// 基本距離
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE, -3.293f, 70)					// 基本仰角
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE, 140.412f, 70)					// 角度

	LookChr("Barbaross" , "ADOL")

	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	//選択肢
	SetFlag(TF_MENU_SELECT,0)
	MenuReset()
	MenuType(MENUTYPE_POPUP)
	MenuAdd(1,"ああ、力を貸してくれ")
	MenuAdd(2,"この人数でも骨が折れそうだ")
	MenuOpen( TF_MENU_SELECT , -1 , ADOLMENU_PPOSY , -2 , -2 , 10 , 0)
	WaitMenu(0)
	MenuClose(10,0)

	//─────────────────────────
	//	⇒ああ、力を貸してくれ
	if (FLAG[TF_MENU_SELECT] == 1){
		SetChrWork("ADOL", CWK_FORCELIPSYNC, 1)
		ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_S, 1)
		HeadYes("ADOL", 1, 25)
		Wait(15)
		ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_E, 1)
		SetChrWork("ADOL", CWK_FORCELIPSYNC, 0)
		Wait(20)
		TalkPopup("Dogi",0,1,280,260,0)
		{
			"#000e#000mもちろんだ。"
			"そのために来たんだからな。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	//	⇒この人数でも骨が折れそうだ
	if (FLAG[TF_MENU_SELECT] == 2){
		SetChrWork("ADOL", CWK_FORCELIPSYNC, 1)
		ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_S, 1)
		HeadNo("ADOL", 1, 35)
		Wait(30)
		ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_E, 1)
		SetChrWork("ADOL", CWK_FORCELIPSYNC, 0)
		Wait(20)
		TalkPopup("Dogi",0,1,0,0,0)
		{
			"#000e#000mおいおい、誰に向かって"
			"言ってやがるんだ？"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	//─────────────────────────
//	CrossFade(FADE_NORMAL)
//	MoveCameraAt(0, 252.484f, -1505.490f, 8.028f, 0)	// 注視点
//	ChangeCameraDistance(0, 4.745f, 0)		// 基本距離
//	ChangeCameraElevation(0, 3.280f, 0)	// 基本仰角
//	RotateCamera(0, 131.818f, 0)				// 角度
//	ChangeCameraPers(0, 60.000f, 0)			// 視野角
//	SetCameraZPlane(0.100f, 300.000f)			// ZPlane
//	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

//	Wait(FADE_NORMAL)
	ChangeAnimation( "Dogi", "ANI_EV_YARUKI_S", -1, 1 )	// こぶしたたきつける

	TalkPopup("Dogi",0,1,280,260,0)
	{
		"#000e#000mこのドギ様が来たからには"
		"百人力だと思ってくれていいぜ。"
	}

	WaitPrompt()
	WaitCloseWindow()

	//	"Barbaross"
	TalkPopup("Barbaross",0,2,320,260,0)
	{
		"#000e#000mふむ、早速始めるとしようか。"
	}
	WaitPrompt()
	WaitCloseWindow()

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

		//画面フェードアウト、[支援イベント]チュートリアル画像を表示。
		//（１周目のみ）help_a24：支援イベント

	// チュートリアル =================================================================================
	if ( !FLAG[SF_2NDSTART] ) {		// 2周目判定
		
		SetEnvSEPlayState(-1, 0)

		//自動送り禁止
		ResetStopFlag(STOPFLAG_AUTOMESSAGE)
		Wait(10)

		// 擬似フェードアウト表示
		Portrait_Anime(0 ,PR_ANIME_SCALE, 30.0f, 17.0f, 0, 0, 0)
		Portrait_Anime(0 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)
		FadeIn(FADE_BLACK, 0)
		WaitFade()

		// ポートレート表示
		PlaySE(SE_TUTORIAL, 100, 0, 0, 0, 1.0f, 0)		//チュートリアル
		Portrait_Anime(1, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, FADE_NORMAL)	// チュートリアル背景
		Portrait_Anime(2, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, FADE_NORMAL)
		Wait(FADE_NORMAL)
		Message2(1, TOPIC_BUTTUN_X, TOPIC_BUTTUN_Y, "", "", "", "", "", "", "", "", "", "")		//ボタン入力可能を提示
		WaitPrompt()
		Portrait_Anime(1, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f, FADE_FAST)	// チュートリアル背景
		Portrait_Anime(2, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f, FADE_FAST)
		Wait(FADE_FAST)
		Portrait_Close(1)
		Portrait_Close(2)
		
		// 擬似フェードアウト削除
		FadeOut(FADE_BLACK, 0)
		WaitFade()
		Portrait_Close(0)

		//自動送り許可
		SetStopFlag(STOPFLAG_AUTOMESSAGE)

		SetEnvSEPlayState(-1, 1)

	}
	// ================================================================================================

		//チュートリアル抜けると操作許可状態に。
		//周囲にストッパーを設置して他のメンバーを配置。
		//障害のＬＰを調べると支援イベントのUIを表示する。
		//支援要請を実行すると下記のイベントへ接続。

//終了処理ここから----------------------------------------------------
	CallFunc("mp1110:EV_M02S070_ED")
}

function "EV_M02S070_ED"
{
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//モンスターを復帰
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラクター初期化
	CallFunc("system:reset_chrmot_ADOL")
	CallFunc("system:reset_chrmot_LAXIA")
	CallFunc("system:reset_chrmot_SAHAD")

	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//マップパラメーターリセット
	ResetMapParam( -1 )

	//自動送り許可
	SetStopFlag(STOPFLAG_AUTOMESSAGE)
	
	// ポートレートリリース
	Portrait_Close(-1)
	Portrait_Unload(-1)

	// ルックポイント切り替え
	SetChrWork("LP_STOP_1110_1113", CWK_CHECKOFF, 1)		// 普通のルックポイントをオフに
	SetChrWork("CP_STOP_1110_1113", CWK_CHECKOFF, 0)		// 協力イベントルックポイントをオンに

	//マップマーカー
			
	// 協力イベントのマーカーもセット
	SetMapMarker( SMI_COOPEVENT, PAGE_F001, REMOVE_OBJ_1110CE, 251.470f , -1509.579f , 6.097f, 251.470f , -1509.579f, COOPEVID_MP1110, MN_F_SOUTHWEST_PLANE_MP1110,0)

	//フラグ
	SetFlag( GF_02MP1110_REMOVE_OBSTACLE_1ST, 1 )	// 倒木を撤去した の前半を見た
	//SetDiaryCharaFlag( DRCHA_PARO, DRCHA_FLAG_OPEN, 1 )		//★人物メモ：合流時に登録（リトル・パロ） ->  （★パッチ1.01）名前が判明した後に移動
	SetFlag( GF_HELP_A24, 1 )	// チュートリアル：支援イベント

	CallFunc( "mp1110:init" )

	SetChrPos("LEADER",256.54f, -1504.31f, 6.13f )
	Turn("LEADER",39.70f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )
	PlayBGM(BGM_EVENT_004, 0)

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	//カメラ位置復帰or初期位置設定
	MoveCameraAt( 0 , 256.545f , -1504.311f , 8.007f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 16.495f , 0 )	// 基本仰角
	RotateCamera( 0 , 140.349f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)
	//WaitFade()


//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//▼倒木を撤去する２(mp1110)
//──────────────────────────────

function "EV_M02S071"		//倒木を撤去する２
{
//開始処理ここから----------------------------------------------------

	CallFunc("system:solo_event_begin")

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	LoadChr("Paro"	)		//"リトル・パロ"	

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定			
	SetChrInfoFlag( "ADOL" , INFOFLAG_NOCHRATARI )
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL",256.09f, -1509.04f, 6.31f )
	Turn("ADOL",77.30f,360.0f)
	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("ADOL")

	SetChrInfoFlag( "LAXIA" , INFOFLAG_NOCHRATARI )
	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA",255.03f, -1507.95f, 6.43f )
	Turn("LAXIA",59.86f,360.0f)
	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("LAXIA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("LAXIA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("LAXIA")

	SetChrInfoFlag( "SAHAD" , INFOFLAG_NOCHRATARI )
	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD",254.67f, -1509.81f, 6.46f )
	Turn("SAHAD",48.02f,360.0f)
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("SAHAD")

	SetChrWork("Paro", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag( "Paro" , INFOFLAG_INVISIBLE )
	SetChrInfoFlag( "Paro" , INFOFLAG_NOCHRATARI )
	SetChrInfoFlag( "Paro",INFOFLAG_FLING )
	SetChrPos("Paro", 257.30f, -1503.55f, 10.47f)
	Turn("Paro",  40.51f ,360.0f)
	SetChrInfoFlag( "Paro" , INFOFLAG_INVISIBLE )

	MapAnime( "mp1110_stop01" , "open" )

	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )
	PlayBGM(BGM_EVENT_004, 0)

	//カメラ設定
	MoveCameraAt( 0 , 252.511f , -1510.330f , 7.458f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 6.022f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 5.709f , 0 )	// 基本仰角
	RotateCamera( 0 , 122.157f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	ChangeAnimation( "LAXIA", "ANI_EV_ZEEWAIT_N", -1, 1 )
	ChangeAnimation("SAHAD", "ANI_EV_ZEEWAIT_N", -1, 1)
	ChangeAnimation("ADOL", "ANI_EV_ZEEWAIT_N", -1, 1)
	
//	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 252.511f , -1510.330f , 7.458f , 120 )	// 注視点
//	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 6.022f , 120 )		// 基本距離
//	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 5.709f , 120 )	// 基本仰角
//	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 122.157f , 120 )				// 角度

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 120.000 ,1.000 ,0.550 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp1110:EV_M02S071_ED")

//開始処理ここまで-----------------------------------------------

	Wait(10)

	　	//チュートリアル抜けると操作許可状態に。
	　	//周囲にストッパーを設置して他のメンバーを配置。
	　	//障害のＬＰを調べると支援イベントのUIを表示する。
	　	//支援要請を実行すると下記のイベントへ接続。

	　	//画面暗転して下記のメッセージを表示。

	//　　画面フェードアウト。
	//　　暗転のまま以下のメッセージを表示。
	//	テキスト
//	TalkPopup(UNDEF, 0, 3, STOPPER_PPOSX, STOPPER_PPOSY, 0)
//	{
//		"#7Cドギやバルバロスの助力を得ても、"
//		"#7C巨大な倒木の撤去は難航した。\p"
//		"#7C最終的には戸惑いながら"
//		"#7Cラクシャも手伝いに加わり……\p"
//		"#7C全員泥だらけになりながらも、"
//		"#7C何とか道を切り拓くのだった。"
//	}
//	WaitPrompt()
//	WaitCloseWindow()


	FadeBGM(70,30)

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	//　　画面フェードインして、倒木が撤去された道を映し出す。
	//　　そこを眺めているアドル、ラクシャ、サハド。
	//　　船長とドギはすでに村へ帰り、ここにはいない状態。

	TalkPopup("SAHAD",0,0,0,0,0)
	{
		"#000e#000mうへぇ、さすがに疲れちまったぜ……"
	}
	WaitPrompt()
	WaitCloseWindow()

//	HeadNo("LAXIA" , 1 , 35)

	//	"LAXIA"
	TalkPopup("LAXIA",0,0,0,0,0)
	{
		"#000e#000mわ、わたくしもです……\p"
		"でも、ようやくこれで"
		"先へ進むことができそうですね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "LAXIA", "ANI_ZEEWAIT_E", -1, 1 )
	ChangeAnimation("SAHAD", "ANI_ZEEWAIT_E", -1, 1)
	ChangeAnimation("ADOL", "ANI_ZEEWAIT_E", -1, 1)
	Turn("SAHAD" , -154.58f , 8.00f)

	TalkPopup("SAHAD",0,0,0,0,0)
	{
		"#020e#080mガハハ、船長たちが来なかったら、"
		"一体どうなっていたことやら……"
	}
	WaitPrompt()
	WaitCloseWindow()

	Turn("LAXIA" , -11.50f , 10.00f)

	//	"LAXIA"
	TalkPopup("LAXIA",0,0,0,0,0)
	{
		"#000e#000m今後も進めない場所があった場合、"
		"手伝いが必要になるかもしれません。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "LAXIA", "ANI_EV_UDEGUMI_S", -1, 1 )

	TalkPopup("LAXIA",0,0,0,0,0)
	{
		"もし漂流者の方が見つかったら、"
		"協力してもらえるといいのですが……"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "SAHAD" , "ANI_EV_RYOTEKOSI_S", -1 , 1 )

	//	"SAHAD"
	TalkPopup("SAHAD",0,0,0,0,0)
	{
		"#010e#000mまあ、こうして"
		"地道にやっていくしかないな。"
	}
	WaitPrompt()
	WaitCloseWindow()

	PlayVoice(Y8V_5247,"Paro",100)	//あどる！

	//	リトルパロの声
	TalkPopup("Paro",0,3,240,10,0)
	{
		"#5Cアドル！　アドル！"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　空から降下してアドルの腕か近くにとまるパロ。
	
	// クロスフェード
	CrossFade(FADE_NORMAL)
	
	// カメラ
	MoveCameraAt( 0 , 255.372f , -1509.343f , 8.198f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.562f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.602f , 0 )	// 基本仰角
	RotateCamera( 0 , 20.763f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	
	// 位置調整・表情・モーション
	SetChrPos("ADOL", 256.09f, -1509.04f, 6.31f)
	Turn("ADOL", 95.07f, 360.0f)
	SetChrPos("LAXIA", 254.57f, -1508.55f, 6.49f)
	Turn("LAXIA", -50.58f, 360.0f)
	SetChrPos("SAHAD", 254.67f, -1509.81f, 6.46f)
	Turn("SAHAD", -122.60f, 360.0f)
	SetChrPos("Paro", 256.09f, -1509.04f, 7.81f)
	Turn("Paro", 95.07f, 360.0f)
	
	LookChr("ADOL", "Paro")
	LookChr("LAXIA", "Paro")
	LookChr("SAHAD", "Paro")

	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_WAIT,1)

	ResetChrInfoFlag( "Paro" , INFOFLAG_INVISIBLE )
	ChangeAnimation("Paro", "ANI_FLY2_WAIT", -1, 1)
	ChangeAnimation("ADOL", "ANI_EV_PARO_S", -1, 1)
	SetParent("Paro", "ADOL", "Null_Rhand3")

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 255.300f , -1509.414f , 7.958f , 75 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.562f , 75 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 2.268f , 75 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 41.110f , 75 )
	
	// フェード待ち
	Wait(FADE_NORMAL)

	ChangeAnimation("Paro", "ANI_FLY2_E", -1, 1)
	
	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	
	ChangeAnimation( "LAXIA", "ANI_EV_UDEGUMI_E", -1, 1 )	// 腕組
	
	TalkPopup("LAXIA",0,2,0,0,0)
	{
		"#000e#000mリトル・パロ……あなた、"
		"まだこの辺りにいたのですか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Paro", "LAXIA")

	//	リトルパロ
	TalkPopup("Paro",0,2,0,0,0)
	{
		"#5Cオレサマ、ソラカラミタ。"
		"#5Cオシエテヤル。\p"
		"#5Cアリガタク　オモエ！"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)

//-- 周辺の地図登録システムメッセージ --------------------------------

	PlaySE(SE_EV_POINT, 100, 0, 0, 0, 1.0f, 0)	//イベントポイント登録
	Message("#4C周辺のイベントポイントが地図に記された。")
	WaitPrompt()
	WaitCloseWindow()

//	ChangeAnimation( "SAHAD", "ANI_EV_RYOTEKOSI_S", -1, 1 )	// 両手腰
	Wait(10)

	//	"SAHAD"
	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#000e#000mコイツは……"
		"ここに何があるってんだ？"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Paro", "SAHAD")

	//	リトルパロ
	TalkPopup("Paro",0,2,0,0,0)
	{
		"#5Cシラネーナ！\p"
		"#5Cオレサマ、トリ。"
		"#5Cナニカハ　ワカラナイ。\p"
		"#5Cジブンデ　シラベロ！"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　言い捨てて飛び去って行くリトルパロ。

	LookReset("Paro")
	ChangeAnimation("Paro", "ANI_FLY2_S", -1, 1)
	WaitAnimation2("Paro", -1, 1, "ANI_FLY2_S", 0)

//	ExecuteCmd(1, MoveZ, "Paro", 10.94f, 0, INTERPOLATE_COS, 200)

	Wait(30)

	// カットX ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_NORMAL)

	MoveCameraAt( 0 , 256.300f , -1509.401f , 8.258f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.862f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -0.130f , 0 )	// 基本仰角
	RotateCamera( 0 , 35.379f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	SetChrPos("ADOL", 256.40f, -1509.09f, 6.30f)
	Turn("ADOL", 141.26f, 360.0f)
	SetChrPos("LAXIA", 254.57f, -1508.55f, 6.49f)
	Turn("LAXIA", -174.94f, 360.0f)
	SetChrPos("SAHAD", 255.18f, -1509.73f, 6.39f)
	Turn("SAHAD", 169.89f, 360.0f)

	ChangeAnimation("ADOL", "ANI_EV_PARO_E", -1, 1)
	SetParent("Paro", "", "")
	ChangeAnimation("Paro", "ANI_FLY_RUN", -1, 1)

	SetChrPos("Paro", 256.60f, -1505.59f, 9.79f)
	Turn("Paro", 123.49f, 360.0f)
	LookReset("Paro")

	
	// 移動
	ExecuteCmd(1, MoveTo, "Paro", 229.73f, -1483.55f, 9.79f, 0.1f, 0.3f)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 255.729f , -1508.863f , 7.998f , 140 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.622f , 140 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 0.158f , 140 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 132.778f , 140 )
	
	Wait(30)

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	//MTDのSE鳴らさない
	SetFlag( SF_NOUSE_MTDSE, 1 )

	PlayVoice(Y8V_1411,"SAHAD",100)	//ガハハ（控えめな笑い）
	
	TalkPopup("SAHAD",0,2,0,0,0)
	{
		"#021e#080mガハハ、おかしなヤツだ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookReset("LAXIA")
	Turn("LAXIA", -68.35f, 8.0f)

	//	"LAXIA"
	TalkPopup("LAXIA",0,2,0,0,0)
	{
		"#011e#000mまあ、断片的な"
		"情報でもありがたいですね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("LAXIA", "ADOL")
	ChangeAnimation( "LAXIA", "ANI_EV_TEBURI", -1, 1 )	// 手振り

	//	"LAXIA"
	TalkPopup("LAXIA",0,2,0,0,0)
	{
		"#012e#000mさて、もう大丈夫です。"
		"#000mそろそろ出発いたしましょう。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　アドル頷いて操作許可。
	LookChr("ADOL", "LAXIA")
	Wait(12)
	HeadYes("ADOL", 1, 25)	// キャラ, うなずき回数, 速さ

	Wait(35)

	StopBGM(90)
	SetEnvSEPlayState(-1, 0)	//環境SE全停止
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()


//終了処理ここから----------------------------------------------------
	CallFunc("mp1110:EV_M02S071_ED")
}

function "EV_M02S071_ED"
{
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//モンスターを復帰
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラクター初期化
	CallFunc("system:reset_chrmot_ADOL")
	CallFunc("system:reset_chrmot_LAXIA")
	CallFunc("system:reset_chrmot_SAHAD")

	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//マップパラメーターリセット
	ResetMapParam( -1 )

	//自動送り許可
	SetStopFlag(STOPFLAG_AUTOMESSAGE)

	FixPlayerChr(PARTY_NONE)	// アドルおひとり様モードOFF

	//フラグ
	SetFlag( GF_02MP1110_REMOVE_OBSTACLE , 1 )			// 倒木を撤去した
	SetFlag( GF_HELP_A24, 1 )	// チュートリアル：支援イベント
	SetDiaryFlag( DF_SUBEV_1110_REMOVE_WOOD, 1 )// ★名知らず海岸にあった巨大な倒木を撤去した。

	//マーカーセット
//	DelMapMarker( SMI_EVENTPT_MAIN,PAGE_F001,REMOVE_OBJ_1110, 0, 0)
	
	//リトルパロのマーカー登録
//	SetMapMarker(SMI_SYMBOL ,PAGE_F005, MARKER_EV_M02S080, 515.95f, -1607.85f, 0.13f, 515.95f, -1607.85f,MARKER_EV_M02S080,MN_F_MP1133,0)	//漂流者：アリスン
	//SetMapMarker( SMI_SUBEVENT ,PAGE_F005, MARKER_EV_LC_MP1132, 248.87f, -1574.29f, 6.64f, 248.87f, -1574.29f,MARKER_EV_LC_MP1132, MN_F_MP1132,0)	//ロケ　：碧岩
	SetMapMarker( SMI_SUBEVENT, PAGE_F005, REMOVE_OBJ_1132, 351.66f,-1543.02f,-0.41f, 351.66f,-1543.02f, REMOVE_OBJ_1132, MN_F_MP1132,0)	//協力　：碧の珊瑚礁

	CallFunc( "mp1110:init" )

	SetChrPos("LEADER",257.81f, -1506.65f, 6.16f )
	Turn("LEADER",47.56f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )
	SetEnvSEPlayState(-1, 1)
	PlayBGM(BGM_1110, 0)

	//MTDのSE鳴らす
	SetFlag( SF_NOUSE_MTDSE, 0 )

	//カメラ位置復帰or初期位置設定
	MoveCameraAt( 0 , 257.810f , -1506.650f , 8.024f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 14.000f , 0 )	// 基本仰角
	RotateCamera( 0 , 135.346f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	CallFunc("system:camera_reset")

	//リトル・パロのボイス
	CallFunc("system:SetMarkerParoVoice")		//リトルパロのマーカー登録ボイス

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)
	//WaitFade()


//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//▼支援イベントNo.01
//	倒木を撤去する
//──────────────────────────────
function "SubEV_Sien01"
{

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()
	
	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	TurnTo( "LEADER", 251.44f, -1508.45f, 6.94f , 15.0f )

	SetFlag( TF_MENU_SELECT, 0 )
	YesNoMenu(TF_MENU_SELECT,"#7C支援要請を出しますか？",1)
	
	//──────────────────────
	//　⇒支援要請を出す
	if( FLAG[TF_MENU_SELECT] )
	{
		//──────────────────────
		//	  　以下の流れに接続
		//──────────────────────
		
		FadeBGM(70, 30)

		//　　画面暗転して以下のメッセージ。
		FadeOut(FADE_BLACK,FADE_NORMAL)
		WaitFade()

		SetFlag( TF_MENU_SELECT, (rand() % 30) )
		
		//──────────────────────
		//	⇒ランダムＡ
		if( FLAG[TF_MENU_SELECT] < 10 )
		{
			//	ドギ（ボイス再生／表示なし）
			//	「おし、とっとと片付けるか！」
			PlayVoice(Y8V_3541,UNDEF,100)		// "おし、とっとと片付けるか！"
			TalkPopup("Dogi",0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
			{
				"おし、とっとと片付けるか！"
			}
			WaitPrompt()
			StopVoice(Y8V_3543, 25)
			WaitCloseWindow()
		}
		//	⇒ランダムＢ
		else if( FLAG[TF_MENU_SELECT] < 20 )
		{
			//	ドギ（ボイス再生／表示なし）
			//	「そんじゃあ作業を始めんぜ！」
			PlayVoice(Y8V_3542,UNDEF,100)		// "そんじゃあ作業を始めんぜ！"
			TalkPopup("Dogi",0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
			{
				"そんじゃあ作業を始めんぜ！"
			}
			WaitPrompt()
			StopVoice(Y8V_3543, 25)
			WaitCloseWindow()
		}
		//	⇒ランダムＣ
		else
		{
			//	ドギ（ボイス再生／表示なし）
			//	「さぁて、いっちょやろうや！」
			PlayVoice(Y8V_3543,UNDEF,100)		// "さぁて、いっちょやろうや！"
			TalkPopup("Dogi",0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
			{
				"さぁて、いっちょやろうや！"
			}
			WaitPrompt()
			StopVoice(Y8V_3543, 25)
			WaitCloseWindow()
		}
		//──────────────────────

		//──────────────────────
		//	バルバロス
		PlayVoice(Y8V_3713,UNDEF,100)		// 「うむ！」
		TalkPopup("Barbaross",0,3,420,175,0)
		{
			"#-1Wうむ！"
		}

		//	リトルパロ		
		PlayVoice(Y8V_5217,UNDEF,100)		// 「オー！」
		TalkPopup("Paro",1,3,360,240,0)
		{
			"#-1Wオー！"
		}

		// サハド
		PlayVoice(Y8V_1268,UNDEF,80)		// 「おうよっ！」（交代用）
		TalkPopup("SAHAD",2,3,150,230,0)
		{
			"#-1Wおうよっ！"
		}
		// ラクシャ
		PlayVoice(Y8V_0223,UNDEF,80)		// 「ええ！」（交代用）
		TalkPopup("LAXIA",3,3,60,185,0)
		{
			"#-1Wええ！"
		}
			
		WaitPrompt()
		ClosePrompt(0)
		ClosePrompt(1)
		ClosePrompt(2)
		ClosePrompt(3)
		WaitCloseWindow(0)
		WaitCloseWindow(1)
		WaitCloseWindow(2)
		WaitCloseWindow(3)
		//──────────────────────

		TalkPopup(UNDEF, 0, 3, STOPPER_PPOSX, STOPPER_PPOSY, 0)
		{
			"#7Cドギやバルバロスの助力を得ても、"
			"#7C巨大な倒木の撤去は難航した。\p"
			"#7C最終的には戸惑いながら"
			"#7Cラクシャも手伝いに加わり……\p"
			"#7C全員泥だらけになりながらも、"
			"#7C何とか道を切り拓くのだった。"
		}
		WaitPrompt()
		WaitCloseWindow()

		//　　障害物撤去ＳＥ
		PlaySE(SE_OBSTACLE_REMOVE, 100, 0, 0, 0, 1.0f, 0)		//障害物撤去

		Wait(80)

		MapAnime( "mp1110_stop01" , "open" )

		CallFunc("system:party_remove")

		// 協力イベントのマーカーも削除
		DelMapMarker( SMI_COOPEVENT, PAGE_F001, REMOVE_OBJ_1110CE, 0, 0)
		SetChrPos( "CP_STOP_1110_1113",-100000.00f,0.00f,0.00f)

		MoveCameraAt( 0 , 247.263f , -1515.581f , 9.045f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 13.524f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 5.043f , 0 )	// 基本仰角
		RotateCamera( 0 , 168.152f , 0 )				// 角度
		ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転

		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 247.339f , -1515.770f , 8.623f , 150 )	// 注視点
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 14.424f, 150 )		// 基本距離
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 8.588f , 150 )	// 基本仰角
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 109.553f , 150 )				// 角度

		//MoveCameraAt( 0 , 247.339f , -1515.770f , 8.623f , 0 )	// 注視点
		//ChangeCameraDistance( 0 , 14.424f , 0 )		// 基本距離
		//ChangeCameraElevation( 0 , 8.588f , 0 )	// 基本仰角
		//RotateCamera( 0 , 109.553f , 0 )				// 角度
		//ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
		//SetCameraZPlane( 0.100f , 300.000f )			// ZPlane
		//RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


		FadeIn(FADE_BLACK,FADE_FAST)
		WaitFade()
		
		//	アドル（ボイス再生／表示なし）
		//	「ありがとう、みんな！」

		PlaySE(SE_OBSTACLE_REMOVE_02, 100, 0, 0, 0, 1.0f, 0)
		TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
		{
			"#7C全員の力を合わせて、巨大な倒木を撤去した！"
		}

		Wait(30)
		//　　＞「▼支援イベント共通処理A」を呼び出す。
		PlayVoice(Y8V_0113,"ADOL",100)			// "ありがとう、みんな！"

		WaitPrompt()
		WaitCloseWindow()

		FadeOut(FADE_BLACK,FADE_FAST)
		WaitFade()

		StopThread(1000)
		StopThread(1001)
		StopThread(1002)
		StopThread(1003)

		SetFlag( TF_MENU_SELECT, 1 )	//支援イベントとして終了
	
	}
	//	⇒やめる
	else
	{
		SetFlag( TF_MENU_SELECT, 0 )	//ストッパーとして終了
	}
	//──────────────────────

//終了処理ここから----------------------------------------------------

	//ストッパーとして終了
	if( FLAG[TF_MENU_SELECT] == 0 )
	{
		CrossFade(FADE_CROSS)
		SetStopFlag(STOPFLAG_NOCHARACLIP)
		
		//イベント後の再配置
		ResetPartyPos()
		ResetFollowPoint()
		//Wait(1) //処理待ち用
		
		RestoreCamera(0,0)
		ResetCameraObserver(0)
		ResetCameraZPlane()
		Wait(FADE_CROSS)
		
		ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
	}
	//支援イベントとして終了
	else
	{
		SetStopFlag(STOPFLAG_NOCHARACLIP)
		
		EventCue("mp1110:EV_M02S071")
		
		ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
	}

//終了処理ここまで----------------------------------------------------
}

////////////////////////////////////////////////////////////////////////////////
// ストッパー
////////////////////////////////////////////////////////////////////////////////

function "Stopper_S001_kusa1"
{
	// PLAYER2とPLAYER3のどちらかがPLAYER1から一定距離離れていたら
	// PLAYER1のそばにワープする
	SetFlag( TF_CHECK_DISTANCE, 1 )
	SetFlag( TF_CHECK_DISTANCE2, 1 )
	if( WORK[WK_ISEXIST_PLAYER2] )
	{
		CheckChrDistance( TF_CHECK_DISTANCE, "PLAYER1", "PLAYER2", 0, STOPPER_WARPDIS )
	}
	if( WORK[WK_ISEXIST_PLAYER3] )
	{
		CheckChrDistance( TF_CHECK_DISTANCE2, "PLAYER1", "PLAYER3", 0, STOPPER_WARPDIS )
	}

	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	SaveCamera()

	ResetMotion( "ALL" , 0 )
	StopEffect(-1,ALL,1)
	StopEmotion( "ALL" )
	ResetMoveVec("PARTYALL")

	if( FLAG[TF_CHECK_DISTANCE]==0 || FLAG[TF_CHECK_DISTANCE2]==0)
	{
		ChrAlpha( "PLAYER2" , 0.0f , 0 )
		ChrAlpha( "PLAYER3" , 0.0f , 0 )
		ResetPartyPos()
	}
	ExecuteCmd(1, TurnToChr, "PLAYER2" , "PLAYER1" , 10.0f )
	ExecuteCmd(2, TurnToChr, "PLAYER3" , "PLAYER1" , 10.0f )
	if( FLAG[TF_CHECK_DISTANCE]==0 || FLAG[TF_CHECK_DISTANCE2]==0)
	{
		ExecuteCmd(3, ChrAlpha, "PLAYER2" , 1.0f , 10 )
		ExecuteCmd(4, ChrAlpha, "PLAYER3" , 1.0f , 10 )
		WaitThread(3)
		WaitThread(4)
	}
	WaitThread(1)
	WaitThread(2)

	//	================================================
	//	【ストッパー：漂着直後、剣を拾うまで】
	//	================================================

	//	ナレーション
	TalkPopup("UNDEF",0,3,STOPPER_PPOSX,STOPPER_PPOSY,0)
	{
		"#7Cもう少しこの浜辺を調べてみよう……"
	}
	WaitPrompt()
	WaitCloseWindow()

	CrossFade(FADE_CROSS)

	SetChrPos("PLAYER1",284.56f,-1479.80f,1.86f)
	Turn("PLAYER1",-135.89f,360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	WaitFade()

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
}

function "Stopper_S001_kusa2"
{
	// PLAYER2とPLAYER3のどちらかがPLAYER1から一定距離離れていたら
	// PLAYER1のそばにワープする
	SetFlag( TF_CHECK_DISTANCE, 1 )
	SetFlag( TF_CHECK_DISTANCE2, 1 )
	if( WORK[WK_ISEXIST_PLAYER2] )
	{
		CheckChrDistance( TF_CHECK_DISTANCE, "PLAYER1", "PLAYER2", 0, STOPPER_WARPDIS )
	}
	if( WORK[WK_ISEXIST_PLAYER3] )
	{
		CheckChrDistance( TF_CHECK_DISTANCE2, "PLAYER1", "PLAYER3", 0, STOPPER_WARPDIS )
	}

	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	SaveCamera()

	ResetMotion( "ALL" , 0 )
	StopEffect(-1,ALL,1)
	StopEmotion( "ALL" )
	ResetMoveVec("PARTYALL")

	if( FLAG[TF_CHECK_DISTANCE]==0 || FLAG[TF_CHECK_DISTANCE2]==0)
	{
		ChrAlpha( "PLAYER2" , 0.0f , 0 )
		ChrAlpha( "PLAYER3" , 0.0f , 0 )
		ResetPartyPos()
	}
	ExecuteCmd(1, TurnToChr, "PLAYER2" , "PLAYER1" , 10.0f )
	ExecuteCmd(2, TurnToChr, "PLAYER3" , "PLAYER1" , 10.0f )
	if( FLAG[TF_CHECK_DISTANCE]==0 || FLAG[TF_CHECK_DISTANCE2]==0)
	{
		ExecuteCmd(3, ChrAlpha, "PLAYER2" , 1.0f , 10 )
		ExecuteCmd(4, ChrAlpha, "PLAYER3" , 1.0f , 10 )
		WaitThread(3)
		WaitThread(4)
	}
	WaitThread(1)
	WaitThread(2)

	//	================================================
	//	【ストッパー：漂着直後、剣を拾うまで】
	//	================================================

	//	ナレーション
	TalkPopup("UNDEF",0,3,STOPPER_PPOSX,STOPPER_PPOSY,0)
	{
		"#7Cもう少しこの浜辺を調べてみよう……"
	}
	WaitPrompt()
	WaitCloseWindow()

	CrossFade(FADE_CROSS)

	SetChrPos("PLAYER1",276.34f,-1465.95f,1.50f)
	Turn("PLAYER1",-122.35f,360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	WaitFade()

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
}
function "Stopper_S001_hama1"
{
	// PLAYER2とPLAYER3のどちらかがPLAYER1から一定距離離れていたら
	// PLAYER1のそばにワープする
	SetFlag( TF_CHECK_DISTANCE, 1 )
	SetFlag( TF_CHECK_DISTANCE2, 1 )
	if( WORK[WK_ISEXIST_PLAYER2] )
	{
		CheckChrDistance( TF_CHECK_DISTANCE, "PLAYER1", "PLAYER2", 0, STOPPER_WARPDIS )
	}
	if( WORK[WK_ISEXIST_PLAYER3] )
	{
		CheckChrDistance( TF_CHECK_DISTANCE2, "PLAYER1", "PLAYER3", 0, STOPPER_WARPDIS )
	}

	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	SaveCamera()

	ResetMotion( "ALL" , 0 )
	StopEffect(-1,ALL,1)
	StopEmotion( "ALL" )
	ResetMoveVec("PARTYALL")

	if( FLAG[TF_CHECK_DISTANCE]==0 || FLAG[TF_CHECK_DISTANCE2]==0)
	{
		ChrAlpha( "PLAYER2" , 0.0f , 0 )
		ChrAlpha( "PLAYER3" , 0.0f , 0 )
		ResetPartyPos()
	}
	ExecuteCmd(1, TurnToChr, "PLAYER2" , "PLAYER1" , 10.0f )
	ExecuteCmd(2, TurnToChr, "PLAYER3" , "PLAYER1" , 10.0f )
	if( FLAG[TF_CHECK_DISTANCE]==0 || FLAG[TF_CHECK_DISTANCE2]==0)
	{
		ExecuteCmd(3, ChrAlpha, "PLAYER2" , 1.0f , 10 )
		ExecuteCmd(4, ChrAlpha, "PLAYER3" , 1.0f , 10 )
		WaitThread(3)
		WaitThread(4)
	}
	WaitThread(1)
	WaitThread(2)

	//	================================================
	//	【ストッパー：漂着直後、剣を拾うまで】
	//	================================================

	//	ナレーション
	TalkPopup("UNDEF",0,3,STOPPER_PPOSX,STOPPER_PPOSY,0)
	{
		"#7Cもう少しこの浜辺を調べてみよう……"
	}
	WaitPrompt()
	WaitCloseWindow()
	CrossFade(FADE_CROSS)

	SetChrPos("PLAYER1",273.10f,-1441.25f,-0.31f)
	Turn("PLAYER1",-82.48f,360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	WaitFade()

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
}
function "Stopper_S001_hama2"
{
	// PLAYER2とPLAYER3のどちらかがPLAYER1から一定距離離れていたら
	// PLAYER1のそばにワープする
	SetFlag( TF_CHECK_DISTANCE, 1 )
	SetFlag( TF_CHECK_DISTANCE2, 1 )
	if( WORK[WK_ISEXIST_PLAYER2] )
	{
		CheckChrDistance( TF_CHECK_DISTANCE, "PLAYER1", "PLAYER2", 0, STOPPER_WARPDIS )
	}
	if( WORK[WK_ISEXIST_PLAYER3] )
	{
		CheckChrDistance( TF_CHECK_DISTANCE2, "PLAYER1", "PLAYER3", 0, STOPPER_WARPDIS )
	}

	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	SaveCamera()

	ResetMotion( "ALL" , 0 )
	StopEffect(-1,ALL,1)
	StopEmotion( "ALL" )
	ResetMoveVec("PARTYALL")

	if( FLAG[TF_CHECK_DISTANCE]==0 || FLAG[TF_CHECK_DISTANCE2]==0)
	{
		ChrAlpha( "PLAYER2" , 0.0f , 0 )
		ChrAlpha( "PLAYER3" , 0.0f , 0 )
		ResetPartyPos()
	}
	ExecuteCmd(1, TurnToChr, "PLAYER2" , "PLAYER1" , 10.0f )
	ExecuteCmd(2, TurnToChr, "PLAYER3" , "PLAYER1" , 10.0f )
	if( FLAG[TF_CHECK_DISTANCE]==0 || FLAG[TF_CHECK_DISTANCE2]==0)
	{
		ExecuteCmd(3, ChrAlpha, "PLAYER2" , 1.0f , 10 )
		ExecuteCmd(4, ChrAlpha, "PLAYER3" , 1.0f , 10 )
		WaitThread(3)
		WaitThread(4)
	}
	WaitThread(1)
	WaitThread(2)

	//	================================================
	//	【ストッパー：漂着直後、剣を拾うまで】
	//	================================================

	//	ナレーション
	TalkPopup("UNDEF",0,3,STOPPER_PPOSX,STOPPER_PPOSY,0)
	{
		"#7Cもう少しこの浜辺を調べてみよう……"
	}
	WaitPrompt()
	WaitCloseWindow()

	CrossFade(FADE_CROSS)
	SetChrPos("PLAYER1",275.02f,-1455.00f,0.66f)
	Turn("PLAYER1",-87.44f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	WaitFade()

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
}
function "Stopper_S001_umi"
{
	// PLAYER2とPLAYER3のどちらかがPLAYER1から一定距離離れていたら
	// PLAYER1のそばにワープする
	SetFlag( TF_CHECK_DISTANCE, 1 )
	SetFlag( TF_CHECK_DISTANCE2, 1 )
	if( WORK[WK_ISEXIST_PLAYER2] )
	{
		CheckChrDistance( TF_CHECK_DISTANCE, "PLAYER1", "PLAYER2", 0, STOPPER_WARPDIS )
	}
	if( WORK[WK_ISEXIST_PLAYER3] )
	{
		CheckChrDistance( TF_CHECK_DISTANCE2, "PLAYER1", "PLAYER3", 0, STOPPER_WARPDIS )
	}

	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	SaveCamera()

	ResetMotion( "ALL" , 0 )
	StopEffect(-1,ALL,1)
	StopEmotion( "ALL" )
	ResetMoveVec("PARTYALL")

	if( FLAG[TF_CHECK_DISTANCE]==0 || FLAG[TF_CHECK_DISTANCE2]==0)
	{
		ChrAlpha( "PLAYER2" , 0.0f , 0 )
		ChrAlpha( "PLAYER3" , 0.0f , 0 )
		ResetPartyPos()
	}
	ExecuteCmd(1, TurnToChr, "PLAYER2" , "PLAYER1" , 10.0f )
	ExecuteCmd(2, TurnToChr, "PLAYER3" , "PLAYER1" , 10.0f )
	if( FLAG[TF_CHECK_DISTANCE]==0 || FLAG[TF_CHECK_DISTANCE2]==0)
	{
		ExecuteCmd(3, ChrAlpha, "PLAYER2" , 1.0f , 10 )
		ExecuteCmd(4, ChrAlpha, "PLAYER3" , 1.0f , 10 )
		WaitThread(3)
		WaitThread(4)
	}
	WaitThread(1)
	WaitThread(2)

	//	================================================
	//	【ストッパー：漂着直後、剣を拾うまで】
	//	================================================

	//	ナレーション
	TalkPopup("UNDEF",0,3,STOPPER_PPOSX,STOPPER_PPOSY,0)
	{
		"#7Cもう少しこの浜辺を調べてみよう……"
	}
	WaitPrompt()
	WaitCloseWindow()

	CrossFade(FADE_CROSS)

	SetChrPos("PLAYER1",282.54f,-1432.21f,-0.65f)
	Turn("PLAYER1",-42.77f,360.0f)


	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	WaitFade()

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
}


function "LP_STOP_1110_1113"
{
	if (!FLAG[GF_02MP1110_REMOVE_OBSTACLE] && FLAG[GF_02MP1110_REMOVE_OBSTACLE_1ST]) {
		EventCue("mp1110:SubEV_Sien01")
	} else if( FLAG[GF_02MP1101_START_EXPLORE] && !FLAG[GF_02MP1110_REMOVE_OBSTACLE_1ST] ){
		EventCue("mp1110:EV_M02S070")

	} else {
	//	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	//	SaveCamera()
	//
	//	ResetMotion( "ALL" , 1 )
	//	StopEffect(-1,ALL,1)
	//	StopEmotion( "ALL" )
	//	ResetMoveVec("PARTYALL")
	//
	//	TurnToChr("PLAYER1","LP_test",12.0f)
	//	Wait(10)
	
		SetStopFlag(STOPFLAG_TALK)
	
		//	================================================
		//	【ＬＰ：1110の流木】
		//	================================================
	
		TalkPopup("UNDEF",0,3,STOPPER_PPOSX,STOPPER_PPOSY,0)
		{
			"#7C大きな倒木が道を塞いでいる。"
			"#7Cとても動かせそうにない……"
		}
		WaitPrompt()
		WaitCloseWindow()
	
	
	//	CrossFade(FADE_CROSS)
	//	RestoreCamera(0,0)
	//	ResetCameraObserver(0)
	//	ResetCameraZPlane()
	//	WaitFade()
	//
	//	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
	
		ResetStopFlag(STOPFLAG_TALK)
	}
}

//──────────────────────────────
//	【ストッパー：倒木を撤去するまで】
//──────────────────────────────
function "Stopper_MP1110_1"
{

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	// ストッパー
	TalkPopup(UNDEF,0,3,STOPPER_PPOSX,STOPPER_PPOSY,0) {
		"#7Cみんなが力を貸してくれるようだ。"
		"#7C今はあの倒木を撤去するとしよう。"
	}
	WaitPrompt()
	WaitCloseWindow()

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",261.56f, -1496.32f, 5.51f)
	Turn("LEADER",44.86f,360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	WaitFade()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}

function "Stopper_MP1110_2"
{

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	// ストッパー
	TalkPopup(UNDEF,0,3,STOPPER_PPOSX,STOPPER_PPOSY,0) {
		"#7Cみんなが力を貸してくれるようだ。"
		"#7C今はあの倒木を撤去するとしよう。"
	}
	WaitPrompt()
	WaitCloseWindow()

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",250.36f, -1493.96f, 6.20f)
	Turn("LEADER",-43.54f,360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	WaitFade()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}
