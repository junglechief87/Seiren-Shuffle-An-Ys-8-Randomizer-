#include "inc/mons.h"
#include "inc/def.h"
#include "inc/flag.h"
#include "inc/se.h"
#include "inc/scr_inc.h"
#include "inc/3dicon.h"
#include "inc/skilldef.h"
#include "inc/vo.h"
#include "inc/music.h"
#include "inc/temp/mp6401m.h"
#include "inc/efx.h"


//-------------------------------------------
// 6222m：王宮屋内・過去
//-------------------------------------------
// initスクリプト
function "init"
{
	

//◆マップ対応用のテスト配置/////////////////
//オド
SetChrPos("Odo",38.17f,-283.52f,143.98f)
Turn("Odo",-0.77f,360.0f)
ChangeAnimation( "Odo" , "ANI_EV_DEAD", -1 , 1 )
ChangeSubAnimation("Odo",SUBMOT_EYE,ANI_E_CLOSE,1)
///////////////////////////////////////////////

	EventAreaEnable("SubEV_Past_07_Main020",0)
	//EventAreaEnable("SubEV_Past_07_Quest_A",0)
	//EventAreaEnable("SubEV_Past_07_Quest_C",0)
	EventAreaEnable( "evb2_act_1607" , 0 )	//アクティブボイス
	EventAreaEnable( "evb2_act_1605" , 0 )	//アクティブボイス
	EventAreaEnable( "evb2_act_1610" , 0 )	//アクティブボイス

	// イベントエリア設定制御
	if (FLAG[SF_EVENT_ON])
	{
		//一般配置ファンクション呼び出し
		CallFunc("mp6222m2:NpcPosition")

		//イベントボックス制御
		if(FLAG[GF_PAST_EPISODE_7_ENDEPISODE])		//過去編Ⅶ
		{
			if(FLAG[GF_SUBEV_PAST_07_IN_CASTLE] && !FLAG[GF_SUBEV_PAST_07_LOOK_OLGA])		//▼玉座の間でオルガと再会する
			{
				EventAreaEnable("SubEV_Past_07_Main020",1)
			}
		}

		// アクティブボイス
		if(!FLAG[GF_AVOICE_1607] && FLAG[GF_SUBEV_PAST_07_LOOK_OLGA]){
			EventAreaEnable( "evb2_act_1607" , 1 )
		}
		if(!FLAG[GF_AVOICE_1605] && FLAG[GF_SUBEV_PAST_07_LOOK_OLGA]){
			EventAreaEnable( "evb2_act_1605" , 1 )
		}
		if(!FLAG[GF_AVOICE_1610] && FLAG[GF_SUBEV_PAST_07_LOOK_OLGA]){
			EventAreaEnable( "evb2_act_1610" , 1 )
		}
		if(FLAG[GF_SUBEV_PAST_07_QUEST_C])		//感謝の花を達成している場合
		{
			EventAreaEnable( "evb2_act_1610" , 0 )
		}
		
		//マップアニメ
		MapAnime("door01",close)

		if(FLAG[GF_SUBEV_PAST_07_QUEST_C])
		{
			MapAnime("coffin",off)
		}
		if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])
		{
			MapAnime("door01",open0)
		}
	}
}

//////////////////////////////////////////////////////////////////////
//■アクティブボイス
//////////////////////////////////////////////////////////////////////
function "act_0520"
{
//	if (!FLAG[GF_AVOICE_0520])
//	{
//		EventAreaEnable( "evb2_act_0520" , 0 )
//		ActiveVoiceStop(ACTIVEVOICESTOP_WINDOWOFF)
////		ActiveVoiceStart(EACT_EVID_0520, 1, 0)	//各所で悲鳴が聞こえる	老人（ダリオス執政官）
//		ActiveVoiceStart(EACT_EVID_0519, 1, 0)	//各所で悲鳴が聞こえる	女性＋老人（ダリオス執政官）
//	}
}

function "act_1607"
{
	if (!FLAG[GF_AVOICE_1607])
	{
		EventAreaEnable( "evb2_act_1607" , 0 )
		ActiveVoiceStop(ACTIVEVOICESTOP_WINDOWOFF)
		ActiveVoiceStart(EACT_EVID_1607, 1, 0)	//王宮の状況を知るイベント後、オルガのいる玉座に到達する前に
	}
}
function "act_1605"
{
	if (!FLAG[GF_AVOICE_1605])
	{
		EventAreaEnable( "evb2_act_1605" , 0 )
		ActiveVoiceStop(ACTIVEVOICESTOP_WINDOWOFF)
		ActiveVoiceStart(EACT_EVID_1605, 1, 0)	//王宮の状況を知るイベント後、オルガのいる玉座に到達する前に
	}
}
function "act_1610"
{
	if (!FLAG[GF_AVOICE_1610])
	{
		EventAreaEnable( "evb2_act_1610" , 0 )
		ActiveVoiceStop(ACTIVEVOICESTOP_WINDOWOFF)
		ActiveVoiceStart(EACT_EVID_1610, 1, 0)	//王宮の状況を知るイベント後、オルガのいる玉座に到達する前に
	}
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//■配置制御セクション

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function "NpcPosition"
{
	//ヒモロギ
	SetChrPos("LP_SubEV_Past_07_Return", 4.514f , -236.978f , 159.726f)

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])		//▽過去編ⅦＢ再訪時
	{
		//	【衛士ファン】
		SetChrPos("Fan",6.50f,-343.87f,151.40f)
		Turn("Fan",34.01f,360.0f)
		SetChrPos("eq4029_1",6.50f,-343.87f,151.40f)
		SetParent("eq4029_1","Fan" ,"Null_Rhand")
		ChangeAnimation( "Fan" , "ANI_EV_WAIT_BUKI", -1 , 1 )

		//	【ラステル】
		SetChrPos("Rastell",4.16f,-298.71f,160.00f)
		Turn("Rastell",-29.85f,360.0f)
		LookChr("Rastell","Sharl")
		SetChrPos("eq4028_2",4.16f,-298.71f,160.00f)
		SetParent( "eq4028_2" , "Rastell", "Null_ken" )

		//	【カジュラ】
		SetChrPos("Kajura",1.93f,-267.65f,160.00f)
		Turn("Kajura",127.43f,360.0f)
		ChangeAnimation( "Kajura" , "ANI_EV_SIT_G", -1 , 1 )

		//	【王都市民】青年
		SetChrPos("Citizen_7_A01",-6.01f,-264.17f,160.00f)
		Turn("Citizen_7_A01",-67.13f,360.0f)
		ChangeAnimation( "Citizen_7_A01" , "ANI_EV_SIT_G", -1 , 1 )

		//	【王都市民】中年男
		SetChrPos("Citizen_7_B01",1.95f,-277.31f,160.00f)
		Turn("Citizen_7_B01",-2.66f,360.0f)

		//	【元書記官】※ダリオスの書記官
		SetChrPos("SecretaryMan",-2.01f,-262.46f,160.00f)
		Turn("SecretaryMan",-37.27f,360.0f)
		ChangeAnimation( "SecretaryMan" , "ANI_EV_SIT_G", -1 , 1 )

		//	【オルレット】
		SetChrWork( "Orlet" , CWK_CHECKRADIUS , 4.0f )		// 範囲
		ChangeSubAnimation("Orlet",SUBMOT_EYE,ANI_E_CLOSE,1)

		SetChrPos("Orlet",5.47f,-256.17f,160.97f)
		Turn("Orlet",88.89f,360.0f)
		ChangeAnimation( "Orlet" , "ANI_EV_DOWN", -1 , 1 )

		//	【フレド】
		SetChrWork( "Fredo" , CWK_CHECKRADIUS , 2.3f )		// 範囲

		SetChrPos("Fredo",4.47f,-254.93f,160.00f)
		Turn("Fredo",-45.72f,360.0f)
		LookChr("Fredo","Orlet")

		//	【ミラ】
		SetChrWork( "Mira" , CWK_CHECKRADIUS , 1.15f )		// 範囲

		SetChrPos("Mira",3.02f,-254.79f,160.02f)
		Turn("Mira",-50.93f,360.0f)

		//	【バロッサ】
		SetChrPos("Barossa",-4.98f,-257.22f,160.00f)
		Turn("Barossa",-82.21f,360.0f)
		ChangeAnimation( "Barossa" , "ANI_EV_SIT_G", -1 , 1 )

		//	【王宮の侍女】
		ChangeSubAnimation("Zijo",SUBMOT_EYE,ANI_E_CLOSE,1)

		SetChrPos("Zijo",5.16f,-250.47f,160.97f)
		Turn("Zijo",89.76f,360.0f)
		ChangeAnimation( "Zijo" , "ANI_EV_DOWN", -1 , 1 )
		
		//	【クライオ】
		SetChrPos("Cryo",-1.28f,-249.44f,160.00f)
		Turn("Cryo",-130.24f,360.0f)
		ChangeAnimation( "Cryo" , "ANI_EV_SIT_G", -1 , 1 )

		//	【修道女シェンナ】
		SetChrPos("Shenna",1.95f,-279.18f,160.00f)
		Turn("Shenna",177.22f,360.0f)

		//	【修道女】
		SetChrInfoFlag("Sister_7_01",INFOFLAG_NOTALKTURN)

		SetChrPos("Sister_7_01",-3.90f,-256.32f,160.00f)
		Turn("Sister_7_01",47.59f,360.0f)

		LookChr("Sister_7_01","Barossa")

		//	【アンシア】
		SetChrPos("Anthea",5.79f,-245.56f,161.02f)
		Turn("Anthea",92.92f,360.0f)
		ChangeAnimation( "Anthea" , "ANI_EV_DOWN", -1 , 1 )

		//	【シーア】
		SetChrPos("Thea",5.59f,-246.80f,160.00f)
		Turn("Thea",-147.63f,360.0f)

		//	【修道女セシル】
		SetChrPos("Cesil",5.36f,-248.14f,160.97f)
		Turn("Cesil",86.65f,360.0f)
		ChangeAnimation( "Cesil" , "ANI_EV_DOWN2", -1 , 1 )

		//	【男】男・奥
		SetChrPos("Citizen_7_A02",-6.10f,-238.96f,160.00f)
		Turn("Citizen_7_A02",-57.44f,360.0f)
		ChangeAnimation( "Citizen_7_A02" , "ANI_EV_SIT_G", -1 , 1 )

		//	【オルガ】
		SetChrPos("Olga",-1.18f,-223.18f,161.96f)
		Turn("Olga",-141.94f,360.0f)
		LookChr("Olga","Officer_7_01")
		ChangeAnimation( "Olga" , "ANI_EV_UDEGUMI", -1 , 1 )

		//	【文官】
		SetChrPos("Officer_7_01",0.42f,-222.72f,161.96f)
		Turn("Officer_7_01",106.67f,360.0f)
		LookChr("Officer_7_01","Olga")

		//	【衛士シャール】
		SetChrPos("Sharl",5.01f,-299.96f,160.00f)
		Turn("Sharl",141.28f,360.0f)
		LookChr("Sharl","Rastell")
		SetChrPos("eq4028_1",5.01f,-299.96f,160.00f)
		SetParent( "eq4028_1" , "Sharl", "Null_ken" )

		//	【侍女アトラ】
		//SetChrPos("Atra",49.48f,-289.83f,143.41f)
		//Turn("Atra",-64.42f,360.0f)

		SetChrPos("Atra",40.62f,-286.05f,143.41f)
		Turn("Atra",112.88f,360.0f)

		//	【修道女】
		SetChrPos("Sister_7_02",38.91f,-286.63f,143.41f)
		Turn("Sister_7_02",170.06f,360.0f)

		//オド
		SetChrPos("Odo",38.17f,-283.52f,143.98f)
		Turn("Odo",-0.77f,360.0f)
		ChangeAnimation( "Odo" , "ANI_EV_DEAD", -1 , 1 )
		ChangeSubAnimation("Odo",SUBMOT_EYE,ANI_E_CLOSE,1)

		//SetChrPos("Citizen_7_C01",-8.76f,-334.89f,151.40f)
		//Turn("Citizen_7_C01",-154.99f,360.0f)
		//ChangeAnimation( "Citizen_7_C01" , "ANI_EV_SIT_G", -1 , 1 )

		SetChrPos("Citizen_7_C02",7.84f,-337.06f,151.40f)
		Turn("Citizen_7_C02",12.40f,360.0f)
		ChangeAnimation( "Citizen_7_C02" , "ANI_EV_SIT_G", -1 , 1 )

		SetChrPos("Citizen_7_C03",5.48f,-338.20f,151.40f)
		Turn("Citizen_7_C03",-54.48f,360.0f)
		ChangeAnimation( "Citizen_7_C03" , "ANI_EV_SIT_G", -1 , 1 )

		SetChrPos("Citizen_7_C04",-5.52f,-333.38f,151.40f)
		Turn("Citizen_7_C04",111.27f,360.0f)
		ChangeAnimation( "Citizen_7_C04" , "ANI_EV_SIT_G", -1 , 1 )
		
		SetChrPos("Citizen_7_C05",53.90f,-299.07f,143.41f)
		Turn("Citizen_7_C05",-133.32f,360.0f)
		ChangeAnimation( "Citizen_7_C05" , "ANI_EV_SIT_G", -1 , 1 )

		if(FLAG[GF_SUBEV_PAST_07_QUEST_C])
		{
			//	【侍女アトラ】
			//SetChrPos("Atra",41.79f,-283.43f,143.41f)
			//Turn("Atra",87.46f,360.0f)

			SetChrPos("Atra",51.87f,-290.55f,143.41f)
			Turn("Atra",-91.34f,360.0f)
			
			//	【修道女】
			SetChrPos("Sister_7_02",46.54f,-293.01f,143.41f)
			Turn("Sister_7_02",-95.33f,360.0f)

			SetChrPos("Odo", -100000.0f , 0.0f , 0.0f )
			SetChrPos("Citizen_7_C05", -100000.0f , 0.0f , 0.0f )
		}
		else if(FLAG[GF_SUBEV_PAST_07_QUEST_B])
		{
			SetChrPos("Atra",40.62f,-286.05f,143.41f)
			Turn("Atra",112.88f,360.0f)
		}
		else if(FLAG[GF_SUBEV_PAST_07_QUEST_A])
		{
			//	【侍女アトラ】
			SetChrPos("Atra",49.48f,-289.83f,143.41f)
			Turn("Atra",-64.42f,360.0f)
		}
	}
	else if(FLAG[GF_PAST_EPISODE_7_ENDEPISODE])		//▼過去編Ⅶエンドエピソード
	{
		//	【衛士ファン】
		SetChrPos("Fan",6.50f,-343.87f,151.40f)
		Turn("Fan",34.01f,360.0f)
		SetChrPos("eq4029_1",6.50f,-343.87f,151.40f)
		SetParent("eq4029_1","Fan" ,"Null_Rhand")
		ChangeAnimation( "Fan" , "ANI_EV_WAIT_BUKI", -1 , 1 )

		//	【カジュラ】
		SetChrPos("Kajura",1.93f,-267.65f,160.00f)
		Turn("Kajura",127.43f,360.0f)
		ChangeAnimation( "Kajura" , "ANI_EV_SIT_G", -1 , 1 )

		//	【王都市民】青年
		SetChrPos("Citizen_7_A01",-6.01f,-264.17f,160.00f)
		Turn("Citizen_7_A01",-67.13f,360.0f)
		ChangeAnimation( "Citizen_7_A01" , "ANI_EV_SIT_G", -1 , 1 )

		//	【王都市民】中年男
		SetChrPos("Citizen_7_B01",-2.87f,-263.11f,160.00f)
		Turn("Citizen_7_B01",-162.86f,360.0f)

		//	【元書記官】※ダリオスの書記官
		SetChrPos("SecretaryMan",-2.29f,-261.59f,160.00f)
		Turn("SecretaryMan",22.06f,360.0f)

		//	【オルレット】
		ChangeSubAnimation("Orlet",SUBMOT_EYE,ANI_E_CLOSE,1)

		SetChrPos("Orlet",5.47f,-256.17f,160.97f)
		Turn("Orlet",88.89f,360.0f)
		ChangeAnimation( "Orlet" , "ANI_EV_DOWN", -1 , 1 )

		//	【フレド】
		SetChrWork( "Fredo" , CWK_CHECKRADIUS , 1.7f )		// 範囲

		SetChrPos("Fredo",4.47f,-254.93f,160.00f)
		Turn("Fredo",-45.72f,360.0f)
		LookChr("Fredo","Orlet")

		//	【ミラ】
		SetChrPos("Mira",3.70f,-259.85f,160.00f)
		Turn("Mira",-140.70f,360.0f)

		//	【バロッサ】
		SetChrPos("Barossa",-4.98f,-257.22f,160.00f)
		Turn("Barossa",-82.21f,360.0f)
		ChangeAnimation( "Barossa" , "ANI_EV_SIT_G", -1 , 1 )

		//	【王宮の侍女】
		ChangeSubAnimation("Zijo",SUBMOT_EYE,ANI_E_CLOSE,1)

		SetChrPos("Zijo",5.16f,-250.47f,160.97f)
		Turn("Zijo",89.76f,360.0f)
		ChangeAnimation( "Zijo" , "ANI_EV_DOWN", -1 , 1 )

		//	【クライオ】
		SetChrPos("Cryo",-1.28f,-249.44f,160.00f)
		Turn("Cryo",-130.24f,360.0f)
		ChangeAnimation( "Cryo" , "ANI_EV_SIT_G", -1 , 1 )

		//	【修道女シェンナ】
		ResetChrInfoFlag(Shenna,INFOFLAG_NOTALKTURN)
		SetChrWork( "Shenna" , CWK_CHECKRADIUS , 1.5f )		// 範囲
		SetChrPos("Shenna",2.05f,-244.37f,160.00f)
		Turn("Shenna",47.25f,360.0f)
		LookChr("Shenna","Sister_7_01")

		//	【修道女】
		SetChrWork( "Sister_7_01" , CWK_CHECKRADIUS , 1.5f )		// 範囲
		SetChrPos("Sister_7_01",1.16f,-245.44f,160.00f)
		Turn("Sister_7_01",-137.30f,360.0f)
		LookChr("Sister_7_01","Shenna")

		//	【アンシア】
		SetChrWork( "Anthea" , CWK_CHECKRADIUS , 3.0f )		// 範囲
		SetChrPos("Anthea",5.79f,-245.56f,161.02f)
		Turn("Anthea",92.92f,360.0f)
		ChangeAnimation( "Anthea" , "ANI_EV_DOWN", -1 , 1 )

		//	【シーア】
		SetChrPos("Thea",-4.04f,-234.66f,160.00f)
		Turn("Thea",122.08f,360.0f)

		//	【修道女セシル】
		SetChrPos("Cesil",5.36f,-248.14f,160.97f)
		Turn("Cesil",86.65f,360.0f)
		ChangeAnimation( "Cesil" , "ANI_EV_DOWN", -1 , 1 )
		ChangeSubAnimation("Cesil",SUBMOT_EYE,ANI_E_CLOSE,1)

		//	【男】男・奥
		SetChrPos("Citizen_7_A02",-6.10f,-238.96f,160.00f)
		Turn("Citizen_7_A02",-57.44f,360.0f)
		ChangeAnimation( "Citizen_7_A02" , "ANI_EV_SIT_G", -1 , 1 )

		//	【オルガ】
		SetChrPos("Olga",-1.18f,-223.18f,161.96f)
		Turn("Olga",-141.94f,360.0f)
		LookChr("Olga","Officer_7_01")
		ChangeAnimation( "Olga" , "ANI_EV_UDEGUMI", -1 , 1 )

		//	【文官】
		SetChrPos("Officer_7_01",0.42f,-222.72f,161.96f)
		Turn("Officer_7_01",106.67f,360.0f)
		LookChr("Officer_7_01","Olga")

		//	【衛士シャール】
		SetChrPos("Sharl",-0.80f,-221.35f,161.97f)
		Turn("Sharl",-23.95f,360.0f)
		LookChr("Sharl","Olga")
		SetChrPos("eq4028_1",-0.80f,-221.35f,161.97f)
		SetParent( "eq4028_1" , "Sharl", "Null_ken" )

	}
}


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//■一般会話セクション

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


function "Talk_Fan"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_FAN_TALK])
		{
			//───────────────
			//	場所		：王宮内部（過去終末版）・正面階段上
			//───────────────
			//	配置・カメラ：歩哨をする位置
			//	モーション	：歩哨
			//───────────────

			//	衛士ファン
			TalkPopup(this,0,0,0,0,0)
			{
				"あのオドさんも死んじまって、"
				"もう理力を使える人はほとんどいません。\p"
				"俺たちも不安ですが……"
				"そんな事を言っても仕方ありませんしね。\p"
				"そもそも自分は難しい事を"
				"考えるのが苦手な性分でして……\p"
				"やはり、ただこうして"
				"皆さんを守るのが性に合っていますよ。"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_FAN_TALK, 1 )

		}
		else
		{
			//　　★繰り返し
			//	衛士ファン
			TalkPopup(this,0,0,0,0,0)
			{
				"この先どうなるか、分かりませんが。\p"
				"まあ自分は、こうして"
				"皆さんを守るのみですよ。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else
	{
	}
	ResetStopFlag(STOPFLAG_TALK)
}

function "Talk_Rastell"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_RASTELL_TALK])
		{
			//───────────────
			//	場所		：王宮内部（過去終末版）・正面階段上
			//───────────────
			//	配置・カメラ：正面階段上にある資材前で衛士シャールと話す
			//	モーション	：
			//───────────────

			PlayVoice(Y8V_6023,"Rastell",100)	//ダーナ様

			//	ラステル
			TalkPopup(this,0,0,0,0,0)
			{
				"順調とはいえませんが、"
				"準備も明日の朝には何とか。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000mありがとう、さすがですね。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ラステル
			TalkPopup(this,0,0,0,0,0)
			{
				"どうかこちらはお任せ下さい。\p"
				"でも王都を離れるなら"
				"早い方がいいですよね？\p"
				"次の寒波がいつ来るか……"
				"寒波5行目"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000mええ……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ラステル
			TalkPopup(this,0,0,0,0,0)
			{
				"……ダーナ様、大丈夫ですか？\p"
				"何か御用あれば"
				"すぐに仰ってくださいね。"
			}
			WaitPrompt()
			WaitCloseWindow()

		}
		else
		{
			//　　★繰り返し
			//	ラステル
			TalkPopup(this,0,0,0,0,0)
			{
				"明日の朝には何とか"
				"出発の準備が整うと思います。\p"
				"ダーナ様、何かあれば"
				"すぐに仰ってくださいね。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else
	{

	}
	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Rastell","Sharl")

}

function "Talk_Kajura"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM


	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_KAJURA_TALK])
		{
			LookChr("this","LEADER")

			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：部屋に入って一番目
			//	モーション	：うずくまる
			//───────────────
			//	カジュラ
			TalkPopup(this,0,0,0,0,0)
			{
				"あのラステルって人が"
				"なんだか忙しそうにしてるの。\p"
				"もしかして王都から脱出するって"
				"話が進んでるのかな……\p"
				"……もしそうなったら、"
				"私はどうしよう……\p"
				"王都を離れるなんて……"
				"でもこのまま死にたくないよぅ……"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_KAJURA_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//	カジュラ
			TalkPopup(this,0,0,0,0,0)
			{
				"……もしそうなったら、"
				"私はどうしよう……\p"
				"王都を離れるなんて……"
				"でもこのまま死にたくないよぅ……"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else
	{
	//▼過去編ⅦＡ王宮内を歩く
	//───────────────
	//	場所		：王宮内部（過去終末版）・謁見の間・前半
	//───────────────
	//	配置・カメラ：部屋に入って一番目
	//	モーション	：うずくまる
	//───────────────
	
		if(!FLAG[TF_KAJURA_TALK])
		{
			//	カジュラ
			TalkPopup(this,0,0,0,0,0)
			{
				"痛い……痛いよう……"
				"どうしてこんなことに……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ラステル
			TalkPopup(Rastell,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
			{
				"（この方も《凍血病》ですね……）\p"
				"（エタニア人は体温が下がりすぎると"
				"  急激に弱って細菌に蝕まれる……）\p"
				"（この病で一体どれだけの人が"
				"  命を落としてきたのでしょうか……）"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000m（ええ、でもこの方はまだ軽度です。）\p"
				"軽度2行目"
				"どうか元気を出して下さい。"
				"少しですが、道中で"
				"薬草を取ってきましたから。"
			}
			WaitPrompt()
			WaitCloseWindow()

			LookChr("this","LEADER")

			//	カジュラ
			TalkPopup(this,0,0,0,0,0)
			{
				"ほ、本当ですか……？\p"
				"ううっ……薬が切れたら私、"
				"あっというまに死ぬんじゃないかって……\p"
				"まだ死にたくない……"
				"死にたくないよう……！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_KAJURA_TALK, 1 )

		}
		else
		{
			LookChr("this","LEADER")

			//　　★繰り返し
			//	カジュラ
			TalkPopup(this,0,0,0,0,0)
			{
				"ううっ……薬が切れたら私、"
				"あっというまに死ぬんじゃないかって……\p"
				"まだ死にたくない……"
				"死にたくないよう……！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	
	}
	ResetStopFlag(STOPFLAG_TALK)
}

function "Talk_Citizen_7_A01"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_TALK_MOB01])
		{
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：部屋に入って二番目
			//	モーション	：うずくまる
			//───────────────
			//	王都市民
			TalkPopup(this,0,0,0,0,0)
			{
				"寺院の連中もよくやるよな……\p"
				"連中2行目"
				"アイツが死に掛けてる間も"
				"よく看病してくれたっけ……\p"
				"へへ、大樹なんざクソ食らえだが、"
				"あいつらには感謝しねえとな……"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag( TF_TALK_MOB01, 1 )

		}
		else
		{
			//　　★繰り返し
			//	王都市民
			TalkPopup(this,0,0,0,0,0)
			{
				"大樹なんざクソ食らえだが……"
				"寺院の修道女たちには世話になったよ。\p"
				"あいつらには感謝しねえとな…… "
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else
	{
		if(!FLAG[TF_TALK_MOB01])
		{
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：部屋に入って二番目
			//	モーション	：うずくまる
			//───────────────
			//	王都市民
			TalkPopup(this,0,0,0,0,0)
			{
				"アイツはいつだって明るくて……"
				"ここでもみんなの力になってた……\p"
				"自慢の弟だった……"
				"なのにあの病に掛かった途端……\p"
				"……ハッ、あんたも随分だよな……"
				"もう少し早く戻ってくれりゃあ……\p"
				"……いや、アンタがいても同じか……"
				"アンタがいても8行目"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB01, 1 )

		}
		else
		{
			//　　★繰り返し
			//	王都市民
			TalkPopup(this,0,0,0,0,0)
			{
				"もう放っといてくれ……"
				"アンタの顔なんざ見たくねえよ……\p"
				"どうしたってあの“大樹”を"
				"思い出しちまうからな……"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	ResetStopFlag(STOPFLAG_TALK)
}

function "Talk_Citizen_7_B01"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_TALK_MOB02])
		{
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：寺院へ向かうシェンナの前
			//	モーション	：
			//───────────────
			//　　振り返らない
			//	王都市民
			TalkPopup(this,0,0,0,0,0)
			{
				"王都を捨てろっていう奴がいるが……"
				"ふさけんなよ……！\p"
				"娘が死んだんだ……"
				"しばらく前にな……\p"
				"……置いていけるかよ……"
				"俺は……ここで生き残ってみせるぞ！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_TALK_MOB02, 1 )

		}
		else
		{
			//　　★繰り返し
			//	王都市民
			TalkPopup(this,0,0,0,0,0)
			{
				"……置いていけるかよ……"
				"俺は……ここで生き残ってみせるぞ！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else
	{
		//───────────────
		//	場所		：王宮内部（過去終末版）・謁見の間・前半
		//───────────────
		//	配置・カメラ：部屋に入って三番目・書記官と言い争う
		//	モーション	：
		//───────────────
		//	王都市民

		TalkPopup(this,0,0,0,0,0)
		{
			"フン……あんたと"
			"話すことなんざねえよ！"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	ResetStopFlag(STOPFLAG_TALK)
}

function "Talk_SecretaryMan"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	//LookChr("this","LEADER")

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{

		LookChr("this","LEADER")

		if(!FLAG[TF_SECRETARYMAN_TALK])
		{
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：部屋に入って三番目
			//	モーション	：うずくまる
			//───────────────
			//	元書記官
			TalkPopup(this,0,0,0,0,0)
			{
				"僕はダリオス執政官の"
				"書記をしていたんだ……\p"
				"最初は逃げた"
				"あの人を恨んでいたけど……"
				"今は少し分かる気がするよ……\p"
				"王都はきっとこうなる……"
				"あの人はそれが分かってしまったから"
				"姿を消したんだ……！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_SECRETARYMAN_TALK, 1 )

		}
		else
		{
			//　　★繰り返し
			//	元書記官
			TalkPopup(this,0,0,0,0,0)
			{
				"冷静になってくれない人も多くて"
				"意見が全然纏まらないんだ……\p"
				"もう、どうすりゃいいんだか……"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else
	{
		if(!FLAG[TF_SECRETARYMAN_TALK])
		{
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：部屋に入って三番目・上のキャラと言い争う
			//	モーション	：
			//───────────────
			//　　振り返らない
			//	元書記官
			TalkPopup(this,0,0,0,0,0)
			{
				"ともかくこのままじゃ……！"
				"あんたらだって死ぬぞ！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	王都市民
			TalkPopup("Citizen_7_B01",0,0,0,0,0)
			{
				"だから俺たちに"
				"王都を捨てろってか！？\p"
				"ふざけんなッ！"
				"そもそもお前ら役人が"
				"もっとしゃんとしてりゃあ！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	元書記官
			TalkPopup(this,0,0,0,0,0)
			{
				"そ、それは今関係ないだろッ！"
			}
			WaitPrompt()
			WaitCloseWindow()
			SetFlag( TF_SECRETARYMAN_TALK, 1 )
		}
		else
		{
			//　　★繰り返し
			//　　振り返らない
			//	元書記官
			TalkPopup(this,0,0,0,0,0)
			{
				"ここだっていつまで持つか"
				"分からないんたぞ！？\p"
				"くそっ、どうしてみんな"
				"冷静に考えてくれないんだ……！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	ResetStopFlag(STOPFLAG_TALK)
}

function "Talk_Orlet"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	//LookChr("this","LEADER")

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		//▼過去編ⅦＢオルガと話した後
		//───────────────
		//	場所		：王宮内部（過去終末版）・謁見の間・前半
		//───────────────
		//	配置・カメラ：部屋に入って五番目
		//	モーション	：寝込む
		//───────────────
		//　　振り向かない
		//	オルレット
		TalkPopup(this,0,0,0,0,0)
		{
			"………ゴホゴホッ………\p"
			"……ハア、ハア、ハア……"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else
	{
		//▼過去編ⅦＡ王宮内を歩く
		//───────────────
		//	場所		：王宮内部（過去終末版）・謁見の間・前半
		//───────────────
		//	配置・カメラ：部屋に入って五番目
		//	モーション	：寝込む
		//───────────────
		//　　振り向かない
		//	オルレット
		TalkPopup(this,0,0,0,0,0)
		{
			"……ハア……ハア……"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	ResetStopFlag(STOPFLAG_TALK)
	ChangeSubAnimation("Orlet",SUBMOT_EYE,ANI_E_CLOSE,1)

}

function "Talk_Fredo"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM


	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[GF_1STTALK_PAST_7_FREDO])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：部屋に入って五番目・オルレットの看病
			//	モーション	：
			//───────────────
			//　　★ＧＦ初回
			//　　振り返らない

			LookChr("Mira","Fredo")
			
			//	ミラ
			TalkPopup("Mira",0,0,0,0,0)
			{
				"……そろそろ代わります。"
				"フレド、あなたは少し休んでください。"
			}
			WaitPrompt()
			WaitCloseWindow()

			LookChr("Fredo","Mira")

			//	フレド
			TalkPopup(this,0,0,0,0,0)
			{
				"はは、すまない……"
				"ミラさんには迷惑をかけっぱなしだな……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ミラ
			TalkPopup("Mira",0,0,0,0,0)
			{
				"いえ、いいんです。"
				"私は身寄りもありませんから。\p"
				"こうしてあなたの……フレドの家族の"
				"役に立てて嬉しいのです。\p"
				"……その、約束してください。"
				"無理はしない、少しでも長く生きると。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	フレド
			TalkPopup(this,0,0,0,0,0)
			{
				"あ、ああ……そうだな。"
				"（ミラさん、気のせいか顔が赤いような……）\p"
				"コホン、ともかく君のいう通りだ。"
				"親父のためにも、約束するよ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ミラ
			TalkPopup("Mira",0,0,0,0,0)
			{
				"ふふっ……はい。"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag( GF_1STTALK_PAST_7_FREDO, 1 )
			LookChr("Fredo","Orlet")
			LookReset("Mira")

		}
		else
		{
			LookChr("this","LEADER")

			//　　★ＧＦ以降
			//	フレド
			TalkPopup(this,0,0,0,0,0)
			{
				"親父は痰が詰まることがあるから"
				"ここの所、ろくに寝てなくて……\p"
				"でもミラさんがこんなに"
				"真剣に思っててくれたなんて……"
				"はは、なんだか凄く安心しました。\p"
				"少しの間、親父を任せて"
				"休ませてもらうとしますよ。"
			}
			WaitPrompt()
			WaitCloseWindow()
			LookChr("Fredo","Orlet")

		}
	}
	else
	{
		if(!FLAG[TF_FREDO_TALK])
		{
			LookChr("this","LEADER")

			//▼過去編ⅦＡ王宮内を歩く
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：部屋に入って五番目・オルレットの看病
			//	モーション	：
			//───────────────
			//	フレド
			TalkPopup(this,0,0,0,0,0)
			{
				"オルガ様が薬を手配してくださって、"
				"親父もここまでもってきました。\p"
				"けれど……さすがにもう"
				"長くないかもしれませんね……"
			}
			WaitPrompt()
			WaitCloseWindow()

			LookChr("this","Orlet")

			//　　フレド、オルレットに向く。
			//	フレド
			TalkPopup(this,0,0,0,0,0)
			{
				"でも心配するな、親父……"
				"最期まで傍にいるからな……"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag( TF_FREDO_TALK, 1 )

		}
		else
		{
			//　　★繰り返し
			//　　振り返らない
			//	フレド
			TalkPopup(this,0,0,0,0,0)
			{
				"今日は落ち着いてるな……"
				"はは、その調子だ。\p"
				"ちゃんとゆっくり"
				"息をするんだぞ……"
			}
			WaitPrompt()
			WaitCloseWindow()

		}
	}
	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Fredo","Orlet")

}
function "Talk_Mira"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[GF_1STTALK_PAST_7_FREDO])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：部屋に入って五番目・オルレットの看病
			//	モーション	：
			//───────────────
			//　　★ＧＦ初回
			//　　振り返らない

			LookChr("Mira","Fredo")

			//	ミラ
			TalkPopup(this,0,0,0,0,0)
			{
				"……そろそろ代わります。"
				"フレド、あなたは少し休んでください。"
			}
			WaitPrompt()
			WaitCloseWindow()

			LookChr("Fredo","Mira")

			//	フレド
			TalkPopup("Fredo",0,0,0,0,0)
			{
				"はは、すまない……"
				"ミラさんには迷惑をかけっぱなしだな……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ミラ
			TalkPopup(this,0,0,0,0,0)
			{
				"いえ、いいんです。"
				"私は身寄りもありませんから。\p"
				"こうしてあなたの……フレドの家族の"
				"役に立てて嬉しいのです。\p"
				"……その、約束してください。"
				"無理はしない、少しでも長く生きると。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	フレド
			TalkPopup("Fredo",0,0,0,0,0)
			{
				"あ、ああ……そうだな。"
				"（ミラさん、気のせいか顔が赤いような……）\p"
				"コホン、ともかく君のいう通りだ。"
				"親父のためにも、約束するよ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ミラ
			TalkPopup(this,0,0,0,0,0)
			{
				"ふふっ……はい。"
			}
			WaitPrompt()
			WaitCloseWindow()

			LookChr("Fredo","Orlet")

			SetFlag( GF_1STTALK_PAST_7_FREDO, 1 )
		}
		else
		{
			//　　初回はフレドと共通。
			//　　★ＧＦ以降
			//　　振り返らない
			//	ミラ
			TalkPopup(this,0,0,0,0,0)
			{
				"（ふう……フレドの笑顔は"
				"  心臓に悪いです……）\p"
				"ともかく、しっかり看病をしましょう。"
				"彼との約束のためにも。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else
	{

		LookChr("this","LEADER")

		if(!FLAG[TF_MIRA_TALK])
		{
			//▼過去編ⅦＡ王宮内を歩く
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：部屋に入って五番目・オルレットの傍で備品に向くなど
			//	モーション	：
			//───────────────
			//	ミラ
			TalkPopup(this,0,0,0,0,0)
			{
				"私は王都の出身ですが"
				"幼い頃に身内を失くしたのです。\p"
				"今は身寄りもありませんから、"
				"こうして皆さんの手伝いを。\p"
				"それに……フレドさんはどこか"
				"危なっかしい所がありますから……\p"
				"その、私も力になってあげなくては。"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_MIRA_TALK,1)

		}
		else
		{
			//　　★繰り返し
			//	ミラ
			TalkPopup(this,0,0,0,0,0)
			{
				"フレドさんはお父さんの事になると"
				"どこか危なっかしくて……\p"
				"……私も力になってあげなくては。"
			}
			WaitPrompt()
			WaitCloseWindow()

		}
	}
	ResetStopFlag(STOPFLAG_TALK)
}
function "Talk_Barossa"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM


	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_BAROSSA_TALK])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：部屋に入って六番目
			//	モーション	：うずくまる
			//───────────────
			//　　振り返らない
			//	バロッサ
			TalkPopup(this,0,0,0,0,0)
			{
				"あの人が亡くなってから"
				"何年になるかねぇ……\p"
				"お祈りをしなくちゃ……"
				"大樹にお祈りを……"
			}
			WaitPrompt()
			WaitCloseWindow()

			EmotionEx(this, 0.00f,EMO_EX,0,5,1,1,1.5f )
			Wait(30)
			
			//　　バロッサに！エモーション
			//	バロッサ
			TalkPopup(this,0,0,0,0,0)
			{
				"大樹……ああ、大樹……\p"
				"どうしてこんな事に"
				"なっちまったんだろうねぇ……！！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000m（おばさん……必ず助けるよ。）\p"
				"（一人でも多く、少しでも長く……！）"
				"一人でも多く3行目"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_BAROSSA_TALK,1)
		}
		else
		{
			//　　★繰り返し
			//　　振り返らない
			//	バロッサ
			TalkPopup(this,0,0,0,0,0)
			{
				"大樹……ああ、大樹……\p"
				"どうしてこんな事に"
				"なっちまったんだろうねぇ……！！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else
	{
		LookChr("this","LEADER")

		if(!FLAG[TF_BAROSSA_TALK])
		{
			//▼過去編ⅦＡ王宮内を歩く
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：部屋に入って六番目
			//	モーション	：うずくまる
			//───────────────
			//	バロッサ
			TalkPopup(this,0,0,0,0,0)
			{
				"おや……ダーナ様じゃないかい……"
				"ふふ、また寺院を抜け出してきたのかい？\p"
				"次の巫女様の候補者だってのに……"
				"ほんとにしょうがない子だねぇ……\p"
				"ほら、今日はオマケしてあげるから"
				"たーんと食べるんだよ……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000mおばさん、意識が……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ラステル
			TalkPopup("Rastell",0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
			{
				"だいぶ衰弱なさっていますね。"
				"このまま次の寒波が来てしまったら……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000m……ええ、急がないと……"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_BAROSSA_TALK,1)
		}
		else
		{
			//　　★繰り返し
			//	バロッサ
			TalkPopup(this,0,0,0,0,0)
			{
				"おっとそうだ、明日の仕入れの"
				"準備をしなくちゃ……\p"
				"ああ、それにしても今日は"
				"冷えるねぇ……どうしたんだろう……"
			}
			WaitPrompt()
			WaitCloseWindow()

		}
	}
	ResetStopFlag(STOPFLAG_TALK)
}
function "Talk_Zijo"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

//	LookChr("this","LEADER")
	ChangeSubAnimation(this,SUBMOT_EYE,ANI_E_CLOSE_E,1)


	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_TALK_MOB03])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・中央
			//───────────────
			//	配置・カメラ：中央一番目
			//	モーション	：寝込む
			//───────────────
			//	王宮の侍女
			TalkPopup(this,0,0,0,0,0)
			{
				"こんな日は思い出します……"
				"庭園で花を手入れしていた日々を……\p"
				"サライ陛下が優しく"
				"声を掛けてくださいましたっけ……\p"
				"ふふ、ダーナ様が戻ったからでしょうか……\p"
				"ダーナ様2行目"
				"さっきから昔の事を思い出してばかり……"
				"ああ、懐かしい……"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_TALK_MOB03,1)

		}
		else
		{
			//　　★繰り返し
			//	王宮の侍女
			TalkPopup(this,0,0,0,0,0)
			{
				"ハア、ハア……"
				"今日はなんだか懐かしい事ばかり……\p"
				"ふふ……いつかあんな日々が"
				"戻ってくるといいですね……"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else
	{
		if(!FLAG[TF_TALK_MOB03])
		{
			//▼過去編ⅦＡ王宮内を歩く
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・中央
			//───────────────
			//	配置・カメラ：中央一番目
			//	モーション	：寝込む
			//───────────────
			//	王宮の侍女
			TalkPopup(this,0,0,0,0,0)
			{
				"ハア、ハア……"
				"今日はなんだか痛みますね……\p"
				"あの、ダーナ様……私たち……"
				"無事この冬を越せるのでしょうか……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000mそれは……分かりません。\p"
				"でも今は心配するよりも"
				"やれることを精一杯やりましょう。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	王宮の侍女
			TalkPopup(this,0,0,0,0,0)
			{
				"そ、そうですね……\p"
				"（ダーナ様、もしかして"
				"  噂の通り予知の力が……？）"
			}
			WaitPrompt()
			WaitCloseWindow()
			
			SetFlag(TF_TALK_MOB03,1)

		}
		else
		{
			//　　★繰り返し
			//	王宮の侍女
			TalkPopup(this,0,0,0,0,0)
			{
				"ダーナ様……\p"
				"いえ、なんでもありません……"
				"……ふふ、私も頑張らないとですね……"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	ResetStopFlag(STOPFLAG_TALK)
	ChangeSubAnimation(this,SUBMOT_EYE,ANI_E_CLOSE_S,1)

}
function "Talk_Cryo"
{

	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM


	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_CRYO_TALK])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・中央
			//───────────────
			//	配置・カメラ：中央二番目
			//	モーション	：うずくまる
			//───────────────

			LookChr("this","LEADER")

			//	クライオ
			TalkPopup(this,0,0,0,0,0)
			{
				"ハン……倉庫の食糧つっても"
				"一時凌ぎだろ……"
				"いつまでもつか怪しいもんだぜ……\p"
				"第一、冬はまだまだ長いんだぜ。"
				"寒波だって何度も来るはずだしな。\p"
				"もうあの理術士もいねえ……"
				"あの夜だって、理術士がいなきゃ全員……"
			}
			WaitPrompt()
			WaitCloseWindow()

			LookReset("this")

			//　　クライオ、顔を伏せる。
			//	クライオ
			TalkPopup(this,0,0,0,0,0)
			{
				"うう……チクショウ、チクショウ！\p"
				"もう何だっていい……"
				"俺は、生き延びたいんだよぉぉっ……！"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_CRYO_TALK,1)

		}
		else
		{
			//　　★繰り返し
			//　　振り返らない
			//	クライオ
			TalkPopup(this,0,0,0,0,0)
			{
				"うう……チクショウ、チクショウ！\p"
				"もう何だっていい……"
				"俺は、生き延びたいんだよぉぉっ……！"
			}
			WaitPrompt()
			WaitCloseWindow()

		}

	}
	else
	{
		LookChr(this,"LEADER")

		if(!FLAG[TF_CRYO_TALK])
		{

			//▼過去編ⅦＡ王宮内を歩く
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・中央
			//───────────────
			//	配置・カメラ：中央二番目
			//	モーション	：うずくまる
			//───────────────
			//	クライオ
			TalkPopup(this,0,0,0,0,0)
			{
				"ハッ……ようやくのご帰還かよ。"
				"大樹の手先！　エタニア人の敵ッ！\p"
				"あんたさえいなきゃ……"
				"お、俺たちはなァ！！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ラステル
			TalkPopup("Rastell",0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
			{
				"そこまでだ──それ以上、"
				"ダーナ様への侮辱は許さないぞ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000mいいのです、ラステル。\p"
				"この方の悲しみも分かります。"
				"……そして生きたいという気持ちも。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	クライオ
			TalkPopup(this,0,0,0,0,0)
			{
				"ぐっ……\p"
				"わ、分かったような口を利くなッ！"
				"あっちへいけッ！！"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_CRYO_TALK,1)
		}
		else
		{
			//　　★繰り返し
			//	クライオ
			TalkPopup(this,0,0,0,0,0)
			{
				"大樹の巫女が悪いんだ……"
				"ぜんぶアンタのせいなんだ……！\p"
				"でなきゃ……でなきゃ"
				"納得できるかよっ！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	ResetStopFlag(STOPFLAG_TALK)
}
function "Talk_Shenna"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM


	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_SHENNA_TALK])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：入り口付近で出かける人を指揮する
			//	モーション	：
			//───────────────

			LookChr(this,"LEADER")

			//　　ここで振り向く
			//	修道女シェンナ
			TalkPopup(this,0,0,0,0,0)
			{
				"……少し前まで、オルガ様の指示で"
				"寒さに強い馬鈴薯を栽培していたんです。\p"
				"でもここまで気温が下がってはもう……"
				"理力も使えないし……\p"
				"……いえ、ともかく今をしのがないと。\p"
				"ダーナ様もどうかお気をつけ下さい。"
				"雪が深くなっている所もございますから。"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_SHENNA_TALK,1)

		}
		else
		{

			LookChr(this,"LEADER")

			//　　★繰り返し
			//	修道女シェンナ
			TalkPopup(this,0,0,0,0,0)
			{
				"私たちは寺院に残っている"
				"食糧を取ってくるつもりです。\p"
				"ダーナ様も、どうかお気をつけ下さい。 "
				"雪が深くなっている所もございますから。 "
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else
	{

		if(!FLAG[GF_1STTALK_PAST_7_SHENNA])
		{
			//▼過去編ⅦＡ王宮内を歩く
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・中央
			//───────────────
			//	配置・カメラ：Ｔ字路の手前あたり・下の修道女と話す
			//	モーション	：
			//───────────────
			//　　★ＧＦ初回（サブイベント化）

			TurnToChr("Sister_7_01","LEADER",8.0f)
			LookChr("Sister_7_01","LEADER")
						
			//	修道女シェンナ
			TalkPopup("Shenna",0,0,0,0,0)
			{
				"ダーナ様……！"
				"本当によくお戻りになりました！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000mふふ、シェンナは変わりませんね。"
				"元気そうで何よりです。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	修道女シェンナ
			TalkPopup("Shenna",0,0,0,0,0)
			{
				"もちろんですよ！"
				"そりゃあ、色々ありましたけど……\p"
				"…………ダーナ様、その。\p"
				"実は理術士のオドさんが……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　ダーナに！エモーション
			EmotionEx("LEADER", 0.00f,EMO_EX,0,5,1,1,1.5f )
			Wait(30)
			
			
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000mえっ！　そういえば姿が……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	修道女
			TalkPopup("Sister_7_01",0,0,0,0,0)
			{
				"ほんの先日の事です……\p"
				"寒波からみんなを守ろうと"
				"理力を使いすぎて……"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetChrWork("Sister_7_01", CWK_DEFAULT_SKIPNODE_OFF, 1)
			ChangeAnimation( "Sister_7_01" , "ANI_EV_SAD_S", -1 , 1 )

			TalkPopup("Sister_7_01",0,0,0,0,0)
			{
				"無理はなさらないでって"
				"お止めしていたのに……！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　顔を覆ってなく修道女。

			//	修道女シェンナ
			TalkPopup("Shenna",0,0,0,0,0)
			{
				"……涙をお拭きなさい。"
				"そんな顔ではあの方に申し訳が立ちません！"
			}
			WaitPrompt()
			WaitCloseWindow()

			WaitAnimation2( "Sister_7_01" , -1, 1, "ANI_EV_SAD_S",  0)
			ChangeAnimation( "Sister_7_01" , "ANI_EV_SAD_E", -1 , 1 )

			//	修道女シェンナ
			TalkPopup("Shenna",0,0,0,0,0)
			{
				"すみません、お帰りになって"
				"早々にこんな話を……\p"
				"ともかく、奥へどうぞ。"
				"ずっとお待ちになっていたんですよ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			WaitAnimation2( "Sister_7_01" , -1, 1, "ANI_EV_SAD_E",  0)
			LookChr("Sister_7_01","Sister_7_01")
			TurnToChr("Sister_7_01","Shenna",8.0f)

			SetFlag(GF_1STTALK_PAST_7_SHENNA,1)
		}
		else
		{
			LookChr(this,"LEADER")

			//　　★ＧＦ以降
			//	修道女シェンナ
			TalkPopup(this,0,0,0,0,0)
			{
				"悲しい事は毎日のようにあります。"
				"……でも立ち止まってなんていられません！\p"
				"せめて王都に残った人たちだけでも"
				"守りきらないと……\p"
				"ダーナ様、ともかく奥へどうぞ。"
				"きっとお喜びになりますよ。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	ResetStopFlag(STOPFLAG_TALK)
}

function "Talk_Sister_7_01"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_TALK_MOB04])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・中央
			//───────────────
			//	配置・カメラ：バロッサの看病
			//	モーション	：
			//───────────────
			//	修道女
			TalkPopup(this,0,0,0,0,0)
			{
				"凍血病は軽度なのですが、"
				"精神的に参っておられるみたいで……\p"
				"あるいは細菌が脳を"
				"侵し始めているのかもしれません……\p"
				"……申し訳ありません、"
				"私たちにもどうしようもないんです……"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_TALK_MOB04,1)

		}
		else
		{
			//　　★繰り返し
			//	修道女
			TalkPopup(this,0,0,0,0,0)
			{
				"薬は処方しているのですが……\p"
				"……申し訳ありません、これ以上"
				"私たちにもどうしようもないんです…… "
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	else
	{
		if(!FLAG[GF_1STTALK_PAST_7_SHENNA])
		{
			//▼過去編ⅦＡ王宮内を歩く
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・中央
			//───────────────
			//	配置・カメラ：Ｔ字路の手前あたり・下の修道女と話す
			//	モーション	：
			//───────────────
			//　　★ＧＦ初回（サブイベント化）

			TurnToChr("Shenna","LEADER",8.0f)
			LookChr("Shenna","LEADER")
			
			//	修道女シェンナ
			TalkPopup("Shenna",0,0,0,0,0)
			{
				"ダーナ様……！"
				"本当によくお戻りになりました！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000mふふ、シェンナは変わりませんね。"
				"元気そうで何よりです。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	修道女シェンナ
			TalkPopup("Shenna",0,0,0,0,0)
			{
				"もちろんですよ！"
				"そりゃあ、色々ありましたけど……\p"
				"…………ダーナ様、その。\p"
				"実は理術士のオドさんが……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　ダーナに！エモーション
			EmotionEx("LEADER", 0.00f,EMO_EX,0,5,1,1,1.5f )
			Wait(30)
			
			
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000mえっ！　そういえば姿が……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	修道女
			TalkPopup("Sister_7_01",0,0,0,0,0)
			{
				"ほんの先日の事です……\p"
				"寒波からみんなを守ろうと"
				"理力を使いすぎて……"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetChrWork("Sister_7_01", CWK_DEFAULT_SKIPNODE_OFF, 1)
			ChangeAnimation( "Sister_7_01" , "ANI_EV_SAD_S", -1 , 1 )

			TalkPopup("Sister_7_01",0,0,0,0,0)
			{
				"無理はなさらないでって"
				"お止めしていたのに……！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　顔を覆ってなく修道女。

			//	修道女シェンナ
			TalkPopup("Shenna",0,0,0,0,0)
			{
				"……涙をお拭きなさい。"
				"そんな顔ではあの方に申し訳が立ちません！"
			}
			WaitPrompt()
			WaitCloseWindow()

			WaitAnimation2( "Sister_7_01" , -1, 1, "ANI_EV_SAD_S",  0)
			ChangeAnimation( "Sister_7_01" , "ANI_EV_SAD_E", -1 , 1 )

			//	修道女シェンナ
			TalkPopup("Shenna",0,0,0,0,0)
			{
				"すみません、お帰りになって"
				"早々にこんな話を……\p"
				"ともかく、奥へどうぞ。"
				"ずっとお待ちになっていたんですよ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			LookChr("Shenna","Sister_7_01")
			TurnToChr("Shenna","Sister_7_01",8.0f)
			WaitAnimation2( "Sister_7_01" , -1, 1, "ANI_EV_SAD_E",  0)

			SetFlag(GF_1STTALK_PAST_7_SHENNA,1)
		}
		else
		{
			//	修道女
			TalkPopup(this,0,0,0,0,0)
			{
				"今アトラさんが"
				"埋葬の準備を進めてらっしゃいます。\p"
				"……後でお会いになると"
				"いいかもしれませんね。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	ResetStopFlag(STOPFLAG_TALK)

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])
	{
			LookChr("Sister_7_01","Barossa")
	}
}
function "Talk_Anthea"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[GF_1STTALK_PAST_7_ANTHEA])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・後半
			//───────────────
			//	配置・カメラ：玉座の少し手前
			//	モーション	：寝込む
			//───────────────
			//　　★ＧＦ初回
			//　　振り向かない
			//	シーア
			TalkPopup("Thea",0,0,0,0,0)
			{
				"どうしたの、お母さん。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	アンシア
			TalkPopup(this,0,0,0,0,0)
			{
				"それが……夢の中で"
				"ミーアに怒られてしまって……\p"
				"あまりこっちに来ちゃ駄目だって……"
				"シーアのそばにいなくちゃって……\p"
				"ううっ……あの子ったら……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	シーア
			TalkPopup("Thea",0,0,0,0,0)
			{
				"ふふっ、やっぱり"
				"ミーアちゃんは凄いなぁ。\p"
				"お母さんも、"
				"しっかりしなくちゃ駄目だよ？"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	アンシア
			TalkPopup(this,0,0,0,0,0)
			{
				"……ああ……そうね……"
				"今までごめんなさいね、シーア……！"
			}
			WaitPrompt()
			WaitCloseWindow()
			
			SetFlag(GF_1STTALK_PAST_7_ANTHEA,1)
		}
		else
		{
			//　　★ＧＦ以降
			//　　振り向かない
			//	アンシア
			TalkPopup(this,0,0,0,0,0)
			{
				"あなたの言う通りだわ……"
				"私もしっかりしなくてはね……\p"
				"ハア……ハア……"
				"シーア、今までごめんなさいね……"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else
	{
		//▼過去編ⅦＡ王宮内を歩く
		//───────────────
		//	場所		：王宮内部（過去終末版）・謁見の間・後半
		//───────────────
		//	配置・カメラ：玉座の少し手前
		//	モーション	：寝込む
		//───────────────
		//　　振り向かない
		//	アンシア
		TalkPopup(this,0,0,0,0,0)
		{
			"……ミーア……まって頂戴……"
			"………ハア……ハア………\p"
			"うう……お母さんを置いていかないで……"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	ResetStopFlag(STOPFLAG_TALK)
}
function "Talk_Thea"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[GF_1STTALK_PAST_7_THEA2])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・後半
			//───────────────
			//	配置・カメラ：玉座の少し手前・アンシアの看病
			//	モーション	：
			//───────────────
			//　　★ＧＦ初回
			//　　シーアにＰＡエモーション。
			//	シーア
			TalkPopup(this,0,0,0,0,0)
			{
				"ダーナ様……\p"
				"（なんだか寂しそうなお顔……"
				"  もしかして……）"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000mえっと、どうかしたかな？"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	シーア
			TalkPopup(this,0,0,0,0,0)
			{
				"ううん、何でもないです。\p"
				"ふふ、今日はお母さんも"
				"いつになく元気みたいで。\p"
				"これもダーナ様が戻ってきた"
				"お陰かもしれませんね！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//　　にっこりと笑顔を見せるシーア。

			SetFlag(GF_1STTALK_PAST_7_THEA2,1)

		}
		else
		{
			//　　★ＧＦ以降
			//	シーア
			TalkPopup(this,0,0,0,0,0)
			{
				"今日はお母さんも"
				"いつになく元気みたいです。\p"
				"これもダーナ様が戻ってきた"
				"お陰かもしれませんね！"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else
	{
		if(!FLAG[GF_1STTALK_PAST_7_THEA])
		{
			//▼過去編ⅦＡ王宮内を歩く
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・後半
			//───────────────
			//	配置・カメラ：玉座の少し手前・みんなの看病のためたらいの前など
			//	モーション	：
			//───────────────
			//　　★ＧＦ初回
			//	シーア
			TalkPopup(this,0,0,0,0,0)
			{
				"お帰りなさい、ダーナ様！"
				"本当にダーナ様なんですね……！"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000mただいま、シーアちゃん。"
				"みんなの看病をしてくれてるみたいだね。\p"
				"ありがとう……でも"
				"無理だけはしちゃダメだよ。\p"
				"前の怪我だってあるんだからね。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	シーア
			TalkPopup(this,0,0,0,0,0)
			{
				"はい、大丈夫です。\p"
				"それに私、こういうの得意ですから。\p"
				"……私とお母さんがこうして"
				"いられるのも、みなさんのお陰です。\p"
				"ふふ、少しでも恩返ししなくちゃ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000mそっか……"
				"ありがとう、シーアちゃん。"
			}
			WaitPrompt()
			WaitCloseWindow()
			
			SetFlag(GF_1STTALK_PAST_7_THEA,1)
		}
		else
		{

			//　　★ＧＦ以降
			//	シーア
			TalkPopup(this,0,0,0,0,0)
			{
				"足の怪我があるから"
				"あまり長い間は立ってられませんけど……\p"
				"こうしてお母さんやみんなの"
				"看病をするくらいならできます。\p"
				"ふふ、少しでも"
				"恩返ししなくちゃですね。"
			}
			WaitPrompt()
			WaitCloseWindow()

		}
	}
	ResetStopFlag(STOPFLAG_TALK)
}
function "Talk_Cesil"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM


	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		LookChr("this","LEADER")

		if(!FLAG[TF_CESIL_TALK])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・後半
			//───────────────
			//	配置・カメラ：シーア・アンシアの傍
			//	モーション	：身を起こしている／手元に壷など調薬道具
			//───────────────
			//	修道女セシル
			TalkPopup(this,0,0,0,0,0)
			{
				"薬が底をついて来たので"
				"調薬をしておかないと……\p"
				"ふふ、そう心配そうな顔を"
				"なさらないでください。"
				"まだ、この程度なら。\p"
				"それよりオルガ様の事が心配ですね。"
				"何か悩まれているようですが……\p"
				"……私たちは少し、オルガ様に"
				"頼りすぎなのかもしれません……"
			}
			WaitPrompt()
			WaitCloseWindow()
			
			SetFlag(TF_CESIL_TALK,1)

		}
		else
		{

			//　　★繰り返し
			//	修道女セシル
			TalkPopup(this,0,0,0,0,0)
			{
				"オルガ様の事が心配ですね。"
				"何か悩まれているようですが……\p"
				"……私たちは少し、オルガ様に"
				"頼りすぎなのかもしれません……"
			}
			WaitPrompt()
			WaitCloseWindow()

		}
	}
	else
	{
		if(!FLAG[GF_1STTALK_PAST_7_CESIL])
		{

			ChangeSubAnimation("this",SUBMOT_EYE,ANI_E_CLOSE_E,1)

			//▼過去編ⅦＡ王宮内を歩く
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・後半
			//───────────────
			//	配置・カメラ：シーア・アンシアの傍
			//	モーション	：寝込む
			//───────────────
			//　　★ＧＦ初回
			//　　ダーナに！エモーション
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000mセシル、あなたまで……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	修道女セシル
			TalkPopup(this,0,0,0,0,0)
			{
				"ふふ……ダーナ様……"
				"よく戻られましたね……\p"
				"申し訳ありません、あなたを"
				"お支えすると約束しておきながら……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"DANA"
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000m……いいえ、よく"
				"無事でいてくれました。\p"
				"（ああ、でもこんなにやつれて……）"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	修道女セシル
			TalkPopup(this,0,0,0,0,0)
			{
				"不甲斐ないですね……実は私の看病は"
				"シーアちゃんがしてくれているのです。\p"
				"ふふ、これではまったく"
				"あべこべですよね……\p"
				"でもシーアちゃんは"
				"とっても覚えがいいんですよ。\p"
				"ダーナ様も褒めてあげて下さいね？"
			}
			WaitPrompt()
			WaitCloseWindow()
			
			SetFlag(GF_1STTALK_PAST_7_CESIL,1)
		}
		else
		{
			ChangeSubAnimation("this",SUBMOT_EYE,ANI_E_CLOSE_E,1)

			//　　★ＧＦ以降
			//	修道女セシル
			TalkPopup(this,0,0,0,0,0)
			{
				"私も長くないかもしれませんが……\p"
				"せめてシーアちゃんに"
				"手当ての心得を伝えている所です。\p"
				"ふふ、とっても覚えがいいんですよ。"
				"ダーナ様も褒めてあげて下さいね？2"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	ResetStopFlag(STOPFLAG_TALK)

	if(!FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{

		ChangeSubAnimation("this",SUBMOT_EYE,ANI_E_CLOSE_S,1)
	}
}
function "Talk_Citizen_7_A02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_TALK_MOB05])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・前半
			//───────────────
			//	配置・カメラ：玉座の手前
			//	モーション	：うずくまる
			//───────────────
			//	男
			TalkPopup(this,0,0,0,0,0)
			{
				"オルガさんのお陰で食糧の補給が"
				"できそうなんだってな……\p"
				"へへ、そりゃすげえ……"
				"あの人には本当に世話になるぜ……\p"
				"あの人がいなきゃ俺たちは"
				"とっくにダメだったろうよ……"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_TALK_MOB05,1)

		}
		else
		{
			//　　★繰り返し
			//	男
			TalkPopup(this,0,0,0,0,0)
			{
				"オルガさんには本当に世話になるぜ……\p"
				"あの人がいなきゃ俺たちは"
				"とっくにダメだったろうよ……"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	else
	{
		if(!FLAG[TF_TALK_MOB05])
		{
			//▼過去編ⅦＡ王宮内を歩く
			//───────────────
			//	場所		：王宮内部（過去終末版）・謁見の間・後半
			//───────────────
			//	配置・カメラ：玉座の手前
			//	モーション	：うずくまる
			//───────────────
			//	男
			TalkPopup(this,0,0,0,0,0)
			{
				"家族はみんな"
				"あの病気で死んじまってな……\p"
				"俺は故郷を捨ててここまで"
				"逃げてきたんだ……なのに……\p"
				"……俺たちは一体いつまで"
				"耐えなきゃいけねえんだよお……！"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_TALK_MOB05,1)
		}
		else
		{
			//　　★繰り返し
			//	王都市民
			TalkPopup(this,0,0,0,0,0)
			{
				"……俺たちは一体いつまで"
				"耐えなきゃいけねえんだよお……！"
			}
			WaitPrompt()
			WaitCloseWindow()

		}
	}
	ResetStopFlag(STOPFLAG_TALK)
}

function "Talk_Olga"	
{
	SetStopFlag(STOPFLAG_TALK)

	if(!FLAG[GF_SUBEV_PAST_07_TALK_OLGA])			// 過去編Ⅶ：▼オルガに報告する　を見た
	{
		EventCue("mp6222m2:SubEV_Past_07_Main021")
	}
	else if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		CallFunc("system:talk_begin_zoom")		//TALK_ZOOM
		ChangeAnimation( "Olga" , "ANI_EV_UDEGUMI", -1 , 1 )

		if(!FLAG[TF_OLGA_TALK])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・玉座前
			//───────────────
			//	配置・カメラ：オルガ・文官で話す
			//	モーション	：
			//───────────────
			//　　オルガは忙しそうにしており振り返らない。
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000m（オルガちゃん……忙しそうだな。"
				"  声を掛けたいけど……）\p"
				"（ううん、やめておこう。）\p"
				"（オルガちゃんにも"
				"  考えたい事があるみたいだから……）"
			}
			WaitPrompt()
			WaitCloseWindow()
			
			SetFlag(TF_OLGA_TALK,1)

		}
		else
		{
			//　　★繰り返し
			//　　オルガは忙しそうにしており振り返らない。
			TalkPopup("LEADER",0,0,0,0,0)
			{
				"#000e#000m（声を掛けるのはやめておこう。）\p"
				"（オルガちゃんにも"
				"  考えたい事があるみたいだから……）"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}
	ResetStopFlag(STOPFLAG_TALK)
	ChangeAnimation( "Olga" , "ANI_EV_UDEGUMI", -1 , 1 )
	LookChr("Olga","Officer_7_01")

}
function "Talk_Officer_7_01"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	//LookChr("this","LEADER")

	if(!FLAG[GF_SUBEV_PAST_07_TALK_OLGA])			// 過去編Ⅶ：▼オルガに報告する　を見た
	{
		EventCue("mp6222m2:SubEV_Past_07_Main021")
	}

	else if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_TALK_MOB06])
		{

			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・玉座前
			//───────────────
			//	配置・カメラ：オルガ・文官で話す
			//	モーション	：
			//───────────────
			//　　振り返らない
			//	文官
			TalkPopup(this,0,0,0,0,0)
			{
				"食糧の目処は立ちそうですが、"
				"まだまだ不安材料は多いですな……\p"
				"薪が採れる場所も減っておりますし、"
				"外敵への防備も……\p"
				"オルガ様？　どうなさった。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"Olga"
			TalkPopup("Olga",0,0,0,0,0)
			{
				"#000e#000mいや……大丈夫だ。\p"
				"すまぬな、続けてくれ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_TALK_MOB06,1)

		}
		else
		{
			//　　★繰り返し
			//　　振り返らない
			//	文官
			TalkPopup(this,0,0,0,0,0)
			{
				"まだまだ不安材料は多いですな……"
				"外敵への防備も手薄ですし……"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	"Olga"
			TalkPopup("Olga",0,0,0,0,0)
			{
				"#000e#000m竜種も南下しているようだ。"
				"何か考えておかなくてはなるまい……"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}
	ResetStopFlag(STOPFLAG_TALK)
	LookChr("Officer_7_01","Olga")
}
function "Talk_Sharl"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","Rastell")

	if(!FLAG[GF_SUBEV_PAST_07_TALK_OLGA])			// 過去編Ⅶ：▼オルガに報告する　を見た
	{
		EventCue("mp6222m2:SubEV_Past_07_Main021")
	}

	else if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_SHARL_TALK])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・正面階段上
			//───────────────
			//	配置・カメラ：正面階段上にある資材前でラステルと話す
			//	モーション	：
			//───────────────
			//　　振り返らない
			//	衛士シャール
			TalkPopup(this,0,0,0,0,0)
			{
				"うむ、幸いここには"
				"備品だけはあるからな。\p"
				"倉庫の鍵も渡しておこう。"
				"きっと使える物があるはずだぞ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ラステル
			TalkPopup("Rastell",0,0,0,0,0)
			{
				"助かります。\p"
				"でも……王都の皆さんの準備は……"
				"準備3行目"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	衛士シャール
			TalkPopup(this,0,0,0,0,0)
			{
				"さあな、そもそも皆が"
				"ついて行くかどうか……\p"
				"いや、案じても始まらん。"
				"ラステル、お前も思うように動くがいい。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ラステル
			TalkPopup("Rastell",0,0,0,0,0)
			{
				"は、はい……"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_SHARL_TALK,1)

		}
		else
		{
			//　　★繰り返し
			//　　振り返らない
			//	衛士シャール
			TalkPopup(this,0,0,0,0,0)
			{
				"こればかりは案じても始まらん。"
				"ラステル、お前も思うように動くがいい。"
			}
			WaitPrompt()
			WaitCloseWindow()

			//	ラステル
			TalkPopup("Rastell",0,0,0,0,0)
			{
				"は、はい……"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALK)
	LookChr("this","Rastell")
}
function "Talk_Atra"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{

		if(!FLAG[GF_SUBEV_PAST_07_QUEST_A])		//クエストをまだ開始していない
		{
			EventCue("mp6222m2:SubEV_Past_07_Quest_A")
		}
		else if(FLAG[GF_SUBEV_PAST_07_QUEST_B] && !FLAG[GF_SUBEV_PAST_07_QUEST_C])		//【過去クエスト⑦：花を見つける】を見た
		{
			EventCue("mp6222m2:SubEV_Past_07_Quest_C")
		}
		else if(FLAG[GF_SUBEV_PAST_07_QUEST_C])			//【過去クエスト⑦：達成イベント】を見た
		{
			if(!FLAG[TF_ATRA_TALK])
			{
				//　　★クエスト達成後
				//　　配置は粗末な祭壇の前に変わる。
				//　　祈りを捧げている。
				//	侍女アトラ
				TalkPopup(this,0,0,0,0,0)
				{
					"リネオ、マシア、セパ、そしてオド……"
					"ここに永久の冥福を祈らん──"
				}
				WaitPrompt()
				WaitCloseWindow()

				LookChr("this","LEADER")
				TurnToChr("this","LEADER",10.0f)

				//　　ここで振り返る
				//	侍女アトラ
				TalkPopup(this,0,0,0,0,0)
				{
					"ダーナ様、お手伝いいただいて"
					"ありがとうございました。\p"
					"……さあ、そろそろ"
					"お戻りになってください。"
					"ここはかなり冷えますから。"
				}
				WaitPrompt()
				WaitCloseWindow()

				SetFlag(TF_ATRA_TALK,1)
			}
			else
			{
				LookChr("this","LEADER")

				//　　★繰り返し
				//	侍女アトラ
				TalkPopup(this,0,0,0,0,0)
				{
					"これで皆さんも"
					"安らかに眠られることでしょう。\p"
					"……さあ、そろそろ"
					"お戻りになってください。"
					"ここはかなり冷えますから。"
				}
				WaitPrompt()
				WaitCloseWindow()
			}
		}
		else if(!FLAG[GF_SUBEV_PAST_07_QUEST_B] && !FLAG[GF_SUBEV_PAST_07_QUEST_C])		//クエスト進行中
		{
			LookChr("this","LEADER")

			if(!FLAG[TF_ATRA_TALK])
			{
				//▼過去編ⅦＢオルガと話した後
				//───────────────
				//	場所		：王宮内部（過去終末版）・埋葬エリア
				//───────────────
				//	配置・カメラ：他の棺の近く
				//	モーション	：
				//───────────────
				//　　※クエスト開始後の会話
				//	侍女アトラ
				TalkPopup(this,0,0,0,0,0)
				{
					"こちらは最近亡くなった方々です。\p"
					"それぞれ大切になさっていた品を"
					"柩に納めさせて頂きました。\p"
					"私たちに出来ることは"
					"それくらいしかありませんから……"
				}
				WaitPrompt()
				WaitCloseWindow()

				//	"DANA"
				TalkPopup("LEADER",0,0,0,0,0)
				{
					"#000e#000mそうですか……せめて"
					"手厚く弔ってあげましょう。"
				}
				WaitPrompt()
				WaitCloseWindow()

				//	侍女アトラ
				TalkPopup(this,0,0,0,0,0)
				{
					"はい、ありがとうございます"
					"ダーナ様。"
				}
				WaitPrompt()
				WaitCloseWindow()

				SetFlag(TF_ATRA_TALK,1)
			}
			else
			{
				//　　★繰り返し
				//	侍女アトラ
				TalkPopup(this,0,0,0,0,0)
				{
					"まもなく埋葬の準備も整います。\p"
					"埋葬2行目"
					"ダーナ様、どうか花の方は"
					"よろしくお願い致します。"
				}
				WaitPrompt()
				WaitCloseWindow()
			}
		}

	}

	ResetStopFlag(STOPFLAG_TALK)
}
function "Talk_Sister_7_02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	LookChr("this","LEADER")

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{

		if(!FLAG[GF_SUBEV_PAST_07_QUEST_A])		//クエストをまだ開始していない
		{
			EventCue("mp6222m2:SubEV_Past_07_Quest_A")
		}
		else if(FLAG[GF_SUBEV_PAST_07_QUEST_B] && !FLAG[GF_SUBEV_PAST_07_QUEST_C])		//【過去クエスト⑦：花を見つける】を見た
		{
			EventCue("mp6222m2:SubEV_Past_07_Quest_C")
		}
		else if(FLAG[GF_SUBEV_PAST_07_QUEST_C])			//【過去クエスト⑦：達成イベント】を見た
		{
			//　　★クエスト達成後
			//　　配置は資材の前に変わる。
			//	修道女
			TalkPopup(this,0,0,0,0,0)
			{
				"本当にありがとうございました。"
				"私たちも少し、救われた想いです。\p"
				"これからもどうか"
				"私たちを支えてくださいますよう。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
		else	// if(!FLAG[GF_SUBEV_PAST_07_QUEST_B] && !FLAG[GF_SUBEV_PAST_07_QUEST_C])
		{
			//▼過去編ⅦＢオルガと話した後
			//───────────────
			//	場所		：王宮内部（過去終末版）・埋葬エリア
			//───────────────
			//	配置・カメラ：オドの棺の傍
			//	モーション	：
			//───────────────
			//　　※クエスト開始後の会話
			//	修道女
			TalkPopup(this,0,0,0,0,0)
			{
				"やはり、花の一輪も"
				"手向けて差し上げられないのでは"
				"私たちもやるせなくて……\p"
				"ダーナ様、どうか"
				"よろしくお願いいたします。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}

	}

	ResetStopFlag(STOPFLAG_TALK)

}

function "Talk_Citizen_7_C02"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		LookChr("this","LEADER")

		if(!FLAG[TF_TALK_MOB10])
		{
			//	青年
			TalkPopup("Citizen_7_C02",0,0,0,0,0)
			{
				"クソ……腹減ったぜ……\p"
				"聞けば、寺院の方にはまだ"
				"食い物があるそうじゃねえか。\p"
				"ケッ、出し惜しみしやがって。\p"
				"寺院の連中も所詮、"
				"自分が大切だってことかよ。"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_TALK_MOB10,1)
		}
		else
		{
			//　　★繰り返し
			//	青年
			TalkPopup("Citizen_7_C02",0,0,0,0,0)
			{
				"寺院の連中も信用できねえな。\p"
				"いい顔ばかりしやがって、"
				"結局は自分が大切ってことかよ。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)

}

function "Talk_Citizen_7_C03"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		LookChr("this","LEADER")

		if(!FLAG[TF_TALK_MOB09])
		{
			//	王都市民
			TalkPopup("Citizen_7_C03",0,0,0,0,0)
			{
				"次の寒波が"
				"迫っているって話だよな……\p"
				"……このまま王都に篭っていて"
				"大丈夫なんだろうか。\p"
				"でも、オルガ様は色々と"
				"対策を考えてくださっているし……\p"
				"ああ、一体何を信じたらいいんだ……"
				"何を信じたら8行目"
			}
			WaitPrompt()
			WaitCloseWindow()


			SetFlag(TF_TALK_MOB09,1)
		}
		else
		{
			//　　★繰り返し
			//	王都市民
			TalkPopup("Citizen_7_C03",0,0,0,0,0)
			{
				"もうダーナ様たちは"
				"出発の準備を始めているし……\p"
				"ああ、一体何を信じたらいいんだ……2"
				"何を信じたら4行目"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)

}

function "Talk_Citizen_7_C04"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		LookChr("this","LEADER")

		if(!FLAG[TF_TALK_MOB08])
		{
			//	男
			TalkPopup("Citizen_7_C04",0,0,0,0,0)
			{
				"あんたたち、"
				"王都を離れるんだってな……\p"
				"南方はここより"
				"まだマシなんだろ？\p"
				"それなら早く"
				"連れて行ってくれ。\p"
				"もうこんな所は"
				"耐えられねえよ……"
			}
			WaitPrompt()
			WaitCloseWindow()

			SetFlag(TF_TALK_MOB08,1)
		}
		else
		{
			//　　★繰り返し
			//	男
			TalkPopup("Citizen_7_C04",0,0,0,0,0)
			{
				"王都を離れるなら"
				"さっさとしてくれ。\p"
				"俺はもうこんな所は"
				"うんざりなんだよ……"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)

}

function "Talk_Citizen_7_C05"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])			//▽過去編ⅦＢ再訪時
	{
		if(!FLAG[TF_TALK_MOB07])
		{
			TalkPopup("Citizen_7_C05",0,0,0,0,0)
			{
				"うう、母さん……"
				"どうして眠ってるんだよ……\p"
				"これからようやく"
				"恩返しができると思ったのに……\p"
				"頼むから起きておくれよ……"
			}
			WaitPrompt()
			WaitCloseWindow()


			SetFlag(TF_TALK_MOB07,1)
		}
		else
		{
			//　　★繰り返し
			//	青年
			TalkPopup("Citizen_7_C05",0,0,0,0,0)
			{
				"どうしてだよ母さん……"
				"頼むから起きておくれよ……"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
	}

	ResetStopFlag(STOPFLAG_TALK)

}


////////////////////////////////////////////////////////////////////////////////

//■メインイベントセクション

////////////////////////////////////////////////////////////////////////////////

function "SubEV_Past_07_Main012"	//▼王宮内部に入る
{
	//開始処理ここから-----------------------------------------------

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK,0)
	WaitFade()
	
	SaveEventState()
	SaveCamera()

	//環境初期化＆不要なものを隠す
	CallFunc("system:party_reset")
	CallFunc("system:party_remove")

	//キャラクター初期化
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)
	SetChrPos("DANA",0.21f,-373.91f,151.40f)
	Turn("DANA",180.00f,360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	ChangeSubAnimation("DANA",SUBMOT_EXT2,ANI_SIGN_HIDE,1)
	LookReset("DANA")

	SetChrWork("Rastell", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Rastell", INFOFLAG_NOCHRATARI)
	SetChrPos("Rastell",-1.08f,-375.29f,151.37f)
	Turn("Rastell",-179.91f,360.0f)
	ChangeAnimation("Rastell", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Rastell", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Rastell", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	//ChangeSubAnimation("Rastell", SUBMOT_EXT1, ANI_E_LOOKC, 1)

	SetChrPos("eq4028_2",4.16f,-298.71f,160.00f)
	SetParent( "eq4028_2" , "Rastell", "Null_ken" )

	//カメラ設定
	MoveCameraAt( 0 , -0.202f , -311.361f , 158.518f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 21.060f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 7.800f , 0 )	// 基本仰角
	RotateCamera( 0 , 164.560f , 0 )				// 角度
	ChangeCameraPers( 0 , 58.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 140.000, 1.000, 0.700, 0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)

	//スキップ許可
	SetSkipScript("mp6222m2:SubEV_Past_07_Main012_ED")

	//開始処理ここまで-----------------------------------------------

	ExecuteCmd(1, MoveTo, "Rastell",-1.71f,-334.44f,151.37f, 0.1f, 0.16f )

	//SetChrPos("Rastell",-1.71f,-334.44f,151.37f)
	//Turn("Rastell",-179.91f,360.0f)
	Wait(5)

	ExecuteCmd(2, MoveTo, "DANA",-0.02f,-334.32f,151.40f, 0.1f, 0.16f )

	//SetChrPos("DANA",-0.02f,-334.32f,151.40f)
	//Turn("DANA",180.00f,360.0f)

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	//──────────────────────────────
	//▼王宮内部に入る(mp6222m)
	//──────────────────────────────
	//　　画面フェードインして、王宮内部に
	//　　避難して疲弊しきっている市民の様子を映していく。
	//　　市民の中にはシーアなどダーナが見知った顔も
	//　　(※ＮＰＣのキャラ指定とセリフは四方監修で調整予定
	//　　 　王宮マップ構成によっては場所も再検討の必要あり？)

	Wait(30)

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -0.202f , -311.361f , 162.463f , 200 )
//	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 8.866f , 240 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 14.399f , 200 )
//	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 71.704f , 240 )

	//MoveCameraAt( 0 , -0.202f , -311.361f , 162.463f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 21.060f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 14.399f , 0 )	// 基本仰角
	//RotateCamera( 0 , 164.375f , 0 )				// 角度
	//ChangeCameraPers( 0 , 58.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	Wait(30)

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()
	
	StopThread(1)
	StopThread(2)

	SetChrPos("Rastell",-0.70f,-282.82f,160.00f)
	Turn("Rastell",-180.00f,360.0f)

	SetChrPos("DANA",0.04f,-281.68f,160.00f)
	Turn("DANA",-180.00f,360.0f)

	Wait(30)

	MoveCameraAt( 0 , -0.311f , -273.517f , 161.520f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 11.469f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -3.481f , 0 )	// 基本仰角
	RotateCamera( 0 , 359.958f , 0 )				// 角度
	ChangeCameraPers( 0 , 46.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ExecuteCmd(1, MoveTo, "DANA",0.19f,-269.41f,160.00f, 0.1f, 0.15f )
	Wait(5)
	ExecuteCmd(2, MoveTo, "Rastell",-0.73f,-269.50f,160.00f, 0.1f, 0.15f )

	//SetChrPos("DANA",0.19f,-269.41f,160.00f)
	//Turn("DANA",180.00f,360.0f)
	//SetChrPos("Rastell",-0.73f,-269.50f,160.00f)
	//Turn("Rastell",180.00f,360.0f)

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()
	
	Wait(30)

//	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -0.311f , -273.517f , 161.520f , 200 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 0.05f , 170 )
//	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 14.399f , 200 )
//	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 71.704f , 240 )

	//MoveCameraAt( 0 , -0.311f , -273.517f , 161.520f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 0.001f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -3.468f , 0 )	// 基本仰角
	//RotateCamera( 0 , 359.959f , 0 )				// 角度
	//ChangeCameraPers( 0 , 46.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(120)

	SetChrInfoFlag("DANA",INFOFLAG_INVISIBLE)
	SetChrInfoFlag("Rastell",INFOFLAG_INVISIBLE)

	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	
	
//	WaitThread(1)
//	WaitThread(2)

	Wait(50)
	
	CrossFade(FADE_NORMAL)
	ResetChrInfoFlag("DANA",INFOFLAG_INVISIBLE)
	ResetChrInfoFlag("Rastell",INFOFLAG_INVISIBLE)

	MoveCameraAt( 0 , -1.598f , -266.189f , 161.619f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.049f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 2.392f , 0 )	// 基本仰角
	RotateCamera( 0 , 35.345f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 2.086f , -264.896f , 161.817f , 1000 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 7.049f , 1000 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 0.779f , 1000 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 3.172f , 1000 )

	//MoveCameraAt( 0 , 2.086f , -264.896f , 161.817f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 7.049f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 0.779f , 0 )	// 基本仰角
	//RotateCamera( 0 , 3.172f , 0 )				// 角度
	//ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(30)

	//	市民Ａ
	TalkPopup(UNDEF,0,3,60,60,0)
	{
		"#11Sはは、とうとう"
		"#11Sアイツも逝っちまった……\p"
		"#11S待ってろよ。"
		"#11Sオレも今そっちに……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	市民Ｃ
	TalkPopup(UNDEF,0,3,300,240,0)
	{
		"#11S寒いよう……痛いよう……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	市民Ｂ
	TalkPopup(UNDEF,0,3,300,60,0)
	{
		"#11S……食料もいよいよ底を"
		"#11Sつくんじゃないかって噂だぜ。\p"
		"#11Sこんなことなら……"
		"#11S……もういっそのこと……"
	}
	WaitPrompt()
	WaitCloseWindow()

	EarthQuake(0.07, 0.07 , 7)
	//	市民Ｄ
	TalkPopup(UNDEF,0,3,350,170,0)
	{
		"#12S終わりだよ、このエタニアは！"
		"#12Sもう何もかも終わりなんだぁっ！！"
	}
	WaitPrompt()
	WaitCloseWindow()
	Wait(35)

	CrossFade(FADE_CROSS)
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	MoveCameraAt( 0 , -3.723f , -236.540f , 161.247f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.319f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -3.109f , 0 )	// 基本仰角
	RotateCamera( 0 , 170.731f , 0 )				// 角度
	ChangeCameraPers( 0 , 45.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	TurnToChr("Thea","DANA", 9.0f)
	Wait(10)

	//　　不意に何かに気づいたかのように
	//　　シーアに「！」エモーション表示。
	EmotionEx("Thea", 0.00f,EMO_EX,0,5,1,1,1.0f )
	Wait(40)
	
	//	シーア
	TalkPopup("Thea",0,2,0,0,0)
	{
		"あ……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　ラステルの先導で正門方面から
	//　　王宮内に入って来たダーナを映す。
	//	シーア
	TalkPopup("Thea",0,2,0,0,0)
	{
		"ダーナ様……？"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　シーアの声でダーナに気付く市民たち。
	//	市民Ａ
	TalkPopup(UNDEF,0,3,60,200,0)
	{
		"えっ……"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)
	
	CrossFade(FADE_CROSS)

	SetChrPos("SecretaryMan",-2.16f,-261.12f,160.00f)
	Turn("SecretaryMan",-15.96f,360.0f)

	SetChrPos("Mira",2.71f,-260.37f,160.00f)

	SetChrPos("Sister_7_01",1.16f,-245.44f,160.00f)
	Turn("Sister_7_01",8.37f,360.0f)
	SetChrPos("Shenna",2.05f,-244.37f,160.00f)
	Turn("Shenna",18.83f,360.0f)

	SetChrPos("Mira",2.71f,-260.37f,160.00f)
	Turn("Mira",-60.40f,360.0f)

	SetChrPos("Fredo",2.15f,-255.59f,160.00f)
	Turn("Fredo",-42.88f,360.0f)

	LookReset("Sister_7_01")
	LookReset("Shenna")
	LookReset("Fredo")
	
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_SAD,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_SAD,1)	

	MoveCameraAt( 0 , -0.079f , -267.357f , 161.644f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.819f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -4.941f , 0 )	// 基本仰角
	RotateCamera( 0 , 19.480f , 0 )				// 角度
	ChangeCameraPers( 0 , 57.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -0.079f , -267.357f , 161.644f , 700 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.499f , 700 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -3.962f , 700 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 335.424f , 700 )

	//MoveCameraAt( 0 , -0.079f , -267.357f , 161.644f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 4.499f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -3.962f , 0 )	// 基本仰角
	//RotateCamera( 0 , 335.424f , 0 )				// 角度
	//ChangeCameraPers( 0 , 57.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Turn("Fredo",6.86f,9.0f)

	Turn("Mira",21.32f,10.0f)
	Turn("Citizen_7_B01",-22.52f,8.0f)

	Wait(50)

	//	市民Ｂ
	TalkPopup(UNDEF,0,3,340,70,0)
	{
		"おお、本当だ。"
		"確かにダーナ様だ……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	市民Ｄ
	TalkPopup(UNDEF,0,3,260,60,0)
	{
		"帰っていらっしゃった……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	市民Ｃ
	TalkPopup(UNDEF,0,3,70,50,0)
	{
		"フン……俺たちを見捨てて"
		"逃げ出したのかと思ってたぜ。\p"
		"どこぞの女王サマや"
		"執政官殿みたいになあ……"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	Wait(10)

	CrossFade(FADE_CROSS)
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	
	MoveCameraAt( 0 , -0.428f , -269.556f , 161.570f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.349f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -9.182f , 0 )	// 基本仰角
	RotateCamera( 0 , 135.297f , 0 )				// 角度
	ChangeCameraPers( 0 , 42.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(10)
	
	//　　周囲を見回しつつ沈痛な表情を見せるダーナ。
	
	TalkPopup("DANA",0,0,0,0,0)
	{
		"#000mこ、これは……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	ラステル
	TalkPopup("Rastell",0,0,0,0,0)
	{
		"#011e人数が減っていますね……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"DANA"
	TalkPopup("DANA",0,0,0,0,0)
	{
		"#0L#061e………………………………"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(30)

	//　　ここで操作許可。
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	//終了処理ここから----------------------------------------------------
	CallFunc("mp6222m2:SubEV_Past_07_Main012_ED")
}

function "SubEV_Past_07_Main012_ED"
{

	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//キャラクター初期化
//	CallFunc("system:reset_chrmot_DANA")
//	CallFunc("system:reset_chrmot_Sarai")
//	CallFunc("system:reset_chrmot_Olga")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)
	
	SetChrPos("Rastell", -100000.0f, 0.0f , 0.0f )

	//フラグ立て・アイテム入手・アイテム回収
	SetFlag(GF_SUBEV_PAST_07_IN_CASTLE,1)		// 過去編Ⅶ：▼王宮内部に入る
	SetFlag(SF_PAST_AGAIN,0)		//イオに話すまでは現代編戻れない

	SetFlag( SF_WARP_DISABLED, 1 )		//ワープ使用不可

	//マーカー
	SetMapMarker( SMI_DANA_QUEST ,PAGE_MP6222m2, MARKER_SUBEV_PAST_7_1, -1.18f,-223.18f,161.96f, -1.18f,-223.18f,MARKER_SUBEV_PAST_7_1,MN_F_MP6222m2,-1)		//過去Ⅶ　オルガに報告する

	CallFunc("mp6222m2:init")

	//イベント後の再配置
	SetChrPos("LEADER",0.03f,-274.64f,160.00f)
	Turn("LEADER",178.08f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt( 0 , 0.028f , -274.645f , 161.842f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 4.606f , 0 )	// 基本仰角
	RotateCamera( 0 , 0.625f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
//	RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	CallFunc("system:camera_reset")

	ActiveVoiceStop(ACTIVEVOICESTOP_WINDOWOFF)
	ActiveVoiceStart(EACT_EVID_1604, 1, 0)	//王宮の状況を知るイベント後、オルガのいる玉座に到達する前に


	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)

//終了処理ここまで----------------------------------------------------

}

function "SubEV_Past_07_Main020"	//▼玉座の間でオルガと再会する
{
	//開始処理ここから-----------------------------------------------

	CallFunc("system:event_begin_impose")
	ResetStopFlag(STOPFLAG_CINEMA)

	SaveEventState()
	SaveCamera()

	//環境初期化＆不要なものを隠す
	CallFunc("system:party_reset")
	CallFunc("system:party_remove")

	SetChrWork("Olga", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Olga", INFOFLAG_NOCHRATARI)
	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_EXT1, ANI_E_LOOKC, 1)

	SetChrWork("Officer_7_01", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Officer_7_01", INFOFLAG_NOCHRATARI)

	SetChrWork("Sharl", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Sharl", INFOFLAG_NOCHRATARI)

	//	【オルガ】
	SetChrPos("Olga",-1.18f,-223.18f,161.96f)
	Turn("Olga",-141.94f,360.0f)
	LookChr("Olga","Officer_7_01")
	ChangeAnimation( "Olga" , "ANI_EV_UDEGUMI", -1 , 1 )

	//	【文官】
	SetChrPos("Officer_7_01",0.42f,-222.72f,161.96f)
	Turn("Officer_7_01",106.67f,360.0f)
	LookChr("Officer_7_01","Olga")
	ChangeAnimation( "Officer_7_01" , "ANI_WAIT", -1 , 1 )

	//	【衛士シャール】
	SetChrPos("Sharl",-0.80f,-221.35f,161.97f)
	Turn("Sharl",-23.95f,360.0f)
	LookChr("Sharl","Olga")
	ChangeAnimation( "Sharl" , "ANI_WAIT", -1 , 1 )

	SetChrPos("eq4028_1",-0.80f,-221.35f,161.97f)
	SetParent( "eq4028_1" , "Sharl", "Null_ken" )

	SetFlag(SF_CHARANORECVSHADOW,1)	//キャラ影受けない

	//カメラ設定
	MoveCameraAt( 0 , 0.883f , -221.168f , 163.650f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 6.519f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 1.206f , 0 )	// 基本仰角
	RotateCamera( 0 , 329.946f , 0 )				// 角度
	ChangeCameraPers( 0 , 35.200f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 4.000, 80.000, 1.000, 0.700, 0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)

	//スキップ許可
	SetSkipScript("mp6222m2:SubEV_Past_07_Main020_ED")

	//開始処理ここまで-----------------------------------------------

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 0.448f , -220.904f , 163.650f , 240 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 5.389f , 240 )
//	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 14.399f , 200 )
//	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 71.704f , 240 )

	//MoveCameraAt( 0 , 0.448f , -220.904f , 163.650f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 5.299f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 1.202f , 0 )	// 基本仰角
	//RotateCamera( 0 , 329.947f , 0 )				// 角度
	//ChangeCameraPers( 0 , 35.200f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	//RollCamera( 0 , -0.0f , 0 )				// ロール回転

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()
	
	Wait(20)

	SoundEfx( SEFX_EV_CAVE_S, 15 )
	FadeBGM(70,30)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	//──────────────────────────────
	//▼玉座の間でオルガと再会する(mp6222m)
	//──────────────────────────────
	//　　玉座付近に近づくとイベント開始。
	//　　フェードインして、オルガが玉座前で
	//　　文官や兵士と話し合っている姿を見せる。
	//　　(※ＮＰＣのキャラ指定とセリフは四方監修で調整予定)

	//	文官
	TalkMes(Officer_7_01,"#6537V#011e#000m──ですが、保管庫の食料も",
		"そう多くはありませんぞ。","")
	WaitPrompt()

	//	name2()
	TalkMes(Officer_7_01,"#6538V#012e#000mかつて女王の指示で",
		"蓄えたものも底を尽きそうです。","")
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Sharl" , "Officer_7_01")

	//	兵士
	TalkMes(Sharl,"#6539V#000mこのままでは",
		"無事に冬を越せるかどうか……","")
	WaitPrompt()
	WaitCloseWindow()

	TurnToChr("Officer_7_01","Olga",10.0f)

	//	文官
	TalkMes(Officer_7_01,"#6540V#000mそ、そもそもこの冬に",
		"終わりなど来るのでしょうか？","")
	WaitPrompt()

	//	name2()
	TalkMes(Officer_7_01,"#6541V#011e#000mダーナ様も最近はもう",
		"予知ができないと聞きました。","")
	WaitPrompt()

	//	name2()
	TalkMes(Officer_7_01,"#6542V#000m噂通り力を失っているのなら、",
		"私は彼女を指導者としては……","")
	WaitPrompt()
	WaitCloseWindow()

	CrossFade(FADE_CROSS)
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	ChangeSubAnimation("Olga",SUBMOT_EYE,ANI_E_CLOSE,1)
	
	MoveCameraAt( 0 , -0.374f , -221.339f , 164.171f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.279f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -6.408f , 0 )	// 基本仰角
	RotateCamera( 0 , 19.057f , 0 )				// 角度
	ChangeCameraPers( 0 , 36.800f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	LookChr("Olga" , "Sharl")

	TurnToChr("Sharl","Officer_7_01",8.0f)
	LookChr("Officer_7_01","Sharl")

	Wait(10)
	EarthQuake(0.07f , 0.07f , 7 )
	
	//	兵士
	TalkMes(Sharl,"#6543V#000mおい、ダーナ様は体を張って",
		"北方の視察へ向かったのだ。","")
	WaitPrompt()


	//	name2()
	TalkMes(Sharl,"#6544V#000m例え力を失ったとしても、",
		"立派なお人に違いないだろうが！","")
	WaitPrompt()
	WaitCloseWindow()

	TurnToChr("Officer_7_01","Sharl", 10.0f)
	Wait(5)
	HeadNo("Officer_7_01",1 , 35)

	//	文官
	TalkMes(Officer_7_01,"#6545V#000mそ、そういうことではなく私は──","","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)
	

	CrossFade(FADE_CROSS)
	MoveCameraAt( 0 , -1.251f , -222.956f , 163.529f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.849f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 19.725f , 0 )	// 基本仰角
	RotateCamera( 0 , 84.411f , 0 )				// 角度
	ChangeCameraPers( 0 , 34.400f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , -5.7f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	LookChr("Sharl","Olga")

	Wait(20)

	//	"Olga"
	TalkMes("Olga","#6546V#012e#000mおぬしら、やめぬか。",
		"我々が争って何になる。","")
	WaitPrompt()
	TalkMes("Olga","#6547V#000m食料のことだが、寺院で収穫した",
		"馬鈴薯を地下に保存してある。","")
	WaitPrompt()
	
	LookChr("Olga" , "Officer_7_01")
	
	TalkMes("Olga","#6548V#000m後ほど動ける者に声をかけて",
		"ここへ運び入れるとしよう。","")
	WaitPrompt()
	WaitCloseWindow()

	CrossFade(FADE_CROSS)
	MoveCameraAt( 0 , -0.296f , -222.366f , 163.776f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.529f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -1.331f , 0 )	// 基本仰角
	RotateCamera( 0 , 274.206f , 0 )				// 角度
	ChangeCameraPers( 0 , 36.900f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	CrossFade(FADE_CROSS)

	LookChr("Officer_7_01","Olga")
	TurnToChr("Officer_7_01", "Olga" , 8.0f)


	//	文官
	TalkMes(Officer_7_01,"#6549V#012e#000mおお、なんと……",
		"さすがはオルガ殿ですな。","")
	WaitPrompt()

	//	name2()
	TalkMes(Officer_7_01,"#6550V#011e#000m早速手配いたしましょう。","","")
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Olga","Sharl")
	ChangeAnimation( "Olga" , "ANI_EV_UDEGUMI_E", -1 , 1 )

	ChangeSubAnimation("Officer_7_01",SUBMOT_EYE,ANI_E_CLOSE_E,1)

	//　　兵士のほうに向きなおるオルガ。
	TalkMes("Olga","#6551V#000mそれと街区に残っている",
		"市民がどうしているか心配だ。","")
	WaitPrompt()
	
	WaitAnimation2( "Olga" , -1, 1, "ANI_EV_UDEGUMI_E",  0)
	ChangeAnimation( "Olga" , "ANI_EV_TEBURI", -1 , 1 )
	
	
	TalkMes("Olga","#6552V#000mもう一度見回ってここへ",
		"避難するよう呼びかけてほしい。","")
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Sharl","Olga")
	TurnToChr("Sharl","Olga",8.0f)

	//	兵士
	TalkMes(Sharl,"#6553V#011eそうでしたな、この様子では",
		"次の寒波を凌げるかどうか……","")
	WaitPrompt()

	//	name2()
	TalkMes(Sharl,"#6554V#012e今のうちに行って参りましょう。","","")
	WaitPrompt()
	WaitCloseWindow()

	CrossFade(FADE_CROSS)
	MoveCameraAt( 0 , -0.598f , -222.468f , 163.771f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.769f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 11.304f , 0 )	// 基本仰角
	RotateCamera( 0 , 135.888f , 0 )				// 角度
	ChangeCameraPers( 0 , 28.900f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(10)

	ChangeAnimation( "Olga" , "ANI_EV_KATATEKOSI_S", -1 , 1 )
	LookReset("Olga")
	//	"Olga"
	TalkMes("Olga","#6555V#011e#000mああ、それぞれよろしく頼むぞ。","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(10)

	//　　ここで一旦操作許可。
	//　　オルガに話しかけることでイベントを再開。
	//　　オルガに「！」エモーション表示。

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	//終了処理ここから----------------------------------------------------
	CallFunc("mp6222m2:SubEV_Past_07_Main020_ED")
}

function "SubEV_Past_07_Main020_ED"
{
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//キャラクター初期化
//	CallFunc("system:reset_chrmot_DANA")
//	CallFunc("system:reset_chrmot_Sarai")
//	CallFunc("system:reset_chrmot_Olga")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	SetFlag(SF_CHARANORECVSHADOW,0)	//キャラ影受ける
	
	//フラグ立て・アイテム入手・アイテム回収
	SetFlag(GF_SUBEV_PAST_07_LOOK_OLGA,1)		// 過去編Ⅶ：▼玉座の間でオルガと再会する

	CallFunc("mp6222m2:init")

	//イベント後の再配置
	SetChrPos("LEADER",0.10f,-233.09f,160.00f)
	Turn("LEADER",-179.74f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt( 0 , 0.097f , -233.093f , 161.848f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 6.792f , 0 )	// 基本仰角
	RotateCamera( 0 , 0.876f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	CallFunc("system:camera_reset")

	SoundEfx( SEFX_CAVE_S, 15 )

	ResetStopFlag(STOPFLAG_EVENTIMPOSE)

	FadeIn(FADE_BLACK,FADE_FAST)


//終了処理ここまで----------------------------------------------------

}

function "SubEV_Past_07_Main021"	//▼玉座の間でオルガと再会する２
{
	//開始処理ここから-----------------------------------------------

	CallFunc("system:event_begin_impose")
	ResetStopFlag(STOPFLAG_CINEMA)

	SaveEventState()
	SaveCamera()

	//環境初期化＆不要なものを隠す
	CallFunc("system:party_reset")
	CallFunc("system:party_remove")

	//キャラクター初期化
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)
	SetChrPos("DANA",0.02f,-224.93f,161.96f)
	Turn("DANA",169.46f,360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SMILE, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_SMILE, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	ChangeSubAnimation("DANA",SUBMOT_EXT2,ANI_SIGN_HIDE,1)

	TurnToChr("DANA","Olga",360.0f)
	LookChr("DANA","Olga")

	SetChrWork("Olga", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Olga", INFOFLAG_NOCHRATARI)
	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_EXT1, ANI_E_LOOKC, 1)

	SetChrWork("Officer_7_01", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Officer_7_01", INFOFLAG_NOCHRATARI)

	SetChrWork("Sharl", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Sharl", INFOFLAG_NOCHRATARI)

	//	【オルガ】
	SetChrPos("Olga",-1.18f,-223.18f,161.96f)
	Turn("Olga",-141.94f,360.0f)
	LookChr("Olga","Officer_7_01")
	ChangeAnimation( "Olga" , "ANI_WAIT", -1 , 1 )

	//	【文官】
	SetChrPos("Officer_7_01",0.42f,-222.72f,161.96f)
	Turn("Officer_7_01",106.67f,360.0f)
	LookChr("Officer_7_01","Olga")
	ChangeAnimation( "Officer_7_01" , "ANI_WAIT", -1 , 1 )

	//	【衛士シャール】
	SetChrPos("Sharl",-0.80f,-221.35f,161.97f)
	Turn("Sharl",-23.95f,360.0f)
	LookChr("Sharl","Olga")
	ChangeAnimation( "Sharl" , "ANI_WAIT", -1 , 1 )

	SetChrPos("eq4028_1",-0.80f,-221.35f,161.97f)
	SetParent( "eq4028_1" , "Sharl", "Null_ken" )

	SetFlag(SF_CHARANORECVSHADOW,1)	//キャラ影受けない

	//カメラ設定
	MoveCameraAt( 0 , -0.951f , -223.056f , 163.762f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.730f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -7.171f , 0 )	// 基本仰角
	RotateCamera( 0 , 16.742f , 0 )				// 角度
	ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 1.1f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 4.000, 80.000, 1.000, 0.700, 0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)

	//スキップ許可
	SetSkipScript("mp6222m2:SubEV_Past_07_Main021_ED")

	//開始処理ここまで-----------------------------------------------

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -0.951f , -223.056f , 163.762f , 200 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.460f , 200 )
//	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -7.170f , 200 )
//	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 16.743f , 240 )

//	MoveCameraAt( 0 , -0.951f , -223.056f , 163.762f , 0 )	// 注視点
//	ChangeCameraDistance( 0 , 3.460f , 0 )		// 基本距離
//	ChangeCameraElevation( 0 , -7.170f , 0 )	// 基本仰角
//	RotateCamera( 0 , 16.743f , 0 )				// 角度
//	ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
//	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
//	RollCamera( 0 , 1.1f , 0 )				// ロール回転
//	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	LookChr("Sharl" , "DANA")

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	//　　オルガに話しかけることでイベントを再開。
	//　　オルガに「！」エモーション表示。
	EmotionEx("Olga", 0.00f,EMO_EX,0,5,1,1,1.0f )
	//ChangeSubAnimation("Olga",SUBMOT_EYE,ANI_E_SUP_S,1)
	Wait(40)
	LookReset("Olga")
	TurnToChr("Olga","DANA",8.0f)
	LookChr("Olga" ,"DANA")
	
	FadeBGM(70,30)
	SoundEfx( SEFX_EV_CAVE_S, 15 )
	
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)
	TalkMes("Olga","#6556V#071e#000m……ダーナ……様？","","")
	WaitPrompt()
	WaitCloseWindow()
	
	Wait(10)
	
	CrossFade(FADE_CROSS)
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	MoveCameraAt( 0 , -0.323f , -224.532f , 163.441f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.580f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 4.007f , 0 )	// 基本仰角
	RotateCamera( 0 , 244.741f , 0 )				// 角度
	ChangeCameraPers( 0 , 24.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -0.240f , -224.403f , 163.441f , 140 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.020f , 140 )
//	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -7.170f , 200 )
//	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 16.743f , 240 )

	//MoveCameraAt( 0 , -0.240f , -224.403f , 163.441f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 3.020f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 4.009f , 0 )	// 基本仰角
	//RotateCamera( 0 , 244.740f , 0 )				// 角度
	//ChangeCameraPers( 0 , 24.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	//RollCamera( 0 , -2.1f , 0 )				// ロール回転


	//	"DANA"
	TalkMes("DANA","#6557V#080m久しぶりですね。",
		"ただいま戻りました。","")
	WaitPrompt()
	WaitCloseWindow()

	ExecuteCmd(1, MoveTo, "Olga",-0.40f,-224.01f,161.96f, 0.1f, 0.16f )
	//SetChrPos("Olga",-0.40f,-224.01f,161.96f)
	//Turn("Olga",-34.44f,360.0f)

	//　　周囲を確認しながら話すオルガ。
	TalkMes("Olga","#6558V#000e#000mよくぞご無事で……","","")
	WaitPrompt()
	
	WaitThread(1)
	Wait(10)

	CrossFade(FADE_CROSS)
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	MoveCameraAt( 0 , -0.600f , -224.044f , 163.639f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.080f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -7.763f , 0 )	// 基本仰角
	RotateCamera( 0 , 58.447f , 0 )				// 角度
	ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , -4.6f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -0.631f , -224.088f , 163.639f , 300 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.290f , 300 )
//	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -7.170f , 200 )
//	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 16.743f , 240 )

	//MoveCameraAt( 0 , -0.631f , -224.088f , 163.639f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.290f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -7.766f , 0 )	// 基本仰角
	//RotateCamera( 0 , 58.446f , 0 )				// 角度
	//ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	//RollCamera( 0 , -4.6f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(5)

	Look("Olga", -20 , -10)
	ChangeSubAnimation("Olga",SUBMOT_EXT1,ANI_E_LOOKL_S,1)

	TalkMes("Olga","#6559V#030e#000m#12S全く……北方諸国を回ると言って",
		"王都を飛び出すとは驚いたぞ。","")
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA" , "ANI_EV_HOHOKAKI", -1 , 1 )

	TalkMes("DANA","#6560V#12S#000e#000mあはは、ごめんね……","","")
	WaitPrompt()
	WaitCloseWindow()

	LookChr("Olga", "DANA")

	//	"Olga"
	TalkMes("Olga","#6561V#12S#022l#032e#000mまあ、いいだろう……",
		"それで北の様子はどうだったのだ？","")
	WaitPrompt()

	Wait(10)
	
	CrossFade(FADE_CROSS)
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	MoveCameraAt( 0 , -0.215f , -224.432f , 163.587f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.570f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 9.336f , 0 )	// 基本仰角
	RotateCamera( 0 , 168.302f , 0 )				// 角度
	ChangeCameraPers( 0 , 41.900f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 2.2f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(10)
	Look("DANA" , -17 , 3 )

	TalkMes("DANA","#6562V#020l#12S#000mえっと、それなんだけど……","","")
	WaitPrompt()
	WaitCloseWindow()

	//　　やや話しにくそうに周囲を窺うダーナ。
	//　　オルガはそれを察したような仕草。

	ChangeAnimation( "Olga" , "ANI_EV_UDEGUMI_S", -1 , 1 )

	TalkMes("Olga","#12S#6563V#000e#000mふむ、場所を変えたほうが",
		"　よさそうだな……","")
	WaitPrompt()
	WaitCloseWindow()


	//　　ここで画面フェードアウト。

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	//終了処理ここから----------------------------------------------------
	CallFunc("mp6222m2:SubEV_Past_07_Main021_ED")
}

function "SubEV_Past_07_Main021_ED"
{

	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//キャラクター初期化
//	CallFunc("system:reset_chrmot_DANA")
//	CallFunc("system:reset_chrmot_Sarai")
//	CallFunc("system:reset_chrmot_Olga")

	SetFlag(SF_CHARANORECVSHADOW,0)	//キャラ影受ける

	//イベント・ギャラリー中
	if(FLAG[TF_EVSKIP] && FLAG[SF_GALLERY_EVENT])
	{
		FadeBGM(100,15)
		SoundEfx( SEFX_DEFAULT, 15 )
		SetEnvSEPlayState(-1, 0)	//環境SE全停止
		GalleryEvEnd(0)		// イベントギャラリー終了（スクリプトから強制的に抜けていろいろ処理してくれる）
		ResetStopFlag(STOPFLAG_EVENTIMPOSE)
	}
	// 通常時
	else
	{	
		DelMapMarker( SMI_DANA_QUEST, PAGE_MP6222m2, MARKER_SUBEV_PAST_7_1, 0, 0)	// 過去編Ⅶ：オルガに報告する

		//NowLoading 時の Tips 表示をカット
		SetFlag(TF_LOADING_TIPS_OFF, 1)

		SetFlag(SF_NOCHANGEBGM, 1)
		SoundEfx( SEFX_CAVE_S, 15 )

		LoadArg("map/mp6201m2/mp6201m2.arg")
		EventCue("mp6201m2:SubEV_Past_07_Main022")

		ResetStopFlag(STOPFLAG_EVENTIMPOSE)
	}

//終了処理ここまで----------------------------------------------------

}

//──────────────────────────────
//	【過去編Ⅳ：現代に戻るイベント】
//──────────────────────────────
function "SubEV_Past_07_Return"
{

	//　　再訪時にヒモロギを調べると起動。

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	TurnToChr( LEADER , this , 10.0f )
	Wait(10)

	if(FLAG[GF_PAST_EPISODE_7B_REARRIVE])
	{
		SetFlag( TF_MENU_SELECT, 0 )
		YesNoMenu(TF_MENU_SELECT,"#7Cヒモロギの木に祈りを捧げますか？",1)
	}
	else
	{
		TalkPopup("DANA",0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
		{
			"これはヒモロギの苗木……"
			"ここの誰かが置いたのかな。\p"
			"まずはオルガちゃんに報告しなきゃ。"
		}
		WaitPrompt()
		WaitCloseWindow()
	
		SetFlag( TF_MENU_SELECT, 0 )
	}	
	//────────────────────
	//	⇒はい
	if( FLAG[TF_MENU_SELECT] )	// Yesを選んだ
	{
	//開始処理ここから-----------------------------------------------
		ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
	
		CallFunc("system:event_begin_fast")
	
		//イベント開始前情報の保存
		SaveEventState()
		SaveCamera()
	
		//パーティ状態のリセット
		CallFunc("system:party_reset")
	
		//環境の初期化・不要なものを隠す
		ClearDebris()
		//ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
		//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))
	
		//キャラ初期状態の設定				
		SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("DANA",4.98f,-238.51f,160.00f)
		Turn("DANA",170.08f,360.0f)
		ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
		ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
		ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
		ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
		LookReset("DANA")
		
		//カメラ設定
		MoveCameraAt( 0 , 4.694f , -237.117f , 161.802f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 4.056f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , -2.821f , 0 )	// 基本仰角
		RotateCamera( 0 , 313.036f , 0 )				// 角度
		ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
		
		// 被写界深度の設定
		SetDoF(0, LERP_LINEAR, 3.000, 50.000, 2.000, 0.550, 0.500)					//イベント毎に調整
		// グレアの設定
		SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整
	
		// ポートレート読み込み
		Portrait_Load(0, "system/black.itp" )		//擬似フェードアウト用
		Portrait_Create(0, 0, 0, 0, 0, 64,64, 0.0f, 0x00ffffff, 0x00000000)
	
		//スキップ許可
		SetSkipScript("mp6222m2:SubEV_Past_07_Return_ED")
	
		//開始処理ここまで-----------------------------------------------
	
		// カメラ移動
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , 4.694f , -237.117f , 161.604f , 330 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.946f , 330 )
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 26.480f , 330 )
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 53.911f , 330 )

		//MoveCameraAt( 0 , 4.694f , -237.117f , 161.604f , 0 )	// 注視点
		//ChangeCameraDistance( 0 , 4.946f , 0 )		// 基本距離
		//ChangeCameraElevation( 0 , 26.480f , 0 )	// 基本仰角
		//RotateCamera( 0 , 53.911f , 0 )				// 角度
		//ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
		//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
		//RollCamera( 0 , 0.0f , 0 )				// ロール回転
		//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	
		FadeIn(FADE_BLACK, FADE_NORMAL)
		Wait(FADE_NORMAL)
	
		//	  　ダーナがヒモロギに祈りを捧げ、
		//	  　過去編の遷移エフェクト表示して画面アウト。
	
		ChangeAnimation( "DANA", "ANI_EV_PRAY_S", -1, 1 )	// 祈り開始
		ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_CLOSE_S, 1)	// 目
		ChrEffect2( "DANA" , 3900600 , "Bone_root", "", 0 , 0 , 0 , 0.0f,0.0f,0, 1.0f, 1.0f)	//オーラ（ループ）
		
	//	Wait(80)
	//	Effect2( 3900620, -933.959f , 674.442f , 49.244f, 90.00f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.0f, 1.0f)	// ヒモロギ苗エフェクト
	
		Effect2(3900570, -556.057f , 1260.611f , 24.563f, 0.0f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.7f, 1.0f)	// 過去に飛ぶ時の画面切り替えエフェクト
		PlaySE(SE_GO_KAKO_1, 100, 1, 1500, 0, 1.0f, 0)	//水晶石と交信エフェクトループ	

		//Wait(180)
		Wait(90)
		PlaySE(SE_GO_KAKO_2, 80, 0, 0, 0, 1.0f, 0)	//	発光（過去編ワープ）
		Wait(60)
		PlaySE(SE_GO_KAKO_2, 80, 0, 0, 0, 1.0f, 0)	//	発光（過去編ワープ）
		Wait(30)

		StopBGM(120)
		PlaySE(SE_GO_KAKO_3, 100, 0, 0, 0, 1.0f, 0)	//	ホワイトアウト
		SetEnvSEPlayState(-1, 0)	//環境SE全停止
		StopSE(SE_GO_KAKO_1, 2000)
	
		// フェードアウト
		FadeOut(FADE_WHITE, FADE_SLOW)
		Wait(30)
		PlaySE(SE_GO_KAKO_2, 70, 0, 0, 0, 1.0f, 0)	//	発光（過去編ワープ）
		WaitFade()
		
		Wait(60)
		
		// 擬似フェードアウト表示
		Portrait_Anime(0 ,PR_ANIME_SCALE, 30.0f, 17.0f, 0, 0, 0)
		Portrait_Anime(0 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)
	
		// フェードイン
		FadeIn(FADE_WHITE, FADE_NORMAL)
		WaitFade()
		
		// フェードアウト
		FadeOut(FADE_BLACK, 0)
		WaitFade()
	
		//	  　※ここで、過去編で入手したアイテムの入手処理を行う。
		//	  　現代編の水晶石の前に復帰して操作許可を戻す。	
	
	//終了処理ここから----------------------------------------------------
		CallFunc("mp6222m2:SubEV_Past_07_Return_ED")
	}
	//	⇒いいえ
	else
	{
		//	  　そのまま操作許可を戻す
	
	//終了処理ここから----------------------------------------------------
		CrossFade(FADE_CROSS)
		SetStopFlag(STOPFLAG_NOCHARACLIP)
	
		//イベント後の再配置
		//SetChrPos("LEADER",-555.94f,1259.55f,23.00f)
		//Turn("LEADER",-166.94f,360.0f)
		ResetPartyPos()
		ResetFollowPoint()
		//Wait(1) //処理待ち用
	
		RestoreCamera(0,0)
		ResetCameraObserver(0)
		ResetCameraZPlane()
		//WaitFade()
		Wait(FADE_CROSS)
	
		ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
	//終了処理ここまで----------------------------------------------------
	}
	//────────────────────
}
function "SubEV_Past_07_Return_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//過去Ⅶ　終了処理呼び出し
	CallFunc("system:ReturnFrom_EPISODE_7")

	//エフェクトの停止
	StopEffect(-1,ALL,1)

	//エフェクトリリース
	ReleaseEffect("efx_ev04.ite")

	// ポートレートリリース
	Portrait_Close(-1)
	Portrait_Unload(-1)

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_DANA")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//NowLoading 時の Tips 表示をカット
	SetFlag( TF_LOADING_TIPS_OFF, 1 )

	LoadArg("map/mp1201/mp1201.arg")
	EventCue("mp1201:SubEV_Past_07_Return_Relocate")

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)

	//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//【過去編Ⅳ：水晶石を調べて再訪する】（続き）
//──────────────────────────────
function "SubEV_Past_07_Rearrive2"
{
//開始処理ここから----------------------------------------------------

	CallFunc("system:event_begin")

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	//ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//過去Ⅳ　開始処理呼び出し
	CallFunc("system:BackTo_EPISODE_7")

	//キャラ初期状態の設定
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA",5.07f,-238.74f,160.00f)
	Turn("DANA",160.07f,360.0f)
	ChangeAnimation( "DANA", "ANI_EV_PRAY", -1, 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_CLOSE_S,1)	
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("DANA")
	SetChrInfoFlag( "DANA" , INFOFLAG_NOCHRATARI)

	//カメラ設定
	MoveCameraAt( 0 , 4.647f , -238.134f , 161.231f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.096f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -5.410f , 0 )	// 基本仰角
	RotateCamera( 0 , 254.706f , 0 )				// 角度
	ChangeCameraPers( 0 , 54.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 50.000 ,1.000 ,0.700 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6222m2:SubEV_Past_07_Rearrive2_ED")

//開始処理ここまで-----------------------------------------------

	//　　対応する過去編の、終点にあるヒモロギ前にフェードイン。
	//　　ダーナが祈りを捧げている状態。
	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	ChangeAnimation( "DANA", "ANI_EV_PRAY_E", -1, 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_CLOSE_E,1)
	Wait(30)

	//　　暗転を挟んで過去編ダーナに操作許可を戻す。
	FadeOut(FADE_BLACK, FADE_FAST)
	WaitFade()

	if(!FLAG[GF_1ST_REARRIVE])
	{
		// チュートリアルポートレート読み込み
		Portrait_Load(0, "system/black.itp" )		//擬似フェードアウト用
		Portrait_Create(0, 0, 0, 0, 0, 64,64, 0.0f, 0x00ffffff, 0x00000000)
		Portrait_Load(1, "visual/help/hp_00.itp" )	// 背景用
		Portrait_Create(1, HELP_POS_X, HELP_POS_Y, 0, 0, HELP_SCALE_X, HELP_SCALE_Y, 0.0f, 0x00ffffff, 0x00000000)
		Portrait_Load(2, "visual/help/hp_a44b.itp" )	// help_a44b：意識交代
		Portrait_Create(2, HELP_POS_X, HELP_POS_Y, 0, 0, HELP_SCALE_X, HELP_SCALE_Y, 0.0f, 0x00ffffff, 0x00000000)

		// チュートリアル =================================================================================
		if ( !FLAG[SF_2NDSTART] ) {		// 2周目判定
			
			//自動送り禁止
			ResetStopFlag(STOPFLAG_AUTOMESSAGE)
			Wait(10)

			// 擬似フェードアウト表示
			Portrait_Anime(0 ,PR_ANIME_SCALE, 30.0f, 17.0f, 0, 0, 0)
			Portrait_Anime(0 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)
			FadeIn(FADE_BLACK, 0)
			WaitFade()

			// ポートレート表示
				PlaySE(SE_TUTORIAL, 100, 0, 0, 0, 1.0f, 0)		//チュートリアル
			Portrait_Anime(1, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, FADE_NORMAL)	// チュートリアル背景
			Portrait_Anime(2, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, FADE_NORMAL)
			Wait(FADE_NORMAL)
			Message2(1, TOPIC_BUTTUN_X, TOPIC_BUTTUN_Y, "", "", "", "", "", "", "", "", "", "")		//ボタン入力可能を提示
			WaitPrompt()
			Portrait_Anime(1, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f, FADE_FAST)	// チュートリアル背景
			Portrait_Anime(2, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f, FADE_FAST)
			Wait(FADE_FAST)
			Portrait_Close(1)
			Portrait_Close(2)
			
			// 擬似フェードアウト削除
			FadeOut(FADE_BLACK, 0)
			WaitFade()
			Portrait_Close(0)

			//自動送り許可
			SetStopFlag(STOPFLAG_AUTOMESSAGE)
		
		}
		// ================================================================================================
	}

//終了処理ここから----------------------------------------------------
	CallFunc("mp6222m2:SubEV_Past_07_Rearrive2_ED")
}
function "SubEV_Past_07_Rearrive2_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
//	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ立て
	if(!FLAG[GF_1ST_REARRIVE])
	{
		// ポートレートリリース 	2018.04.25 m.arai
		Portrait_Close(-1)
		Portrait_Unload(-1)

		SetFlag(GF_1ST_REARRIVE,1)		//始めて過去編再訪した
	}
	CallFunc("mp6222m2:init")

	//イベント後の再配置
	SetChrPos("LEADER",5.07f,-238.74f,160.00f)
	Turn("LEADER",160.07f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt( 0 , 5.071f , -238.737f , 161.856f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 5.323f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 9.582f , 0 )	// 基本仰角
	RotateCamera( 0 , 44.215f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	//RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	CallFunc("system:camera_reset")

	VisualName("visual/portrait/ep_0170.itp",VN_NAMEMAP,-1,-1,VN_MAPNAME_TIME)	//過去Ⅶ

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK, FADE_FAST)
	//WaitFade()

//終了処理ここまで----------------------------------------------------
}

function "SubEV_Past_07_Quest_A"	// 過去編Ⅶ：【過去クエスト⑦：理術士オドの遺体を見る】
{
	//開始処理ここから-----------------------------------------------

	CallFunc("system:event_begin_impose")

	SaveEventState()
	SaveCamera()

	//環境初期化＆不要なものを隠す
	CallFunc("system:party_reset")
	CallFunc("system:party_remove")

	//選択肢を初期化しておく
	SetFlag(TF_MENU_SELECT,0)

	//キャラクター初期化
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)

	SetChrPos("DANA",40.30f,-287.70f,143.41f)
	Turn("DANA",148.25f,360.0f)

	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SAD, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	ChangeSubAnimation("DANA",SUBMOT_EXT2,ANI_SIGN_HIDE,1)

	SetChrWork("Atra", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Atra", INFOFLAG_NOCHRATARI)
	SetChrPos("Atra",40.15f,-285.90f,143.41f)
	Turn("Atra",125.67f,360.0f)
	ChangeAnimation("Atra", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Atra", SUBMOT_EYE, ANI_E_CLOSE, 1)
	ChangeSubAnimation("Atra", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	LookChr("Atra","Odo")

	SetChrWork("Sister_7_02", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Sister_7_02", INFOFLAG_NOCHRATARI)
	SetChrPos("Sister_7_02",38.91f,-286.63f,143.41f)
	Turn("Sister_7_02",170.06f,360.0f)
	ChangeAnimation("Sister_7_02", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Sister_7_02", SUBMOT_EYE, ANI_E_CLOSE, 1)
	ChangeSubAnimation("Sister_7_02", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	LookChr("Sister_7_02","Odo")

	SetChrPos("Odo",38.17f,-283.52f,143.98f)
	Turn("Odo",-0.77f,360.0f)
	ChangeAnimation( "Odo" , "ANI_EV_DEAD", -1 , 1 )
	ChangeSubAnimation("Odo",SUBMOT_EYE,ANI_E_CLOSE,1)

	LookReset("DANA")

	//カメラ設定
	MoveCameraAt( 0 , 39.320f , -285.944f , 145.028f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.500f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 11.928f , 0 )	// 基本仰角
	RotateCamera( 0 , 28.714f , 0 )				// 角度
	ChangeCameraPers( 0 , 46.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 4.000, 80.000, 1.000, 0.700, 0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)

	//スキップ許可
	SetSkipScript("mp6222m2:SubEV_Past_07_Quest_A_ED")

	//開始処理ここまで-----------------------------------------------

	Wait(10)

	if(!FLAG[GF_SUBEV_PAST_07_QUEST_NO])
	{
		FadeIn(FADE_BLACK,FADE_NORMAL)
		WaitFade()

		//──────────────────────────────
		//	【PS4】【過去クエスト⑦：理術士オドの遺体を見る】
		//──────────────────────────────
		//　　王宮右翼、通路を出て一段下がったエリアには
		//　　資材が置かれているほか、数体の棺が安置されている。
		//　　うち１つは蓋が開いており、理術士オドが納められている。
		//　　その傍にいるアトラまたは修道女に話しかけるとイベント。
		//	＠エタニア文明で棺が使われていたかは要設定確認。

		ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,38.478f , -283.216f , 144.978f , 170 )		// 注視点
		ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.391f, 170)		// 基本距離
		ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 54.560f , 170 )		// 基本仰角
		ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,32.436f ,  170 )		// 角度
		ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,13.1f , 170 )		// ロール回転
	//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,34.000f, 170)		// 視野角

		//MoveCameraAt( 0 , 38.478f , -283.216f , 144.978f , 0 )	// 注視点
		//ChangeCameraDistance( 0 , 1.391f , 0 )		// 基本距離
		//ChangeCameraElevation( 0 , 54.560f , 0 )	// 基本仰角
		//RotateCamera( 0 , 32.436f , 0 )				// 角度
		//ChangeCameraPers( 0 , 46.000f , 0 )			// 視野角
		//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
		//RollCamera( 0 , 13.1f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
		

		WaitThread(1001)
		WaitThread(1002)
		WaitThread(1003)
		WaitThread(1004)
		WaitThread(1005)
		
		Wait(30)
		
		CrossFade(FADE_NORMAL)
		MoveCameraAt( 0 , 40.027f , -287.577f , 144.854f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 1.650f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 6.922f , 0 )	// 基本仰角
		RotateCamera( 0 , 191.757f , 0 )				// 角度
		ChangeCameraPers( 0 , 45.000f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
		RollCamera( 0 , -0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,39.983f , -287.609f , 144.904f , 135 )		// 注視点
		ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.370f, 135)		// 基本距離
	//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 54.560f , 135 )		// 基本仰角
	//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,32.436f ,  135 )		// 角度
	//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,13.1f , 135 )		// ロール回転
	//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,34.000f, 135)		// 視野角

		//MoveCameraAt( 0 , 39.983f , -287.609f , 144.854f , 0 )	// 注視点
		//ChangeCameraDistance( 0 , 3.370f , 0 )		// 基本距離
		//ChangeCameraElevation( 0 , 6.922f , 0 )	// 基本仰角
		//RotateCamera( 0 , 191.757f , 0 )				// 角度
		//ChangeCameraPers( 0 , 45.000f , 0 )			// 視野角
		//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
		//RollCamera( 0 , -0.0f , 0 )				// ロール回転
		//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		CrossFade(55)

		EmotionEx("DANA", 0.00f,EMO_3DOT,0,5,1,1,1.0f )
		Wait(52)


		WaitThread(1001)
		WaitThread(1002)
		WaitThread(1003)
		WaitThread(1004)
		WaitThread(1005)

		TalkPopup("DANA",0,2,0,0,0)
		{
			"#061e……オドさん……"
		}
		WaitPrompt()
		WaitCloseWindow()

		//　　アトラと修道女にＰＡエモーション
		EmotionEx("Atra", 0.00f,EMO_PA,0,5,1,1,1.0f )
		EmotionEx("Sister_7_02", 0.00f,EMO_PA,0,5,1,1,1.0f )

		ChangeSubAnimation("Atra",SUBMOT_EYE,ANI_E_CLOSE_E,1)
		ChangeSubAnimation("Sister_7_02",SUBMOT_EYE,ANI_E_CLOSE_E,1)

		Wait(40)
		
		CrossFade(FADE_CROSS)
		MoveCameraAt( 0 , 39.824f , -286.697f , 144.929f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 3.070f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , -1.701f , 0 )	// 基本仰角
		RotateCamera( 0 , 64.397f , 0 )				// 角度
		ChangeCameraPers( 0 , 41.000f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		LookChr("Atra","DANA")
		TurnToChr("Atra","DANA",8.0f)
		LookChr("Sister_7_02","DANA")
		TurnToChr("Sister_7_02","DANA",6.0f)

		Wait(FADE_CROSS)

		ChangeAnimation( "Atra" , "ANI_EV_RYOTEMAE_S", -1 , 1 )
		//	侍女アトラ
		TalkPopup("Atra",0,1,0,0,0)
		{
			"ダーナ様、戻られたのですね。"
		}
		WaitPrompt()
		WaitCloseWindow()

		ChangeAnimation( "Sister_7_02" , "ANI_EV_REI", -1 , 1 )
		ChangeSubAnimation("Sister_7_02",SUBMOT_EYE,ANI_E_CLOSE_S,1)

		//	修道女
		TalkPopup("Sister_7_02",0,1,0,0,0)
		{
			"お疲れ様です、ダーナ様。"
		}
		WaitPrompt()
		WaitCloseWindow()
		ChangeSubAnimation("Sister_7_02",SUBMOT_EYE,ANI_E_CLOSE_E,1)

		Wait(10)
		
		CrossFade(FADE_CROSS)
		ChangeAnimation( "Atra" , "ANI_WAIT", -1 , 1 )
		ChangeAnimation( "Sister_7_02" , "ANI_WAIT", -1 , 1 )
		
		MoveCameraAt( 0 , 39.276f , -286.397f , 144.979f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 2.120f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 16.262f , 0 )	// 基本仰角
		RotateCamera( 0 , 14.926f , 0 )				// 角度
		ChangeCameraPers( 0 , 45.000f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


		ExecuteCmd( 1, MoveTo, "DANA", 39.70f,-286.58f,143.41f, 0.1f, 0.17f )
		//SetChrPos("DANA",39.70f,-286.58f,143.41f)
		//Turn("DANA",139.37f,360.0f)

		WaitThread(1)

		//　　ダーナ、オドの傍まで歩いてくる。
		TalkPopup("DANA",0,1,0,0,0)
		{
			"#062e#000m本当にやつれてしまって……\p"
			"相当無理を続けたのですね……"
			"オドさんらしい……"
		}
		WaitPrompt()
		WaitCloseWindow()

		LookChr("Sister_7_02","Odo")
		LookChr("Atra","Odo")
		Turn("Sister_7_02",170.06f,8.0f)
		Turn("Atra",125.67f,6.0f)

		//	侍女アトラ
		TalkPopup("Atra",0,2,0,0,0)
		{
			"はい……皆さんを病や寒さから"
			"守るために、無理に理力を……\p"
			"いくらお止めしても"
			"笑って聞き届けてくださらなくて……"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	修道女
		TalkPopup("Sister_7_02",0,2,0,0,0)
		{
			"本当に残念でなりません。\p"
			"ああ、せめて……\p"
			"せめて一輪の花を"
			"手向けてあげたいのですが……"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	侍女アトラ
		TalkPopup("Atra",0,2,0,0,0)
		{
			"ええ……これほど尽力して"
			"くださったのですから……\p"
			"でも花なんて、もうどこにも……"
			"花なんて4行目"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	else
	{

		SetChrPos("DANA",39.70f,-286.58f,143.41f)
		Turn("DANA",139.37f,360.0f)

		ChangeSubAnimation("Sister_7_02", SUBMOT_EYE, ANI_E_WAIT, 1)
		ChangeSubAnimation("Atra", SUBMOT_EYE, ANI_E_WAIT, 1)

		MoveCameraAt( 0 , 39.276f , -286.397f , 144.979f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 2.120f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 16.262f , 0 )	// 基本仰角
		RotateCamera( 0 , 14.926f , 0 )				// 角度
		ChangeCameraPers( 0 , 45.000f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		FadeIn(FADE_BLACK,FADE_FAST)
		WaitFade()

		//　　★一度断って話し掛けた場合
		//	侍女アトラ
		TalkPopup("Atra",0,2,0,0,0)
		{
			"皆さんのために、最期まで"
			"尽力してくださったのです……\p"
			"せめて一輪の花を "
			"手向けてあげたいのですが…… "
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	//　　★ここで統合
	TalkPopup("DANA",0,1,0,0,0)
	{
		"#000e#000mそうですね……\p"
		"（花……この気候じゃ"
		"  厳しいかもしれないけど……）"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(5)

	SetSkipScript("")

	//選択肢
	SetFlag(TF_MENU_SELECT,0)
	MenuReset()
	MenuType(MENUTYPE_POPUP)
	MenuAdd(1,"花を探してみる")
	MenuAdd(2,"やめておく")
	MenuOpen( TF_MENU_SELECT , -1 , ADOLMENU_PPOSY , -2 , -2 , 10 , 0)
	WaitMenu(0)
	MenuClose(10,0)

	Wait(10)

	//────────────────────
	//	⇒花を探してみる
	if(FLAG[TF_MENU_SELECT] == 1)
	{

		CrossFade(FADE_CROSS)

		MoveCameraAt( 0 , 39.587f , -286.554f , 145.003f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 2.420f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , -1.534f , 0 )	// 基本仰角
		RotateCamera( 0 , 174.122f , 0 )				// 角度
		ChangeCameraPers( 0 , 45.000f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		TurnToChr("DANA" , "Atra" ,6.0f)
		LookChr("DANA","Atra")

		Wait(FADE_CROSS)

		TalkPopup("DANA",0,1,0,0,0)
		{
			"#000e#000m分かりました、"
			"私の方で探してみます。\p"
			"このままでは余りに忍びない……"
			"できる限りの事をしてみましょう。"
		}
		WaitPrompt()
		WaitCloseWindow()

		LookChr("Sister_7_02","DANA")
		LookChr("Atra","DANA")

		TurnToChr("Sister_7_02","DANA",8.0f)
		TurnToChr("Atra","DANA",5.0f)

		//　　悲しみを秘めつつも
		//　　顔を明るくする修道女たち。
		//	修道女
		TalkPopup("Sister_7_02",0,1,0,0,0)
		{
			"ダーナ様……"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	侍女アトラ
		TalkPopup("Atra",0,1,0,0,0)
		{
			"どうかよろしくお願い致します。"
		}
		WaitPrompt()
		WaitCloseWindow()

		//　　イベント終了、操作許可。

	}
	//────────────────────	
	//	⇒やめておく
	//　　画面暗転して操作許可を戻す。
	//────────────────────

	Wait(5)

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	//終了処理ここから----------------------------------------------------
	CallFunc("mp6222m2:SubEV_Past_07_Quest_A_ED")
}

function "SubEV_Past_07_Quest_A_ED"
{
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//キャラクター初期化
	CallFunc("system:reset_chrmot_DANA")
//	CallFunc("system:reset_chrmot_Sarai")
//	CallFunc("system:reset_chrmot_Olga")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	if(FLAG[TF_EVSKIP])		//イベントスキップした場合
	{
		SetFlag(TF_MENU_SELECT,0)
	}
	
	if(FLAG[TF_MENU_SELECT] == 1)
	{
		//フラグ立て・アイテム入手・アイテム回収
		SetFlag(GF_SUBEV_PAST_07_QUEST_A,1)		// 過去編Ⅶ：【過去クエスト⑦：理術士オドの遺体を見る】を見た
	}
	else
	{
		SetFlag(GF_SUBEV_PAST_07_QUEST_NO,1)	// 過去編Ⅶ：【過去クエスト⑦：理術士オドの遺体を見る】を見たが受託しなかった
	}
	
	CallFunc("system:SetMarkerDANA")	//クエスト系マーカー処理

	CallFunc("mp6222m2:init")

	//イベント後の再配置
	SetChrPos("LEADER",40.22f,-299.00f,143.41f)
	Turn("LEADER",27.80f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt( 0 , 40.222f , -298.996f , 145.251f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 5.026f , 0 )	// 基本仰角
	RotateCamera( 0 , 159.238f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)


//終了処理ここまで----------------------------------------------------

}
function "SubEV_Past_07_Quest_C"
{
	//開始処理ここから-----------------------------------------------

	CallFunc("system:event_begin_impose")

	SaveEventState()
	SaveCamera()

	//環境初期化＆不要なものを隠す
	CallFunc("system:party_reset")
	CallFunc("system:party_remove")

	//キャラクター初期化
	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)

	SetChrPos("DANA",40.42f,-287.36f,143.41f)
	Turn("DANA",174.90f,360.0f)

	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SAD, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	ChangeSubAnimation("DANA",SUBMOT_EXT2,ANI_SIGN_HIDE,1)

	SetChrWork("Atra", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Atra", INFOFLAG_NOCHRATARI)
	SetChrPos("Atra",40.15f,-285.90f,143.41f)
	TurnToChr("Atra","DANA",360.0f)
	ChangeAnimation("Atra", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Atra", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Atra", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	LookChr("Atra","DANA")

	SetChrWork("Sister_7_02", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Sister_7_02", INFOFLAG_NOCHRATARI)
	SetChrPos("Sister_7_02",38.91f,-286.63f,143.41f)
	TurnToChr("Sister_7_02","DANA",360.0f)
	ChangeAnimation("Sister_7_02", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Sister_7_02", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Sister_7_02", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	LookChr("Sister_7_02","DANA")

	SetChrPos("Odo",38.17f,-283.52f,143.98f)
	Turn("Odo",-0.77f,360.0f)
	ChangeAnimation( "Odo" , "ANI_EV_DEAD", -1 , 1 )
	ChangeSubAnimation("Odo",SUBMOT_EYE,ANI_E_CLOSE,1)

	LookReset("DANA")

	//カメラ設定
	MoveCameraAt( 0 , 40.439f , -287.126f , 144.954f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.950f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -3.087f , 0 )	// 基本仰角
	RotateCamera( 0 , 42.807f , 0 )				// 角度
	ChangeCameraPers( 0 , 41.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 4.000, 80.000, 1.000, 0.700, 0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)

	//スキップ許可
	SetSkipScript("mp6222m2:SubEV_Past_07_Quest_C_ED")

	//開始処理ここまで-----------------------------------------------

	Wait(10)

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()
	//──────────────────────────────
	//	【PS4】【過去クエスト⑦：達成イベント】
	//──────────────────────────────
	//　　戻ってアトラまたは修道女に話しかけると
	//　　イベント起動。
	//	侍女アトラ
	TalkPopup("Atra",0,0,0,0,0)
	{
		"ダーナ様、もしかして花を？"
	}
	WaitPrompt()
	WaitCloseWindow()

	HeadYes("DANA", 1, 25 )

	//	"DANA"
	TalkPopup("DANA",0,0,0,0,0)
	{
		"#000e#000m……ええ、たった一輪でしたが。"
	}
	WaitPrompt()
	WaitCloseWindow()

	TurnTo("DANA", 39.60f,-286.30f,143.41f, 8.0f)
	ExecuteCmd( 1, MoveTo, "DANA", 39.60f,-286.30f,143.41f, 0.1f, 0.17f )
	//SetChrPos("DANA",39.60f,-286.30f,143.41f)
	//Turn("DANA",140.08f,360.0f)

	Wait(10)
	
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	SetChrPos("DANA",39.65f,-286.37f,143.41f)
	Turn("DANA",160.75f,360.0f)

	SetChrPos("Atra",39.97f,-285.70f,143.41f)
	Turn("Atra",114.19f,360.0f)

	SetChrPos("Sister_7_02",38.91f,-286.63f,143.41f)
	Turn("Sister_7_02",178.55f,360.0f)

	LookChr("Atra","Odo")
	LookChr("Sister_7_02","Odo")

	Wait(45)

	MoveCameraAt( 0 , 38.160f , -282.821f , 144.234f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.260f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 49.778f , 0 )	// 基本仰角
	RotateCamera( 0 , 56.147f , 0 )				// 角度
	ChangeCameraPers( 0 , 34.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 18.1f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE ,38.187f , -282.955f , 144.234f , 140 )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.210f , 140)		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 49.763f , 140 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 56.136f ,  140 )		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE ,13.1f , 140 )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,34.000f, 140)		// 視野角

	//MoveCameraAt( 0 , 38.187f , -282.955f , 144.234f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.210f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 49.763f , 0 )	// 基本仰角
	//RotateCamera( 0 , 56.136f , 0 )				// 角度
	//ChangeCameraPers( 0 , 34.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	//RollCamera( 0 , 18.1f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	FadeIn(FADE_BLACK,FADE_NORMAL)
	SetChrPos("eq4037_1",38.17f,-283.52f,143.98f)//(20170314大草：花を追加)
	WaitFade()

	//　　ダーナ、歩みでて
	//　　オドの胸元に一輪の花を置く。

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)

	Wait(30)

	CrossFade(FADE_NORMAL)

	MoveCameraAt( 0 , 39.074f , -285.217f , 145.028f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.391f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 0.355f , 0 )	// 基本仰角
	RotateCamera( 0 , 200.581f , 0 )				// 角度
	ChangeCameraPers( 0 , 34.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(FADE_NORMAL)

	//	侍女アトラ
	TalkPopup("Atra",0,0,0,0,0)
	{
		"ウルグナータ様を送り出したのも"
		"こんな日でしたね……\p"
		"あれはまだダーナ様が"
		"旅立たれる前でしたか……\p"
		"最期までダーナ様の背中を"
		"押して下さいました。\p"
		"#011eダーナ様ならきっと……"
		"そう言って……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"DANA"
	TalkPopup("DANA",0,0,0,0,0)
	{
		"#011e#000mオドさんも口には出さずとも"
		"いつも私たちを支えて下さいました。\p"
		"……感謝を。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "DANA" , "ANI_EV_PRAY_S", -1 , 1 )

	TalkPopup("DANA",0,0,0,0,0)
	{		
		"そして、どうか"
		"安らかに眠られんことを。"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	Wait(20)

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	Wait(10)

	//　　暗転。
	//	ナレーション
	TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0)
	{
		"#7C理術士オドを含め、数人の遺体には"
		"#7Cささやかな葬別の儀が行われた。\p"
		"#7Cそして運び出されていく彼らを"
		"#7Cダーナはただ見送りながら"
		"#7C黙祷を捧げるのだった。"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	Wait(10)

	PlaySE(SE_QUEST_END, 100, 0, 0, 0, 1.0f, 0)		// クエスト達成	

	//	システムテキスト
	TalkPopup(UNDEF,0,5,0,0,0)
	{
		"#8S"
		"#-1W#4Cエタニアクエスト【感謝の花】を達成した！#10W"
		"#8S"
	}
	Wait(10)
	WaitPrompt()
	WaitCloseWindow()

	PlaySE(SE_VIRTUE, 100, 0, 0, 0, 1.0f, 0)	//徳ポイントアップ

	//	システムテキスト
	TalkPopup(UNDEF,0,5,0,0,0)
	{
		"#8S"
		"#-1W#4Cダーナの徳が上昇した。#10W"
		"#8S"
	}
	Wait(10)
	WaitPrompt()
	WaitCloseWindow()

	//　　徳ポイントを+5する。
	//　　暗転明けで操作許可。
	//　　棺はなくなっている状態になる。

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	//終了処理ここから----------------------------------------------------
	CallFunc("mp6222m2:SubEV_Past_07_Quest_C_ED")
}

function "SubEV_Past_07_Quest_C_ED"
{
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//キャラクター初期化
	CallFunc("system:reset_chrmot_DANA")
//	CallFunc("system:reset_chrmot_Sarai")
//	CallFunc("system:reset_chrmot_Olga")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ立て・アイテム入手・アイテム回収
	SetFlag(GF_SUBEV_PAST_07_QUEST_C,1)		// 過去編Ⅶ：【過去クエスト⑦：達成イベント】を見た

	SetFlag(GF_VIRTURE_POINT,(FLAG[GF_VIRTURE_POINT] + 5 ))			//徳ポイント加算
	EventCue("system:EV_FloorOpen")			//扉が開く予知を視る キューを入れる

	SetChrPos("Odo", -100000.0f , 0.0f , 0.0f )
	SetChrPos("eq4037_1", -100000.0f , 0.0f , 0.0f )//(20170314大草：追加した花を飛ばす)

	MapAnime("coffin",off)
	
	CallFunc("system:SetMarkerDANA")	//クエスト系マーカー処理
	CallFunc("mp6222m2:init")

	//イベント後の再配置
	SetChrPos("LEADER",40.22f,-299.00f,143.41f)
	Turn("LEADER",27.80f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt( 0 , 40.220f , -299.000f , 145.260f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 8.356f , 0 )	// 基本仰角
	RotateCamera( 0 , -14.726f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)


//終了処理ここまで----------------------------------------------------

}


////////////////////////////////////////////////////////////////////////////////

//■ストッパー・ＬＰセクション

////////////////////////////////////////////////////////////////////////////////
////──────────────────────────────
////	【ストッパー：奥方面に戻れない】
////──────────────────────────────

function "Stopper_mp6222m2_01"
{

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅵセレンの園へ向かう
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"この先はもう崩れかかっていて"
		"危ないんだっけ。\p"
		"今行くのはやめておこう。"
	}
	WaitPrompt()
	WaitCloseWindow()

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",53.61f,-307.40f,143.41f)
	Turn("LEADER",-179.18f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}


function "Stopper_mp6222m2_02"
{

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼過去編Ⅵセレンの園へ向かう
	TalkPopup("LEADER",0,0,0,0,0)
	{
		"この先はもう崩れかかっていて"
		"危ないんだっけ。\p"
		"今行くのはやめておこう。"
	}
	WaitPrompt()
	WaitCloseWindow()

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",60.38f,-292.12f,143.41f)
	Turn("LEADER",82.28f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}