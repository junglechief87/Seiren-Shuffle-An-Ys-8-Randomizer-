#include "inc/flag.h"
#include "inc/def.h"
#include "inc/scr_inc.h"
#include "inc/3dicon.h"
#include "inc/music.h"
#include "inc/se.h"
#include "inc/efx.h"
#include "inc/mons.h"
#include "inc/skilldef.h"
#include "inc/vo.h"
#include "inc/temp/mp6401m.h"

//-------------------------------------------
// 3109m：
//-------------------------------------------
///////////////////////////////////////////////////////////////////////////////
// 初期化スクリプト
///////////////////////////////////////////////////////////////////////////////
// initスクリプト
function "init"
{
	
	// イベントエリア設定制御
	EventAreaEnable( "evb2_act_0301" , 0 )	//アクティブボイス
	EventAreaEnable( "Stopper_Past_D1_03" , 0 )	// ダーナ編①：【ストッパー：モブ方面にいけない】

	if( FLAG[SF_EVENT_ON] ){
	// イベント発生制御

		//一般配置ファンクション呼び出し
		CallFunc("mp3109m:NpcPosition")

		// アクティブボイス
		if(!FLAG[GF_AVOICE_0301] && FLAG[GF_03MP3109M_MOVE_CANYON] && !FLAG[GF_03MP1202_AWAKE_ADOL]){
			EventAreaEnable( "evb2_act_0301" , 1 )
		}

		// ストッパー制御
		if( FLAG[GF_PAST_EPISODE_D1B_CANYON] )	//▼ダーナ編①Ｂ大峡谷を攻略する
		{
			EventAreaEnable( "Stopper_Past_D1_03" , 1 )	// ダーナ編①：【ストッパー：モブ方面にいけない】
		}
	}

}

//////////////////////////////////////////////////////////////////////
//■アクティブボイス
//////////////////////////////////////////////////////////////////////
function "act_0301"
{
	if (!FLAG[GF_AVOICE_0301])
	{
		EventAreaEnable( "evb2_act_0301" , 0 )
		ActiveVoiceStop(ACTIVEVOICESTOP_WINDOWOFF)
		ActiveVoiceStart(EACT_EVID_0301, 1, 0)	//大峡谷、最初の見晴らしのいい場所で
	}
}


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//■配置制御セクション

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function "NpcPosition"
{
	if( FLAG[GF_PAST_EPISODE_D1B_CANYON] )			//▼ダーナ編①Ｂ大峡谷を攻略する
	{
		//NPCたち
		SetChrPos("oldM1",-16.05f,-160.19f,-0.02f)
		SetChrPos(	oldM2	-10.78f	-165.11f	0.00f	)
		SetChrPos(	oldM3	-20.32f	-166.53f	0.00f	)
		SetChrPos(	oldM4	-13.78f	-161.66f	0.00f	)
		SetChrPos(	MarchantM1	-22.38f	-165.18f	-0.02f	)
		SetChrPos(	MarchantM2	-20.26f	-164.49f	0.00f	)
		SetChrPos(	MarchantM3	-15.54f	-171.03f	0.00f	)
		SetChrPos(	MarchantM4	-13.86f	-165.82f	0.00f	)
		SetChrPos(	citizenM1	-18.04f	-160.88f	0.00f	)
		SetChrPos(	citizenM2	-13.93f	-162.97f	0.00f	)
		SetChrPos(	citizenM3	-17.73f	-162.85f	0.00f	)
		SetChrPos(	citizenM4	-13.89f	-168.86f	0.00f	)
		SetChrPos(	citizenM5	-18.58f	-165.74f	0.00f	)
		SetChrPos(	citizenF1	-19.45f	-162.82f	0.00f	)
		SetChrPos(	citizenF2	-16.20f	-164.37f	0.00f	)
		SetChrPos(	citizenF3	-11.97f	-162.77f	0.00f	)
		SetChrPos(	citizenF4	-14.99f	-163.80f	0.00f	)
		SetChrPos(	citizenF5	-12.43f	-168.81f	0.00f	)
		SetChrPos(	citizenF6	-10.60f	-161.25f	0.00f	)
		SetChrPos(	citizenF7	-19.40f	-172.48f	-0.07f	)
		SetChrPos(	citizenF8	-20.37f	-169.93f	-0.03f	)
		SetChrPos(	citizenF9	-17.36f	-167.81f	-0.00f	)
		SetChrPos(	Meer	-12.93f	-162.86f	0.00f	)
		SetChrPos(	Thea	-15.02f	-161.27f	0.00f	)
		SetChrPos(	MagicianA	-16.30f	-167.06f	0.00f	)
		SetChrPos(	MagicianB	-20.16f	-160.18f	-0.01f	)
		SetChrPos("SoldierA1",-11.59f,-158.84f,-0.04f)
		SetChrPos("SoldierB1",-19.77f,-156.92f,-0.04f)
		SetChrPos(	SoldierA2	-13.46f	-158.44f	0.00f	)
		SetChrPos(	SoldierB2	-17.54f	-157.62f	0.00f	)
		SetChrPos(	eq4029_1	-16.30f	-172.36f	-0.02f	)
		SetChrPos(	eq4029_2	-12.66f	-171.60f	-0.05f	)
		SetChrPos(	eq4029_3	-16.30f	-172.36f	-0.02f	)
		SetChrPos(	eq4029_4	-12.66f	-171.60f	-0.05f	)
		Turn(	oldM1	-178.80f	360.0f	)	
		Turn(	oldM2	177.25f	360.0f	)	
		Turn(	oldM3	-147.88f	360.0f	)	
		Turn(	oldM4	-176.45f	360.0f	)	
		Turn(	MarchantM1	-150.20f	360.0f	)	
		Turn(	MarchantM2	-156.16f	360.0f	)	
		Turn(	MarchantM3	-169.59f	360.0f	)	
		Turn(	MarchantM4	-174.85f	360.0f	)	
		Turn(	citizenM1	-164.59f	360.0f	)	
		Turn(	citizenM2	-171.72f	360.0f	)	
		Turn(	citizenM3	-157.06f	360.0f	)	
		Turn(	citizenM4	-177.09f	360.0f	)	
		Turn(	citizenM5	-157.03f	360.0f	)	
		Turn(	citizenF1	-166.41f	360.0f	)	
		Turn(	citizenF2	-165.27f	360.0f	)	
		Turn(	citizenF3	178.35f	360.0f	)	
		Turn(	citizenF4	-169.99f	360.0f	)	
		Turn(	citizenF5	174.35f	360.0f	)	
		Turn(	citizenF6	168.81f	360.0f	)	
		Turn(	citizenF7	-160.00f	360.0f	)	
		Turn(	citizenF8	-163.66f	360.0f	)	
		Turn(	citizenF9	-163.30f	360.0f	)	
		Turn(	Meer	-176.67f	360.0f	)	
		Turn(	Thea	-170.99f	360.0f	)	
		Turn(	MagicianA	-167.30f	360.0f	)	
		Turn(	MagicianB	-158.21f	360.0f	)	
		Turn(	SoldierA1	18.90f	360.0f	)	
		Turn(	SoldierB1	14.57f	360.0f	)	
		Turn(	SoldierA2	9.90f	360.0f	)	
		Turn(	SoldierB2	-0.53f	360.0f	)	
		Turn(	eq4029_1	0.00f	360.0f	)	
		Turn(	eq4029_2	0.00f	360.0f	)	
		Turn(	eq4029_3	0.00f	360.0f	)	
		Turn(	eq4029_4	0.00f	360.0f	)	

		ChangeAnimation(	MarchantM1	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	MarchantM2	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	MarchantM3	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	MarchantM4	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenM1	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenM2	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenM3	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenM4	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenM5	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenF1	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenF2	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenF3	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenF4	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenF5	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenF6	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenF7	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenF8	,	ANI_EV_PRAY	,-1,1)
		ChangeAnimation(	citizenF9	,	ANI_WAIT	,-1,1)
		ChangeAnimation(	Meer	,	ANI_WAIT	,-1,1)
		ChangeAnimation(	Thea	,	ANI_WAIT	,-1,1)

		ChangeAnimation( "eq4029_1" , "ANI_WAIT_c380", -1 , 1 )
		ChangeAnimation( "eq4029_2" , "ANI_WAIT_c381", -1 , 1 )
		ChangeAnimation( "SoldierA1" , "ANI_EV_WAIT_BUKI", -1 , 1 )
		ChangeAnimation( "SoldierB1" , "ANI_EV_WAIT_BUKI", -1 , 1 )

		ChangeAnimation( "eq4029_3" , "ANI_WAIT_c380", -1 , 1 )
		ChangeAnimation( "eq4029_4" , "ANI_WAIT_c381", -1 , 1 )
		ChangeAnimation( "SoldierA2" , "ANI_EV_WAIT_BUKI", -1 , 1 )
		ChangeAnimation( "SoldierB2" , "ANI_EV_WAIT_BUKI", -1 , 1 )

		SetParent(eq4029_1,SoldierA1,Null_Rhand)
		SetParent(eq4029_2,SoldierB1,Null_Rhand)
		SetParent(eq4029_3,SoldierA2,Null_Rhand)
		SetParent(eq4029_4,SoldierB2,Null_Rhand)

//		SetChrPos("SoldierA1",-12.47f	-169.65f	-0.01f)
//		Turn("SoldierA1",142.42f,360.0f)
//		SetChrPos("SoldierB1",-20.17f	-167.74f	0.00f)
//		Turn("SoldierB1",-109.08f,360.0f)
//		ChangeAnimation( "SoldierA1" , "ANI_EV_WAIT_BUKI", -1 , 1 )
//		ChangeAnimation( "SoldierB1" , "ANI_EV_WAIT_BUKI", -1 , 1 )
//		SetChrPos("eq4029_1",-13.77f,-175.71f,-0.09f)
//		SetChrPos("eq4029_2",-13.77f,-175.71f,-0.09f)
//		SetParent(eq4029_1,SoldierA1,Null_Rhand)
//		SetParent(eq4029_2,SoldierB1,Null_Rhand)
//
//		ChangeAnimation( "eq4029_1" , "ANI_WAIT_c380", -1 , 1 )
//		ChangeAnimation( "eq4029_2" , "ANI_WAIT_c381", -1 , 1 )
//
//		SetChrPos("MagicianA",-11.87f	-157.57f	0.00f)
//		Turn("MagicianA",165.86f,360.0f)
//		SetChrPos("MagicianB",-19.00f	-158.69f	0.00f)
//		Turn("MagicianB",-163.53f,360.0f)
//
//		SetChrPos("citizenM1",-9.98f	-163.52f	0.00f)
//		Turn("citizenM1",165.21f,360.0f)
//		SetChrPos("citizenF1",-5.59f	-160.62f	0.00f)
//		Turn("citizenF1",153.64f,360.0f)
//		SetChrPos("citizenF2",-10.71f	-164.24f	0.00f)
//		Turn("citizenF2",171.71f,360.0f)
//
//		SetChrPos("oldM1",-17.73f	-162.38f	0.00f)
//		Turn("oldM1",-170.36f,360.0f)
//		SetChrPos("oldM2",-8.58f	-160.29f	0.00f)
//		Turn("oldM2",157.78f,360.0f)

		SetChrPos("SisterA",-8.33f	-150.45f	0.02f)
		Turn("SisterA",175f,360.0f)
		ChangeAnimation( "SisterA", "ANI_EV_TEMUNE", -1, 1 )

		SetChrPos("SisterB",-18.49f	-151.26f	-0.11f)
		Turn("SisterB",175f,360.0f)
		ChangeAnimation( "SisterB", "ANI_EV_TEMUNE", -1, 1 )

		SetChrPos("Olga",-11.88f,-148.67f,0.02f)
		Turn("Olga",173.52f,360.0f)
		ChangeAnimation( "Olga", "ANI_EV_TEMUNE", -1, 1 )

		SetChrPos("Sarai",-15.04f,-148.71f,-0.03f)
		Turn("Sarai",-162.54f,360.0f)
		ChangeAnimation( "Sarai", "ANI_EV_TEMUNE", -1, 1 )

		SetChrPos("Shenna",-10.66f	-150.65f	0.00f)
		Turn("Shenna",175f,360.0f)
		ChangeAnimation( "Shenna", "ANI_EV_TEMUNE", -1, 1 )

		SetChrPos("Cesil",-13.24f	-150.81f	0.00f)
		Turn("Cesil",175f,360.0f)
		ChangeAnimation( "Cesil", "ANI_EV_TEMUNE", -1, 1 )

		SetChrPos("Atra",-15.83f	-151.02f	0.00f)
		Turn("Atra",175f,360.0f)
		ChangeAnimation( "Atra", "ANI_EV_TEMUNE", -1, 1 )
	}
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//■一般会話セクション

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//---------------------------------------------------------------
//【侍女アトラ】
function "Talk_Atra"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_D1B_CANYON] )			//▼ダーナ編①Ｂ大峡谷を攻略する
	{
		//▼ダーナ編①Ｂ大峡谷を攻略する
		//───────────────
		//	場所		：大峡谷（過去）・スタート地点
		//───────────────
		//	配置・カメラ：
		//	モーション	：手を前で組む
		//───────────────
		//　　話しかけると瞑目しつつ一礼する
		//	侍女アトラ
		TalkPopup("this",0,0,0,0,0)
		{
			"我ら、ここに"
			"新たな巫女の誕生を讃えん。"
		}
		WaitPrompt()
		WaitCloseWindow()

		LookChr("this","LEADER")
		Wait(10)

		TalkPopup("this",0,0,0,0,0)
		{
			"……巫女様、どうかお気をつけて。"
			"見事試練を乗り越えられますよう。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}

//---------------------------------------------------------------
//【修道女シェンナ】
function "Talk_Shenna"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_D1B_CANYON] )			//▼ダーナ編①Ｂ大峡谷を攻略する
	{
		//▼ダーナ編①Ｂ大峡谷を攻略する
		//───────────────
		//	場所		：大峡谷（過去）・スタート地点
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		//　　話しかけると瞑目しつつ一礼する

//		ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

		//	修道女シェンナ
		TalkPopup("this",0,0,0,0,0)
		{
			"新たな巫女ダーナ様に"
			"良き理力の導きがあらん事を。"
		}
		WaitPrompt()
		WaitCloseWindow()

		LookChr("this","LEADER")
		Wait(10)

		TalkPopup("this",0,0,0,0,0)
		{
			"……植樹の儀の成功を"
			"お祈りいたしております。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}

//---------------------------------------------------------------
//【修道女セシル】
function "Talk_Cesil"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_D1B_CANYON] )			//▼ダーナ編①Ｂ大峡谷を攻略する
	{
		//▼ダーナ編①Ｂ大峡谷を攻略する
		//───────────────
		//	場所		：大峡谷（過去）・スタート地点
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		//　　話しかけると瞑目しつつ一礼する
		//	修道女セシル

//		ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

		TalkPopup("this",0,0,0,0,0)
		{
			"地の狭間にて、新たな巫女が"
			"植樹の儀を執り行わん──\p"
			"我らはその証人となろう。"
			"エタニアに永久#4Rとわ#Rの繁栄があらんことを。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}

//---------------------------------------------------------------
//【オルガ】
function "Talk_Olga"
{

	if( FLAG[GF_PAST_EPISODE_D1B_CANYON] )			//▼ダーナ編①Ｂ大峡谷を攻略する
	{
		//▼ダーナ編①Ｂ大峡谷を攻略する

		//────────  一般・開始処理(過去編)  ──────────
		SetStopFlag(STOPFLAG_TALK2)
		//───────────────
		//	場所		：大峡谷（過去）・スタート地点
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		SaveCamera()
		ChangeCameraPers( 0 , 60.000f , 0 )	// 視野角
		SetCameraZPlane( 0.100f , 600.000f )	// ZPlane
		RollCamera( 0 , 0.0f , 0 )		// ロール回転
		MoveCameraAt( 0 , -11.952f , -147.939f , 1.608f , 0 )	// 注視点
		MoveCamera( 0 , -11.880f , -147.305f , 1.660f , 0 )		// 視点

		//キャラ初期動作の記述
		LookSpd("this", 1.0f, 1.0f, 1.0f)
//		LookTo("this", -11.880f , -147.305f , 1.660f )	// 首を正面に向ける
		LookTo("this", -11.880f , -147.305f , 1.460f )	// 首を正面に向ける

		ChangeSubAnimation("this",SUBMOT_EYE,ANI_E_CLOSE_S,1)

		CallFunc("system:talkevent_begin")		//TALK_BEGIN
		LookSpd("this", LOOKSPD_DEFAULT, LOOKSPD_DEFAULT, LOOKSPD_DEFAULT)
		//───────────────────────────────

		//　　話しかけると瞑目しつつ一礼する

		TalkPopup("Olga",0,0,0,0,0)
		{
			"#011e#000m植樹の儀を執り行う祠は"
			"この大峡谷の奥にございます。"
		}
		WaitPrompt()
		WaitCloseWindow()

		LookTo("this", -11.880f , -147.305f , 1.660f )	// 首を正面に向ける
		ChangeSubAnimation("this",SUBMOT_EYE,ANI_E_CLOSE_E,1)
		Wait(10)

		TalkPopup("Olga",0,0,0,0,0)
		{
			"大樹の導きがあらん事を。"
			"見事試練を乗り越えられますよう。 "
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	CallFunc("system:talkevent_end_ps")		//TALK_END
}

//---------------------------------------------------------------
//【サライ】
function "Talk_Sarai"
{

	if( FLAG[GF_PAST_EPISODE_D1B_CANYON] )			//▼ダーナ編①Ｂ大峡谷を攻略する
	{
		//▼ダーナ編①Ｂ大峡谷を攻略する
		//────────  一般・開始処理(過去編)  ──────────
		SetStopFlag(STOPFLAG_TALK2)
		//───────────────
		//	場所		：大峡谷（過去）・スタート地点
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		SaveCamera()
		ChangeCameraPers( 0 , 60.000f , 0 )	// 視野角
		SetCameraZPlane( 0.100f , 600.000f )	// ZPlane
		RollCamera( 0 , 0.0f , 0 )		// ロール回転
		MoveCameraAt( 0 , -14.870f , -148.281f , 1.526f , 0 )	// 注視点
		MoveCamera( 0 , -14.730f , -147.474f , 1.555f , 0 )		// 視点

		//キャラ初期動作の記述
		LookSpd("this", 1.0f, 1.0f, 1.0f)
		LookTo("this", -14.730f , -147.474f , 1.455f )	// 首を正面に向ける

		CallFunc("system:talkevent_begin")		//TALK_BEGIN
		LookSpd("this", LOOKSPD_DEFAULT, LOOKSPD_DEFAULT, LOOKSPD_DEFAULT)
		//───────────────────────────────

		//　　話しかけると目礼しつつ手を差し出す。
		//　　サライ、ここで瞑目しつつ一礼。

		ChangeSubAnimation("this",SUBMOT_EYE,ANI_E_CLOSE_S,1)
		LookSpd("this", 0.05f, 0.05f, 0.05f)
		Look("this" , -3 , -20 )
//		ChangeAnimation( "Sarai", "ANI_EV_TEMUNE_S", -1, 1 )
//		WaitAnimation2( "this" , -1, 1, "ANI_EV_TEMUNE_S",  0)
		ChrEffect2( "this" , 3900600 , "Bone_root", "", 0 , 0 , 0 , 0.0f,0.0f,0, 1.0f, 1.0f)	//オーラ（ループ）
		PlaySE(SE_AURA, 60, 0,  0, 0, 1.0f, 0)
		Wait(30)

		TalkPopup("Sarai",0,0,0,0,0)
		{
			"#000m天よ、地よ、新たな巫女の"
			"誕生を寿ぎたまえ──"
		}
		WaitPrompt()
		WaitCloseWindow()

		//　　回復エフェクトが走り、ダーナの体力が全快する。
		Wait(25)

		PlaySE(SE_HEAL, 100, 0,  0, 0, 1.0f, 0)
//		Effect2( SYSEFX_SYSHEAL , -15.04f,-148.71f,-0.03f , 0 , 0 , 0 , IMPACT_NONE , KNOCK_EFXPOS , 0 , 1.0f, 1.0f)
		Effect2( SYSEFX_SYSHEAL , -14.96f,-148.37f,-0.04f, 0 , 0 , 0 , IMPACT_NONE , KNOCK_EFXPOS , 0 , 1.0f, 1.0f)			//◆仮

		//★回復処理
		HP_Recover( 9999 )
		CureAll( )	//状態異常回復
		Wait(35)
		
		FadeOut(FADE_BLACK_HALF,FADE_NORMAL)
		WaitFade()
		
		TalkPopup(UNDEF,0,5,0,0,0)
		{
			"#8S"
			"#-1W#4Cダーナの体力が回復した！#10W" 
			"#8S"
		}
		Wait(10)
		WaitPrompt()
		WaitCloseWindow()

		StopEffect(3900600,ALL,1)
		FadeIn(FADE_BLACK_HALF,FADE_FAST)
		WaitFade()

		LookTo("this", -14.730f , -147.474f , 1.455f )	// 首を正面に向ける
		Wait(15)

		TalkPopup("this",0,0,0,0,0)
		{
			"#012e#080m道中お気をつけて。"
			"儀式の成功をお祈りしております。"
		}
		WaitPrompt()
		WaitCloseWindow()

		LookSpd("this", LOOKSPD_DEFAULT, LOOKSPD_DEFAULT, LOOKSPD_DEFAULT)

	}

	CallFunc("system:talkevent_end_ps")		//TALK_END
}

//---------------------------------------------------------------
//【修道女】
function "Talk_SisterA"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_D1B_CANYON] )			//▼ダーナ編①Ｂ大峡谷を攻略する
	{
		//▼ダーナ編①Ｂ大峡谷を攻略する
		//───────────────
		//	場所		：大峡谷（過去）・スタート地点
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		//　　話しかけると瞑目しつつ一礼する

//		ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

		//	修道女
		TalkPopup("this",0,0,0,0,0)
		{
			"ああ、大いなる大樹よ。"
			"新しき巫女、新しき時代が来たれり。\p"
			"我ら忠実なるエタニアの民に"
			"栄光と繁栄をもたらしたまえ。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}

//---------------------------------------------------------------
//【修道女】
function "Talk_SisterB"
{
	SetStopFlag(STOPFLAG_TALK)
	CallFunc("system:talk_begin_zoom")		//TALK_ZOOM

	if( FLAG[GF_PAST_EPISODE_D1B_CANYON] )			//▼ダーナ編①Ｂ大峡谷を攻略する
	{
		//▼ダーナ編①Ｂ大峡谷を攻略する
		//───────────────
		//	場所		：大峡谷（過去）・スタート地点
		//───────────────
		//	配置・カメラ：
		//	モーション	：
		//───────────────
		//　　話しかけると瞑目しつつ一礼する

//		ChangeAnimation("this","ANI_EV_REI", -1 , 1 )

		//	修道女
		TalkPopup("this",0,0,0,0,0)
		{
			"エタニアに光あれ！\p"
			"我ら大樹に連なりしもの、"
			"ここに寿ぎの言葉を奉らん──"
		}
		WaitPrompt()
		WaitCloseWindow()
	}

	ResetStopFlag(STOPFLAG_TALK)
}









///////////////////////////////////////////////////////////////////////////////
// メインシナリオ
///////////////////////////////////////////////////////////////////////////////

//──────────────────────────────
//▼[ダーナ編①]植樹祭開始を宣言する(mp3109m)
//──────────────────────────────

function "EV_M03S020"		//ダーナ① 植樹祭開始を宣言する
{
//開始処理ここから-----------------------------------------------

	SetStopFlag(STOPFLAG_EVENTIMPOSE)
	ResetStopFlag(STOPFLAG_CINEMA)	//字幕背景消し

	FadeOut(FADE_BLACK, 0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))

	//キャラクター初期化
	SetChrPos("DANA",-22.61f,-193.31f,-0.25f)
	Turn("DANA",151.34f,360.0f)

	SetChrPos("Olga",-20.56f,-169.58f,-0.01f)
	Turn("Olga",-29.93f,360.0f)
	
	SetChrPos("Sarai",-20.48f,-168.86f,-0.00f)
	Turn("Sarai",-47.96f,360.0f)

	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	ChangeSubAnimation("DANA",SUBMOT_EXT2,ANI_SIGN_HIDE,1)
	LookReset("DANA")

	SetChrWork("Sarai", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Sarai", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("Sarai", INFOFLAG_NOATARI)
	ChangeAnimation("Sarai", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Sarai", SUBMOT_EYE, ANI_E_CLOSE, 1)
	ChangeSubAnimation("Sarai", SUBMOT_MOUTH, ANI_M_SMILE, 1)
	ChangeSubAnimation("Sarai", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookChr("Sarai", "DANA")

	SetChrWork("Olga", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrInfoFlag("Olga", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("Olga", INFOFLAG_NOATARI)
	ChangeAnimation("Olga", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Olga", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("Olga", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookChr("Olga" , "DANA")

	LookSpd("DANA" , 0.08 , 0.08 , 0.08 )
	LookSpd("Sarai" , 0.08 , 0.08 , 0.08 )
	LookSpd("Olga" , 0.08 , 0.08 , 0.08 )

	//侍女たち
	SetChrInfoFlag("SisterA", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("SisterA", INFOFLAG_NOATARI)
	SetChrInfoFlag("SisterB", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("SisterB", INFOFLAG_NOATARI)
	SetChrPos("SisterA",-23.09f,-168.33f,0.00f)
	TurnTo("SisterA",-19.73f,-171.33f,-0.05f,360.0f)
	LookChr("SisterA" , "DANA")
	SetChrPos("SisterB",-21.69f,-167.53f,0.00f)
	TurnTo("SisterB",-19.73f,-171.33f,-0.05f,360.0f)
	LookChr("SisterB" , "DANA")

	//兵士
	SetChrInfoFlag("SoldierA1", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("SoldierA1", INFOFLAG_NOATARI)
	SetChrInfoFlag("SoldierB1", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("SoldierB1", INFOFLAG_NOATARI)

	SetChrPos("SoldierA1",-13.77f,-175.71f,-0.09f)
	Turn("SoldierA1",92.65f,360.0f)
	SetChrPos("SoldierB1",-25.64f,-181.18f,-0.06f)
	Turn("SoldierB1",-66.28f,360.0f)
	ChangeAnimation( "SoldierA1" , "ANI_EV_WAIT_BUKI", -1 , 1 )
	ChangeAnimation( "SoldierB1" , "ANI_EV_WAIT_BUKI", -1 , 1 )

	ChangeAnimation( "eq4029_1" , "ANI_WAIT_c380", -1 , 1 )
	ChangeAnimation( "eq4029_2" , "ANI_WAIT_c381", -1 , 1 )

	SetChrPos("eq4029_1",-13.77f,-175.71f,-0.09f)
	SetChrPos("eq4029_2",-13.77f,-175.71f,-0.09f)
	SetParent(eq4029_1,SoldierA1,Null_Rhand)
	SetParent(eq4029_2,SoldierB1,Null_Rhand)

	SetChrInfoFlag("MagicianA", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("MagicianA", INFOFLAG_NOATARI)
	SetChrInfoFlag("MagicianB", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("MagicianB", INFOFLAG_NOATARI)
	SetChrInfoFlag("oldM1", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("oldM1", INFOFLAG_NOATARI)

	SetChrPos("MagicianA",-11.28f,-161.43f,0.00f)
	Turn("MagicianA",-177.07f,360.0f)
	SetChrPos("MagicianB",-13.37f,-170.33f,-0.01f)
	Turn("MagicianB",31.41f,360.0f)
	SetChrPos("oldM1",-11.33f,-171.61f,-0.07f)
	Turn("oldM1",99.56f,360.0f)

	SetChrInfoFlag("oldM2", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("oldM2", INFOFLAG_NOATARI)
	SetChrInfoFlag("citizenF1", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("citizenF1", INFOFLAG_NOATARI)

	SetChrPos("oldM2",-9.99f,-162.27f,0.00f)
	Turn("oldM2",29.00f,360.0f)
	SetChrPos("citizenF1",-9.00f,-164.26f,0.00f)
	Turn("citizenF1",57.06f,360.0f)

	//向き合う男女
	SetChrInfoFlag("citizenM1", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("citizenM1", INFOFLAG_NOATARI)
	SetChrInfoFlag("citizenF2", INFOFLAG_NOCHRATARI)
	SetChrInfoFlag("citizenF2", INFOFLAG_NOATARI)

	SetChrPos("citizenM1",-12.63f,-166.56f,0.00f)
	Turn("citizenM1",-16.49f,360.0f)
	SetChrPos("citizenF2",-12.21f,-167.79f,0.00f)
	Turn("citizenF2",150.45f,360.0f)
	LookChr("citizenM1" , "citizenF2")
	LookChr("citizenF2" , "citizenM1")

	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )
	PlayBGM(BGM_TOWN_401, 0)
	SetEnvSEPlayState(3109801, 0)

	//カメラ設定
	MoveCameraAt( 0 , -19.060f , -171.820f , 5.938f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.900f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -54.850f , 0 )	// 基本仰角
	RotateCamera( 0 , 327.580f , 0 )				// 角度
	ChangeCameraPers( 0 , 56.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 175.000, 2.000, 0.450, 0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)

	//スキップ許可
	SetSkipScript("mp3109m:EV_M03S020_ED")

//開始処理ここまで-----------------------------------------------

	ExecuteCmd( 1, MoveTo, "DANA", -19.72f,-171.27f,-0.05f, 0.1f, 0.24f )
	//SetChrPos("DANA",-19.72f,-171.27f,-0.05f)
	//Turn("DANA",-173.24f,360.0f)

	LookTo("DANA" ,-20.332f , -168.782f , 1.621f )

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

//　　画面フェードインして大峡谷の入口周辺を見せる。
//　　入口付近にはオルガとサライ、
//　　そして侍女たちが待ち受けている。
//　　そこへ歩いてきてフレームインするダーナ。

	Wait(20)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -22.544f , -169.562f , 2.465f, 150  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.800f , 150  )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 18.252f , 150 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 315.899f , 150)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 200  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 180 )		// 視野角

	//MoveCameraAt( 0 , -22.544f , -169.562f , 2.465f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 4.800f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 18.252f , 0 )	// 基本仰角
	//RotateCamera( 0 , 315.899f , 0 )				// 角度
	//ChangeCameraPers( 0 , 56.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	Wait(20)

	CrossFade(FADE_NORMAL)
	MoveCameraAt( 0 , -19.642f , -170.203f , 1.473f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.800f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.087f , 0 )	// 基本仰角
	RotateCamera( 0 , 153.679f , 0 )				// 角度
	ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -20.184f , -169.935f , 1.473f, 150  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.800f, 150  )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -2.087f , 150 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 153.679f , 150)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 150  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 150 )		// 視野角

	//MoveCameraAt( 0 , -20.184f , -169.935f , 1.473f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 3.800f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -2.087f , 0 )	// 基本仰角
	//RotateCamera( 0 , 153.679f , 0 )				// 角度
	//ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転

	Wait(FADE_NORMAL)

	Wait(20)

	//　　ダーナにＰＡエモーション。
	EmotionEx("DANA", 0.00f,EMO_PA,0,6,1,1,1.25f )

	Wait(35)
	

	CrossFade(FADE_FAST)	
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

	MoveCameraAt( 0 , -20.244f , -171.756f , 1.423f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.170f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 5.441f , 0 )	// 基本仰角
	RotateCamera( 0 , 172.771f , 0 )				// 角度
	ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転


	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -19.913f , -171.750f , 1.423f, 60  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.170f , 60  )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 5.441f  , 60 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,  181.156f, 60)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 60  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 60 )		// 視野角

	//MoveCameraAt( 0 , -19.913f , -171.750f , 1.423f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.170f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 5.441f , 0 )	// 基本仰角
	//RotateCamera( 0 , 181.156f , 0 )				// 角度
	//ChangeCameraPers( 0 , 30.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転

	Wait(FADE_FAST)

	FadeBGM(70,10)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_SMILE_S,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_SMILE_S,1)

	TalkMes("DANA","#3113V#080mオルガちゃん、サライちゃん！",
		"来てくれたの？","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(20)
	
	CrossFade(FADE_FAST)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

//	MoveCameraAt( 0 , -20.355f , -169.705f , 1.280f , 0 )	// 注視点
//	ChangeCameraDistance( 0 , 1.355f , 0 )		// 基本距離
//	ChangeCameraElevation( 0 , -2.411f , 0 )	// 基本仰角
//	RotateCamera( 0 , 332.279f , 0 )				// 角度
//	ChangeCameraPers( 0 , 37.000f , 0 )			// 視野角
//	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
//	RollCamera( 0 , -3.9f , 0 )				// ロール回転

	MoveCameraAt( 0 , -20.355f , -169.705f , 1.669f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.355f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.411f , 0 )	// 基本仰角
	RotateCamera( 0 , 332.279f , 0 )				// 角度
	ChangeCameraPers( 0 , 37.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , -3.9f , 0 )				// ロール回転
	

//	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -20.355f , -169.705f , 1.669f, 220  )		// 注視点
//	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.355f , 220  )		// 基本距離
//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -2.411f , 220 )		// 基本仰角
//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 332.279f , 220)		// 角度
////	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 220  )		// ロール回転
////	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 220)		// 視野角

	//MoveCameraAt( 0 , -20.355f , -169.705f , 1.669f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.355f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -2.411f , 0 )	// 基本仰角
	//RotateCamera( 0 , 332.279f , 0 )				// 角度
	//ChangeCameraPers( 0 , 37.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , -3.9f , 0 )				// ロール回転

	Wait(30)

	ChangeAnimation( "Olga" , "ANI_EV_TEMUNE_S", -1 , 1 )

	//	"Olga"
	TalkMes("Olga","#5321V#011e#000m巫女様、僭越ながら本日は我々が",
		"植樹祭の見届け役を務めさせて頂きます。","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)


//	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -20.355f , -169.705f , 1.669f, 260  )		// 注視点
//	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.355f , 260  )		// 基本距離
//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -2.411f , 260 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,  358.846f , 210)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 350  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 150350)		// 視野角

	//MoveCameraAt( 0 , -20.355f , -169.705f , 1.669f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.355f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -2.411f , 0 )	// 基本仰角
	//RotateCamera( 0 , 358.846f , 0 )				// 角度
	//ChangeCameraPers( 0 , 37.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , -3.9f , 0 )				// ロール回転

	Wait(30)
	
	VisualName("visual/chrname/cn_c302.itp", VN_NAMEVOICE, VN_CHRNAME_RB_X, VN_CHRNAME_RB_Y,VN_NPCNAME_TIME)		//オルガ
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , -3.9f , 290  )		// ロール回転
	Wait(60)

	ChangeSubAnimation("Olga",SUBMOT_EYE,ANI_E_CLOSE_E,1)

	//時限式選択肢
	//◆SE無効化コマンド置換用
	SetFlag(TF_MENU_SELECT2,0)
	MenuReset()
	MenuAdd( 1 , "" )
	MenuOpen( TF_MENU_SELECT2 , 0 ,0 , 0 , 0 , 0 , 0 )
	WaitMenu(VN_NPCNAME_SKIP) //ウェイトしたい数値
	MenuClose(0,0)

	if(FLAG[TF_MENU_SELECT2] == 0 )
	{
		Wait(30)
	}

//	WaitThread(1001)
//	WaitThread(1002)
//	WaitThread(1003)
//	WaitThread(1004)
//
//
////	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -20.355f , -169.705f , 1.669f, 350  )		// 注視点
////	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.355f , 350  )		// 基本距離
////	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -2.411f , 350 )		// 基本仰角
//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,  358.846f , 270)		// 角度
////	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 350  )		// ロール回転
////	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 150350)		// 視野角
//
//	//MoveCameraAt( 0 , -20.355f , -169.705f , 1.669f , 0 )	// 注視点
//	//ChangeCameraDistance( 0 , 1.355f , 0 )		// 基本距離
//	//ChangeCameraElevation( 0 , -2.411f , 0 )	// 基本仰角
//	//RotateCamera( 0 , 358.846f , 0 )				// 角度
//	//ChangeCameraPers( 0 , 37.000f , 0 )			// 視野角
//	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
//	//RollCamera( 0 , -3.9f , 0 )				// ロール回転
//
//	Wait(90)
//
//	ChangeSubAnimation("Olga",SUBMOT_EYE,ANI_E_CLOSE_E,1)
//
//	WaitThread(1005)
//	
//	Wait(15)

	CrossFade(FADE_NORMAL)
	VisualNameEnd()
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

	MoveCameraAt( 0 , -19.823f , -169.068f , 1.694f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.625f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 7.727f , 0 )	// 基本仰角
	RotateCamera( 0 , 48.435f , 0 )				// 角度
	ChangeCameraPers( 0 , 37.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , -9.3f , 0 )				// ロール回転

	ExecuteFunc(100, "mp3109m:Sarai_move")
	WaitThread(100)

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	ChangeAnimation( "Sarai" , "ANI_EV_TEMUNE_S", -1 , 1 )

	//	"Sarai"
	TalkMes("Sarai","#5397V#011e#080mどうぞ、よろしくお願いします。","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -19.631f , -169.014f , 1.719f, 220  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.295f , 220  )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -6.233f , 220 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 330.558f , 220)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 350  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 150350)		// 視野角

	//MoveCameraAt( 0 , -19.631f , -169.014f , 1.719f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.295f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -6.233f , 0 )	// 基本仰角
	//RotateCamera( 0 , 330.558f , 0 )				// 角度
	//ChangeCameraPers( 0 , 37.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , 2.1f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(40)

	WaitAnimation2( "Sarai" , -1, 1, "ANI_EV_TEMUNE_S",  0)
	VisualName("visual/chrname/cn_c300d.itp", VN_NAMEVOICE, VN_CHRNAME_RB_X, VN_CHRNAME_RB_Y,VN_NPCNAME_TIME)		//sarai
	Wait(60)

	ChangeAnimation( "Sarai" , "ANI_EV_TEMUNE_E", -1 , 1 )
	ChangeSubAnimation("Sarai",SUBMOT_EYE,ANI_E_CLOSE_E,1)

	//時限式選択肢
	//◆SE無効化コマンド置換用
	SetFlag(TF_MENU_SELECT2,0)
	MenuReset()
	MenuAdd( 1 , "" )
	MenuOpen( TF_MENU_SELECT2 , 0 ,0 , 0 , 0 , 0 , 0 )
	WaitMenu(VN_NPCNAME_SKIP) //ウェイトしたい数値
	MenuClose(0,0)

	if(FLAG[TF_MENU_SELECT2] == 0 )
	{
		Wait(30)
	}

//	WaitThread(1001)
//	WaitThread(1002)
//	WaitThread(1003)
//	WaitThread(1004)
//	WaitThread(1005)
//	WaitThread(1006)

	//　　かしこまった様子で挨拶するオルガとサライ。
	//　　ダーナにアセアセエモーション。

	CrossFade(FADE_FAST)
	VisualNameEnd()

	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

	MoveCameraAt( 0 , -19.715f , -170.874f , 1.421f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.113f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 11.930f , 0 )	// 基本仰角
	RotateCamera( 0 , 192.824f , 0 )				// 角度
	ChangeCameraPers( 0 , 33.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , 1.4f , 0 )				// ロール回転

//	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -19.631f , -169.014f , 1.719f, 350  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.593f , 190  )		// 基本距離
//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -6.233f , 350 )		// 基本仰角
//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 330.558f , 350)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 350  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 150350)		// 視野角

	//MoveCameraAt( 0 , -19.715f , -170.874f , 1.421f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 3.593f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 11.930f , 0 )	// 基本仰角
	//RotateCamera( 0 , 192.825f , 0 )				// 角度
	//ChangeCameraPers( 0 , 33.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , 1.4f , 0 )				// ロール回転
	
	Wait(15)

	EmotionEx("DANA", 0.03f,EMO_ASE,0,10,2,1,1.0f )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_SAD_CLOSE_S,1)

	Wait(40)

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	LookReset("DANA")
	ChangeAnimation( "DANA" , "ANI_EV_HOHOKAKI", -1 , 1 )

	TalkMes("DANA","#3114V#000l#062e#000mふ、二人とも……何だか調子狂うなぁ。",
	"調子2行目","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)

	CrossFade(FADE_CROSS)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

	ChangeSubAnimation("Sarai",SUBMOT_EYE,ANI_E_LAUGH,1)
	MoveCameraAt( 0 , -19.917f , -169.380f , 1.663f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 1.230f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.671f , 0 )	// 基本仰角
	RotateCamera( 0 , 87.288f , 0 )				// 角度
	ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , -7.1f , 0 )				// ロール回転

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 50.000 ,2.000 ,0.250 ,0.500)
	SetDoFFocus(0, 0, 1.5)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -19.936f , -169.787f , 1.614f, 500  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.010f , 500  )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -2.671f , 500 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 87.288f , 500)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 500  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 500 )		// 視野角

	//MoveCameraAt( 0 , -19.936f , -169.787f , 1.614f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.010f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -2.671f , 0 )	// 基本仰角
	//RotateCamera( 0 , 87.288f , 0 )				// 角度
	//ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , -7.1f , 0 )				// ロール回転

	Wait(FADE_CROSS)

	Wait(10)

	ChangeAnimation( "Olga" , "ANI_EV_TEMUNE_E", -1 , 1 )
	//	"Olga"
	TalkMes("Olga","#5322V#011e#000m#0L………………………………","","")
	WaitPrompt()

	TalkMes("Olga","#5323V#042e#000m畏れながら巫女様の御身はすでに大いなる",
		"《はじまりの大樹》に捧げられたもの。","")
	WaitPrompt()

	ChangeAnimation( "Olga" , "ANI_EV_TEBURI", -1 , 1 )

	TalkMes("Olga","#5324V#000mそのようにあけすけな物言いは謹み、",
		"もっと堂々となさいますよう。","")
	WaitPrompt()
	TalkMes("Olga","#5325V#041e#000m本日は王族や臣民たちの目もございます。",
	"王族2行目","")
	WaitPrompt()
	WaitCloseWindow()



	CrossFade(FADE_CROSS)

	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

	ChangeSubAnimation("Sarai",SUBMOT_EYE,ANI_E_CLOSE,1)

	MoveCameraAt( 0 , -20.171f , -170.901f , 1.384f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.250f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -3.951f , 0 )	// 基本仰角
	RotateCamera( 0 , 336.457f , 0 )				// 角度
	ChangeCameraPers( 0 , 25.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , -1.8f , 0 )				// ロール回転

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 65.000, 2.000, 0.450, 0.500)
	SetDoFFocus(0, 0, 0)

	Wait(FADE_CROSS)

	WaitThread(100)

	//	"DANA"
	LookReset("DANA")
	ChangeAnimation( "DANA" , "ANI_EV_RYOTESIRI_S", -1 , 1 )
	TalkMes("DANA","#3115V#000e#000mは、はい。","","")
	WaitPrompt()
	WaitCloseWindow()



	//	"Sarai"
	TalkMes("Sarai","#5398V#000e#080m巫女様には古#2Rいにしえ#Rの習わしに則り、",
		"ここから大峡谷の祠#2Rほこら#Rを目指して頂きます。","")
	WaitPrompt()


	TalkMes("Sarai","#5399V#011e#080m道中、大きな危険はないと思いますが、",
		"もしお疲れの場合は一度お戻りください。","")
	WaitPrompt()

	ChangeAnimation( "Sarai" , "ANI_EV_TEMUNE_S", -1 , 1 )

	TalkMes("Sarai","#5400V#012e#080m私どもがここに待機しております。","","")
	WaitPrompt()
	WaitCloseWindow()


	ChangeAnimation( "DANA" , "ANI_EV_RYOTESIRI_E", -1 , 1 )
	//	"DANA"
	Wait(20)
	HeadYes("DANA" ,1 ,25 )

	TalkMes("DANA","#3116V#000e#000mわかりました、ありがとう。","","")
	WaitPrompt()
	WaitCloseWindow()
	Wait(10)

	CrossFade(FADE_FAST)
	Look("DANA" , -15 , 0 )

	MoveCameraAt( 0 , -20.381f , -169.072f , 1.733f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.510f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -6.062f , 0 )	// 基本仰角
	RotateCamera( 0 , 346.520f , 0 )				// 角度
	ChangeCameraPers( 0 , 28.300f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , -2.5f , 0 )				// ロール回転

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -20.108f , -169.137f , 1.733f, 290  )		// 注視点
//	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.800f, 150  )		// 基本距離
//	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -2.087f , 150 )		// 基本仰角
//	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 153.679f , 150)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 150  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 150 )		// 視野角

	//MoveCameraAt( 0 , -20.108f , -169.137f , 1.733f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.510f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -6.062f , 0 )	// 基本仰角
	//RotateCamera( 0 , 346.520f , 0 )				// 角度
	//ChangeCameraPers( 0 , 28.300f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , -2.5f , 0 )				// ロール回転

	Wait(FADE_FAST)

	ChangeAnimation( "Olga" , "ANI_EV_TEBURI", -1 , 1 )

	//	"Olga"
	TalkMes("Olga","#5326V#000e#000m祠へ到着されましたら、",
		"植樹の儀を執り行って頂きます。","")
	WaitPrompt()
	TalkMes("Olga","#5327V#011e#000mとにかく、まずは祠を目指して",
		"奥へとお進みください。","")
	WaitPrompt()
	WaitCloseWindow()

	//	"Sarai"
	TalkMes("Sarai","#5401V#011e#000mそれでは巫女様、植樹祭開始の宣言を。",
	"宣言2行目","")
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)

	CrossFade(FADE_FAST)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

	MoveCameraAt( 0 , -19.764f , -169.804f , 1.412f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.650f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 1.953f , 0 )	// 基本仰角
	RotateCamera( 0 , 22.355f , 0 )				// 角度
	ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , -0.0f , 0 )				// ロール回転

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 1.000, 16.000, 1.000, 0.700, 0.500)


	Wait(FADE_FAST)

	Wait(10)

	//	"DANA"
	HeadYes("DANA" , 1 , 25 )
	TalkMes("DANA","#3117V#011e#000mええ。","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	ChangeSubAnimation("Olga",SUBMOT_EYE,ANI_E_CLOSE_E,1)
	ChangeSubAnimation("Sarai",SUBMOT_EYE,ANI_E_CLOSE_E,1)

	Look("Olga" , -15 , -5 )
	Look("Sarai" , -25 , -3 )

	LookReset("DANA")

	TurnTo("DANA" , -16.31f,-163.61f,0.00f , 6.0f )
	
	ExecuteCmd( 1, MoveTo, "DANA", -16.31f,-163.61f,0.00f, 0.1f, 0.23f )
	//SetChrPos("DANA",-16.31f,-163.61f,0.00f)
	//Turn("DANA",-172.53f,360.0f)

	Wait(20)

	ChangeAnimation( "Sarai" , "ANI_EV_TEMUNE_E", -1 , 1 )
	ChangeSubAnimation("Sarai",SUBMOT_EXT1,ANI_E_LOOKL_S,1)
	ChangeSubAnimation("Olga",SUBMOT_EXT1,ANI_E_LOOKL_S,1)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -19.109f , -170.271f , 1.412f , 80  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.450f, 80  )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 1.953f , 80 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,349.469f , 80)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 80  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 80 )		// 視野角

	//MoveCameraAt( 0 , -19.109f , -170.271f , 1.412f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 4.450f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 1.953f , 0 )	// 基本仰角
	//RotateCamera( 0 , 349.469f , 0 )				// 角度
	//ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , -0.0f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	//　　ダーナが大峡谷の入口に立ち、その後ろに
	//　　オルガ、サライ、侍女たちが並んだ状態を見せていく。
	//　　さらにダーナが数歩前へ進み出るのを見せる。

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	StopBGM(120)

	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()
	StopThread(1)

	SetChrPos("DANA",-14.40f,-150.62f,0.00f)
	TurnTo("DANA",-13.64f,-147.82f,0.04f,360.0f)

	ChangeAnimation( "Sarai" , "ANI_WAIT", -1 , 1 )
	ChangeAnimation( "Olga" , "ANI_WAIT", -1 , 1 )

	ChangeSubAnimation("Sarai",SUBMOT_EXT1,ANI_E_LOOKC,1)
	ChangeSubAnimation("Olga",SUBMOT_EXT1,ANI_E_LOOKC,1)


	SetChrPos(	Sarai	-15.94f	-152.28f	0.00f	)
	SetChrPos("Olga",-16.30f,-151.52f,0.00f)
	SetChrPos(	Shenna	-11.12f	-151.48f	0.00f	)
	SetChrPos(	Cesil	-13.60f	-152.56f	0.00f	)
	SetChrPos(	Atra	-18.27f	-151.45f	-0.10f	)
	SetChrPos(	SisterA	-12.70f	-150.88f	0.00f	)
	SetChrPos(	SisterB	-16.98f	-150.19f	0.00f	)
	SetChrPos("oldM1",-16.05f,-160.19f,-0.02f)
	SetChrPos(	oldM2	-10.78f	-165.11f	0.00f	)
	SetChrPos(	oldM3	-20.32f	-166.53f	0.00f	)
	SetChrPos(	oldM4	-13.78f	-161.66f	0.00f	)
	SetChrPos(	MarchantM1	-22.38f	-165.18f	-0.02f	)
	SetChrPos(	MarchantM2	-20.26f	-164.49f	0.00f	)
	SetChrPos(	MarchantM3	-15.54f	-171.03f	0.00f	)
	SetChrPos(	MarchantM4	-13.86f	-165.82f	0.00f	)
	SetChrPos(	citizenM1	-18.04f	-160.88f	0.00f	)
	SetChrPos(	citizenM2	-13.93f	-162.97f	0.00f	)
	SetChrPos(	citizenM3	-17.73f	-162.85f	0.00f	)
	SetChrPos(	citizenM4	-13.89f	-168.86f	0.00f	)
	SetChrPos(	citizenM5	-18.58f	-165.74f	0.00f	)
	SetChrPos(	citizenF1	-19.45f	-162.82f	0.00f	)
	SetChrPos(	citizenF2	-16.20f	-164.37f	0.00f	)
	SetChrPos(	citizenF3	-11.97f	-162.77f	0.00f	)
	SetChrPos(	citizenF4	-14.99f	-163.80f	0.00f	)
	SetChrPos(	citizenF5	-12.43f	-168.81f	0.00f	)
	SetChrPos(	citizenF6	-10.60f	-161.25f	0.00f	)
	SetChrPos(	citizenF7	-19.40f	-172.48f	-0.07f	)
	SetChrPos(	citizenF8	-20.37f	-169.93f	-0.03f	)
	SetChrPos(	citizenF9	-17.36f	-167.81f	-0.00f	)
	SetChrPos(	Meer	-12.93f	-162.86f	0.00f	)
	SetChrPos(	Thea	-15.02f	-161.27f	0.00f	)
	SetChrPos(	MagicianA	-16.30f	-167.06f	0.00f	)
	SetChrPos(	MagicianB	-20.16f	-160.18f	-0.01f	)
	SetChrPos("SoldierA1",-11.59f,-158.84f,-0.04f)
	SetChrPos("SoldierB1",-19.77f,-156.92f,-0.04f)
	SetChrPos(	SoldierA2	-13.46f	-158.44f	0.00f	)
	SetChrPos(	SoldierB2	-17.54f	-157.62f	0.00f	)
	SetChrPos(	eq4029_1	-16.30f	-172.36f	-0.02f	)
	SetChrPos(	eq4029_2	-12.66f	-171.60f	-0.05f	)
	SetChrPos(	eq4029_3	-16.30f	-172.36f	-0.02f	)
	SetChrPos(	eq4029_4	-12.66f	-171.60f	-0.05f	)
	Turn(	Sarai	-163.52f	360.0f	)	
	Turn(	Olga	-164.02f	360.0f	)
	Turn(	Shenna	172.56f	360.0f	)	
	Turn(	Cesil	-177.20f	360.0f	)	
	Turn(	Atra	-143.30f	360.0f	)	
	Turn(	SisterA	-169.86f	360.0f	)	
	Turn(	SisterB	-162.21f	360.0f	)	
	Turn(	oldM1	-178.80f	360.0f	)	
	Turn(	oldM2	177.25f	360.0f	)	
	Turn(	oldM3	-147.88f	360.0f	)	
	Turn(	oldM4	-176.45f	360.0f	)	
	Turn(	MarchantM1	-150.20f	360.0f	)	
	Turn(	MarchantM2	-156.16f	360.0f	)	
	Turn(	MarchantM3	-169.59f	360.0f	)	
	Turn(	MarchantM4	-174.85f	360.0f	)	
	Turn(	citizenM1	-164.59f	360.0f	)	
	Turn(	citizenM2	-171.72f	360.0f	)	
	Turn(	citizenM3	-157.06f	360.0f	)	
	Turn(	citizenM4	-177.09f	360.0f	)	
	Turn(	citizenM5	-157.03f	360.0f	)	
	Turn(	citizenF1	-166.41f	360.0f	)	
	Turn(	citizenF2	-165.27f	360.0f	)	
	Turn(	citizenF3	178.35f	360.0f	)	
	Turn(	citizenF4	-169.99f	360.0f	)	
	Turn(	citizenF5	174.35f	360.0f	)	
	Turn(	citizenF6	168.81f	360.0f	)	
	Turn(	citizenF7	-160.00f	360.0f	)	
	Turn(	citizenF8	-163.66f	360.0f	)	
	Turn(	citizenF9	-163.30f	360.0f	)	
	Turn(	Meer	-176.67f	360.0f	)	
	Turn(	Thea	-170.99f	360.0f	)	
	Turn(	MagicianA	-167.30f	360.0f	)	
	Turn(	MagicianB	-158.21f	360.0f	)	
	Turn(	SoldierA1	18.90f	360.0f	)	
	Turn(	SoldierB1	14.57f	360.0f	)	
	Turn(	SoldierA2	9.90f	360.0f	)	
	Turn(	SoldierB2	-0.53f	360.0f	)	
	Turn(	eq4029_1	0.00f	360.0f	)	
	Turn(	eq4029_2	0.00f	360.0f	)	
	Turn(	eq4029_3	0.00f	360.0f	)	
	Turn(	eq4029_4	0.00f	360.0f	)	

	LookChr("Cesil","DANA")
	LookChr("Shenna","DANA")
	LookChr("Sarai","DANA")
	LookChr("Olga","DANA")
	LookChr("MagicianA","DANA")
	LookChr("citizenF1","DANA")
	LookChr("citizenM1","DANA")
	LookChr("citizenF2","DANA")
	LookChr("oldM1","DANA")
	LookChr("oldM2","DANA")
	LookChr("SisterA","DANA")
	LookChr("SisterB","DANA")

	ChangeAnimation( "eq4029_3" , "ANI_WAIT_c380", -1 , 1 )
	ChangeAnimation( "eq4029_4" , "ANI_WAIT_c381", -1 , 1 )
	ChangeAnimation( "SoldierA2" , "ANI_EV_WAIT_BUKI", -1 , 1 )
	ChangeAnimation( "SoldierB2" , "ANI_EV_WAIT_BUKI", -1 , 1 )

	SetParent(eq4029_3,SoldierA2,Null_Rhand)
	SetParent(eq4029_4,SoldierB2,Null_Rhand)


	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 175.000 ,1.000 ,0.550 ,0.600)


	SetShadowBound(96.0,96.0)
	Wait(55)

	MoveCameraAt( 0 , -12.160f , -149.151f , 1.164f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.130f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -3.378f , 0 )	// 基本仰角
	RotateCamera( 0 , 168.638f , 0 )				// 角度
	ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , 1.9f , 0 )				// ロール回転


	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	Wait(15)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -14.531f , -148.654f , 1.164f, 130  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.730f , 130  )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -3.378f , 130 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 176.401f , 130)		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , -2.0f , 130  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 180 )		// 視野角

	//MoveCameraAt( 0 , -14.531f , -148.654f , 1.164f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 4.130f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -3.378f , 0 )	// 基本仰角
	//RotateCamera( 0 , 176.401f , 0 )				// 角度
	//ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , -2.5f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	Wait(10)
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_CLOSE_E,1)
	ExecuteCmd( 1, MoveTo, "DANA", -13.64f,-147.82f,0.04f, 0.1f, 0.23f )
	//SetChrPos("DANA",-13.64f,-147.82f,0.04f)
	//Turn("DANA",179.75f,360.0f)

	WaitThread(1)
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_CLOSE_S,1)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -13.792f , -148.728f , 1.437f, 110  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 5.630f , 110  )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 13.488f , 110 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 175.324f , 110)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 0.0f , 110  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 110 )		// 視野角

	//MoveCameraAt( 0 , -13.792f , -148.728f , 1.437f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 5.630f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 13.488f , 0 )	// 基本仰角
	//RotateCamera( 0 , 175.324f , 0 )				// 角度
	//ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , -0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	Wait(70)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	ChangeAnimation( "DANA" , "ANI_EV_TEMUNE_S", -1 , 1 )

	TalkMes("DANA","#3118V#012e我が名はダーナ。","","")
	WaitPrompt()
	TalkMes("DANA","#3119V#000m大いなる、はじまりの大樹を",
		"奉じる巫女として天命を授かりし者なり。","")
	WaitPrompt()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(30)


	CrossFade(FADE_NORMAL)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

	MoveCameraAt( 0 , -12.981f , -146.038f , 1.595f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 4.130f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -8.667f , 0 )	// 基本仰角
	RotateCamera( 0 , 356.421f , 0 )				// 角度
	ChangeCameraPers( 0 , 41.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

SetChrInfoFlag(	Sarai	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	Olga	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	Shenna	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	Cesil	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	Atra	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	SisterA	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	SisterB	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	oldM1	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	oldM2	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	oldM3	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	oldM4	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	MarchantM1	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	MarchantM2	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	MarchantM3	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	MarchantM4	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenM1	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenM2	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenM3	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenM4	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenM5	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenF1	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenF2	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenF3	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenF4	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenF5	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenF6	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenF7	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenF8	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	citizenF9	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	Meer	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	Thea	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	MagicianA	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	MagicianB	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	SoldierA1	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	SoldierB1	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	SoldierA2	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	SoldierB2	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	eq4029_1	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	eq4029_2	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	eq4029_3	INFOFLAG_INVISIBLE	)
SetChrInfoFlag(	eq4029_4	INFOFLAG_INVISIBLE	)


	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -12.981f , -146.038f , 2.513f, 300  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.130f , 300  )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -23.796f , 300 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 356.421f , 300)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 300  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 300 )		// 視野角

	//MoveCameraAt( 0 , -12.981f , -146.038f , 2.513f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 4.130f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -23.796f , 0 )	// 基本仰角
	//RotateCamera( 0 , 356.421f , 0 )				// 角度
	//ChangeCameraPers( 0 , 41.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転

	Wait(FADE_NORMAL)
	Wait(20)

	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	LookSpd("DANA",0.03f,0.03f,0.03f)
	Look("DANA" , 0 , 17 )

	TalkMes("DANA","#3120V#040e#000mエタニアの常しえなる繁栄を祈念して、",
		"今まさに此の地の試練に臨まん。","")
	WaitPrompt()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(20)



	CrossFade(FADE_FAST)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

ResetChrInfoFlag(	Sarai	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	Olga	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	Shenna	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	Cesil	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	Atra	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	SisterA	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	SisterB	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	oldM1	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	oldM2	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	oldM3	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	oldM4	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	MarchantM1	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	MarchantM2	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	MarchantM3	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	MarchantM4	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenM1	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenM2	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenM3	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenM4	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenM5	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenF1	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenF2	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenF3	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenF4	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenF5	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenF6	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenF7	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenF8	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	citizenF9	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	Meer	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	Thea	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	MagicianA	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	MagicianB	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	SoldierA1	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	SoldierB1	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	SoldierA2	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	SoldierB2	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	eq4029_1	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	eq4029_2	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	eq4029_3	INFOFLAG_INVISIBLE	)
ResetChrInfoFlag(	eq4029_4	INFOFLAG_INVISIBLE	)

	LookReset("DANA")
	ChangeAnimation( "DANA" , "ANI_EV_TEMUNE_E", -1 , 1 )

	MoveCameraAt( 0 , -13.540f , -147.824f , 0.787f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.760f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -1.332f , 0 )	// 基本仰角
	RotateCamera( 0 , 191.713f , 0 )				// 角度
	ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , -7.8f , 0 )				// ロール回転

	Wait(FADE_FAST)
	Wait(20)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -13.540f , -147.824f , 1.357f, 140  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 1.900f  , 140  )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , 26.024f , 140 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 191.713f , 140)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 200  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 180 )		// 視野角

	//MoveCameraAt( 0 , -13.540f , -147.824f , 1.357f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 1.900f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 26.024f , 0 )	// 基本仰角
	//RotateCamera( 0 , 191.713f , 0 )				// 角度
	//ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , -7.8f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	PlayBGM(BGM_3109_M, 0)

	Wait(10)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	ChangeAnimation( "DANA" , "ANI_EV_RYOTEAGE_S", -1 , 1 )

	TalkMes("DANA","#3121V#000m大樹よ、先達の巫女たちよ……",
		"我に力を貸し与え給え！","")
	WaitPrompt()

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -13.624f , -147.815f , 1.679f, 140  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE ,  5.200f , 140  )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -10.452f , 140 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 168.266f , 140)		// 角度
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 0.0f , 140  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 180 )		// 視野角

	//MoveCameraAt( 0 , -13.624f , -147.815f , 1.679f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 5.200f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -10.452f , 0 )	// 基本仰角
	//RotateCamera( 0 , 168.266f , 0 )				// 角度
	//ChangeCameraPers( 0 , 32.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転

	TalkMes("DANA","#3122V#042e#000m今ここに植樹祭の開始を宣言する！","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	Wait(20)

	CrossFade(FADE_NORMAL)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)

	LookReset("SisterB")
	ChangeAnimation(	Sarai	,	ANI_EV_RYOTESIRI	,-1,1)
	ChangeAnimation(	Olga	,	ANI_EV_TEMUNE	,-1,1)
	ChangeAnimation(	Shenna	,	ANI_EV_RYOTEMAE	,-1,1)
	ChangeAnimation(	Cesil	,	ANI_EV_RYOTEMAE	,-1,1)
	ChangeAnimation(	Atra	,	ANI_EV_RYOTEMAE	,-1,1)
	ChangeAnimation(	SisterA	,	ANI_EV_RYOTEMAE	,-1,1)
	ChangeAnimation(	SisterB	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	MarchantM1	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	MarchantM2	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	MarchantM3	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	MarchantM4	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenM1	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenM2	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenM3	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenM4	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenM5	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenF1	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenF2	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenF3	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenF4	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenF5	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenF6	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenF7	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenF8	,	ANI_EV_PRAY	,-1,1)
	ChangeAnimation(	citizenF9	,	ANI_EV_HASHAGU	,-1,1)
	ChangeAnimation(	Meer	,	ANI_EV_HASHAGU	,-1,1)
	ChangeAnimation(	Thea	,	ANI_EV_REI	,-1,1)

	MoveCameraAt( 0 , -13.912f , -149.151f , 1.375f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 11.999f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 6.703f , 0 )	// 基本仰角
	RotateCamera( 0 , 351.870f , 0 )				// 角度
	ChangeCameraPers( 0 , 44.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_CLOSE,1)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -14.316f , -151.982f , 5.245f, 220  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 26.149f, 220  )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE ,  -9.534f , 220 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE ,  351.870f  , 220)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 220  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 220 )		// 視野角

	//MoveCameraAt( 0 , -14.316f , -151.982f , 5.245f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 26.149f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -9.534f , 0 )	// 基本仰角
	//RotateCamera( 0 , 351.870f , 0 )				// 角度
	//ChangeCameraPers( 0 , 44.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転

	PlaySE(SE_M03S020_02, 70, 0, 1000, 0, 1.0f, 0)
	Wait(10)
	PlaySE(SE_M03S020_01, 60, 0, 1000, 0, 1.0f, 0)
	Wait(10)

//	PlayVoice(Y8V_5840, "VOCHR_EVENT", 100)
	Wait(60)

	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	WaitThread(1004)
	WaitThread(1005)
	WaitThread(1006)

	Wait(20)


	//　　歓声と拍手が巻き起こった後、
	//　　オルガとサライがダーナのところへ進み出る。

	CrossFade(FADE_NORMAL)
	SetChrInfoFlag(	oldM1	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	oldM4	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	citizenM1	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	citizenM2	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	citizenM3	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	citizenM4	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	citizenM5	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	citizenF2	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	citizenF3	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	citizenF4	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	citizenF5	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	citizenF6	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	citizenF7	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	citizenF9	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	Meer	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	Thea	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	MagicianA	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	SoldierA1	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	SoldierA2	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	eq4029_1	INFOFLAG_INVISIBLE	)
//	SetChrInfoFlag(	eq4029_2	INFOFLAG_INVISIBLE	)
	SetChrInfoFlag(	eq4029_3	INFOFLAG_INVISIBLE	)
//	SetChrInfoFlag(	eq4029_4	INFOFLAG_INVISIBLE	)

	TurnTo("DANA" , -12.59f,-142.64f,-0.14f ,360.0f)

	ChangeAnimation(	Sarai	,	ANI_WAIT	,-1,1)
	ChangeAnimation(	Olga	,	ANI_WAIT	,-1,1)

	ExecuteCmd( 1, MoveTo, "Olga", -14.76f,-147.74f,-0.01f, 0.1f, 0.21f )
	//SetChrPos("Olga",-14.76f,-147.74f,-0.01f)
	//Turn("Olga",-126.20f,360.0f)

	LookChr("Olga" , "DANA")
	LookChr("Sarai" , "DANA")

	MoveCameraAt( 0 , -14.834f , -148.573f , 1.628f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.920f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -3.447f , 0 )	// 基本仰角
	RotateCamera( 0 , 140.264f , 0 )				// 角度
	ChangeCameraPers( 0 , 39.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , 1.8f , 0 )				// ロール回転

	ChangeAnimation( "DANA" , "ANI_EV_RYOTEAGE_E", -1 , 1 )

	ExecuteCmd( 2, MoveTo, "Sarai", -14.86f,-148.63f,0.02f, 0.1f, 0.19f )
	//SetChrPos("Sarai",-14.86f,-148.63f,0.02f)
	//Turn("Sarai",-141.35f,360.0f)

	WaitThread(1)
	SetStopFlag(STOPFLAG_CINEMA)
	Wait(10)

	TalkMes("Olga","#5328V#000e#080m巫女様、お疲れ様でした。","","")
	WaitPrompt()
	WaitCloseWindow()

	WaitThread(2)
//	Turn("Sarai",-135.63f,8.0f)
	ChangeAnimation( "Sarai" , "ANI_EV_TEMUNE_S", -1 , 1 )

	//	"Sarai"
	TalkMes("Sarai","#5402V#000e#000mどうぞ、このまま奥へお進みください。",
		"いよいよ試練の始まりです。","")
	WaitPrompt()
	WaitCloseWindow()

	Look("DANA" , -10 , 0 )

	//	"DANA"
	TalkMes("DANA","#3123V#020l#092e#080mありがとう、行ってきます。","","")
	WaitPrompt()
	WaitCloseWindow()
	ResetStopFlag(STOPFLAG_CINEMA)

	LookReset("DANA")
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKL_E,1)
	ChangeSubAnimation("",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("",SUBMOT_MOUTH,ANI_M_WAIT,1)

	ExecuteCmd(1001, MoveCameraAt, INTERPOLATE_SPHERE , -14.834f , -148.573f , 2.000f, 90  )		// 注視点
	ExecuteCmd(1002, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.320f , 90  )		// 基本距離
	ExecuteCmd(1003, ChangeCameraElevation, INTERPOLATE_SPHERE , -3.447f , 90 )		// 基本仰角
	ExecuteCmd(1004, RotateCamera, INTERPOLATE_SPHERE , 140.264f , 90)		// 角度
//	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , 3.6f , 90  )		// ロール回転
//	ExecuteCmd(1006, ChangeCameraPers, INTERPOLATE_SPHERE ,39.000f, 90 )		// 視野角s

	//MoveCameraAt( 0 , -14.834f , -148.573f , 2.000f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 3.320f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -3.447f , 0 )	// 基本仰角
	//RotateCamera( 0 , 140.264f , 0 )				// 角度
	//ChangeCameraPers( 0 , 39.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	//RollCamera( 0 , 1.8f , 0 )				// ロール回転

	Wait(40)

	//　　ダーナが渓谷の攻略マップへ
	//　　歩いて入ったところで操作許可。

	ExecuteCmd( 2, MoveTo, "DANA", -12.59f,-142.64f,-0.14f, 0.1f, 0.18f )
	//SetChrPos("DANA",-12.59f,-142.64f,-0.14f)
	//Turn("DANA",-164.81f,360.0f)

	Wait(50)

	FadeOut(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	StopThread(2)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)
	StopThread(1006)
	CallFunc("system:reset_chrmot_DANA")

	Wait(30)

	PlaySE( SE_TUTORIAL , 100 , 0,  0, 0, 1.0f, 0)		//チュートリアル
	TalkPopup(UNDEF, 0, 5, 0, 0, 0) {
		"#-1W#8S"
		"#-1W#4C　　　　 ～　理法具について　～　　"
		"#-1W#8S#10W#-1W\p"
		"#-1W#4Cダーナは『理法具』という"
		"#-1W#4C特別なアイテムを装備しています。#10W#-1W\p"
		"#-1W#4C理法具『始祖鳥の翼』の効果により、"
		"#-1W#4Cダーナは２段ジャンプを行う事ができます。#25W#-1W"
	}
	Wait(10)
	WaitPrompt()
	WaitCloseWindow()
	Wait(10)


	//終了処理ここから----------------------------------------------------
	CallFunc("mp3109m:EV_M03S020_ED")
}

function "EV_M03S020_ED"
{
	SetSkipScript("")												//終了処理はスキップ禁止

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//モンスターを復帰
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラクター初期化
	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))
	CallFunc("system:reset_chrmot_DANA")
	ResetMotion( "ALL" , 1 )

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ
	SetFlag(SF_SETRAMSAVE,1)		//リトライセーブ
	SetFlag( GF_03MP3109M_MOVE_CANYON ,1)		//ダーナ編①	大峡谷へ向かう
	SetFlag(GF_PAST_EPISODE_D1B_CANYON, 1)	//▼ダーナ編①Ｂ大峡谷を攻略する
	//SetFlag( SF_MISSIONNO, MS_08_D1C )	//★冒険メモ：大峡谷最奧にある祠を目指そう

	GetItem(ICON3D_US_DRAGONFRUIT, 5)		//竜樹の実×５　入手

	SetMapMarker( SMI_DANA_SYMBOL ,PAGE_MP3109M, MARKER_SUBEV_PAST_D1_5, -68.437f , 230.615f , 36.552f , -68.437f , 230.615f ,MARKER_SUBEV_PAST_D1_5,MN_F_MP3110m,0)		//メイン：ダーナ①大峡谷最奥

	CallFunc(mp3109m:init)

	//イベント後の再配置位置
	SetChrPos("LEADER",-11.76f,-142.35f,-0.09f)
	Turn("LEADER",177.93f,360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰or初期位置設定
	MoveCameraAt( 0 , -11.760f , -142.350f , 1.733f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -0.310f , 0 )	// 基本仰角
	RotateCamera( 0 , -0.720f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 600.000f )			// ZPlane
	RollCamera( 0 , 1.8f , 0 )				// ロール回転

	CallFunc("system:camera_reset")


	SetEnvSEPlayState(3109801, 1)
	PlayBGM(BGM_3109_M, 0)
	FadeBGM(100,30)

	FadeIn(FADE_BLACK, FADE_FAST)
	//Wait(FADE_NORMAL)
	SetWork(WK_BGMLIMIT, 0)
	ResetStopFlag(STOPFLAG_EVENTIMPOSE)

	//終了処理ここまで----------------------------------------------------
}


function "Sarai_move"
{
	ExecuteCmd( 2, MoveTo, "Sarai", -19.66f,-169.06f,-0.00f, 0.1f, 0.18f )
	//SetChrPos("Sarai",-19.66f,-169.06f,-0.00f)
	//Turn("Sarai",0.10f,360.0f)


	WaitThread(2)
	LookReset("Sarai")
	Turn("Sarai",0.10f,10.0f)
	LookChr("Sarai" , "DANA")
}



////////////////////////////////////////////////////////////////////////////////

//■ストッパー・ＬＰセクション

////////////////////////////////////////////////////////////////////////////////
//──────────────────────────────
//	【ストッパー：モブ方面にいけない】
//──────────────────────────────
function "Stopper_Past_D1_03"
{
	//　　植樹祭中は、手前に居る寺院関係者には話せるが、
	//　　奥のモブたちには近づけずにストッパー。

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	//▼ダーナ編①Ｂ大峡谷を攻略する
	TalkPopup("DANA",0,0,0,0,0)
	{
		"#000e#000m（みんなの期待に応えないとね。"
		"　……今は植樹祭に集中しよう。）"
		"集中3行目"
	}
	WaitPrompt()
	WaitCloseWindow()

//終了処理ここから----------------------------------------------------
	CrossFade(FADE_CROSS)
	SetStopFlag(STOPFLAG_NOCHARACLIP)

	//イベント後の再配置
	SetChrPos("LEADER",-14.06f	-152.37f	0.00f)
	Turn("LEADER",-174.25f,360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	RestoreCamera(0,0)
	ResetCameraObserver(0)
	ResetCameraZPlane()
	Wait(FADE_CROSS)

	ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
//終了処理ここまで----------------------------------------------------
}
