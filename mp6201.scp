#include "inc/mons.h"
#include "inc/def.h"
#include "inc/flag.h"
#include "inc/se.h"
#include "inc/scr_inc.h"
#include "inc/3dicon.h"
#include "inc/skilldef.h"
#include "inc/vo.h"
#include "inc/music.h"
#include "inc/efx.h"

//----------------------------------------------------------------------------//
//                                                                            //
// 王都中央区	    			                                              //
//                                                                            //
//----------------------------------------------------------------------------//

///////////////////////////////////////////////////////////////////////////////
// 初期化スクリプト
///////////////////////////////////////////////////////////////////////////////

function "init"
{
	CallFunc("rng:expMult")
	//遠景不必要ノード削除◆マップ作業者用
	MapHide( "@BG2_etania" , 0 )
	MapHide( "@BG2_mp6110_3" , 0 )

	// イベントエリア設定制御
	EventAreaEnable("evb2_M04S180", 0)
	EventAreaEnable("evb2_M05S041", 0)
//	SetChrPos("LP_crystal", -100000.00f, 0.00f, 0.00f)
	SetChrPos("LP_M04S181", -100000.00f, 0.00f, 0.00f)
	EventAreaEnable("SubEV_04_Look_Bridge", 0)	//	【王都アイギアス：西の橋を見る】

	if( FLAG[SF_EVENT_ON] ){
	// イベント発生制御
		MapAnime("gim02" , close )
		MapAnime("dragon_gate_all_A2" , "close" )		//東大橋の門

		if (!FLAG[GF_05MP6201_IN_EAST]					// ▽[M05S041][東方面の通路に出る	]
		&& FLAG[GF_05MP6204_SEE_RUIN]) {				// ▼[M05S040][ダーナが王宮跡を見る]
			EventAreaEnable("evb2_M05S041", 1)
		}
		else if (!FLAG[GF_05MP6204_SEE_RUIN]		// ▽[M05S040][ダーナが王宮跡を見る]
		&& FLAG[GF_TBOX_DUMMY076]) {			// ▼[M05S030][バハの塔へ向かうことになる]
			EventCue("mp6201:EV_M05S043")
		}
		else if (!FLAG[GF_04MP6101M_KNOW_DOWNFALL]	// ▽[M04S190b][過去Ⅱ ダーナが王国滅亡を知る２]
		&& FLAG[GF_04MP6201_TALK_THANATOS]	) {		// ▼[M04S180][参道の障害で立ち往生する]
			//SetChrPos("LP_M04S181", -365.004f , 817.144f , 12.445f)
		}
		else if (!FLAG[GF_04MP6201_TALK_THANATOS]		// ▽[M04S180][参道の障害で立ち往生する]
		&& FLAG[GF_04MP6204_SEE_THANATOS]) {		// ▼[M04S171][橋の上でタナトスに出会う２]
			EventAreaEnable("evb2_M04S180", 1)
		}
		else if (!FLAG[GF_04MP6201_LOOK_PAGOIDA]		// ▽[M04S160][塔堂を見つける]
		&& FLAG[GF_04MP6203_RUN_CENTER]) {			// ▼[M04S158][人影が中央方面に逃げていく]
			EventCue("mp6201:EV_M04S160")
		}

//		// 過去編水晶石の制御
//		if (!FLAG[GF_04MP6204_SEE_THANATOS])		//[M04S171][橋の上でタナトスに出会う２]
//		{
//			SetChrPos("chkpt_1",-100000.00f, 0.0f , 0.0f )
//			SetChrPos("chkpt_0",-365.0f	,817.0f	,11.77f )
//
//			SetChrID( "chkpt_0", "chkpt")		// 過去
//		} else {
//			SetChrPos("chkpt_0",-100000.00f, 0.0f , 0.0f )
//			SetChrPos("chkpt_1",-365.0f	,817.0f	,11.77f )
//
//			SetChrID( "chkpt_1", "chkpt")		// 通常
//		}

		// マップノード・アニメ
		MapAnime("mistSphere", "off")	// 霧のマユ
		if( FLAG[GF_TBOX_DUMMY087]				// ▼[M06S020][調査のためジャンダルムへ向かう]
			&& !FLAG[GF_06MP4109_CLEAR_MIST] )		// ▽[M06S111][山門の霧を突破する２]
		{
			MapAnime("mistSphere", "on")	// 霧のマユ
		}

		if (FLAG[GF_04MP6201_DIS_OBSTACLE]){
			MapAnime("gim02", open)
			// ＬＰ制御
			//SetChrPos("LP_SubEV_Past_02_Rearrive", -365.004f , 817.144f , 12.445f)	// 過去編Ⅱ：【過去編Ⅱ：水晶石を調べて再訪する】
			//SetChrWork( "LP_SubEV_Past_02_Rearrive" , CWK_CHECKRADIUS , 2.5f )		// 範囲
		}
		
		// ＬＰ制御
		if( FLAG[GF_SUBEV_ST_6201_DOOR_OPEN] )	//【ストッパー：王都東の竜人扉】扉を開いた
		{
			SetChrPos("LP_6201_EastDoor", -100000.00f, 00.00f, 00.00f)	// 【ストッパー：王都東の竜人扉】
			MapAnime("dragon_gate_all_A2" , "open" )		//東大橋の門
		}

		if( FLAG[GF_NPC_4_01_GOTO_NORTH] &&			//▼第四部①島北部に足を踏み入れた
			!FLAG[GF_NPC_6_01_BEFORE_INTERCEPT11] )	//★第六部①迎撃戦⑪が発生
		{
			if( !FLAG[GF_SUBEV_04_6201_LOOK_BRIDGE] )		//【王都アイギアス：西の橋を見る】
			{
				EventAreaEnable("SubEV_04_Look_Bridge", 1)	//	【王都アイギアス：西の橋を見る】
			}
		}

		CallFunc("mp6201:NpcPosition")

		//ＮＰＣマーカーセット
		CallFunc("system:SetMarkerNPC")
	}

	////////////////////////////////////
	// クノス
		// クノスマーカー用イベントエリア
	if (FLAG[GF_MP6201_FOUNDKNOS])
	{
		// マーカー設置済みならば、イベントエリアを消す
		SetEventParam("evb2_KNOS", -100000.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f)
	}
		// クノス１
	if (FLAG[GF_MP6201_KNOS01])
	{
		// クノス０１を１匹でも倒した
		// 壁のあたり判定を撤去
		MapDelProp("wall1", MNP_GROUND)

		if (FLAG[GF_MP6201_KNOS01])
		{
			// クノス０１＿１を倒した
			SetChrPos("KNOS001_1", -100000.0f, 0.0f, 0.0f)
		}
	}
	////////////////////////////////////

}
//---------------------------------------------------------------
//一般配置
function "NpcPosition"
{
	if( FLAG[GF_NPC_5_01_BEFORE_INTERCEPT8] )		//★第五部①迎撃戦⑧が発生
	{
	}
	else if( FLAG[GF_NPC_4_02_SEE_THANATOS] )		//▼第四部②タナトスと出会った
	{
		//「▼中庭でダーナに出会う(mpXXXX)」
		if( FLAG[GF_04MP6409_LOOKUP_ORITREE] )		//はじまりの大樹を見る
		{
			// タナトス			//	場所		：mp6409
		}
		//「▼参道の障害で立ち往生する(mp6201)」～「▼参道の障害が消滅する(mp6201)」
		else if( FLAG[GF_04MP6201_TALK_THANATOS] && !FLAG[GF_04MP6201_DIS_OBSTACLE] )
		{
			// タナトス			//	場所		：mp6201
			SetChrPos("Thanatos",-100000.0f, 0.0f, 0.0f)
			Turn("Thanatos",-26.15f,360.0f)
			ChangeAnimation( "Thanatos", "ANI_EV_RYOTEKOSI", -1, 1)	//両手を腰にやる
			//ChangeChrPos("Thanatos",		"currentmap", "D_Thanatos"		)		// 「現在のマップ」にいなければ、マーカー用ダミーキャラと座標を入れ替える
		}
		else
		{
			// タナトス			//	場所		：mp6204
		}
	}
}


////////////////////////////////////////////////////////////////////////////////

//■メインイベントセクション

////////////////////////////////////////////////////////////////////////////////

//──────────────────────────────
//▼塔堂を見つける(mp6201)
//──────────────────────────────
function "EV_M04S160" 			//塔堂を見つける
{
//開始処理ここから-----------------------------------------------
	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK,0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))
	
	//キャラクター初期化
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL", -432.27f, 883.81f, 11.07f)
	Turn("ADOL", -148.45f, 360.0f)
	ChangeAnimation("ADOL","ANI_WAIT", -1 , 1 )	
	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("ADOL")
	SetChrInfoFlag( "ADOL" , INFOFLAG_NOCHRATARI )

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA", -431.73f, 883.05f, 11.07f)
	Turn("LAXIA", -141.97f, 360.0f)
	ChangeAnimation("LAXIA","ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("LAXIA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("LAXIA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("LAXIA")
	SetChrInfoFlag( "LAXIA" , INFOFLAG_NOCHRATARI )

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD", -434.06f, 883.86f, 11.07f)
	Turn("SAHAD", -144.91f, 360.0f)
	ChangeAnimation("SAHAD","ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("SAHAD")
	SetChrInfoFlag( "SAHAD" , INFOFLAG_NOCHRATARI )

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("RICOTTA", -433.11f, 884.35f, 11.07f)
	Turn("RICOTTA", -144.99f, 360.0f)
	ChangeAnimation("RICOTTA","ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("RICOTTA")
	SetChrInfoFlag( "RICOTTA" , INFOFLAG_NOCHRATARI )
	
	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("HUMMEL", -432.46f, 882.44f, 11.08f)
	Turn("HUMMEL", -148.35f, 360.0f)
	ChangeAnimation("HUMMEL","ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("HUMMEL",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("HUMMEL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("HUMMEL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("HUMMEL")
	SetChrInfoFlag( "HUMMEL" , INFOFLAG_NOCHRATARI )
		

	//ポートレート処理
	Portrait_Load(   1 , "visual/portrait/p_20008.itp" )
	Portrait_Create(1 , 0 , 0 , 
					0 , 0 , 3840,2160 , 
					0.0f , 0x00ffffff , 0x00000000 )

	Portrait_Anime( 1 , PR_ANIME_SCALE ,0.5 , 0.5 ,-1,-1 ,0 )

	//カメラ設定
	MoveCameraAt( 0 , -429.232f , 889.357f , 26.653f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.882f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -51.125f , 0 )	// 基本仰角
	RotateCamera( 0 , 351.566f , 0 )				// 角度
	ChangeCameraPers( 0 , 70.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 700.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 0.000, 30.000 ,0.000 ,0.150 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6201:EV_M04S160_ED")
	
//開始処理ここまで-----------------------------------------------

	//　　中央区へ入ったところでイベントを開始。
	//　　左右の各入口からマップへ入ってきて
	//　　塔堂を見上げるアドルたち。
	
	if (FLAG[SF_LASTENTRY_NO] == 4) {
	
	// 西街区から来た /////////////////////////////////////////////
	
		// カット1 ----------------------------------------------------------------------------------------
		
		// 非表示・再表示
		SetChrInfoFlag("ADOL", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("LAXIA", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("SAHAD", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("RICOTTA", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("HUMMEL", INFOFLAG_INVISIBLE)	// 非表示

		FadeIn(FADE_BLACK,FADE_NORMAL)
		Wait(FADE_NORMAL)
				
		// カメラ移動
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -429.897f , 888.265f , 14.633f, 125 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 7.882f , 125 )
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -12.450f , 125)
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 334.949f , 125 )
		
		// フェードイン

		// カメラ待ち
		WaitThread(1000)
		WaitThread(1001)
		WaitThread(1002)
		WaitThread(1003)
		
		Wait(10)
		
		// カット2 ----------------------------------------------------------------------------------------

		// クロスフェード
		CrossFade(45)
		
		// カメラ
		MoveCameraAt( 0 , -429.827f , 888.260f , 12.225f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 2.842f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 2.734f , 0 )	// 基本仰角
		RotateCamera( 0 , 133.082f , 0 )				// 角度
		ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		SetDoF(0, LERP_LINEAR, 5.000, 230.000 ,0.000 ,0.150 ,0.500)

		// 非表示・再表示
		ResetChrInfoFlag("ADOL", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("LAXIA", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("SAHAD", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("RICOTTA", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("HUMMEL", INFOFLAG_INVISIBLE)	// 再表示

		Look("SAHAD", 0.0f, 20.0f)	// 見上げる
		Look("ADOL", 0.0f, 20.0f)	// 見上げる
		Look("LAXIA", 0.0f, 20.0f)	// 見上げる
		Look("RICOTTA", 0.0f, 20.0f)	// 見上げる
		Look("HUMMEL", 0.0f, 20.0f)	// 見上げる


		// カメラ移動
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -430.840f , 887.856f , 12.785f , 150 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.842f , 150 )
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 15.627f , 150 )
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 174.048f , 150 )

		// 移動
		ExecuteCmd(1, MoveTo, "ADOL", -430.07f, 887.45f, 11.07f, 0.1f,		 0.21f)
		ExecuteCmd(2, MoveTo, "LAXIA", -429.67f, 886.48f, 11.07f, 0.1f,		 0.205f)
		ExecuteCmd(3, MoveTo, "RICOTTA", -431.06f, 887.38f, 11.07f, 0.1f,	 0.19f)
		ExecuteCmd(4, MoveTo, "SAHAD", -431.95f, 887.37f, 11.07f, 0.1f,		 0.195f)
		ExecuteCmd(5, MoveTo, "HUMMEL", -430.59f, 886.05f, 11.07f, 0.1f,	 0.20f)
		
		// 移動待ち

		WaitThread(4)
		ChangeAnimation( "SAHAD", "ANI_EV_RYOTEKOSI_S", -1, 1 )	// 両手腰

		// サハド
		TalkPopup("SAHAD",0,2,0,0,0) {
			"#000e#000mコイツは……"
			"やたらと高い建物みてーだが。"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	"RICOTTA"
		TalkPopup("RICOTTA",0,2,0,0,0) {
			"#051e#000mリコッタ、首痛い……"
		}
		WaitPrompt()
		WaitCloseWindow()

		//　　アドルに「！」エモーション表示。
		EmotionEx("ADOL", 0.00f, EMO_PA, 0, 5, 1, 1, 1.0f)	// 「！」
		ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_SUP_S, 1)	// 目
		ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_OPEN_S,1)
		Wait(55)

		// カット2 ----------------------------------------------------------------------------------------

		//　　カメラ切り替えて正面にある塔堂を見せた直後、
		//　　ダーナがここを訪れたシーンを重ねるように
		//　　フラッシュバックさせる。

		WaitThread(1)
		WaitThread(2)
		WaitThread(3)
		WaitThread(5)

		// クロスフェード
		CrossFade(FADE_CROSS)
		LookSpd("ADOL",0.08f,0.08f,0.08f)
		Look("ADOL", -15.0f, 20.0f)	// ←（＾＾）

		ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT,1)
		ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)

		// カメラ
		MoveCameraAt( 0 , -429.205f , 887.563f , 13.033f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 2.362f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , -31.433f , 0 )	// 基本仰角
		RotateCamera( 0 , 7.188f , 0 )				// 角度
		ChangeCameraPers( 0 , 52.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転

		// 非表示・再表示
		SetChrInfoFlag("LAXIA", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("SAHAD", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("RICOTTA", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("HUMMEL", INFOFLAG_INVISIBLE)	// 非表示
		
		// カメラ移動
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -429.205f , 887.563f , 13.876f , 300 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.362f , 300 )
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -48.250f  , 300 )
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 7.188f , 300 )

		// フェード待ち
		Wait(FADE_CROSS)

		Wait(45)

		//フラッシュバック演出 ----------------------------------- ▼		//穏やかなフラッシュバック
		SetEnvSEPlayState(-1, 0)	//環境SE全停止
		FadeBGM(20, 30)
		FadeOut(FADE_WHITE,FADE_FAST)
		WaitFade()
		
		StopThread(1000)
		StopThread(1001)
		StopThread(1002)
		StopThread(1003)
		
		Wait(15)
		FadeIn(FADE_WHITE,FADE_FAST)
		Portrait_Anime(  1 , PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)
		Wait(100)

		SetEnvSEPlayState(-1, 1)	//環境SE復帰
		FadeBGM(100, 60)
		FadeOut(FADE_WHITE,FADE_FAST)
		WaitFade()

		Portrait_Close(  1 )
		Portrait_Unload( 1 )

		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -429.205f , 887.563f , 13.876f , 300 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.362f , 300 )
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -48.250f  , 300 )
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 7.188f , 300 )

		FadeIn(FADE_WHITE,FADE_NORMAL)
		WaitFade()
		// --------------------------------------------------------- ▲

		Wait(60)

		// カット3 ----------------------------------------------------------------------------------------

		// クロスフェード
		CrossFade(FADE_NORMAL)
		
		// カメラ停止
		StopThread(1000)
		StopThread(1001)
		StopThread(1002)
		StopThread(1003)
		
		// カメラ
		MoveCameraAt( 0 , -430.303f , 886.698f , 12.537f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 2.342f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 5.692f , 0 )	// 基本仰角
		RotateCamera( 0 , 95.511f , 0 )				// 角度
		ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		// 位置調整・表情・モーション
		SetChrPos("ADOL", -429.90f, 887.55f, 11.07f)
		Turn("ADOL", -131.10f, 360.0f)
		SetChrPos("LAXIA", -429.80f, 885.85f, 11.07f)
		Turn("LAXIA", -166.77f, 360.0f)
		SetChrPos("SAHAD", -431.67f, 886.62f, 11.07f)
		Turn("SAHAD", -134.76f, 360.0f)
		SetChrPos("RICOTTA", -431.10f, 887.32f, 11.07f)
		Turn("RICOTTA", -117.49f, 360.0f)
		SetChrPos("HUMMEL", -430.74f, 885.85f, 11.07f)
		Turn("HUMMEL", -152.60f, 360.0f)
		LookReset("ADOL")
		ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_WAIT, 1)	// 目

		// 非表示・再表示
		ResetChrInfoFlag("LAXIA", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("SAHAD", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("RICOTTA", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("HUMMEL", INFOFLAG_INVISIBLE)	// 再表示

		Turn("ADOL", 32.34f, 8.0f)

		LookChr("LAXIA", "ADOL")
		LookChr("SAHAD", "ADOL")
		LookChr("HUMMEL", "ADOL")
		LookChr("RICOTTA", "ADOL")

		//選択肢
		SetFlag(TF_MENU_SELECT,0)
		MenuReset()
		MenuType(MENUTYPE_POPUP)
		MenuAdd(1,"ここは塔堂だ……")
		MenuAdd(2,"ここは寺院だ……")
		MenuOpen( TF_MENU_SELECT , -1 , ADOLMENU_PPOSY , -2 , -2 , 10 , 0)
		WaitMenu(0)
		MenuClose(10,0)

		// 手振りセット
		ChangeAnimation( "ADOL", "ANI_EV_TEBURI_L", -1, 1 )
		SetChrWork("ADOL", CWK_FORCELIPSYNC, 1)	// 強制クチパク
		ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT_S,1)
		ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
		Wait(30)
		ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
		SetChrWork("ADOL", CWK_FORCELIPSYNC, 0)
		Wait(20)

		//─────────────────────────
		//	⇒ここは塔堂だ……
		if (FLAG[TF_MENU_SELECT] == 1) {

			//	ここでラクシャにPAエモーション。
			EmotionEx("LAXIA", 0.00f, EMO_PA, 0, 5, 1, 1, 1.0f)	//パッ
			Wait(35)
			
			ChangeAnimation( "LAXIA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て
			
			// ラクシャ
			TalkPopup("LAXIA", 0, 2, 0, 0, 0) {
				"#000e#000m塔堂#4Rストゥーパ#R……夢で見たのですか？"
				"何をするための施設なのでしょう……"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation( "SAHAD", "ANI_EV_RYOTEKOSI_E", -1, 1 )	// 両手腰

			// サハド
			TalkPopup("SAHAD", 0, 2, 0, 0, 0) {
				"#000e#000m何にしたってボロボロだな。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
		
		//	⇒ここは寺院だ……
		if (FLAG[TF_MENU_SELECT] == 2) {

			//　　ここでラクシャに「？」エモーション。
			EmotionEx("LAXIA", 0.00f, EMO_Q, 0, 5, 1, 1, 0.8f)	// 「？」
			Wait(50)
			
			ChangeAnimation( "LAXIA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て
			
			// ラクシャ
			TalkPopup("LAXIA", 0, 2, 0, 0, 0) {
				"#011e#000mひょっとして夢の話でしょうか？\p"
				"#012e寺院といえば街の南部……"
				"もっと郊外にあったはずですが。"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation( "SAHAD", "ANI_EV_RYOTEKOSI_E", -1, 1 )	// 両手腰

			// サハド
			TalkPopup("SAHAD", 0, 2, 0, 0, 0) {
				"#000e#000mま、とにかくここも"
				"夢に出てきた場所ってコトだろ？\p"
				"すっかりボロボロに"
				"なっちまってるがなあ……"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
		//─────────────────────────
		
		LookChr("LAXIA", "SAHAD")
		
		// ラクシャ
		TalkPopup("LAXIA",0,2,0,0,0) {
			"#000e#000mええ、アドルが見たのは"
			"やはり過去の出来事なのでしょう。"
		}
		WaitPrompt()
		WaitCloseWindow()

		PlayVoice(Y8V_2166,"HUMMEL",100)	//いや（平常のテンション。あらゆる場面で使用）

		ChangeAnimation( "HUMMEL", "ANI_EV_TEBURI", -1, 1 )	// 腕組手振り
		
		// ヒュンメル
		TalkPopup("HUMMEL",0,2,0,0,0) {
			"#011e#000mその詮索は後回しだ。"
			"ひとまず、この辺りを調べるぞ。"
		}
		WaitPrompt()
		WaitCloseWindow()

		ChangeSubAnimation("HUMMEL",SUBMOT_EYE,ANI_E_CLOSE_E,1)

		ChangeAnimation( "RICOTTA", "ANI_EV_KYOSHU_S", -1, 1 )	// （リコッタ）挙手

		// リコッタ
		TalkPopup("RICOTTA",0,2,0,0,0) {
			"#020e#080m同意、さっきの人探す！"
		}
		WaitPrompt()
		WaitCloseWindow()

		//　　ここで操作許可。
	
	} else {

	// 東街区から来た /////////////////////////////////////////////
		
		// 初期カメラ
		MoveCameraAt( 0 , -386.515f , 901.497f , 26.747f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 7.882f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , -48.235f , 0 )	// 基本仰角
		RotateCamera( 0 , 65.954f , 0 )				// 角度
		ChangeCameraPers( 0 , 70.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		// 位置調整・表情・モーション
		SetChrPos("ADOL", -380.04f, 907.70f, 11.07f)
		Turn("ADOL", 92.74f, 360.0f)
		SetChrPos("LAXIA", -379.74f, 906.43f, 11.07f)
		Turn("LAXIA", 97.30f, 360.0f)
		SetChrPos("SAHAD", -378.58f, 908.83f, 11.11f)
		Turn("SAHAD", 97.33f, 360.0f)
		SetChrPos("RICOTTA", -379.59f, 908.56f, 11.07f)
		Turn("RICOTTA", 96.84f, 360.0f)
		SetChrPos("HUMMEL", -378.55f, 906.62f, 11.11f)
		Turn("HUMMEL", 97.26f, 360.0f)

		// カット1 ----------------------------------------------------------------------------------------
		
		// 非表示・再表示
		SetChrInfoFlag("ADOL", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("LAXIA", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("SAHAD", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("RICOTTA", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("HUMMEL", INFOFLAG_INVISIBLE)	// 非表示

		// フェードイン
		FadeIn(FADE_BLACK,FADE_NORMAL)
		Wait(FADE_NORMAL)
		
		// カメラ移動
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -386.534f , 901.503f , 22.247f, 115 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 7.882f , 115 )
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -10.706f , 115)
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 73.402f , 115 )
		
		// カメラ待ち
		WaitThread(1000)
		WaitThread(1001)
		WaitThread(1002)
		WaitThread(1003)
		
		Wait(10)
		
		// カット2 ----------------------------------------------------------------------------------------

		// クロスフェード
		CrossFade(45)
		
		// カメラ
		MoveCameraAt( 0 , -383.463f , 909.476f , 12.537f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 2.863f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , -2.859f , 0 )	// 基本仰角
		RotateCamera( 0 , 224.547f , 0 )				// 角度
		ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		SetDoF(0, LERP_LINEAR, 5.000, 230.000 ,0.000 ,0.150 ,0.500)


		// 非表示・再表示
		ResetChrInfoFlag("ADOL", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("LAXIA", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("SAHAD", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("RICOTTA", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("HUMMEL", INFOFLAG_INVISIBLE)	// 再表示

		Look("ADOL", 0.0f, 20.0f)	// 見上げる
		Look("LAXIA", 0.0f, 20.0f)	// 見上げる
		Look("RICOTTA", 0.0f, 20.0f)	// 見上げる
		Look("SAHAD", 0.0f, 20.0f)	// 見上げる
		Look("HUMMEL", 0.0f, 20.0f)	// 見上げる

		// カメラ移動
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -383.856f , 908.408f , 12.537f , 150 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.863f , 150 )
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 15.476f , 150 )
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 233.714f , 150 )

		SetMotSpd("SAHAD" , -1 , 0.85f)
		SetMotSpd("LAXIA" , -1 , 0.92f)
		SetMotSpd("RICOTTA" , -1 , 0.87f)

		// 移動
		ExecuteCmd(1, MoveTo, "ADOL", -384.54f, 908.18f, 11.07f, 0.1f, 		 0.21f)
		ExecuteCmd(2, MoveTo, "LAXIA", -384.31f, 907.05f, 11.07f, 0.1f,		 0.205f)
		ExecuteCmd(3, MoveTo, "RICOTTA", -383.92f, 909.15f, 11.07f, 0.1f,	 0.19f)
		ExecuteCmd(4, MoveTo, "SAHAD", -383.05f, 909.44f, 11.07f, 0.1f,		 0.195f)
		ExecuteCmd(5, MoveTo, "HUMMEL", -383.09f, 907.43f, 11.07f, 0.1f,	 0.20f)
																			
		// 移動待ちx

		WaitThread(4)
		ChangeAnimation( "SAHAD", "ANI_EV_RYOTEKOSI_S", -1, 1 )	// 両手腰

		// サハド
		TalkPopup("SAHAD",0,2,0,0,0) {
			"#000e#000mコイツは……"
			"やたらと高い建物みてーだが。"
		}
		WaitPrompt()
		WaitCloseWindow()

		//	"RICOTTA"
		TalkPopup("RICOTTA",0,2,0,0,0) {
			"#051e#000mリコッタ、首痛い……"
		}
		WaitPrompt()
		WaitCloseWindow()

		//　　アドルに「！」エモーション表示。
		EmotionEx("ADOL", 0.00f, EMO_PA, 0, 5, 1, 1, 1.0f)	// 「！」
		ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_SUP_S, 1)	// 目
		ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_OPEN_S,1)
		Wait(45)

		WaitThread(1)
		WaitThread(2)
		WaitThread(3)
		WaitThread(5)

		// カット2 ----------------------------------------------------------------------------------------

		//　　カメラ切り替えて正面にある塔堂を見せた直後、
		//　　ダーナがここを訪れたシーンを重ねるように
		//　　フラッシュバックさせる。

		// クロスフェード
		CrossFade(FADE_CROSS)
		LookSpd("ADOL",0.08f,0.08f,0.08f)
		Look("ADOL", -15.0f, 20.0f)	// ←（＾＾）

		SetMotSpd("SAHAD" , -1 , 1.0f)
		SetMotSpd("LAXIA" , -1 , 1.0f)
		SetMotSpd("RICOTTA" , -1 , 1.0f)

		ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT,1)
		ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)

		// カメラ
		MoveCameraAt( 0 , -386.740f , 908.508f , 12.717f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 4.042f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , -14.642f , 0 )	// 基本仰角
		RotateCamera( 0 , 100.488f , 0 )				// 角度
		ChangeCameraPers( 0 , 52.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		// 非表示・再表示
		SetChrInfoFlag("LAXIA", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("SAHAD", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("RICOTTA", INFOFLAG_INVISIBLE)	// 非表示
		SetChrInfoFlag("HUMMEL", INFOFLAG_INVISIBLE)	// 非表示
		
		// カメラ移動
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -385.560f , 909.966f , 19.763f , 500 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.042f , 500 )
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -50.803f , 500 )
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 73.506f , 500 )

		// フェード待ち
		Wait(FADE_CROSS)

		Wait(45)

		//フラッシュバック演出 ----------------------------------- ▼		//穏やかなフラッシュバック
		SetEnvSEPlayState(-1, 0)	//環境SE全停止
		FadeBGM(20, 30)
		FadeOut(FADE_WHITE,FADE_FAST)
		WaitFade()
		
		StopThread(1000)
		StopThread(1001)
		StopThread(1002)
		StopThread(1003)
		
		Wait(15)
		FadeIn(FADE_WHITE,FADE_FAST)
		Portrait_Anime(  1 , PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)
		Wait(100)

		SetEnvSEPlayState(-1, 1)	//環境SE復帰
		FadeBGM(100, 60)
		FadeOut(FADE_WHITE,FADE_FAST)
		WaitFade()

		Portrait_Close(  1 )
		Portrait_Unload( 1 )

		// カメラ移動
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -385.560f , 909.966f , 19.763f , 500 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.042f , 500 )
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -50.803f , 500 )
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 73.506f , 500 )

		FadeIn(FADE_WHITE,FADE_NORMAL)
		WaitFade()
		// --------------------------------------------------------- ▲

		Wait(60)

		// カット3 ----------------------------------------------------------------------------------------

		// クロスフェード
		CrossFade(FADE_NORMAL)
		
		// カメラ停止
		StopThread(1000)
		StopThread(1001)
		StopThread(1002)
		StopThread(1003)
		
		// カメラ
		MoveCameraAt( 0 , -383.697f , 907.727f , 12.537f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 2.483f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 6.977f , 0 )	// 基本仰角
		RotateCamera( 0 , 304.042f , 0 )				// 角度
		ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

		// 位置調整・表情・モーション
		SetChrPos("ADOL", -384.64f, 908.17f, 11.07f)
		Turn("ADOL", 99.63f, 360.0f)
		SetChrPos("LAXIA", -383.67f, 906.72f, 11.07f)
		Turn("LAXIA", 136.79f, 360.0f)
		SetChrPos("SAHAD", -382.61f, 908.53f, 11.07f)
		Turn("SAHAD", 80.04f, 360.0f)
		SetChrPos("RICOTTA", -383.53f, 908.97f, 11.07f)
		Turn("RICOTTA", 55.08f, 360.0f)
		SetChrPos("HUMMEL", -382.92f, 907.28f, 11.07f)
		Turn("HUMMEL", 107.23f, 360.0f)
		LookReset("ADOL")
		ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_WAIT, 1)	// 目

		// 非表示・再表示
		ResetChrInfoFlag("LAXIA", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("SAHAD", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("RICOTTA", INFOFLAG_INVISIBLE)	// 再表示
		ResetChrInfoFlag("HUMMEL", INFOFLAG_INVISIBLE)	// 再表示

		LookChr("LAXIA", "ADOL")
		LookChr("SAHAD", "ADOL")
		LookChr("HUMMEL", "ADOL")
		LookChr("RICOTTA", "ADOL")

		Turn("ADOL", -85.12f, 8.0f)

		//選択肢
		SetFlag(TF_MENU_SELECT,0)
		MenuReset()
		MenuType(MENUTYPE_POPUP)
		MenuAdd(1,"ここは塔堂だ……")
		MenuAdd(2,"ここは寺院だ……")
		MenuOpen( TF_MENU_SELECT , -1 , ADOLMENU_PPOSY , -2 , -2 , 10 , 0)
		WaitMenu(0)
		MenuClose(10,0)

		// 手振りセット
		ChangeAnimation( "ADOL", "ANI_EV_TEBURI", -1, 1 )
		SetChrWork("ADOL", CWK_FORCELIPSYNC, 1)	// 強制クチパク
		ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT_S,1)
		ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
		Wait(30)
		ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
		SetChrWork("ADOL", CWK_FORCELIPSYNC, 0)
		Wait(20)

		//─────────────────────────
		//	⇒ここは塔堂だ……
		if (FLAG[TF_MENU_SELECT] == 1) {

			//	ここでラクシャにPAエモーション。
			EmotionEx("LAXIA", 0.00f, EMO_PA, 0, 5, 1, 1, 1.0f)	//パッ
			Wait(35)
			
			ChangeAnimation( "LAXIA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て
			
			// ラクシャ
			TalkPopup("LAXIA", 0, 2, 0, 0, 0) {
				"#000e#000m塔堂#4Rストゥーパ#R……夢で見たのですか？"
				"何をするための施設なのでしょう……"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation( "SAHAD", "ANI_EV_RYOTEKOSI_E", -1, 1 )	// 両手腰

			// サハド
			TalkPopup("SAHAD", 0, 2, 0, 0, 0) {
				"#000e#000m何にしたってボロボロだな。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
		
		//	⇒ここは寺院だ……
		if (FLAG[TF_MENU_SELECT] == 2) {

			//　　ここでラクシャに「？」エモーション。
			EmotionEx("LAXIA", 0.00f, EMO_Q, 0, 5, 1, 1, 0.8f)	// 「？」
			Wait(50)
			
			ChangeAnimation( "LAXIA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て
			
			// ラクシャ
			TalkPopup("LAXIA", 0, 2, 0, 0, 0) {
				"#011e#000mひょっとして夢の話でしょうか？\p"
				"#012e寺院といえば街の南部……"
				"もっと郊外にあったはずですが。"
			}
			WaitPrompt()
			WaitCloseWindow()

			ChangeAnimation( "SAHAD", "ANI_EV_RYOTEKOSI_E", -1, 1 )	// 両手腰

			// サハド
			TalkPopup("SAHAD", 0, 2, 0, 0, 0) {
				"#000e#000mま、とにかくここも"
				"夢に出てきた場所ってコトだろ？\p"
				"すっかりボロボロに"
				"なっちまってるがなあ……"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
		//─────────────────────────
		
		LookChr("LAXIA", "SAHAD")
		
		// ラクシャ
		TalkPopup("LAXIA",0,2,0,0,0) {
			"#000e#000mええ、アドルが見たのは"
			"やはり過去の出来事なのでしょう。"
		}
		WaitPrompt()
		WaitCloseWindow()

		PlayVoice(Y8V_2166,"HUMMEL",100)	//いや（平常のテンション。あらゆる場面で使用）

		ChangeAnimation( "HUMMEL", "ANI_EV_TEBURI", -1, 1 )	// 腕組手振り
		
		// ヒュンメル
		TalkPopup("HUMMEL",0,2,0,0,0) {
			"#011e#000mその詮索は後回しだ。"
			"ひとまず、この辺りを調べるぞ。"
		}
		WaitPrompt()
		WaitCloseWindow()

		ChangeSubAnimation("HUMMEL",SUBMOT_EYE,ANI_E_CLOSE_E,1)

		ChangeAnimation( "RICOTTA", "ANI_EV_KYOSHU_S", -1, 1 )	// （リコッタ）挙手

		// リコッタ
		TalkPopup("RICOTTA",0,2,0,0,0) {
			"#020e#080m同意、さっきの人探す！"
		}
		WaitPrompt()
		WaitCloseWindow()

		//　　ここで操作許可。

	}
	
	//　　画面フェードアウト。
	
	// フェードアウト
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

//終了処理ここから----------------------------------------------------
	CallFunc("mp6201:EV_M04S160_ED")
}

function "EV_M04S160_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ADOL")
	CallFunc("system:reset_chrmot_LAXIA")
	CallFunc("system:reset_chrmot_SAHAD")
	CallFunc("system:reset_chrmot_HUMMEL")
	CallFunc("system:reset_chrmot_RICOTTA")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	// ポートレートリリース
	Portrait_Close(-1)
	Portrait_Unload(-1)

	//フラグ処理
	SetFlag(GF_04MP6201_LOOK_PAGOIDA, 1)
	CallFunc("mp6201:init")

	if (FLAG[SF_LASTENTRY_NO] == 4) {
		
	// 西街区から来た

		//イベント後の再配置
		SetChrPos("LEADER", -430.20f, 887.19f, 11.07f)
		Turn("LEADER", -141.66f, 360.0f)
		ResetPartyPos()
		ResetFollowPoint()
		//Wait(1) //処理待ち用

		//カメラ位置復帰
		MoveCameraAt( 0 , -430.202f , 887.188f , 12.923f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 8.334f , 0 )	// 基本仰角
		RotateCamera( 0 , -38.196f , 0 )				// 角度
		ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	} else {

	// 東街区から来た

		//イベント後の再配置
		SetChrPos("LEADER", -383.36f, 907.70f, 11.07f)
		Turn("LEADER", 103.44f, 360.0f)
		ResetPartyPos()
		ResetFollowPoint()
		//Wait(1) //処理待ち用

		//カメラ位置復帰
		MoveCameraAt( 0 , -383.357f , 907.695f , 12.939f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 13.970f , 0 )	// 基本仰角
		RotateCamera( 0 , 76.559f , 0 )				// 角度
		ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		
	}

	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK, FADE_FAST)
	//WaitFade()

	//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//▼参道の障害で立ち往生する(mp6201)
//──────────────────────────────
function "EV_M04S180" 			//参道の障害で立ち往生する
{
//開始処理ここから-----------------------------------------------

	if(FLAG[SF_ENTRY] == 101){
		SetStopFlag(STOPFLAG_EVENT)
		FadeOut(FADE_BLACK,0)
		WaitFade()
	}else {
		CallFunc("system:event_begin")	//EB開始処理
	}

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))
	
	//キャラクター初期化
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL", -374.12f, 823.24f, 12.56f)
	Turn("ADOL", -31.76f, 360.0f)
	ChangeAnimation("ADOL","ANI_WAIT", -1 , 1 )	
	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("ADOL")
	SetChrInfoFlag( "ADOL" , INFOFLAG_NOCHRATARI )

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA", -375.38f, 822.68f, 12.56f)
	Turn("LAXIA", -17.76f, 360.0f)
	ChangeAnimation("LAXIA","ANI_WAIT", -1 , 1 )	
	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("LAXIA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("LAXIA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("LAXIA")
	SetChrInfoFlag( "LAXIA" , INFOFLAG_NOCHRATARI )

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD", -373.72f, 824.73f, 12.56f)
	Turn("SAHAD", -18.04f, 360.0f)
	ChangeAnimation("SAHAD","ANI_WAIT", -1 , 1 )	
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("SAHAD")
	SetChrInfoFlag( "SAHAD" , INFOFLAG_NOCHRATARI )

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("RICOTTA", -375.16f, 824.07f, 12.56f)
	Turn("RICOTTA", -26.41f, 360.0f)
	ChangeAnimation("RICOTTA","ANI_WAIT", -1 , 1 )	
	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("RICOTTA")
	SetChrInfoFlag( "RICOTTA" , INFOFLAG_NOCHRATARI )
	
	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("HUMMEL", -376.78f, 822.78f, 12.56f)
	Turn("HUMMEL", -27.33f, 360.0f)
	ChangeAnimation("HUMMEL","ANI_WAIT", -1 , 1 )	
	ChangeSubAnimation("HUMMEL",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("HUMMEL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("HUMMEL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("HUMMEL")
	SetChrInfoFlag( "HUMMEL" , INFOFLAG_NOCHRATARI )

	SetChrWork("Thanatos", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Thanatos", -376.16f, 823.66f, 12.56f)
	Turn("Thanatos", -28.59f, 360.0f)
	ChangeAnimation("Thanatos", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Thanatos", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Thanatos", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("Thanatos", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("Thanatos")
	SetChrInfoFlag("Thanatos", INFOFLAG_NOCHRATARI)

	SetFlag(GF_04MP6201_TALK_THANATOS, 1)	//水晶石を光らすためにここで立てる　　※終了処理でも同じ処理

	//カメラ設定
	MoveCameraAt( 0 , -371.469f , 817.064f , 14.372f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.939f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 4.774f , 0 )	// 基本仰角
	RotateCamera( 0 , 191.747f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 250.000 ,0.000 ,0.150 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6201:EV_M04S180_ED")
	
//開始処理ここまで-----------------------------------------------

	//　　マップに入ったところでイベント開始。
	//　　参道が障害で塞がれているのを見せた後、
	//　　歩いてマップに入ってくるアドル班＋タナトスを映す。

	// カットX -------------------------------------------------------------------------------------------

//	ExecuteCmd(1, MoveTo, "ADOL", -371.89f, 815.81f, 12.56f, 0.1f, 0.235f)
//	ExecuteCmd(2, MoveTo, "LAXIA", -373.14f, 815.04f, 12.56f, 0.1f, 0.235f)
//	Wait(2)
//	ExecuteCmd(3, MoveTo, "HUMMEL", -374.33f, 816.21f, 12.56f, 0.1f, 0.235f)
//	Wait(2)
//	ExecuteCmd(4, MoveTo, "SAHAD", -371.64f, 818.07f, 12.56f, 0.1f, 0.215f)
//	Wait(2)
//	ExecuteCmd(5, MoveTo, "RICOTTA", -372.79f, 817.37f, 12.56f, 0.1f, 0.215f)
	ExecuteCmd(6, MoveTo, "Thanatos", -373.88f, 817.27f, 12.56f, 0.1f, 0.215f)

	SetChrPos("ADOL",-371.91f,815.89f,12.56f)
	Turn("ADOL",-16.69f,360.0f)
	SetChrPos("LAXIA",-373.16f,815.10f,12.56f)
	Turn("LAXIA",-16.33f,360.0f)
	SetChrPos("SAHAD",-371.67f,818.16f,12.56f)
	Turn("SAHAD",-17.34f,360.0f)
	SetChrPos("HUMMEL",-374.36f,816.28f,12.56f)
	Turn("HUMMEL",-20.46f,360.0f)
	SetChrPos("RICOTTA",-372.82f,817.45f,12.56f)
	Turn("RICOTTA",-19.50f,360.0f)
	SetChrPos("Thanatos",-373.91f,817.36f,12.56f)
	Turn("Thanatos",-19.63f,360.0f)

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -372.700f , 816.809f , 14.372f , 60 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.939f , 60 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 4.774f, 60 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 191.747f , 60 )

	FadeIn(FADE_BLACK,FADE_NORMAL)
	Wait(FADE_NORMAL)

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	
	// ラクシャ
	TalkPopup("LAXIA",0,2,0,0,0) {
		"#070e#000mここは……"
	}
	WaitPrompt()
	WaitCloseWindow()

	WaitThread(1)
	WaitThread(2)
	WaitThread(3)
	WaitThread(4)
	WaitThread(5)
	WaitThread(6)

	// カットX -------------------------------------------------------------------------------------------

	CrossFade(FADE_NORMAL)
	
	MoveCameraAt(0, -361.586f, 799.114f, 16.656f, 0)	// 注視点
	ChangeCameraDistance(0, 3.699f, 0)		// 基本距離
	ChangeCameraElevation(0, -5.781f, 0)	// 基本仰角
	RotateCamera(0, 209.270f, 0)				// 角度
	ChangeCameraPers(0, 70.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	SetDoF(0, LERP_LINEAR, 5.000, 270.000 ,0.000 ,0.150 ,0.500)

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, -366.426f, 811.875f, 16.656f, 130)		// 注視点
	ExecuteCmd(1001, ChangeCameraElevation, INTERPOLATE_SPHERE, 32.395f, 130)		// 基本仰角
	ExecuteCmd(1002, RotateCamera, INTERPOLATE_SPHERE, 196.461f, 130)		// 角度

	Wait(FADE_NORMAL)
	
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)

	Wait(25)

	// カットX -------------------------------------------------------------------------------------------

	CrossFade(FADE_CROSS)

	MoveCameraAt( 0 , -373.189f , 816.047f , 14.138f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.458f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.668f , 0 )	// 基本仰角
	RotateCamera( 0 , 352.079f , 0 )				// 角度
	ChangeCameraPers( 0 , 39.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	SetChrPos("RICOTTA", -373.20f, 817.07f, 12.56f)
	Turn("RICOTTA", -19.49f, 360.0f)
	SetChrPos("Thanatos", -373.90f, 817.36f, 12.56f)
	Turn("Thanatos", -21.35f, 360.0f)
	SetChrPos("LAXIA", -372.52f, 816.46f, 12.56f)
	Turn("LAXIA", -26.91f, 360.0f)


	Wait(FADE_CROSS)

	ChangeAnimation("HUMMEL", "ANI_EV_UDEGUMI_S", -1, 1)

	//	"HUMMEL"
	TalkPopup("HUMMEL",0,2,0,0,0) {
		"#000e#000mどうやら行き止まりのようだが……"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation("Thanatos", "ANI_EV_RYOTEKOSI_S", -1, 1)

	// うなずきセット
	HeadYes("Thanatos" , 1 , 25 )
	ChangeSubAnimation("Thanatos", SUBMOT_EYE, ANI_E_CLOSE_S, 1)
	Wait(15)
	ChangeSubAnimation("Thanatos", SUBMOT_EYE, ANI_E_CLOSE_E, 1)
	
	//	"Thanatos"
	TalkPopup("Thanatos",0,2,0,0,0) {
		"#000mウム、参道が水の中に"
		"沈んでしまっておるのだ。\p"
		"わしも以前訪れた時には"
		"ここで引き返したのじゃが……"	
	}
	WaitPrompt()
	WaitCloseWindow()

	Look("Thanatos", -40.0f, 0.0f)

	//	"Thanatos"
	TalkPopup("Thanatos", 0, 2, 0, 0, 0) {
		"#000e#000mそこにある水晶石はお前さんたちの"
			"話にあったものと同じものではないか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　マップの傍らにある水晶石を映す

//	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, -372.304f, 815.242f, 13.878f, 45)		// 注視点
//	ExecuteCmd(1001, ChangeCameraElevation, INTERPOLATE_SPHERE, 5.799f, 45)		// 基本仰角
//	ExecuteCmd(1002, RotateCamera, INTERPOLATE_SPHERE, 311.516f, 45)		// 角度
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE ,  -372.235f , 815.486f , 13.878f , 45 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.178f , 45 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 2.361f , 45 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 311.520f , 80 )

	LookTo("LAXIA", -364.600f , 817.065f , 13.878f)	// 座標：水晶石のほう
	Turn("LAXIA", -96.91f, 10.0f)
	LookTo("ADOL", -364.600f , 817.065f , 13.878f)	// 座標：水晶石のほう
	Turn("ADOL", -95.84f, 10.0f)
	LookTo("SAHAD", -364.600f , 817.065f , 13.878f)	// 座標：水晶石のほう
//	Turn("SAHAD", -78.39f, 10.0f)
	LookTo("RICOTTA", -364.600f , 817.065f , 13.878f)	// 座標：水晶石のほう
	Turn("RICOTTA", -82.53f, 8.0f)

	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	// ラクシャ
	TalkPopup("LAXIA",0,2,0,0,0) {
		"#000e#000mあ……もしかして……"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("SAHAD", "ADOL")
	Wait(7)
	ChangeAnimation("SAHAD", "ANI_EV_TEBURI", -1, 1)

	//	"SAHAD"
	TalkPopup("SAHAD",0,2,0,0,0) {
		"#000e#000mアドルが触れりゃあ、"
		"前と同じことが起きるかもしれんな。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("RICOTTA", "ADOL")

	PlayVoice(Y8V_2555,"RICOTTA",100)	//アドル兄（平常のテンション）


	//	"RICOTTA"
	TalkPopup("RICOTTA",0,2,0,0,0) {
		"#000e#000mアドル兄、触ってみろ！"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　アドル頷きモーション後に操作許可。
	HeadYes("ADOL", 1, 25)
	Wait(40)
	
	//　　水晶石のＬＰを調べると【過去編Ⅱ】が開始される。
	
//　　画面フェードアウト。
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()

//終了処理ここから----------------------------------------------------
	CallFunc("mp6201:EV_M04S180_ED")
}

function "EV_M04S180_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
	//ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ADOL")
	CallFunc("system:reset_chrmot_LAXIA")
	CallFunc("system:reset_chrmot_SAHAD")
	CallFunc("system:reset_chrmot_HUMMEL")
	CallFunc("system:reset_chrmot_RICOTTA")
	CallFunc("system:reset_chrmot_Thanatos")

	SetChrPos("Thanatos", -100000.00f, 0.00f, 0.00f)

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ処理
	SetFlag(GF_04MP6201_TALK_THANATOS, 1)

	//マップマーカー
	DelMapMarker( SMI_SYMBOL ,PAGE_F032, MARKER_EV_M04S180, 0,0)		//メイン：参道の障害で立ち往生する
	SetMapMarker( SMI_SYMBOL ,PAGE_F032, MARKER_EV_M04S181, -365 , 817 , 11 , -365 , 817 ,MARKER_EV_M04S181,MN_F_MP6201,0)		//メイン：水晶石に手をかざすⅡ

	//チェックポイント開放
	DelMapMarker( SMI_WARPPT,PAGE_F032 , -1,-365 ,817 )
	DelMapMarker( SMI_WARPPT_ON_0,PAGE_F032, -1,-365 ,817 )
	DelCheckPoint(CP_MP6201)

	SetCheckPoint(CP_MP6201)
	SetMapMarker( SMI_CHECKED_WARPPT,PAGE_F032 ,MARKER_CP_MP6201 ,-365 ,817 ,12 ,-365 ,817 ,CP_MP6201, MN_F_MP6201,-1)
//	ChangeAnimation( "chkpt" , "ANI_STOP", -1 , 1 )

	CallFunc("mp6201:init")

	//イベント後の再配置
	SetChrPos("LEADER", -373.26f, 822.26f, 12.56f)
	Turn("LEADER", -55.36f, 360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt(0, -373.260f, 822.260f, 14.424f, 0)	// 注視点
	ChangeCameraDistance(0, 7.000f, 0)		// 基本距離
	ChangeCameraElevation(0, 14.000f, 0)	// 基本仰角
	RotateCamera(0, -124.101f, 0)				// 角度
	ChangeCameraPers(0, 60.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)
	//WaitFade()

	//終了処理ここまで----------------------------------------------------
}

//──────────────────────────────
//▼水晶石に手をかざすⅡ(mp6201)
//──────────────────────────────
function "EV_M04S181" 			//水晶石に手をかざすⅡ
{
//開始処理ここから-----------------------------------------------

	CallFunc("system:event_begin")	// イベントボックス起動

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK,0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))
	
	//キャラクター初期化
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL", -366.33f, 817.55f, 11.93f)
	Turn("ADOL", -70.04f, 360.0f)
	ChangeAnimation("ADOL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("ADOL")
	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA", -366.91f, 818.50f, 12.34f)
	Turn("LAXIA", -46.84f, 360.0f)
	ChangeAnimation("LAXIA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("LAXIA")
	SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD", -366.89f, 816.13f, 12.06f)
	Turn("SAHAD", -132.54f, 360.0f)
	ChangeAnimation("SAHAD", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("SAHAD")
	SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("RICOTTA", -365.97f, 818.56f, 12.22f)
	Turn("RICOTTA", -37.67f, 360.0f)
	ChangeAnimation("RICOTTA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("RICOTTA")
	SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)

	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("HUMMEL",-367.45f, 817.07f, 12.08f)
	Turn("HUMMEL", -84.15f, 360.0f)
	ChangeAnimation("HUMMEL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("HUMMEL")
	SetChrInfoFlag("HUMMEL", INFOFLAG_NOCHRATARI)

	SetChrWork("Thanatos", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Thanatos",-368.28f, 818.21f, 12.45f)
	Turn("Thanatos", -73.49f, 360.0f)
	ChangeAnimation("Thanatos", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Thanatos", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Thanatos", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("Thanatos", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("Thanatos")
	SetChrInfoFlag("Thanatos", INFOFLAG_NOCHRATARI)

	// ポートレート読み込み
	Portrait_Load(0, "system/black.itp" )		//擬似フェードアウト用
	Portrait_Create(0, 0, 0, 0, 0, 64,64, 0.0f, 0x00ffffff, 0x00000000)

	//カメラ設定
	MoveCameraAt( 0 , -365.399f , 817.187f , 13.321f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 6.241f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 4.195f , 0 )	// 基本仰角
	RotateCamera( 0 , 190.285f , 0 )				// 角度
	ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
	SetCameraZPlane( 0.100f , 1600.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 160.000 ,0.000 ,0.150 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6201:EV_M04S181_ED")
	
//開始処理ここまで-----------------------------------------------

	//　　アドルが水晶石のルックポイントを調べると、
	//　　ザッピング切り替えエフェクトを表示して過去編を開始する。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE ,-366.583f , 817.012f , 13.901f , 360 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 7.441f , 360 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 34.849f  , 360 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE ,293.987f , 360 )

	Effect2(3900500, -365.518f , 817.104f , 11.921f,0.0f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.0f, 1.0f)	//共鳴音と連動するように水晶石が明滅（ループ）

	// フェードイン
	FadeIn(FADE_BLACK, FADE_NORMAL)
	Wait(FADE_NORMAL)

	ChangeAnimation("ADOL", "ANI_EV_KAZASU_S", -1, 1)		// 手をかざす
	Wait(10)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_S, 1)
	
	PlaySE(SE_M04S181_01, 100, 1, 1000, 0, 1.0f, 0)
	Effect2(3900530, -365.518f , 817.104f , 13.321f, 0.0f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.2f, 1.0f)	// 水晶石と交信エフェクト
	
	EarthQuake( 0.01f , 0.01f , 300 )	// 縦揺れ幅, 横揺れ幅, 時間

	Effect2(3900570, -364.872f , 817.099f , 11.841f, 0.0f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.5f, 1.0f)	// 過去に飛ぶ時の画面切り替えエフェクト
	PlaySE(SE_M04S181_04, 25, 1, 4000, 0, 1.0f, 0)


//	Wait(250)
	Wait(100)
	PlaySE(SE_M04S181_02, 80, 0, 0, 0, 1.0f, 0)	//	発光（過去編ワープ）
	Wait(60)
	PlaySE(SE_M04S181_02, 80, 0, 0, 0, 1.0f, 0)	//	発光（過去編ワープ）
	Wait(60)
	PlaySE(SE_M04S181_02, 80, 0, 0, 0, 1.0f, 0)	//	発光（過去編ワープ）
	Wait(30)

	StopBGM(120)

	PlaySE(SE_M04S181_03, 100, 0, 0, 0, 1.0f, 0)
	SetEnvSEPlayState(-1, 0)	//環境SE全停止
	StopSE(SE_M04S181_01, 2000)
	StopSE(SE_M04S181_04, 4000)

	// フェードアウト（白）
	FadeOut(FADE_WHITE, FADE_NORMAL)
	WaitFade()
	
	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	Wait(60)
	
	// 擬似フェードアウト表示
	Portrait_Anime(0 ,PR_ANIME_SCALE, 30.0f, 17.0f, 0, 0, 0)
	Portrait_Anime(0 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)

	// フェードイン（白）
	FadeIn(FADE_WHITE, FADE_NORMAL)
	WaitFade()

	// フェードアウト（黒）
	FadeOut(FADE_BLACK, 0)
	WaitFade()

//終了処理ここから----------------------------------------------------
	CallFunc("mp6201:EV_M04S181_ED")
}

function "EV_M04S181_ED"
{
	SetSkipScript("")		//終了処理はスキップ禁止

	//モンスターを復帰
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラクター初期化
	CallFunc("system:reset_chrmot_ADOL")
	CallFunc("system:reset_chrmot_LAXIA")
	CallFunc("system:reset_chrmot_SAHAD")
	CallFunc("system:reset_chrmot_HUMMEL")
	CallFunc("system:reset_chrmot_RICOTTA")
	
	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップマーカー
	DelMapMarker( SMI_SYMBOL ,PAGE_F032, MARKER_EV_M04S181, 0,0)		//メイン：水晶石に手をかざすⅡ

	//マップパラメーターリセット
	ResetMapParam(-1)

	// エフェクト停止
	StopEffect(-1, ALL, 1)

	ActiveVoiceStop(ACTIVEVOICESTOP_FORCE)		//アクティブボイス強制終了

	// ポートレートリリース
	Portrait_Close(-1)
	Portrait_Unload(-1)

	CallFunc("system:camera_reset")

	SetFlag( TF_LOADING_TIPS_OFF, 1 )	//NowLoading 時の Tips 表示をカット

	StopBGM(60)
	
	LoadArg("map/mp6101m/mp6101m.arg")
	EventCue("mp6101m:EV_M04S190")		// NEXT：[M04S190][過去Ⅱ ダーナが王国滅亡を知る]

	ResetStopFlag(STOPFLAG_EVENT)

//終了処理ここまで----------------------------------------------------
}



//──────────────────────────────
//▼参道の障害が消滅する(mp6201)
//──────────────────────────────
function "EV_M04S200" 			//参道の障害が消滅する
{
//開始処理ここから-----------------------------------------------
	SetStopFlag(STOPFLAG_EVENT)

	FadeOut(FADE_BLACK,0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	MapAnime("gim02", open)
	
	//キャラクター初期化
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL", -366.81f, 816.03f, 12.05f)
	Turn("ADOL", 66.23f, 360.0f)
	ChangeAnimation("ADOL", "ANI_EV_TAORE", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE, 1)
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA", -366.65f, 814.83f, 12.21f)
	Turn("LAXIA", 160.30f, 360.0f)
	ChangeAnimation("LAXIA", "ANI_EV_SHAGAMI", -1, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_SAD, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookChr("LAXIA", "ADOL")
	SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD", -368.38f, 815.95f, 12.25f)
	Turn("SAHAD", -46.07f, 360.0f)
	ChangeAnimation("SAHAD", "ANI_EV_RYOTEKOSI", -1, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookChr("SAHAD", "ADOL")
	SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("RICOTTA", -366.65f, 816.98f, 11.99f)
	Turn("RICOTTA", 14.49f, 360.0f)
	ChangeAnimation("RICOTTA", "ANI_EV_NOME", -1, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_SAD, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookChr("RICOTTA", "ADOL")
	SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)
	
	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("HUMMEL", -367.37f, 816.91f, 12.08f)
	Turn("HUMMEL", -2.71f, 360.0f)
	ChangeAnimation("HUMMEL", "ANI_EV_UDEGUMI", -1, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookChr("HUMMEL", "ADOL")
	SetChrInfoFlag("HUMMEL", INFOFLAG_NOCHRATARI)

	SetChrWork("Thanatos", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("Thanatos", -369.21f, 814.47f, 12.42f)
	Turn("Thanatos", -58.91f, 360.0f)
	ChangeAnimation("Thanatos", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("Thanatos", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Thanatos", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("Thanatos", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookChr("Thanatos", "ADOL")
	SetChrInfoFlag("Thanatos", INFOFLAG_NOCHRATARI)

	SetChrPos("LP_crystal", -100000.00f, 0.00f, 0.00f)
		
	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )
	StopBGM(30)
	SetEnvSEPlayState(-1, 0)	//環境SE全停止

	// チュートリアルポートレート読み込み
	Portrait_Load(0, "system/black.itp" )		//擬似フェードアウト用
	Portrait_Create(0, 0, 0, 0, 0, 64,64, 0.0f, 0x00ffffff, 0x00000000)
	Portrait_Load(1, "visual/help/hp_00.itp" )	// 背景用
	Portrait_Create(1, HELP_POS_X, HELP_POS_Y, 0, 0, HELP_SCALE_X, HELP_SCALE_Y, 0.0f, 0x00ffffff, 0x00000000)
	Portrait_Load(2, "visual/help/hp_a44.itp" )	// help_a44：意識共有
	Portrait_Create(2, HELP_POS_X, HELP_POS_Y, 0, 0, HELP_SCALE_X, HELP_SCALE_Y, 0.0f, 0x00ffffff, 0x00000000)

	Portrait_Load(3, "system/white.itp" )		//擬似フェードアウト用
	Portrait_Create(3, 0, 0, 0, 0, 64,64, 0.0f, 0x00ffffff, 0x00000000)

	//カメラ設定
//	MoveCameraAt(0, -366.756f, 814.614f, 14.777f, 0)	// 注視点
//	ChangeCameraDistance(0, 2.701f, 0)		// 基本距離
//	ChangeCameraElevation(0, 8.440f, 0)	// 基本仰角
//	RotateCamera(0, 332.457f, 0)				// 角度
//	ChangeCameraPers(0, 27.000f, 0)			// 視野角
//	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
//	RollCamera(0, 0.0f, 0)				// ロール回転

	MoveCameraAt( 0 , -366.921f , 815.598f , 12.841f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.370f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 12.191f , 0 )	// 基本仰角
	RotateCamera( 0 , 317.033f , 0 )				// 角度
	ChangeCameraPers( 0 , 35.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

//	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, -367.413f, 815.147f, 12.991f, 120)		// 注視点
//	ExecuteCmd(1001, ChangeCameraElevation, INTERPOLATE_SPHERE, 16.619f, 120)		// 基本仰角
//	ExecuteCmd(1002, RotateCamera, INTERPOLATE_SPHERE, 323.911f, 120)		// 角度
	
	Effect2(3900500,  -365.514f , 816.650f , 12.152f,0.0f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.0f, 1.0f)	//共鳴音と連動するように水晶石が明滅（ループ）
	//Effect2(3900520,  -365.514f , 816.650f , 12.152f,0.0f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.0f, 1.0f)	//共鳴音と連動するように水晶石が明滅（ループ）

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 170.000 ,0.000 ,0.150 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6201:EV_M04S200_ED")
	
//開始処理ここまで-----------------------------------------------

	//　　画面ホワイトアウト状態から
	//　　水晶石前のアドルにフェードイン。
	//　　瞑目状態からアドルが目を開くと
	//　　水晶石の激しい輝きが通常時のものに収まっていく。

	PlaySE(SE_M04S200_01, 100, 0, 0, 0, 1.0f, 0)	//	ホワイトアウト抜け

	// カットX ----------------------------------------------------------------------------------------

	// 擬似フェードアウト（黒）表示
	Portrait_Anime(0 ,PR_ANIME_SCALE, 30.0f, 17.0f, 0, 0, 0)
	Portrait_Anime(0 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)

	FadeIn(FADE_BLACK, 0)
	WaitFade()

	// フェードアウト
	FadeOut(FADE_WHITE, FADE_NORMAL)
	WaitFade()

	Portrait_Anime(0 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f, 0)

	// 擬似フェードアウト（白）表示
	Portrait_Anime(3 ,PR_ANIME_SCALE, 30.0f, 17.0f, 0, 0, 0)
	Portrait_Anime(3 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)

	FadeIn(FADE_WHITE, 0)
	WaitFade()

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -367.040f , 815.715f , 12.692f, 80 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.000f   , 80 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 11.935f , 80 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 339.180f , 80 )

	//MoveCameraAt( 0 , -367.040f , 815.715f , 12.692f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 3.000f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 11.935f , 0 )	// 基本仰角
	//RotateCamera( 0 , 339.180f , 0 )				// 角度
	//ChangeCameraPers( 0 , 35.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	SetEnvSEPlayState(-1, 1)	//環境SE復帰
	PlayBGM(BGM_6201, 0)

	ChangeAnimation("ADOL", "ANI_EV_TAORE_E", -1, 1)
	PlaySE(SE_M04S200_02, 40, 0, 0, 0, 1.0f, 0)	//起き上がる

	// 擬似フェードアウト削除
	Portrait_Anime(3 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f, FADE_NORMAL)
	Wait(FADE_NORMAL)

//	ChangeSubAnimation(ADOL, SUBMOT_EYE, ANI_E_SAD_S, 1)
//	ChangeSubAnimation(ADOL, SUBMOT_EYE, ANI_E_SAD_S, 1)

	Wait(15)

	ChangeSubAnimation(ADOL, SUBMOT_EYE, ANI_E_SAD_S, 1)

	Wait(25)

	// ラクシャ
	TalkPopup("LAXIA",0,1,0,0,0) {
		"#000e#000mアドル、気づきましたか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カットX ----------------------------------------------------------------------------------------
	CrossFade(FADE_CROSS)
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	MoveCameraAt( 0 , -368.098f , 814.458f , 13.896f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.191f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 4.094f , 0 )	// 基本仰角
	RotateCamera( 0 , 317.020f , 0 )				// 角度
	ChangeCameraPers( 0 , 31.100f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	SetChrPos("Thanatos", -368.84f, 814.13f, 12.40f)
	Turn("Thanatos", -108.54f, 360.0f)
	LookReset("Thanatos")

	// カメラ移動
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 328.477f , 300 )

//	ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE, 1.991f, 70)		// 基本距離
//	WaitThread(1000)

	Wait(FADE_CROSS)

	//水晶石の明滅を消す
	StopEffect(3900500, ALL, 1)
	Wait(45)

	//	"Thanatos"
	TalkPopup("Thanatos",0,1,0,0,0) {
		"#000e#000mフム……？"
	}
	WaitPrompt()
	WaitCloseWindow()

	Turn("Thanatos", -23.27f, 7.0f)
	Wait(10)
	
	//　　タナトス、何かに気づいて「！」エモーション。
	EmotionEx("Thanatos", 0.00f, EMO_EX, 0, 5, 1, 1, 0.8f)	// 「！」
	ChangeAnimation( "Thanatos", "ANI_EV_SUP_S", -1, 1 )	// 驚く、軽くのけぞる
	ChangeSubAnimation("Thanatos", SUBMOT_EYE, ANI_E_SUP_S, 1)	// 目
	ChangeSubAnimation("Thanatos",SUBMOT_MOUTH,ANI_M_SUP2_S,1)
	Wait(45)

	// カットX ----------------------------------------------------------------------------------------
//	PlayBGM(BGM_EVENT_008, 0)
	CrossFade(FADE_CROSS)
	
	StopThread(1003)
	
	MoveCameraAt(0, -371.752f, 790.647f, 24.565f, 0)	// 注視点
	ChangeCameraDistance(0, 7.000f, 0)		// 基本距離
	ChangeCameraElevation(0, 16.140f, 0)	// 基本仰角
	RotateCamera(0, 339.193f, 0)				// 角度
	ChangeCameraPers(0, 70.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 0.000, 250.000 ,1.000 ,0.700 ,0.550)

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, -370.974f, 784.743f, 20.824f, 120)		// 注視点
	ExecuteCmd(1001, ChangeCameraElevation, INTERPOLATE_SPHERE, -12.950f, 120)		// 基本仰角
	ExecuteCmd(1002, RotateCamera, INTERPOLATE_SPHERE, 245.492f, 120)		// 角度

	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	// カットX ----------------------------------------------------------------------------------------

	//　　画面スクロールしてヒモロギの幹が橋に巻き付いて
	//　　崩落を食い止めている光景を見せる。

	CrossFade(FADE_NORMAL)
	LookReset("ADOL")
	LookReset("SAHAD")
	LookReset("LAXIA")
	LookReset("RICOTTA")
	LookReset("HUMMEL")
	LookReset("Thanatos")
	CallFunc("system:reset_chrmot_ADOL")
	CallFunc("system:reset_chrmot_LAXIA")
	CallFunc("system:reset_chrmot_SAHAD")
	CallFunc("system:reset_chrmot_HUMMEL")
	CallFunc("system:reset_chrmot_RICOTTA")
	CallFunc("system:reset_chrmot_Thanatos")

	SetChrPos("ADOL", -368.52f, 806.46f, 12.56f)
	Turn("ADOL", -24.14f, 360.0f)
	SetChrPos("LAXIA", -368.81f, 805.48f, 12.56f)
	Turn("LAXIA", -15.86f, 360.0f)
	SetChrPos("SAHAD",-370.56f,806.32f,12.56f)
	Turn("SAHAD",-33.20f,360.0f)
	SetChrPos("HUMMEL", -367.21f, 806.74f, 12.24f)
	Turn("HUMMEL", -9.87f, 360.0f)
	SetChrPos("RICOTTA", -367.80f, 805.89f, 12.39f)
	Turn("RICOTTA", -28.90f, 360.0f)
	SetChrPos("Thanatos", -369.56f, 805.67f, 12.56f)
	Turn("Thanatos", -28.36f, 360.0f)

	ChangeSubAnimation("Thanatos",SUBMOT_MOUTH,ANI_M_SUP2,1)

//	MoveCameraAt(0, -357.730f, 783.666f, 15.615f, 0)	// 注視点
//	ChangeCameraDistance(0, 7.001f, 0)		// 基本距離
//	ChangeCameraElevation(0, 7.238f, 0)	// 基本仰角
//	RotateCamera(0, 214.328f, 0)				// 角度
//	ChangeCameraPers(0, 60.000f, 0)			// 視野角
//	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
//	RollCamera(0, 0.0f, 0)				// ロール回転

	MoveCameraAt( 0 , -358.368f , 794.329f , 21.815f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 6.281f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 21.896f , 0 )	// 基本仰角
	RotateCamera( 0 , 188.545f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 17.2f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -369.409f , 809.006f , 16.602f , 120 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 6.281f , 120 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 4.993f , 120 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 210.604f , 120 )
	ExecuteCmd(1005, RollCamera, INTERPOLATE_SPHERE , -5.2f , 120 )		// ロール回転
//	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, -365.925f, 802.058f, 13.606f, 120)		// 注視点
//	ExecuteCmd(1001, ChangeCameraElevation, INTERPOLATE_SPHERE, 6.712f, 120)		// 基本仰角
//	ExecuteCmd(1002, RotateCamera, INTERPOLATE_SPHERE, 215.188f, 120)		// 角度

	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	Wait(20)

	// カットX ----------------------------------------------------------------------------------------

	CrossFade(FADE_CROSS)
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_SAD,1)
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_TAME,1)

	MoveCameraAt( 0 , -368.993f , 804.978f , 13.982f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.740f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.737f , 0 )	// 基本仰角
	RotateCamera( 0 , 355.465f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.3f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(FADE_CROSS)

	ChangeAnimation( "Thanatos", "ANI_EV_RYOTEKOSI_S", -1, 1 )	// 両手腰

	PlayVoice(Y8V_3967,"Thanatos",100)	//ほう…！（驚き）

	// タナトス
	TalkPopup("Thanatos",0,2,0,0,0) {
		"#070eほっほう、こりゃあたまげたわい！\p"
		"#000mまるで木が橋の崩落を"
		"食い止めておるようじゃ……"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "RICOTTA", "ANI_EV_GUTSPOSE_S", -1, 1 )	// ガッツポーズ

	//	"RICOTTA"
	TalkPopup("RICOTTA",0,2,0,0,0) {
		"#020e#020mこれで道、進める！"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "Thanatos", "ANI_EV_RYOTEKOSI_E", -1, 1 )	// 両手腰
	
	//	"Thanatos"
	TalkPopup("Thanatos",0,2,0,0,0) {
		"#011e#000mいやいや、話に聞いておったが、"
		"実際目の当たりにすると驚きじゃのう。"
	}
	WaitPrompt()
	WaitCloseWindow()

	// フェードアウト
	FadeOut(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	// カットX ----------------------------------------------------------------------------------------

	SetChrPos("ADOL", -368.26f, 806.22f, 12.51f)
	Turn("ADOL", -14.27f, 360.0f)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE, 1)

	SetChrPos("LAXIA", -368.10f, 804.21f, 12.46f)
	Turn("LAXIA", -159.57f, 360.0f)

	SetChrPos("SAHAD", -366.95f, 805.43f, 12.16f)
	Turn("SAHAD", 114.44f, 360.0f)
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_WAIT,1)

	SetChrPos("HUMMEL", -367.32f, 806.49f, 12.26f)
	Turn("HUMMEL", 24.49f, 360.0f)
	SetChrPos("RICOTTA", -368.95f, 804.39f, 12.56f)
	Turn("RICOTTA", -155.41f, 360.0f)

	SetChrPos("Thanatos", -369.22f, 805.46f, 12.56f)
	Turn("Thanatos", -71.80f, 360.0f)
	ChangeAnimation("RICOTTA", "ANI_WAIT", -1, 1)

	LookChr("LAXIA", "ADOL")
	LookChr("SAHAD", "ADOL")
	LookChr("HUMMEL", "ADOL")
	LookChr("RICOTTA", "ADOL")
	LookChr("Thanatos", "ADOL")

	MoveCameraAt( 0 , -368.187f , 805.160f , 13.928f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.972f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 16.228f , 0 )	// 基本仰角
	RotateCamera( 0 , 333.780f , 0 )				// 角度
	ChangeCameraPers( 0 , 28.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(15)

	ExecuteCmd(1000, ChangeCameraDistance, INTERPOLATE_SPHERE,  4.272f, 35)		// 注視点
	//MoveCameraAt( 0 , -368.187f , 805.160f , 13.928f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 4.272f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 16.227f , 0 )	// 基本仰角
	//RotateCamera( 0 , 333.782f , 0 )				// 角度
	//ChangeCameraPers( 0 , 28.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// フェードイン
	FadeIn(FADE_BLACK, FADE_NORMAL)

	ChangeAnimation("ADOL", "ANI_EV_TEBURI", -1, 1)
	SetChrWork("ADOL", CWK_FORCELIPSYNC, 1)
	Wait(30)
	SetChrWork("ADOL", CWK_FORCELIPSYNC, 0)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_E, 1)

	WaitFade()

	WaitThread(1000)

	//	テキスト（色替え）
	TalkPopup(UNDEF, 0, 3, STOPPER_PPOSX, STOPPER_PPOSY, 0) {
		"#7Cアドルはダーナが意図的に"
		"#7C協力してくれていることを説明した。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "LAXIA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て

	//	"LAXIA"
	TalkPopup("LAXIA",0,1,0,0,0) {
		"#000e#000mそ、そんなことが……"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "HUMMEL", "ANI_EV_RYOTEKOSI_S", -1, 1 )	// 両手腰

	//	"HUMMEL"
	TalkPopup("HUMMEL",0,2,0,0,0) {
		"#000e#000m向こうもアドルの動向を"
		"把握しているということか……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"SAHAD"
	TalkPopup("SAHAD",0,2,0,0,0) {
		"#000e#000m何にせよ、これで先に進めるぜ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "LAXIA", "ANI_EV_TEMUNE_E", -1, 1 )	// 手胸当て

	//	"LAXIA"
	TalkPopup("LAXIA",0,1,0,0,0) {
		"#000e#000mええ、このまま"
		"大樹の寺院へ向かいましょう！"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　アドルに頷きモーション表示して操作許可。

	// うなずきセット
	HeadYes("ADOL" , 1 , 25 )
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_S, 1)
	Wait(15)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_E, 1)
	Wait(20)
	
//　　画面フェードアウト。
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()
	
	// チュートリアル =================================================================================
	if ( !FLAG[SF_2NDSTART] ) {		// 2周目判定
		
		SetEnvSEPlayState(-1, 0)	//環境SE全停止

		//自動送り禁止
		ResetStopFlag(STOPFLAG_AUTOMESSAGE)
		Wait(10)

		// 擬似フェードアウト表示
		Portrait_Anime(0 ,PR_ANIME_SCALE, 30.0f, 17.0f, 0, 0, 0)
		Portrait_Anime(0 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)
		FadeIn(FADE_BLACK, 0)
		WaitFade()

		// ポートレート表示
		PlaySE(SE_TUTORIAL, 100, 0, 0, 0, 1.0f, 0)		//チュートリアル
		Portrait_Anime(1, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, FADE_NORMAL)	// チュートリアル背景
		Portrait_Anime(2, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, FADE_NORMAL)
		Wait(FADE_NORMAL)
		Message2(1, TOPIC_BUTTUN_X, TOPIC_BUTTUN_Y, "", "", "", "", "", "", "", "", "", "")		//ボタン入力可能を提示
		WaitPrompt()
		Portrait_Anime(1, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f, FADE_FAST)	// チュートリアル背景
		Portrait_Anime(2, PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 0.0f, FADE_FAST)
		Wait(FADE_FAST)
		Portrait_Close(1)
		Portrait_Close(2)
		
		// 擬似フェードアウト削除
		FadeOut(FADE_BLACK, 0)
		WaitFade()
		Portrait_Close(0)

		//自動送り許可
		SetStopFlag(STOPFLAG_AUTOMESSAGE)
	
	}
	// ================================================================================================

//終了処理ここから----------------------------------------------------
	CallFunc("mp6201:EV_M04S200_ED")
}

function "EV_M04S200_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ADOL")
	CallFunc("system:reset_chrmot_LAXIA")
	CallFunc("system:reset_chrmot_SAHAD")
	CallFunc("system:reset_chrmot_HUMMEL")
	CallFunc("system:reset_chrmot_RICOTTA")

	ChangeSubAnimation("Thanatos", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("Thanatos", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("Thanatos", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	ChangeAnimation("Thanatos", "ANI_WAIT", -1, 1)
	SetChrPos("Thanatos", -100000.00f, 0.00f, 0.00f)

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	ActiveVoiceStop(ACTIVEVOICESTOP_FORCE)		//アクティブボイス強制終了

	//自動送り許可
	SetStopFlag(STOPFLAG_AUTOMESSAGE)
	
	// ポートレートリリース
	Portrait_Close(-1)
	Portrait_Unload(-1)

	//フラグ処理
	SetFlag(GF_04MP6201_DIS_OBSTACLE, 1)
	SetFlag( GF_HELP_A44, 1 )	// チュートリアル：意識共有
	CallFunc("mp6201:init")

	//マップマーカー
	SetMapMarker( SMI_SYMBOL ,PAGE_MP6409, MARKER_EV_M04S260, -198.08f, 419.03f, 121.58f, -198.08f, 419.03f,MARKER_EV_M04S260,MN_D_MP6409,0)		//メイン：ダーナを発見する

	//イベント後の再配置
	SetChrPos("LEADER", -371.25f, 811.77f, 12.56f)
	Turn("LEADER", -26.63f, 360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt(0, -371.250f, 811.770f, 14.424f, 0)	// 注視点
	ChangeCameraDistance(0, 7.000f, 0)		// 基本距離
	ChangeCameraElevation(0, 14.000f, 0)	// 基本仰角
	RotateCamera(0, -157.988f, 0)				// 角度
	ChangeCameraPers(0, 60.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	//#28570修正
	PlayBGM(BGM_6201, 0)
	SetEnvSEPlayState(-1, 1)	//環境SE復帰

	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	//終了処理ここまで----------------------------------------------------

}

function "EV_M05S043"			//東方面の通路に出る
{
	//開始処理ここから-----------------------------------------------
	CallFunc("system:event_begin")	//EB開始処理

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK, 0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定				
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL",-400.39f,895.00f,11.15f)
	Turn("ADOL",121.13f,360.0f)
	ChangeAnimation("ADOL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookChr("ADOL","DANA")
	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("RICOTTA",-399.53f,894.16f,11.12f)
	Turn("RICOTTA",123.25f,360.0f)
	ChangeAnimation("RICOTTA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookChr("RICOTTA","DANA")
	SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD",-398.47f,895.80f,11.07f)
	Turn("SAHAD",121.13f,360.0f)
	ChangeAnimation("SAHAD", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookChr("SAHAD","DANA")
	SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA",-399.85f,895.76f,11.07f)
	Turn("LAXIA",127.70f,360.0f)
	ChangeAnimation("LAXIA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookChr("LAXIA","DANA")
	SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)

	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("HUMMEL",-397.98f,894.51f,11.07f)
	Turn("HUMMEL",128.18f,360.0f)
	ChangeAnimation("HUMMEL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookChr("HUMMEL","DANA")
	SetChrInfoFlag("HUMMEL", INFOFLAG_NOCHRATARI)

	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA",-402.99f,896.20f,11.15f)
	Turn("DANA",145.13f,360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("DANA")
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)

	//カメラ設定
	MoveCameraAt( 0 , -403.465f , 904.189f , 13.095f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.900f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -4.509f , 0 )	// 基本仰角
	RotateCamera( 0 , 39.033f , 0 )				// 角度
	ChangeCameraPers( 0 , 46.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 450.000, 0.000, 0.150, 0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp6201:EV_M05S043_ED")

	//開始処理ここまで-----------------------------------------------




	FadeIn(FADE_BLACK, FADE_NORMAL)
	Wait(FADE_NORMAL)

	//　　王都中央区のマップへ入ったところでイベント開始。
	//　　集団から一人前へ歩いて出るダーナ。
	//　　そのまま周囲を確かめるように見回す。

	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , -403.465f , 904.189f , 13.095f , 115 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 2.900f, 115 )				// 基本距離
	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , -4.509f , 115 )				// 基本仰角
	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE , 97.509f , 115 )				// 角度
//	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE ,  21.3f  , 115 )				// ロール回転

	//MoveCameraAt( 0 , -403.465f , 904.189f , 13.095f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 2.900f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -4.509f , 0 )	// 基本仰角
	//RotateCamera( 0 , 97.509f , 0 )				// 角度
	//ChangeCameraPers( 0 , 46.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(40)

	ExecuteCmd(1, MoveToEx, "DANA",-406.34f,902.01f,12.07f, 0.1f, 0.7f ,1 ,0)
	//SetChrPos("DANA",-408.32f,900.68f,12.07f)
	//Turn("DANA",149.83f,360.0f)


	WaitThread(1)

	Wait(20)

	LookSpd("DANA",0.08f,0.08f,0.08f)
	Look("DANA" , 40 , 0 )

	TalkPopup("DANA",0,2,0,0,0)
	{
		"#0L#000e#000m……………………………………"
	}
	WaitPrompt()
	WaitCloseWindow()

	Look("DANA" , -40 , 0 )
	Wait(30)

	//	"LAXIA"
	TalkPopup("LAXIA",0,3,90,210,0)
	{
		"#000e#000m……ダーナさん？"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)
	
	CrossFade(FADE_FAST)
	SetChrPos("DANA",-406.32f,901.97f,12.07f)
	Turn("DANA",150.03f,360.0f)

	MoveCameraAt( 0 , -406.331f , 899.589f , 13.070f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 5.051f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 4.976f , 0 )	// 基本仰角
	RotateCamera( 0 , 187.709f , 0 )				// 角度
	ChangeCameraPers( 0 , 38.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転

	ExecuteCmd( 1001,MoveCameraAt, INTERPOLATE_SPHERE , -404.727f , 900.089f , 13.070f , 75 )	// 注視点
	ExecuteCmd( 1002,ChangeCameraDistance, INTERPOLATE_SPHERE , 5.050f, 75 )				// 基本距離
	ExecuteCmd( 1003,ChangeCameraElevation, INTERPOLATE_SPHERE , 4.976f , 75 )				// 基本仰角
	ExecuteCmd( 1004,RotateCamera, INTERPOLATE_SPHERE , 210.617f , 75 )				// 角度
//	ExecuteCmd( 1005,RollCamera, INTERPOLATE_SPHERE ,  21.3f  , 75 )				// ロール回転

	//MoveCameraAt( 0 , -404.727f , 900.089f , 13.070f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 5.050f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 4.976f , 0 )	// 基本仰角
	//RotateCamera( 0 , 210.617f , 0 )				// 角度
	//ChangeCameraPers( 0 , 38.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転

	SetMotSpd("SAHAD" , -1 , 0.85f)
	SetMotSpd("RICOTTA" , -1 , 1.1f)
	SetMotSpd("LAXIA" , -1 , 0.9f)

	ExecuteCmd(1, MoveToEx, "ADOL",-403.84f,898.88f,11.13f, 0.1f, 0.24f ,1 ,0)
	ExecuteCmd(2, MoveToEx, "LAXIA",-402.40f,898.08f,11.14f, 0.1f, 0.23f ,1 ,0)
	ExecuteCmd(3, MoveToEx, "SAHAD",-402.39f,899.43f,11.07f, 0.1f, 0.215f ,1 ,0)
	ExecuteCmd(4, MoveToEx, "RICOTTA",-402.05f,896.84f,11.13f, 0.1f, 0.25f ,1 ,0)
	ExecuteCmd(5, MoveToEx, "HUMMEL",-401.43f,897.97f,11.13f, 0.1f, 0.24f ,1 ,0)

	//SetChrPos("RICOTTA",-402.05f,896.84f,11.13f)
	//Turn("RICOTTA",129.46f,360.0f)
	//SetChrPos("ADOL",-403.84f,898.88f,11.13f)
	//Turn("ADOL",140.57f,360.0f)
	//SetChrPos("LAXIA",-402.40f,898.08f,11.14f)
	//Turn("LAXIA",140.99f,360.0f)
	//SetChrPos("SAHAD",-402.39f,899.43f,11.07f)
	//Turn("SAHAD",132.49f,360.0f)
	//SetChrPos("HUMMEL",-401.43f,897.97f,11.13f)
	//Turn("HUMMEL",128.18f,360.0f)

	Look("DANA" , 40 , 0 )
	Wait(60)

	ChangeAnimation( "DANA" , "ANI_EV_TEBURI", -1 , 1 )

	//	"DANA"
	TalkPopup("DANA",0,1,0,0,0)
	{
		"#010l#000mあの、みんな……\p"
		"私、ちょっと寄りたいところが"
		"あるんだけどいいかな？"
	}
	WaitPrompt()
	WaitCloseWindow()

	HeadYes("LAXIA",1,25)

	//	"LAXIA"
	TalkPopup("LAXIA",0,2,0,0,0)
	{
		"#000e#000mええ、それはもちろん……"
		"でも一体どちらへ？"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookReset("DANA")
	TurnToChr("DANA","ADOL",8.0f)
	LookChr("DANA" , "ADOL")

	//	"DANA"
	TalkPopup("DANA",0,2,0,0,0)
	{
		"#012l#000mうん、この理力塔を"
		"抜けた先へ行ってみたいの。"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)
	
	WaitThread(1)
	WaitThread(2)
	WaitThread(3)
	WaitThread(4)
	WaitThread(5)

	CrossFade(FADE_CROSS)
	
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)
	StopThread(1004)
	StopThread(1005)

	MoveCameraAt( 0 , -403.089f , 897.616f , 12.599f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.550f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -3.495f , 0 )	// 基本仰角
	RotateCamera( 0 , 26.284f , 0 )				// 角度
	ChangeCameraPers( 0 , 36.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	SetChrPos("RICOTTA",-402.44f,897.17f,11.12f)
	Turn("RICOTTA",126.94f,360.0f)
	LookSpd("RICOTTA",1,1,1)

	Wait(15)

	LookSpd("RICOTTA",0.15f,0.15f,0.15f)

	//選択肢
	SetFlag(TF_MENU_SELECT,0)
	MenuReset()
	MenuType(MENUTYPE_POPUP)
	MenuAdd(1,"すぐに行ってみよう")
	MenuAdd(2,"何か思い出せそうかい？")
	MenuOpen( TF_MENU_SELECT , -1 , ADOLMENU_PPOSY , -2 , -2 , 10 , 0)
	WaitMenu(0)
	MenuClose(10,0)
	

	//─────────────────────────
	//	⇒すぐに行ってみよう
	if(FLAG[TF_MENU_SELECT] == 1){
		HeadYes("ADOL" ,1 , 25 )
		Wait(40)

		ChangeAnimation( "DANA" , "ANI_EV_WAIT2_S", -1 , 1 )

		TalkPopup("DANA",0,2,0,0,0)
		{
			"#000e#000mアドルさん、ありがとう……"
			"ちょっと見たい場所があるんだ。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	//	⇒何か思い出せそうかい？
	else {
		ChangeAnimation( "ADOL" , "ANI_EV_WAIT2_S", -1 , 1 )
		Wait(40)

		ChangeAnimation( "DANA" , "ANI_EV_WAIT2_S", -1 , 1 )

		TalkPopup("DANA",0,2,0,0,0)
		{
			"#000e#000m分からないけど、"
			"何となく見てみたいなと思って……"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	//─────────────────────────

	ChangeAnimation( "RICOTTA" , "ANI_EV_KYOSHU_S", -1 , 1 )

	TalkPopup("RICOTTA",0,1,0,0,0)
	{
		"#020e#020m早速行ってみる！"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)

	FadeOut(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	//終了処理ここから----------------------------------------------------
	CallFunc("mp6201:EV_M05S043_ED")
}

function "EV_M05S043_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	SetFlag( TF_LOADING_TIPS_OFF, 1 )	//NowLoading 時の Tips 表示をカット

	LoadArg("map/mp6204/mp6204.arg")
	EventCue("mp6204:EV_M05S040")

	ResetStopFlag(STOPFLAG_EVENT)

	//終了処理ここまで----------------------------------------------------
}


//──────────────────────────────
//▼東方面の通路に出る(mp6201)
//──────────────────────────────
function "EV_M05S041"			//東方面の通路に出る
{
	//開始処理ここから-----------------------------------------------
	CallFunc("system:event_begin")	//EB開始処理

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK, 0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定				
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL", -364.76f, 1028.75f, 11.09f)
	Turn("ADOL", -156.13f, 360.0f)
	ChangeAnimation("ADOL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	Look("ADOL", -20, 0)
	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("RICOTTA", -365.32f, 1026.99f, 11.09f)
	Turn("RICOTTA", -142.41f, 360.0f)
	ChangeAnimation("RICOTTA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	Look("RICOTTA", -20, 0)
	SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD", -366.91f, 1027.69f, 11.09f)
	Turn("SAHAD", -148.64f, 360.0f)
	ChangeAnimation("SAHAD", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	Look("SAHAD", -20, 0)
	SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA", -365.82f, 1029.28f, 11.09f)
	Turn("LAXIA", -140.26f, 360.0f)
	ChangeAnimation("LAXIA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	Look("LAXIA", -20, 0)
	SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)

	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("HUMMEL", -365.24f, 1025.88f, 11.09f)
	Turn("HUMMEL", -139.36f, 360.0f)
	ChangeAnimation("HUMMEL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	Look("HUMMEL", -20, 0)
	SetChrInfoFlag("HUMMEL", INFOFLAG_NOCHRATARI)

	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA", -363.89f, 1028.67f, 11.09f)
	Turn("DANA", -135.64f, 360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("DANA")
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)


	//カメラ設定
	MoveCameraAt(0, -348.529f, 1050.054f, 15.916f, 0)	// 注視点
	ChangeCameraDistance(0, 5.101f, 0)		// 基本距離
	ChangeCameraElevation(0, 0.066f, 0)	// 基本仰角
	RotateCamera(0, 28.225f, 0)				// 角度
	ChangeCameraPers(0, 40.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 350.000, 0.000, 0.150, 0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp6201:EV_M05S041_ED")

	//開始処理ここまで-----------------------------------------------

	Wait(15)

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, -294.977f, 1109.009f, 18.175f, 180)		// 注視点
	ExecuteCmd(1001, ChangeCameraElevation, INTERPOLATE_SPHERE, 2.044f, 180)		// 基本仰角
	ExecuteCmd(1002, RotateCamera, INTERPOLATE_SPHERE, 3.011f, 180)		// 角度

	FadeIn(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	Wait(100)

	ExecuteCmd(1, MoveTo, "RICOTTA", -359.78f, 1034.23f, 11.09f, 0.1f, 0.21f)
	Wait(3)
	ExecuteCmd(2, MoveTo, "ADOL", -359.56f, 1035.39f, 11.09f, 0.1f, 0.21f)
	Wait(2)
	ExecuteCmd(3, MoveTo, "DANA", -358.71f, 1035.71f, 11.09f, 0.1f, 0.22f)
	Wait(2)
	ExecuteCmd(4, MoveTo, "LAXIA", -360.40f, 1036.14f, 11.09f, 0.1f, 0.22f)
	ExecuteCmd(5, MoveTo, "SAHAD", -360.92f, 1035.08f, 11.09f, 0.1f, 0.21f)
	Wait(3)
	ExecuteCmd(6, MoveTo, "HUMMEL", -359.30f, 1033.05f, 11.09f, 0.1f, 0.22f)

	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)

	//　　マップに入ったところでイベント開始。
	//　　立ち並ぶ石像を画面スクロールさせつつ見せた後、
	//　　中央区方面から歩いてフレームインするアドルたち。

	// カットX ----------------------------------------------------------------------------------------

	CrossFade(FADE_NORMAL)

	MoveCameraAt(0, -363.347f, 1029.740f, 12.641f, 0)	// 注視点
	ChangeCameraDistance(0, 5.101f, 0)		// 基本距離
	ChangeCameraElevation(0, 4.431f, 0)	// 基本仰角
	RotateCamera(0, 123.067f, 0)				// 角度
	ChangeCameraPers(0, 31.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, -359.836f, 1034.481f, 12.790f, 120)		// 注視点
	ExecuteCmd(1001, RotateCamera, INTERPOLATE_SPHERE, 347.676f, 120)		// 角度


	WaitThread(1000)
	WaitThread(1001)

	// 移動待ち
	WaitThread(1)
	WaitThread(2)
	WaitThread(3)
	WaitThread(4)
	WaitThread(5)
	WaitThread(6)

	TalkPopup("SAHAD", 0, 1, 0, 0, 0)
	{
		"#000e#000m変わった石像が"
		"並んでるみたいだが……\p"
		"この辺りもずいぶん"
		"ボロボロになっちまってるな。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"DANA"
	Look("DANA", -20, 0)
	Wait(20)
	TalkPopup("DANA", 0, 2, 0, 0, 0)
	{
		"#000e#000m………………………………"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("RICOTTA", "DANA")

	//	"RICOTTA"
	ChangeAnimation("RICOTTA", "ANI_EV_RYOTEKOSI_S", -1, 1)
	TalkPopup("RICOTTA", 0, 1, 0, 0, 0)
	{
		"#000e#000mダーナ姉、この橋どこ行く？"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カットX ----------------------------------------------------------------------------------------

	CrossFade(FADE_CROSS)

	LookReset("DANA")
	SetChrPos("DANA", -358.03f, 1036.69f, 11.09f)
	Turn("DANA", -146.12f, 360.0f)
	SetChrPos("ADOL", -359.63f, 1035.39f, 11.09f)
	Turn("ADOL", -146.23f, 360.0f)
	SetChrPos("LAXIA", -359.99f, 1036.33f, 11.09f)
	Turn("LAXIA", -87.16f, 360.0f)
	SetChrPos("SAHAD", -361.16f, 1035.47f, 11.09f)
	Turn("SAHAD", -113.73f, 360.0f)
	SetChrPos("HUMMEL", -358.56f, 1034.68f, 11.09f)
	Turn("HUMMEL", -156.89f, 360.0f)
	SetChrPos("RICOTTA", -358.51f, 1035.44f, 11.09f)
	Turn("RICOTTA", -170.24f, 360.0f)

	MoveCameraAt(0, -359.863f, 1035.568f, 12.641f, 0)	// 注視点
	ChangeCameraDistance(0, 5.101f, 0)		// 基本距離
	ChangeCameraElevation(0, 0.072f, 0)	// 基本仰角
	RotateCamera(0, 101.185f, 0)				// 角度
	ChangeCameraPers(0, 31.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 3.000, 70.000, 0.000, 0.150, 0.500)

	LookChr("ADOL", "DANA")
	LookChr("LAXIA", "DANA")
	LookChr("HUMMEL", "DANA")
	LookChr("SAHAD", "DANA")

	Turn("DANA", 6.58f, 8.0f)

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, -359.884f, 1035.116f, 12.641f, 600)		// 注視点
	ExecuteCmd(1001, RotateCamera, INTERPOLATE_SPHERE, 122.860f, 600)		// 角度

	//	"DANA"
	LookChr("DANA", "ADOL")
	TalkPopup("DANA", 0, 1, 0, 0, 0)
	{
		"#000e#000mえ？　あ、えっと……"
		"王都の東へ出るための橋だね。\p"
		"このまま進めば、"
		"《バハの塔》方面へ出られるはずだよ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"HUMMEL"
	ChangeAnimation("HUMMEL", "ANI_EV_TEBURI", -1, 1)

	TalkPopup("HUMMEL", 0, 2, 0, 0, 0)
	{
		"#000e#000mバハの塔……あのオケアノスの"
		"情報があるということだったな。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"SAHAD"
	ChangeAnimation("SAHAD", "ANI_EV_RYOTEKOSI_S", -1, 1)

	TalkPopup("SAHAD", 0, 2, 0, 0, 0)
	{
		"#000e#000mじゃあ、このまま"
		"橋を渡っても構わないワケか。"
	}
	WaitPrompt()
	WaitCloseWindow()

	StopThread(1000)
	StopThread(1001)

	// カットX ----------------------------------------------------------------------------------------
	CrossFade(FADE_CROSS)
	SetChrPos("DANA", -358.56f, 1036.94f, 11.09f)
	Turn("DANA", 48.60f, 360.0f)
	SetChrPos("HUMMEL", -358.80f, 1034.65f, 11.09f)
	Turn("HUMMEL", -170.49f, 360.0f)
	SetChrPos("LAXIA", -360.03f, 1036.17f, 11.09f)
	Turn("LAXIA", -99.53f, 360.0f)
	SetChrPos("SAHAD",-360.77f, 1035.68f, 11.09f)
	Turn("SAHAD", -113.73f, 360.0f)

	//SetChrPos("ADOL",-359.63f,1035.39f,11.09f)
	Turn("ADOL",-161.56f,360.0f)

	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_CLOSE, 1)

//	MoveCameraAt(0, -360.310f, 1034.679f, 12.567f, 0)	// 注視点
//	ChangeCameraDistance(0, 5.101f, 0)		// 基本距離
//	ChangeCameraElevation(0, 1.548f, 0)	// 基本仰角
//	RotateCamera(0, 154.803f, 0)				// 角度
//	ChangeCameraPers(0, 31.000f, 0)			// 視野角
//	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
//	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	MoveCameraAt( 0 , -359.673f , 1035.547f , 12.542f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 5.001f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 3.109f , 0 )	// 基本仰角
	RotateCamera( 0 , 165.555f , 0 )				// 角度
	ChangeCameraPers( 0 , 31.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -359.403f , 1035.598f , 12.542f , 600 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 5.558f , 600 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 3.970f , 600 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 188.133f, 600 )

	//MoveCameraAt( 0 , -359.403f , 1035.598f , 12.542f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 5.558f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 3.970f , 0 )	// 基本仰角
	//RotateCamera( 0 , 188.133f , 0 )				// 角度
	//ChangeCameraPers( 0 , 31.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(FADE_CROSS)

	//　　ラクシャに「…」エモーション。
	EmotionEx("LAXIA", 0.00f, EMO_3DOT, 0, 5, 1, 1, 1.0f)	//…
	Wait(52)

	PlayVoice(Y8V_0373,"LAXIA",100)	//えっと…（平常のテンション。あらゆる場面で使用）

	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_CLOSE_E, 1)
	LookChr("DANA", "LAXIA")

	TalkPopup("LAXIA", 0, 2, 0, 0, 0)
	{
		"#000mダーナさん、もう一つ"
		"お聞きしてもよろしいでしょうか？\p"
		"この王都はどの建物も"
		"大きいように思えるのですが……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"SAHAD"
	ChangeAnimation("SAHAD", "ANI_EV_RYOTEKOSI_TEBURI", -1, 1)

	TalkPopup("SAHAD", 0, 2, 0, 0, 0)
	{
		"#000e#000mそういや、確か前にも"
		"そんな話をした気がするな。\p"
		"窓は高い位置にあるし、"
		"階段の段差もデカいみてーだし……"
	}
	WaitPrompt()
	WaitCloseWindow()


	//	"DANA"
	ChangeAnimation("DANA", "ANI_EV_TEMUNE_S", -1, 1)
	TalkPopup("DANA", 0, 1, 0, 0, 0)
	{
		"#000e#000mそれは……\p"
		"私たちエタニア人がみんなより"
		"身体が大きいからだと思うな。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　アドル、ラクシャ、サハド、
	//　　リコッタ、ヒュンメルに「？」エモーション表示。
	EmotionEx("RICOTTA", 0.05f, EMO_Q, 0, 5, 1, 1, 1.0f)	// 「？」
	EmotionEx("HUMMEL", 0.05f, EMO_Q, 0, 5, 1, 1, 1.0f)	// 「？」
	Wait(45)

	ChangeAnimation("HUMMEL", "ANI_EV_SIAN_S", -1, 1)
	TalkPopup("HUMMEL", 0, 2, 0, 0, 0)
	{
		"#000e#000mフム……？"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "LAXIA", "ANI_EV_TEBURI", -1, 1 )	// 手振り

	//	"LAXIA"
	TalkPopup("LAXIA", 0, 2, 0, 0, 0)
	{
		"#000e#000m確かにダーナさんは平均的な"
		"女性より身長が高いようですが……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"DANA"
	HeadNo("DANA", 1, 35)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_CLOSE_S, 1)
	Wait(20)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_CLOSE_E, 1)
	ChangeAnimation("DANA", "ANI_EV_TEMUNE_E", -1, 1)

		TalkPopup("DANA", 0, 1, 0, 0, 0)
	{
		"#000mううん、エタニア人の中では"
		"身丈は特に低いほうかな。\p"
		"他のみんなはもっともっと"
		"大きな人たちばかりだったよ。"
	}
	WaitPrompt()
	WaitCloseWindow()


	//	"LAXIA"
	LookChr("LAXIA", "ADOL")
	TalkPopup("LAXIA", 0, 2, 0, 0, 0)
	{
		"#000e#000mえ……"
		"アドル、そうなのですか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(5)

	ChangeAnimation("HUMMEL", "ANI_EV_SIAN_E", -1, 1)
	LookChr("HUMMEL", "ADOL")
	LookChr("RICOTTA", "ADOL")
	LookChr("DANA", "ADOL")

	//選択肢
	SetFlag(TF_MENU_SELECT, 0)
	MenuReset()
	MenuType(MENUTYPE_POPUP)
	MenuAdd(1, "そうだったかも")
	MenuAdd(2, "よく覚えていない")
	MenuOpen( TF_MENU_SELECT , -1 , ADOLMENU_PPOSY , -2 , -2 , 10 , 0)
	WaitMenu(0)
	MenuClose(10, 0)

//	LookChr("ADOL", "LAXIA")

	//─────────────────────────
	//	⇒そうだったかも
	if (FLAG[TF_MENU_SELECT] == 1){
		SetChrWork("ADOL", CWK_FORCELIPSYNC, 1)
		ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_S, 1)
		HeadYes("ADOL", 1, 25)
		Wait(15)
		ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_E, 1)
		SetChrWork("ADOL", CWK_FORCELIPSYNC, 0)
		Wait(20)

		//PlayVoice(Y8V_0375,"LAXIA",100)	//ふう…（溜息）

		ChangeAnimation("LAXIA", "ANI_EV_SIAN_S", -1, 1)
		TalkPopup("LAXIA", 0, 2, 0, 0, 0)
		{
			"#011e#000m驚きましたね……そうなると"
			"この建物の大きさにも納得です。"
		}
		WaitPrompt()
		WaitCloseWindow()
		ChangeAnimation("LAXIA", "ANI_EV_SIAN_E", -1, 1)
	}
		//	⇒よく覚えていない
	if (FLAG[TF_MENU_SELECT] == 2){
		SetChrWork("ADOL", CWK_FORCELIPSYNC, 1)
		ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_S, 1)
		HeadNo("ADOL", 1, 35)
		Wait(30)
		ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_E, 1)
		SetChrWork("ADOL", CWK_FORCELIPSYNC, 0)
		Wait(20)

		//PlayVoice(Y8V_0375,"LAXIA",100)	//ふう…（溜息）

		ChangeAnimation("LAXIA", "ANI_EV_SIAN_S", -1, 1)
		TalkPopup("LAXIA", 0, 2, 0, 0, 0)
		{
			"#011e#000mそうですか……\p"
			"まあ、建物を見る限り"
			"ダーナさんの仰る通りなのでしょう。"
		}
		WaitPrompt()
		WaitCloseWindow()
		ChangeAnimation("LAXIA", "ANI_EV_SIAN_E", -1, 1)
	}
	//─────────────────────────


	// カットX ----------------------------------------------------------------------------------------

	CrossFade(FADE_CROSS)
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	SetChrPos("DANA", -358.39f, 1036.87f, 11.09f)
	Turn("DANA", -27.72f, 360.0f)
	SetChrPos("ADOL", -359.83f, 1035.05f, 11.09f)
	Turn("ADOL", -146.23f, 360.0f)
	SetChrPos("LAXIA", -360.10f, 1035.98f, 11.09f)
	Turn("LAXIA", -78.77f, 360.0f)
	SetChrPos("SAHAD", -361.35f, 1035.13f, 11.09f)
	Turn("SAHAD", -103.83f, 360.0f)
	SetChrPos("HUMMEL", -358.85f, 1034.76f, 11.09f)
	Turn("HUMMEL", -170.49f, 360.0f)
	SetChrPos("RICOTTA", -358.66f, 1035.89f, 11.09f)
	Turn("RICOTTA", -146.26f, 360.0f)
	Look("HUMMEL", 0.0f, 7.0f)	// ちょっと顔上げる


	LookChr("SAHAD", "RICOTTA")
	LookChr("HUMMEL", "RICOTTA")
	LookChr("RICOTTA", "DANA")

	MoveCameraAt( 0 , -359.061f , 1035.953f , 12.589f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 3.661f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 2.411f , 0 )	// 基本仰角
	RotateCamera( 0 , 113.384f , 0 )				// 角度
	ChangeCameraPers( 0 , 31.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.3f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	
	LookChr("ADOL", "RICOTTA")
	LookChr("DANA", "RICOTTA")
	LookChr("LAXIA", "RICOTTA")

	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_CLOSE_E,1)

	Wait(FADE_CROSS)

	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_SAD_S, 1)

	ChangeAnimation("RICOTTA", "ANI_EV_BORI", -1, 1)

	TalkPopup("RICOTTA", 0, 1, 0, 0, 0)
	{
		"#000mリコッタ、チビだからとても不便。"
		"チビ2行目"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"SAHAD"
	ChangeAnimation("SAHAD", "ANI_EV_RYOTEKOSI_E", -1, 1)
	TalkPopup("SAHAD", 0, 2, 0, 0, 0)
	{
		"#021e#080mガハハ、お前さんは"
		"これからが育ちざかりだろ？\p"
		"#080e#080mよく食ってよく寝りゃ"
		"そのうちスグ大きくなれるぞ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"LAXIA"
	ChangeAnimation( "DANA", "ANI_EV_RYOTEMAE_S", -1, 1 )	// 両手 前組み

	TalkPopup("LAXIA", 0, 2, 0, 0, 0)
	{
		"#061e#000m（そ、そういう問題では……）"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookReset("RICOTTA")
	Turn("RICOTTA", 67.86f, 10.0f)
	LookChr("RICOTTA", "SAHAD")

	//	"RICOTTA"
	ChangeAnimation("RICOTTA", "ANI_EV_GUTSPOSE_S", -1, 1)
	TalkPopup("RICOTTA", 0, 1, 0, 0, 0)
	{
		"#000e#000mホントか？\p"
		"リコッタ、本で見た"
		"“ボンキュッボン”なりたい！"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "LAXIA" , "ANI_EV_UDEGUMI_S", -1 , 1 )

	//	"LAXIA"
	LookChr("LAXIA", "RICOTTA")
	TalkPopup("LAXIA", 0, 2, 0, 0, 0)
	{
		"#062e#020l#000m（ボ、ボンキュッボン？）"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"HUMMEL"
	PlayVoice(Y8V_2171,"HUMMEL",100)	//フフ（微笑）
	ChangeAnimation( "HUMMEL", "ANI_EV_UDEGUMI_S", -1, 1 )	// 腕組

	TalkPopup("HUMMEL", 0, 2, 0, 0, 0)
	{
		"#000e#000mよく分からんが、子供が"
		"たくさん食べて寝るのはいいことだ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(10)

	//　　ここで操作許可。

	FadeOut(FADE_BLACK, FADE_NORMAL)
	WaitFade()

	//終了処理ここから----------------------------------------------------
	CallFunc("mp6201:EV_M05S041_ED")
}

function "EV_M05S041_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ処理
	SetFlag(GF_05MP6201_IN_EAST, 1)
	CallFunc("mp6201:init")

	//イベント後の再配置
	SetChrPos("LEADER", -360.11f, 1035.27f, 11.09f)
	Turn("LEADER", -148.36f, 360.0f)

	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	MoveCameraAt(0, -360.110f, 1035.270f, 12.963f, 0)	// 注視点
	ChangeCameraDistance(0, 7.000f, 0)		// 基本距離
	ChangeCameraElevation(0, 14.000f, 0)	// 基本仰角
	RotateCamera(0, -37.490f, 0)				// 角度
	ChangeCameraPers(0, 60.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK, FADE_FAST)
	//WaitFade()

	//終了処理ここまで----------------------------------------------------
}

function "EV_M05S191"			//王都に転位で到着する
{
	//開始処理ここから-----------------------------------------------

	SetStopFlag(STOPFLAG_EVENT)
	FadeOut(FADE_BLACK, 0)
	WaitFade()

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定				
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL",-368.00f,812.27f,12.63f)
	Turn("ADOL",-151.62f,360.0f)
	ChangeAnimation("ADOL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("ADOL")
	SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("RICOTTA",-367.65f,815.42f,12.19f)
	Turn("RICOTTA",175.50f,360.0f)
	ChangeAnimation("RICOTTA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("RICOTTA")
	SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD",-368.28f, 814.00f, 12.40f)
	Turn("SAHAD",-145.41f,360.0f)
	ChangeAnimation("SAHAD", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("SAHAD")
	SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA",-365.87f, 814.24f, 12.30f)
	Turn("LAXIA",175.50f,360.0f)
	ChangeAnimation("LAXIA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("LAXIA")
	SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)

	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("HUMMEL",-369.80f, 814.32f, 12.50f)
	Turn("HUMMEL",-131.20f,360.0f)
	ChangeAnimation("HUMMEL", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("HUMMEL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("HUMMEL")
	SetChrInfoFlag("HUMMEL", INFOFLAG_NOCHRATARI)

	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA",-366.53f, 815.35f, 12.12f)
	Turn("DANA",-131.20f,360.0f)
	ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
	ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
	LookReset("DANA")
	SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)

	// エフェクトロード
	LoadEffect("efx_ev05.ite")

	DestroyObj(-366.774f , 808.726f , 12.108f  , 3.5f , 0, 0, 0 )

	//カメラ設定
//	MoveCameraAt( 0 , -373.378f , 827.255f , 20.962f , 0 )	// 注視点
//	ChangeCameraDistance( 0 , 8.684f , 0 )		// 基本距離
//	ChangeCameraElevation( 0 , -40.188f , 0 )	// 基本仰角
//	RotateCamera( 0 , 38.630f , 0 )				// 角度
//	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
//	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
//	RollCamera( 0 , -1.1f , 0 )				// ロール回転
//	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	MoveCameraAt( 0 , -367.306f , 814.985f , 13.264f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 8.599f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 17.643f , 0 )	// 基本仰角
	RotateCamera( 0 , 142.950f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoFFocus(0,LERP_LINEAR,0)		//デフォルト	

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 1.000, 100.000 ,1.000 ,0.550 ,0.500)

	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300, 1.000, 1.000, 0.600, 0.000, 1.000)	//イベント毎に調整

	//スキップ許可
	SetSkipScript("mp6201:EV_M05S191_ED")

	//開始処理ここまで-----------------------------------------------

	//　　画面フェードインして王都の水晶石を見せる。
	//　　次の瞬間、次々と柱の周辺に転位してくるアドルたち。

	// カット1 -----------------------------------------------------------------------------------------

	
	// アルファ値（転位用）
	ChrAlpha("ADOL", 0.0f, 0)	// ID, 変化後のアルファ値, 変化にかかるフレーム数
	ChrAlpha("DANA", 0.0f, 0)	// ID, 変化後のアルファ値, 変化にかかるフレーム数
	ChrAlpha("LAXIA", 0.0f, 0)	// ID, 変化後のアルファ値, 変化にかかるフレーム数
	ChrAlpha("SAHAD", 0.0f, 0)	// ID, 変化後のアルファ値, 変化にかかるフレーム数
	ChrAlpha("RICOTTA", 0.0f, 0)	// ID, 変化後のアルファ値, 変化にかかるフレーム数
	ChrAlpha("HUMMEL", 0.0f, 0)	// ID, 変化後のアルファ値, 変化にかかるフレーム数

	ChangeAnimation( "DANA", "ANI_EV_PRAY", -1, 1 )	// 祈り
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_CLOSE, 1)	// 目

//	// カメラ移動
//	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -367.078f , 815.963f , 13.600f, 165 )
//	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 9.409f, 165 )
//	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 9.882f, 165 )
//	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 344.334f , 165 )

	//MoveCameraAt( 0 , -367.078f , 815.963f , 13.600f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 9.406f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 9.877f , 0 )	// 基本仰角
	//RotateCamera( 0 , 344.265f , 0 )				// 角度
	//ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	//// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// フェードイン
	FadeIn(FADE_BLACK, FADE_NORMAL)
	Wait(FADE_NORMAL)

//	// カメラ待ち
//	WaitThread(1000)
//	WaitThread(1001)
//	WaitThread(1002)
//	WaitThread(1003)
//
	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -367.306f , 814.985f , 14.330f, 135 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 6.399f, 135 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -11.005f , 135 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 4.859f , 135 )

	//MoveCameraAt( 0 , -367.306f , 814.985f , 14.330f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 6.399f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -11.005f , 0 )	// 基本仰角
	//RotateCamera( 0 , 4.859f , 0 )				// 角度
	//ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	//RollCamera( 0 , 0 , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(12)

	PlaySE(SE_M05S191_01, 100, 0, 0, 0, 1.0f, 0)
 	ChrEffect2( "RICOTTA" , 3901100 , "root", "", 0 , IMPACT_NONE , KNOCK_EFXPOS , 0.0f,0.0f,0, 1.0f, 0.8f)
 	Wait(10)
 	ChrEffect2( "ADOL" , 3901100 , "root", "", 0 , IMPACT_NONE , KNOCK_EFXPOS , 0.0f,0.0f,0, 1.0f, 0.8f)
 	Wait(10)
 	ChrEffect2( "SAHAD" , 3901100 , "root", "", 0 , IMPACT_NONE , KNOCK_EFXPOS , 0.0f,0.0f,0, 1.0f, 0.7f)
 	Wait(10)
 	ChrEffect2( "HUMMEL" , 3901100 , "root", "", 0 , IMPACT_NONE , KNOCK_EFXPOS , 0.0f,0.0f,0, 1.0f, 1.0f)
 	Wait(10)
	PlaySE(SE_M05S191_02, 100, 0, 0, 0, 1.0f, 0)
	Blur(BLUR_TYPE_EXPAND, 0.2f, 60)	//ブラー
	ChrAlpha("RICOTTA", 1.0f, 20)	// ID, 変化後のアルファ値, 変化にかかるフレーム数
 	ChrEffect2( "LAXIA" , 3901100 , "root", "", 0 , IMPACT_NONE , KNOCK_EFXPOS , 0.0f,0.0f,0, 1.0f, 0.8f)
	Wait(5)
	ChrAlpha("ADOL", 1.0f, 30)	// ID, 変化後のアルファ値, 変化にかかるフレーム数
 	ChrEffect2( "DANA" , 3901100 , "root", "", 0 , IMPACT_NONE , KNOCK_EFXPOS , 0.0f,0.0f,0, 1.0f, 0.7f)
	Wait(5)
	ChrAlpha("SAHAD", 1.0f, 20)	// ID, 変化後のアルファ値, 変化にかかるフレーム数
	PlaySE(SE_M05S191_02, 90, 0, 0, 0, 1.0f, 0)
	Wait(5)
	ChrAlpha("HUMMEL", 1.0f, 20)	// ID, 変化後のアルファ値, 変化にかかるフレーム数
	Wait(5)
	ChrAlpha("LAXIA", 1.0f, 20)	// ID, 変化後のアルファ値, 変化にかかるフレーム数
	Wait(5)
	PlaySE(SE_M05S191_02, 80, 0, 0, 0, 1.0f, 0)
	ChrAlpha("DANA", 1.0f, 20)	// ID, 変化後のアルファ値, 変化にかかるフレーム数

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)

	ChangeAnimation( "DANA", "ANI_EV_PRAY_E", -1, 1 )	// 祈り
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_CLOSE_E, 1)	// 目

	PlayVoice(Y8V_1414,"SAHAD",100)	//お？（疑問）
	
	// サハド
	TalkPopup("SAHAD",0,2,0,0,0) {
		"#000e#000mお？"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookRoll("RICOTTA", 10.0f)	// かしげる

	// リコッタ
	TalkPopup("RICOTTA",0,2,0,0,0) {
		"#000e#000mへっ？"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	LookRoll("RICOTTA", 0.0f)	// かしげる
	
	// カット2 ----------------------------------------------------------------------------------------

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -369.278f , 815.737f , 14.950f, 150 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 6.399f, 150 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE ,  -18.636f  , 150 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE ,  37.304f , 150 )

	//MoveCameraAt( 0 , -369.278f , 815.737f , 14.950f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 6.399f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , -18.636f , 0 )	// 基本仰角
	//RotateCamera( 0 , 37.304f , 0 )				// 角度
	//ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	//SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	//RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。


	//　　周囲をキョロキョロと見回すサハドとリコッタ。

	Look("LAXIA", -25.0f, 10.0f)

	Turn2("RICOTTA", 175.50f, 8.0f, 1)
	Wait(5)
	Turn2("SAHAD", 136.42f, 8.0f, 1)
	
	// サハドとリコッタ きょろきょろ（後ろでアドルも軽く）
	SetMotSpd("RICOTTA" ,-1 , 0.8f )
	LookSpd("SAHAD", 0.08f, 0.08f, 0.08f )// ゆっくりめに首向き
	
	Look("SAHAD", -35.0f, 0.0f)
	
	ChangeAnimation( "RICOTTA", "ANI_EV_KYORO_S", -1, 1 )
	Wait(15)

	LookTo("ADOL", -393.111f , 867.623f , 40.003f)
	LookTo("HUMMEL", -393.111f , 867.623f , 40.003f)
	ChangeAnimation( "HUMMEL" , "ANI_EV_UDEGUMI_S", -1 , 1 )

	Look("LAXIA", 25.0f, 5.0f)
	Wait(15)
	Look("SAHAD", 50.0f, 0.0f)
	ChangeAnimation( "RICOTTA", "ANI_EV_KYORO2_S", -1, 1 )
	Wait(30)
	Look("LAXIA", -25.0f, 10.0f)
	Wait(30)
	Look("SAHAD", -50.0f, 0.0f)
	

	Look("SAHAD", 20.0f, 0.0f)
	ChangeAnimation( "RICOTTA", "ANI_EV_KYORO2_E", -1, 1 )
	Wait(20)

	SetMotSpd("RICOTTA" ,-1 , 1.0f )
	LookSpd( "SAHAD", LOOKSPD_DEFAULT, LOOKSPD_DEFAULT, LOOKSPD_DEFAULT )

	Wait(20)

	EarthQuake( 0.02f , 0.02f , 80 )	// 縦揺れ幅, 横揺れ幅, 時間

//	EmotionEx("SAHAD", 0.00f, EMO_EXQ, 0, 5, 1, 1, 1.0f )	// 「！？」
//	EmotionEx("RICOTTA", 0.00f, EMO_EXQ, 0, 5, 1, 1, 1.0f )	// 「！？」

	ChangeAnimation( "SAHAD", "ANI_EV_SUP_S", -1, 1 )	// 驚く、軽くのけぞる
	ChangeAnimation( "RICOTTA", "ANI_EV_SUP_S", -1, 1 )	// 驚く、軽くのけぞる
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_SUP_S, 1)	// 目
	ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_SUP_S, 1)	// 口
	ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_SUP_S, 1)	// 目
	ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_SUP_S, 1)	// 口

//	// カメラ移動
//	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -368.502f , 815.796f , 14.069f, 35 )
//	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.475f, 35 )
//	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -14.142f , 35 )
//	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 39.091f , 35 )


	// サハド
	TalkPopup("SAHAD",1,2,0,0,0) {
		"#000e#000m#18Sおおおおおおお！？"
	}
	// リコッタ
	TalkPopup("RICOTTA",2,2,0,0,0) {
		"#000e#000m#18Sふええええええ！？"	//（サハドと同時）"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	
	Wait(10)

	// カット3 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_NORMAL)
	
	// カメラ
	MoveCameraAt( 0 , -367.935f , 814.743f , 13.821f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.974f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.019f , 0 )	// 基本仰角
	RotateCamera( 0 , 194.206f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	SetDoF(0, LERP_LINEAR, 5.000, 150.000 ,1.000 ,0.550 ,0.500)

	//草戻す
	DestroyObj(-366.774f , 808.726f , 12.108f  , 3.5f , 0, 0, 1 )


	// 位置調整・表情・モーション
	SetChrPos("ADOL", -367.78f, 813.57f, 12.46f)
	Turn("ADOL", 175.50f, 360.0f)
	SetChrPos("DANA", -366.89f, 815.20f, 12.16f)
	Turn("DANA", 60.66f, 360.0f)
	SetChrPos("LAXIA", -366.98f, 813.92f, 12.38f)
	Turn("LAXIA", 157.74f, 360.0f)
	SetChrPos("SAHAD", -368.99f, 813.38f, 12.52f)
	Turn("SAHAD", 118.66f, 360.0f)
	SetChrPos("RICOTTA", -369.40f, 814.47f, 12.44f)
	Turn("RICOTTA", 147.08f, 360.0f)
	SetChrPos("HUMMEL",-368.88f,815.50f,12.33f)
	Turn("HUMMEL",-58.85f,360.0f)
	LookReset("SAHAD")
	LookReset("ADOL")
	Look("ADOL", 20.0f, 10.0f)
	ChangeAnimation( "SAHAD", "ANI_WAIT", -1, 1 )	// 待機
	ChangeAnimation( "RICOTTA", "ANI_WAIT", -1, 1 )	// 待機
	
	// 非表示・再表示
	ResetChrInfoFlag("ADOL", INFOFLAG_INVISIBLE)	// 再表示
	ResetChrInfoFlag("DANA", INFOFLAG_INVISIBLE)	// 再表示
	ResetChrInfoFlag("LAXIA", INFOFLAG_INVISIBLE)	// 再表示
	ResetChrInfoFlag("HUMMEL", INFOFLAG_INVISIBLE)	// 再表示
	ResetChrInfoFlag("chkpt", INFOFLAG_INVISIBLE)	// 再表示
	
	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -367.935f , 814.744f , 13.841f, 300 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 2.974f , 300 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -0.587f , 300 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 181.027f, 300 )
	
	// フェード待ち
	Wait(FADE_NORMAL)

	Look("LAXIA", -20.0f, 10.0f)
	ChangeAnimation( "LAXIA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て
	ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_SUP_S, 1)	// 目

	// ラクシャ
	TalkPopup("LAXIA",0,2,0,0,0) {
		"#000e#000mこ、ここは……"
	}
	WaitPrompt()
	WaitCloseWindow()

	Look("ADOL", -30.0f, 10.0f)
	Look("LAXIA", 30.0f, 10.0f)

	// ヒュンメル
	TalkPopup("HUMMEL",0,1,0,0,0) {
		"#000e#000m見覚えがある場所だな……"
		"どうやら北部の王都跡のようだが。"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("HUMMEL", "DANA")

	LookChr("SAHAD", "DANA")
	TurnToChr("SAHAD", "DANA", 8.0f)

	// サハド
	TalkPopup("SAHAD",0,2,0,0,0) {
		"#050e#000mい、一体何が起こったってんだ！？"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	TurnToChr("RICOTTA", "DANA", 8.0f)
	LookChr("LAXIA", "DANA")
	LookChr("ADOL", "DANA")

	LookChr("DANA", "SAHAD")

	// ダーナ
	TalkPopup("DANA",0,1,0,0,0) {
		"#000e#000mあはは……これが“転位”だよ。\p"
		"行ったことがあって印象深い場所に"
		"念じるだけで移動できるの。\p"
		"水晶石のある場所とか"
		"景色が綺麗な場所なら確実だね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "LAXIA", "ANI_EV_TEMUNE_E", -1, 1 )	// 手胸当て

	// ラクシャ
	TalkPopup("LAXIA",0,2,0,0,0) {
		"#000e#000mこの“転位”はダーナさんしか"
		"使えないのですか？"
	}
	WaitPrompt()
	WaitCloseWindow()

	TurnToChr("DANA","LAXIA",8.0f)
	LookChr("DANA", "LAXIA")
	
	// ダーナ
	TalkPopup("DANA",0,1,0,0,0) {
		"#000e#000mううん、この水晶石の"
		"指環さえあれば大丈夫だと思う。"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	ChangeAnimation( "DANA", "ANI_EV_TEBURI", -1, 1 )	// 手振り
	
	// ダーナ
	TalkPopup("DANA",0,1,0,0,0) {
		"皆が転位を利用できれば、"
		"資材の収集がはかどるかもね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "LAXIA", "ANI_EV_RYOTEMAE_S", -1, 1 )	// 両手 前組み

	// ラクシャ
	TalkPopup("LAXIA",0,2,0,0,0) {
		"#000e#000mそ、それは確かに……"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カット4 ----------------------------------------------------------------------------------------

	// クロスフェード
	CrossFade(FADE_CROSS)

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	// カメラ
	MoveCameraAt( 0 , -367.966f , 815.316f , 13.741f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 2.302f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 0.989f , 0 )	// 基本仰角
	RotateCamera( 0 , 332.879f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , -0.6f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 位置調整・表情・モーション
	SetChrInfoFlag( "HUMMEL" , INFOFLAG_NOATARI )	// 地面くぼんでるので一時的に
	SetChrPos("HUMMEL", -368.58f, 815.10f, 12.20f)
	Turn("HUMMEL", -24.61f, 360.0f)
	SetChrPos("DANA",-367.38f,815.12f,12.18f)
	Turn("DANA",-3.29f,360.0f)
	LookReset("DANA")
	ChangeAnimation( "HUMMEL", "ANI_WAIT", -1, 1 )
	
	// 非表示・再表示
	SetChrInfoFlag("SAHAD", INFOFLAG_INVISIBLE)	// 非表示
	SetChrInfoFlag("RICOTTA", INFOFLAG_INVISIBLE)	// 非表示
	SetChrInfoFlag("ADOL", INFOFLAG_INVISIBLE)	// 非表示
	
	// フェード待ち
	Wait(FADE_CROSS)
	
	ChangeAnimation( "HUMMEL", "ANI_EV_TEBURI", -1, 1 )	// 手振り
	
	// ヒュンメル
	TalkPopup("HUMMEL",0,2,0,0,0) {
		"#000e#000mこ、この島でしか使えないのか？"	//（真剣）"
	}
	WaitPrompt()
	WaitCloseWindow()

	TurnToChr("DANA","HUMMEL",8.0f)
	LookChr("DANA", "HUMMEL")

	// ダーナ
	TalkPopup("DANA",0,2,0,0,0) {
		"#000e#000mうん、多分……"
	}
	WaitPrompt()
	WaitCloseWindow()

	PlayVoice(Y8V_2175,"HUMMEL",100)	//くっ…（戸惑い）
	// ヒュンメル
	TalkPopup("HUMMEL",0,2,0,0,0) {
		"#011e#000mそ、そうか、それは残念だ。"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	LookReset("HUMMEL")
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_CLOSE_S, 1)	// 目
	ChangeAnimation( "HUMMEL", "ANI_EV_SIAN_S", -1, 1 )	// 思案
	
	// ヒュンメル
	TalkPopup("HUMMEL",0,2,0,0,0) {
		"#040e#000mいや、そもそもこれに頼っては"
		"心のこもった“運び”には……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//　　ダーナに冷や汗エモーション表示。
	EmotionEx("DANA", 0.05f, EMO_TARA, 0, 5, 1, 1, 0.9f )	// 「冷や汗」
	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_SAD_CLOSE_S, 1)	// 目

	Wait(60)

	StopBGM(120)

	// フェードアウト
	FadeOut(FADE_BLACK, FADE_NORMAL)
	WaitFade()
	SetEnvSEPlayState(-1, 0)	//環境SE全停止

	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

	// カット5 --------------------------------------------------------------------------------------------
	
	//　　ここで転位に関するチュートリアルを表示する。
	//　　これ以降の一般メッセージ等にも反映させる。
	//　　チュートリアル終了後は画面暗転で下記のメッセージ。

	// カット6 ------------------------------------------------------------------------------------------

	// テキスト（色替え）
	TalkPopup(UNDEF,0,3,SYSTEM_PPOSX,SYSTEM_PPOSY,0) {
		"#7Cその後、ダーナは転位について"
		"#7C他の漂流者たちにも説明を行った。\p"
		"#7C説明を聞いて半信半疑だった者たちも"
		"#7C魔法のような出来事を経験すると、"
		"#7C大いに驚いたようであった。\p"
		"#7Cタナトスとエアランはすぐに"
		"#7C指環を作れないか試してみるという。\p"
		"#7Cそれらを見届けると、"
		"#7Cアドルたちは改めて王都の"
		"#7C北部へと向けて出発するのだった。"
	}
	WaitPrompt()
	WaitCloseWindow()

/*

//////////////////////////////////////////////////////////////////////////////////////
2016.2.22 シナリオ変更に伴い、以下はmp1201で行う形に
//////////////////////////////////////////////////////////////////////////////////////

	// カット7 -----------------------------------------------------------------------------------------------

	//　　フェードインして再び王都の水晶柱前。

	// フラグ関連リセット
	ResetChrInfoFlag("SAHAD", INFOFLAG_INVISIBLE)	// 再表示
	ResetChrInfoFlag("RICOTTA", INFOFLAG_INVISIBLE)	// 再表示
	ResetChrInfoFlag("ADOL", INFOFLAG_INVISIBLE)	// 再表示
	ResetChrInfoFlag( "HUMMEL" , INFOFLAG_NOATARI )

	// 再配置
	SetChrPos("ADOL", -372.34f, 812.38f, 12.56f)
	Turn("ADOL", 12.06f, 360.0f)
	SetChrPos("DANA", -371.19f, 811.92f, 12.56f)
	Turn("DANA", 57.11f, 360.0f)
	SetChrPos("LAXIA", -371.35f, 810.21f, 12.56f)
	Turn("LAXIA", 168.40f, 360.0f)
	SetChrPos("SAHAD", -372.46f, 810.27f, 12.56f)
	Turn("SAHAD", -159.34f, 360.0f)
	SetChrPos("RICOTTA", -373.14f, 812.06f, 12.56f)
	Turn("RICOTTA", -52.92f, 360.0f)
	SetChrPos("HUMMEL", -373.53f, 811.06f, 12.56f)
	Turn("HUMMEL", -120.54f, 360.0f)

	ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)	// 目
	ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)	// 口
	ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_WAIT, 1)	// 目

	LookReset("ADOL")
	LookReset("DANA")
	LookReset("LAXIA")
	LookReset("SAHAD")
	LookReset("RICOTTA")
	LookReset("HUMMEL")
	LookChr("LAXIA", "ADOL")

	ChangeAnimation( "ADOL", "ANI_WAIT", -1, 1 )	// 待機
	ChangeAnimation( "LAXIA", "ANI_WAIT", -1, 1 )	// 待機
	ChangeAnimation( "HUMMEL", "ANI_WAIT", -1, 1 )	// 待機

	Wait(30)

	// カメラ
	MoveCameraAt( 0 , -372.015f , 812.442f , 14.829f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 6.102f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , -2.895f , 0 )	// 基本仰角
	RotateCamera( 0 , 284.853f , 0 )				// 角度
	ChangeCameraPers( 0 , 40.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , -0.6f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -372.095f , 811.148f , 14.029f, 150 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 3.490f , 150 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 4.397f, 150 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 209.689f, 150 )
	
	// フェードイン
	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	// カメラ待ち
	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)
	WaitThread(1003)
	
	ChangeAnimation( "LAXIA", "ANI_EV_TEMUNE_S", -1, 1 )	// 手胸当て
	Wait(10)
	
	// ラクシャ
	TalkPopup("LAXIA",0,2,0,0,0) {
		"#000e#000m転位で船の資材集めが"
		"楽になるといいのですが……"
	}
	WaitPrompt()
	WaitCloseWindow()

	ChangeAnimation( "SAHAD", "ANI_EV_UDEGUMI_S", -1, 1 )	// 腕組
	ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_CLOSE_S, 1)	// 目
	Wait(10)

	// サハド
	TalkPopup("SAHAD",0,2,0,0,0) {
		"#010e#000mああ、まったくだぜ……"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	LookChr("SAHAD", "ADOL")
	
	// サハド
	TalkPopup("SAHAD",0,2,0,0,0) {
		"#000e#000mそれはそうとアドルは"
		"転位（アレ）を見ても驚かないんだな？"
	}
	WaitPrompt()
	WaitCloseWindow()

	LookChr("ADOL", "SAHAD")

	//選択肢
	SetFlag(TF_MENU_SELECT,0)
	MenuReset()
	MenuType(MENUTYPE_POPUP)
	MenuAdd(1,"まあね")
	MenuAdd(2,"いや、驚いてるよ")
	MenuOpen( TF_MENU_SELECT , -1 , ADOLMENU_PPOSY , -2 , -2 , 10 , 0)
	WaitMenu(0)
	MenuClose(10,0)

	ChangeAnimation( "ADOL", "ANI_EV_TEBURI", -1, 1 )
	SetChrWork("ADOL", CWK_FORCELIPSYNC, 1)	// 強制クチパク
	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT_S,1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	Wait(30)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	SetChrWork("ADOL", CWK_FORCELIPSYNC, 0)
	Wait(30)

	ChangeAnimation( "SAHAD", "ANI_EV_UDEGUMI_E", -1, 1 )	// 腕組
	Wait(10)

	//─────────────────────────
	//	⇒まあね
	if (FLAG[TF_MENU_SELECT] == 1){

		// サハド
		TalkPopup("SAHAD",0,2,0,0,0) {
			"#100e#000mやれやれ、さすがというか……\p"
			"#100e#000m冒険家はああいうことですら"
			"慣れっこってワケか。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	//	⇒いや、驚いてるよ
	else {
		
		// サハド
		TalkPopup("SAHAD",0,2,0,0,0) {
			"#100e#000m……顔はそうは言ってねーぜ。\p"
			"ああいうことですら、"
			"お前さんは慣れっこってコトか。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	//─────────────────────────

	LookChr("DANA", "ADOL")

	// ダーナ
	TalkPopup("DANA",0,2,0,0,0) {
		"#000e#000mさあ、アドルさん。"
		"それじゃ王宮のあった場所へ向かおう。"
	}
	WaitPrompt()
	WaitCloseWindow()
	
	LookChr("ADOL", "DANA")
	
	ChangeAnimation( "DANA", "ANI_EV_RYOTEMAE_S", -1, 1 )	// 両手 前組み
	Wait(10)
	
	// ダーナ
	TalkPopup("DANA",0,2,0,0,0) {
		"#010e#000m中央区を北へ抜ければ、"
		"王宮に接続してた空中回廊へ出るはずだよ。\p"
		"#000e#000mまずはそこへ向かって、"
		"大穴の手がかりがないか調べてみよう。"
	}
	WaitPrompt()
	WaitCloseWindow()

	// カメラ移動
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE , -372.075f , 811.010f , 15.169f, 150 )
	ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 4.834f , 150 )
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , -1.906f , 150 )
	ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE , 187.917f , 150 )

	//　　アドルの頷きモーション後に操作許可。
	HeadYes("ADOL" , 1 , 25 )
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_S, 1)
	Wait(10)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_E, 1)
	Wait(10)
	
	Wait(40)

	// フェードアウト
	FadeOut(FADE_BLACK, FADE_NORMAL)
	Wait(FADE_NORMAL)
	
	// カメラ停止
	StopThread(1000)
	StopThread(1001)
	StopThread(1002)
	StopThread(1003)

*/

	//終了処理ここから----------------------------------------------------
	CallFunc("mp6201:EV_M05S191_ED")
}

function "EV_M05S191_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

//	//隠したものを復帰。
//	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//エフェクトの停止
	StopEffect(-1,ALL,1)

	// エフェクトリリース
	ReleaseEffect("efx_ev05.ite")

//	//イベント後の再配置
//	SetChrPos("LEADER",-368.08f,811.37f,12.68f)
//	Turn("LEADER",161.29f,360.0f)
//
//	ResetPartyPos()
//	ResetFollowPoint()
//	Wait(1)

	//カメラ位置復帰
//	MoveCameraAt( 0 , -368.075f , 811.375f , 14.527f , 0 )	// 注視点
//	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
//	ChangeCameraElevation( 0 , 5.153f , 0 )	// 基本仰角
//	RotateCamera( 0 , 23.249f , 0 )				// 角度
//	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
//	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
//	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	
//	RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
//	CallFunc("system:camera_reset")

	StopBGM(60)

	SetFlag( TF_LOADING_TIPS_OFF, 1 )	//NowLoading 時の Tips 表示をカット

	LoadArg("map/mp1201/mp1201.arg")
	EventCue("mp1201:EV_M05S192")

	ResetStopFlag(STOPFLAG_EVENT)


	//終了処理ここまで----------------------------------------------------
}



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//■クエストセクション

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//===============================================================
//
// 【QS610】親友の遺言（ダーナ）
// ▼クエスト達成イベント（続き）
//
function "QS_610_Complete2"
{
	//　　暗転を挟んで、王都中央区。

//開始処理ここから----------------------------------------------------

	CallFunc("system:event_begin")

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL",-415.98f,896.09f,11.02f)
	Turn("ADOL",-25.00f,360.0f)
	ChangeAnimation( "ADOL" , "ANI_EV_SIT_C", -1 , 1 )
	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookChr( "ADOL", "DANA" )
	SetChrInfoFlag( "ADOL" , INFOFLAG_NOCHRATARI)
	SetChrInfoFlag( "ADOL" , INFOFLAG_NOGRAVITY )

	SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("DANA",-416.60f,895.75f,11.02f)
	Turn("DANA",-25.00f,360.0f)
	ChangeAnimation( "DANA" , "ANI_EV_SIT_C", -1 , 1 )
	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset("DANA")
	SetChrInfoFlag( "DANA" , INFOFLAG_NOCHRATARI)
	SetChrInfoFlag( "DANA" , INFOFLAG_NOGRAVITY )

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA",-434.51f,910.60f,10.98f)
	Turn("LAXIA",31.21f,360.0f)
	ChangeAnimation( "LAXIA" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_SMILE,1)
	ChangeSubAnimation("LAXIA",SUBMOT_MOUTH,ANI_M_SMILE,1)
	ChangeSubAnimation("LAXIA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookChr("LAXIA", "RICOTTA")
	SetChrInfoFlag( "LAXIA" , INFOFLAG_NOCHRATARI)

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD",-444.80f,897.52f,11.07f)
	Turn("SAHAD",65.29f,360.0f)
	ChangeAnimation( "SAHAD" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "SAHAD" )
	SetChrInfoFlag( "SAHAD" , INFOFLAG_NOCHRATARI)

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("RICOTTA",-433.77f,909.67f,10.93f)
	Turn("RICOTTA",66.74f,360.0f)
	ChangeAnimation( "RICOTTA" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookChr("RICOTTA", "LAXIA")
	SetChrInfoFlag( "RICOTTA" , INFOFLAG_NOCHRATARI)

	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("HUMMEL",-446.14f,907.62f,13.01f)
	Turn("HUMMEL",136.15f,360.0f)
	ChangeAnimation( "HUMMEL" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("HUMMEL",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("HUMMEL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("HUMMEL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "HUMMEL" )
	SetChrInfoFlag( "HUMMEL" , INFOFLAG_NOCHRATARI)

	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )
	PlayBGM(BGM_EVENT_016, 0)

	//カメラ設定
	MoveCameraAt(0, -410.768f, 901.414f, 15.968f, 0)	// 注視点
	ChangeCameraDistance(0, 4.800f, 0)		// 基本距離
	ChangeCameraElevation(0, -4.674f, 0)	// 基本仰角
	RotateCamera(0, 351.661f, 0)				// 角度
	ChangeCameraPers(0, 59.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 4.000, 500.000 ,1.000 ,0.700 ,0.500)

	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6201:QS_610_Complete2_ED")

//開始処理ここまで-----------------------------------------------
//　　他のパーティメンバーがめいめい過ごしているのをみせつつ、

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, -408.803f, 889.492f, 15.275f, 125)		// 注視点
	ExecuteCmd(1001, RotateCamera, INTERPOLATE_SPHERE, 340.239f, 125)		// 角度

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()


	WaitThread(1000)
	WaitThread(1001)

	CrossFade(FADE_FAST)
	MoveCameraAt(0, -439.874f, 896.312f, 13.313f, 0)	// 注視点
	ChangeCameraDistance(0, 2.200f, 0)		// 基本距離
	ChangeCameraElevation(0, 8.335f, 0)	// 基本仰角
	RotateCamera(0, 81.323f, 0)				// 角度
	ChangeCameraPers(0, 32.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	Wait(FADE_FAST)

	ChangeAnimation("SAHAD", "ANI_EV_UDEGUMI_S", -1, 1)
	WaitAnimation2("SAHAD", -1, 1, "ANI_EV_UDEGUMI_S", 0)

	Wait(30)

	CrossFade(FADE_FAST)
	MoveCameraAt(0, -436.080f, 908.110f, 12.519f, 0)	// 注視点
	ChangeCameraDistance(0, 2.200f, 0)		// 基本距離
	ChangeCameraElevation(0, 8.336f, 0)	// 基本仰角
	RotateCamera(0, 324.794f, 0)				// 角度
	ChangeCameraPers(0, 32.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転

	Wait(FADE_FAST)

	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_LAUGH_S,1)
	ChangeAnimation( "RICOTTA" , "ANI_EV_RYOTEKOSI_S", -1 , 1 )
	EmotionEx("RICOTTA", 0.00f, EMO_WAI, 0, 5, 1, 0, 1.0f)	// ワイワイ
	Wait(60)

	CrossFade(FADE_FAST)
	MoveCameraAt(0, -445.879f, 906.665f, 14.652f, 0)	// 注視点
	ChangeCameraDistance(0, 2.200f, 0)		// 基本距離
	ChangeCameraElevation(0, 15.713f, 0)	// 基本仰角
	RotateCamera(0, 33.682f, 0)				// 角度
	ChangeCameraPers(0, 43.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転

	Wait(FADE_FAST)

	ChangeAnimation("HUMMEL", "ANI_EV_HIDEFACE_S", -1, 1)
	WaitAnimation2("HUMMEL", -1, 1, "ANI_EV_HIDEFACE_S", 0)
	Wait(30)

	//　　塔堂前のベンチに座っているアドルとダーナにカメラを寄せる。	◆未入力

	CrossFade(FADE_NORMAL)
	MoveCameraAt(0, -413.473f, 895.521f, 12.717f, 0)	// 注視点
	ChangeCameraDistance(0, 2.200f, 0)		// 基本距離
	ChangeCameraElevation(0, 8.337f, 0)	// 基本仰角
	RotateCamera(0, 81.767f, 0)				// 角度
	ChangeCameraPers(0, 32.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_SMILE_CLOSE,1)

	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, -415.548f, 895.452f, 12.196f, 100)		// 注視点
	ExecuteCmd(1001, RotateCamera, INTERPOLATE_SPHERE, 52.008f, 100)		// 角度
	ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE, 8.337f, 100)		// 基本仰角

	Look("DANA", 0.00f, -15.00f)
	Wait(FADE_NORMAL)

	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)

	PlayVoice(Y8V_3004, "DANA", 100)	//あはは…（苦笑）
	TalkPopup("DANA",0,2,0,0,0)
	{
		"#092e#080mあはは……ごめんね、"
		"ちょっと取り乱しちゃって。"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(5)

	//選択肢
	SetFlag(TF_MENU_SELECT,0)
	MenuReset()
	MenuType(MENUTYPE_POPUP)
	MenuAdd(1,"本当によかったな")
	MenuAdd(2,"力になれて光栄だ")
	MenuOpen( TF_MENU_SELECT , -1 , ADOLMENU_PPOSY , -2 , -2 , 10 , 0)
	WaitMenu(0)
	MenuClose(10,0)
	//Wait(20)

	SetChrWork("ADOL", CWK_FORCELIPSYNC, 1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_SMILE_S,1)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_SMILE_CLOSE_S, 1)
	HeadYes("ADOL", 1, 25)
	Wait(20)
	ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_SMILE_CLOSE_E, 1)
	SetChrWork("ADOL", CWK_FORCELIPSYNC, 0)
	Wait(20)

	//────────────────────
	//	⇒本当によかったな
	if (FLAG[TF_MENU_SELECT] == 1)
	{
		LookChr("DANA", "ADOL")
		TalkPopup("DANA",0,2,0,0,0)
		{
			"#011e#080mう、うん……"
			"なんだかスッキリしたかな。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	//	⇒力になれて光栄だ
	else if (FLAG[TF_MENU_SELECT] == 2)
	{
		LookChr("DANA", "ADOL")

		TalkPopup("DANA",0,2,0,0,0)
		{
			"#011e#080mふふ……さすがは冒険家だね。"
			"私も驚いちゃったよ。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	//────────────────────

	ChangeAnimation("DANA", "ANI_EV_SC_TEMUNE_S", -1, 1)
	TalkPopup("DANA",0,2,0,0,0)
	{
		"#012e#000mオルガちゃんが死んでから"
		"私はずっと泣けなかったから。\p"
		"#080mありがとう、アドルさん。"
		"ここまで付き合ってくれて。\p"
		"#011e#080mふふ、これでやっと……"
		"オルガちゃんも一緒に戦えるよ。"
	}
	WaitPrompt()
	WaitCloseWindow()

	Wait(20)

	StopBGM(120)
	SetEnvSEPlayState(-1, 0)	//環境SE全停止

	//　　画面暗転。
	FadeOut(FADE_BLACK,FADE_NORMAL)
	WaitFade()
	StopThread(1000)
	StopThread(1001)

	PlaySE(SE_QUEST_END, 100, 0, 0, 0, 1.0f, 0)		// クエスト達成	

	//	ナレーション
	TalkPopup(UNDEF,0,5,0,0,0)
	{
		"#8S"
		"#-1W#4Cクエスト#8C【親友の遺言】#4Cを達成した！#10W" 
		"#8S"
	}
	Wait(10)
	if(rand()%100 < 50) {
		PlayVoice(SVO_DNA_QST_1,"DANA",100)		// ふふ、やったね！
	} else {
		PlayVoice(SVO_DNA_QST_2,"DANA",100)		// うんうん、上出来だね！
	}
	WaitPrompt()
	WaitCloseWindow()

	//──────────────────────
	//	⇒好感度が一段階上がる場合
	if( FLAG[GF_LIKELV_DANA] < 2 )
	{
		PlaySE(SE_BONDS_UP, 100, 0, 0, 0, 1.0f, 0)	//好感度アップ
		//	ナレーション
		TalkPopup(UNDEF,0,5,0,0,0)
		{
			"#8S"
			"#-1W#4Cダーナの好感度が上がった！#10W" 
			"#8S"
		}
		Wait(10)
		WaitPrompt()
		WaitCloseWindow()
	}
	//	⇒好感度が最大になる場合
	else
	{
		PlaySE(SE_BONDS_UP, 100, 0, 0, 0, 1.0f, 0)	//好感度アップ
		//	ナレーション
		TalkPopup(UNDEF,0,5,0,0,0)
		{
			"#8S"
			"#-1W#4Cダーナの好感度が最大になった！#10W" 
			"#8S"
		}
		Wait(10)
		WaitPrompt()
		WaitCloseWindow()
	}
	//──────────────────────

	PlaySE( SE_HEAL , 100 , 0,  0, 0, 1.0f, 0)
	Message("#-1W#4CダーナのＨＰの最大値が１００増えた。#10W")
	WaitPrompt()
	Wait(10)

	PlaySE( SE_HEAL , 100 , 0,  0, 0, 1.0f, 0)
	Message("#-1W#4CアドルのＨＰの最大値が５０増えた。#10W")
	WaitPrompt()
	Wait(10)

	//　　イベント終了、操作許可。

	//　　※翡翠のペンダントは、ダーナ専用アクセサリアイテムとして実装したい。

//終了処理ここから----------------------------------------------------
	CallFunc("mp6201:QS_610_Complete2_ED")
}
function "QS_610_Complete2_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ立て・アイテム入手
	SetFlag( GF_QUEST_610, QUEST_SUCCESS )		// 【QS610】親友の遺言（ダーナ）　クエストを達成した
	SetFlag( GF_LIKELV_DANA, ( FLAG[GF_LIKELV_DANA] + 1 ) )	// 好感度ＵＰ
	GetItem( ICON3D_AC_055, 1 )			// 『翡翠のペンダント』
	SetFlag( GF_FAME_POINT, (FLAG[GF_FAME_POINT] + 1) )			//クエスト達成【QS610】親友の遺言（ダーナ）	名声値+1
	SetDiaryFlag( DF_QS610_END, 1 )				// 【QS610】★オルガの形見の品とともに、
	//SetDiaryCharaFlag( DRCHA_OLGA, DRCHA_FLAG_INFO2, 1 )	//★人物メモ：追加情報の開放２（オルガ）

	SetChrWork("DANA",CWK_SUP_MAXHP,(DANA.CHRWORK[CWK_SUP_MAXHP] + 100))		//好感度と合わせてアップ
	SetChrWork("ADOL",CWK_SUP_MAXHP,(ADOL.CHRWORK[CWK_SUP_MAXHP] + 50))		//好感度と合わせてアップ

	//マーカー消去
	DelMapMarker( SMI_QUEST, PAGE_F032, MARKER_QS_610_LP8, 0, 0)		// 【QS610】親友の遺言（ダーナ）「▼クエスト達成イベント」の場所用

	CallFunc("mp6201:init")

	//イベント後の再配置
	SetChrPos("LEADER",-415.77f,894.63f,10.90f)
	Turn("LEADER",-25.00f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	//MoveCameraAt( 0 , 0.0f , 0.0f , 0.0f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 0.0f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 0.0f , 0 )		// 基本仰角
	//RotateCamera( 0 , 0.0f , 0 )				// 角度
	//ChangeCameraPers( 0 , 0.0f , 0 )			// 視野角
	//SetCameraZPlane( 0 , 0.0f )					// ZPlane
	//RollCamera( 0 , 0.0f , 0 )					// ロール回転

	RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	CallFunc("system:camera_reset")

	PlayBGM(BGM_6201, 0)
	SetEnvSEPlayState(-1, 1)	//環境SE

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)
	//WaitFade()

//終了処理ここまで----------------------------------------------------
}


////////////////////////////////////////////////////////////////////////////////

//■サブイベントセクション

////////////////////////////////////////////////////////////////////////////////
//──────────────────────────────
//	【過去編Ⅱ：現代に戻るイベント】　後の再配置
//──────────────────────────────
function "SubEV_Past_02_Return_Relocate"
{
	//	  　現代編の水晶石の前に復帰して操作許可を戻す。

	CallFunc("system:event_begin")

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	CallFunc("mp6201:init")

	//イベント後の再配置
	SetChrPos("LEADER",-368.23f,815.60f,12.25f)
	Turn("LEADER",-113.00f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	//MoveCameraAt( 0 , 0.0f , 0.0f , 0.0f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 0.0f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 0.0f , 0 )		// 基本仰角
	//RotateCamera( 0 , 0.0f , 0 )				// 角度
	//ChangeCameraPers( 0 , 0.0f , 0 )			// 視野角
	//SetCameraZPlane( 0 , 0.0f )					// ZPlane
	//RollCamera( 0 , 0.0f , 0 )					// ロール回転

	RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)
	//WaitFade()
}

//──────────────────────────────
//【過去編Ⅱ：水晶石を調べて再訪する】
//──────────────────────────────
function "SubEV_Past_02_Rearrive"
{
//　　GF_04MP6201_DIS_OBSTACLEが立って以降、
//　　mp6201にある水晶石のＬＰを調べると以下の選択肢。

//開始処理ここから----------------------------------------------------
	SetStopFlag(STOPFLAG_SIMPLEEVENT2)
	ResetStopFlag(STOPFLAG_NOCHARACLIP)
	SaveCamera()

	ResetMotion( "PARTYALL" , 0 )
	StopEffect(-1,PARTYALL,1)
	StopEmotion( "PARTYALL" )
	ResetMoveVec("PARTYALL")
//開始処理ここまで-----------------------------------------------

	TurnToChr( LEADER , this , 7.5f )
	Wait(10)

	//テキスト
	TalkPopup(UNDEF, 0, 3, SYSTEM_PPOSX, SYSTEM_PPOSY, 0)
	{
		"#7C不思議な紋章が刻まれた水晶石がある。"
		"水晶石2行目"
	}
	WaitPrompt()
	WaitCloseWindow()

	SetFlag( TF_MENU_SELECT, 0 )
	YesNoMenu(TF_MENU_SELECT,"#7C水晶石に触れますか？",1)

	//────────────────────
	//	⇒はい
	if( FLAG[TF_MENU_SELECT] )	// Yesを選んだ
	{
		//　　下の流れに接続
	
		//　　クロスフェードで水晶石の前にキャラを配置。
		//　　（ダーナはいる・いない場合がある）
	
	//開始処理ここから-----------------------------------------------
		CrossFade(45)
	
		ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
	
		//CallFunc("system:event_begin")
		SetStopFlag(STOPFLAG_EVENT)
		ResetStopFlag(STOPFLAG_NOCHARACLIP)
		SetStopFlag(STOPFLAG_NOCHARACLIP)
	
		//イベント開始前情報の保存
		SaveEventState()
		SaveCamera()
	
		//パーティ状態のリセット
		CallFunc("system:party_reset")
	
		//環境の初期化・不要なものを隠す
		ClearDebris()
		ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
		//ResetChrPos((CHRTYPE_NPC | REMOVE_POS))
	
		//キャラクター初期化
		SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("ADOL", -366.33f, 817.55f, 11.93f)
		Turn("ADOL", -70.04f, 360.0f)
		ChangeAnimation("ADOL", "ANI_WAIT", -1, 1)
		ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_WAIT, 1)
		ChangeSubAnimation("ADOL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
		ChangeSubAnimation("ADOL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
		LookReset("ADOL")
		SetChrInfoFlag("ADOL", INFOFLAG_NOCHRATARI)
	
		SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("LAXIA", -366.91f, 818.50f, 12.34f)
		Turn("LAXIA", -46.84f, 360.0f)
		ChangeAnimation("LAXIA", "ANI_WAIT", -1, 1)
		ChangeSubAnimation("LAXIA", SUBMOT_EYE, ANI_E_WAIT, 1)
		ChangeSubAnimation("LAXIA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
		ChangeSubAnimation("LAXIA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
		LookReset("LAXIA")
		SetChrInfoFlag("LAXIA", INFOFLAG_NOCHRATARI)
	
		SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("SAHAD", -366.89f, 816.13f, 12.06f)
		Turn("SAHAD", -132.54f, 360.0f)
		ChangeAnimation("SAHAD", "ANI_WAIT", -1, 1)
		ChangeSubAnimation("SAHAD", SUBMOT_EYE, ANI_E_WAIT, 1)
		ChangeSubAnimation("SAHAD", SUBMOT_MOUTH, ANI_M_WAIT, 1)
		ChangeSubAnimation("SAHAD", SUBMOT_EXT1, ANI_E_LOOKC, 1)
		LookReset("SAHAD")
		SetChrInfoFlag("SAHAD", INFOFLAG_NOCHRATARI)
	
		SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("RICOTTA", -365.97f, 818.56f, 12.22f)
		Turn("RICOTTA", -37.67f, 360.0f)
		ChangeAnimation("RICOTTA", "ANI_WAIT", -1, 1)
		ChangeSubAnimation("RICOTTA", SUBMOT_EYE, ANI_E_WAIT, 1)
		ChangeSubAnimation("RICOTTA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
		ChangeSubAnimation("RICOTTA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
		LookReset("RICOTTA")
		SetChrInfoFlag("RICOTTA", INFOFLAG_NOCHRATARI)
	
		SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("HUMMEL",-367.45f, 817.07f, 12.08f)
		Turn("HUMMEL", -84.15f, 360.0f)
		ChangeAnimation("HUMMEL", "ANI_WAIT", -1, 1)
		ChangeSubAnimation("HUMMEL", SUBMOT_EYE, ANI_E_WAIT, 1)
		ChangeSubAnimation("HUMMEL", SUBMOT_MOUTH, ANI_M_WAIT, 1)
		ChangeSubAnimation("HUMMEL", SUBMOT_EXT1, ANI_E_LOOKC, 1)
		LookReset("HUMMEL")
		SetChrInfoFlag("HUMMEL", INFOFLAG_NOCHRATARI)
	
		if( FLAG[SF_DANA_JOINOK] )
		{
			SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
			SetChrPos("DANA",-368.28f, 818.21f, 12.45f)
			Turn("DANA", -73.49f, 360.0f)
			ChangeAnimation("DANA", "ANI_WAIT", -1, 1)
			ChangeSubAnimation("DANA", SUBMOT_EYE, ANI_E_WAIT, 1)
			ChangeSubAnimation("DANA", SUBMOT_MOUTH, ANI_M_WAIT, 1)
			ChangeSubAnimation("DANA", SUBMOT_EXT1, ANI_E_LOOKC, 1)
			LookReset("DANA")
			SetChrInfoFlag("DANA", INFOFLAG_NOCHRATARI)
		}
	
		//BGM設定◆
		//PlayBGM( BGM_FIELD_101 , XX )
	
		// ポートレート読み込み
		Portrait_Load(0, "system/black.itp" )		//擬似フェードアウト用
		Portrait_Create(0, 0, 0, 0, 0, 64,64, 0.0f, 0x00ffffff, 0x00000000)
	
		//カメラ設定
		MoveCameraAt( 0 , -365.399f , 817.187f , 13.321f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 6.241f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 4.195f , 0 )	// 基本仰角
		RotateCamera( 0 , 190.285f , 0 )				// 角度
		ChangeCameraPers( 0 , 50.000f , 0 )			// 視野角
		SetCameraZPlane( 0.100f , 1600.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	
		// 被写界深度の設定
		SetDoF(0, LERP_LINEAR, 2.000, 30.000 ,0.000 ,0.150 ,0.500)
		// グレアの設定
		SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)
	
		//スキップ許可
		SetSkipScript("mp6201:SubEV_Past_02_Rearrive_ED")
	
		// カメラ移動
		ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE ,-366.583f , 817.012f , 13.901f , 360 )
		ExecuteCmd(1001, ChangeCameraDistance, INTERPOLATE_SPHERE , 7.441f , 360 )
		ExecuteCmd(1002, ChangeCameraElevation, INTERPOLATE_SPHERE , 34.849f  , 360 )
		ExecuteCmd(1003, RotateCamera, INTERPOLATE_SPHERE ,293.987f , 360 )
	
		Effect2(3900500, -365.518f , 817.104f , 11.921f,0.0f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.0f, 1.0f)	//共鳴音と連動するように水晶石が明滅（ループ）
	
		Wait(20)
	//開始処理ここまで-----------------------------------------------
	
		//　　先頭のアドルが手をかざし、水晶石が光る演出が入る。
	
		ChangeAnimation("ADOL", "ANI_EV_KAZASU_S", -1, 1)		// 手をかざす
		Wait(10)
		ChangeSubAnimation("ADOL", SUBMOT_EYE, ANI_E_CLOSE_S, 1)
	
		Effect2(3900530, -365.518f , 817.104f , 13.321f, 0.0f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.2f, 1.0f)	// 水晶石と交信エフェクト
		PlaySE(SE_GO_KAKO_1, 100, 1, 1000, 0, 1.0f, 0)	//水晶石と交信エフェクトループ
		PlaySE(SE_GO_KAKO_4, 30, 1, 4000, 0, 1.0f, 0)
	
		EarthQuake( 0.01f , 0.01f , 300 )	// 縦揺れ幅, 横揺れ幅, 時間
	
		Effect2(3900570, -364.872f , 817.099f , 11.841f, 0.0f, 0, 0, IMPACT_NONE, KNOCK_EFXPOS, 0, 1.5f, 1.0f)	// 過去に飛ぶ時の画面切り替えエフェクト
	
	//	Wait(250)
		Wait(90)
		PlaySE(SE_GO_KAKO_2, 80, 0, 0, 0, 1.0f, 0)	//	発光（過去編ワープ）
		Wait(60)
		PlaySE(SE_GO_KAKO_2, 80, 0, 0, 0, 1.0f, 0)	//	発光（過去編ワープ）
		Wait(60)
		PlaySE(SE_GO_KAKO_2, 80, 0, 0, 0, 1.0f, 0)	//	発光（過去編ワープ）
		Wait(40)
	
		StopBGM(120)
	
		//　　ホワイトアウトし、以下に接続
		PlaySE(SE_GO_KAKO_3, 100, 0, 0, 0, 1.0f, 0)	//	ホワイトアウト
		SetEnvSEPlayState(-1, 0)	//環境SE全停止
		StopSE(SE_GO_KAKO_1, 2000)
		StopSE(SE_GO_KAKO_4, 4000)
	
		// フェードアウト（白）
		FadeOut(FADE_WHITE, FADE_FAST)
		Wait(FADE_NORMAL)
	
		// カメラ停止
		StopThread(1000)
		StopThread(1001)
		StopThread(1002)
		StopThread(1003)
	
		Wait(60)
		
		// 擬似フェードアウト表示
		Portrait_Anime(0 ,PR_ANIME_SCALE, 30.0f, 17.0f, 0, 0, 0)
		Portrait_Anime(0 ,PR_ANIME_COLOR, 1.0f, 1.0f, 1.0f, 1.0f, 0)
	
		// フェードイン（白）
		FadeIn(FADE_WHITE, FADE_NORMAL)
		WaitFade()
	
		// フェードアウト（黒）
		FadeOut(FADE_BLACK, 0)
		WaitFade()
	
	//終了処理ここから----------------------------------------------------
		CallFunc("mp6201:SubEV_Past_02_Rearrive_ED")
	}
	//	⇒いいえ
	else
	{
		//	  　そのまま操作許可を戻す
	
	//終了処理ここから----------------------------------------------------
		CrossFade(FADE_CROSS)
		SetStopFlag(STOPFLAG_NOCHARACLIP)
	
		//イベント後の再配置
		//SetChrPos("LEADER", -218.56f, 816.64f, 64.58f)
		//Turn("LEADER", 166.13f, 360.0f)
		ResetPartyPos()
		ResetFollowPoint()
		//Wait(1) //処理待ち用
	
		RestoreCamera(0,0)
		ResetCameraObserver(0)
		ResetCameraZPlane()
		Wait(FADE_CROSS)
	
		ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
	//終了処理ここまで----------------------------------------------------
	}
	//────────────────────

}
function "SubEV_Past_02_Rearrive_ED"
{
	SetSkipScript("")		//終了処理はスキップ禁止

	//モンスターを復帰
	//ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラクター初期化
	CallFunc("system:reset_chrmot_ADOL")
	CallFunc("system:reset_chrmot_LAXIA")
	CallFunc("system:reset_chrmot_SAHAD")
	CallFunc("system:reset_chrmot_HUMMEL")
	CallFunc("system:reset_chrmot_RICOTTA")
	
	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	// エフェクト停止
	StopEffect(-1, ALL, 1)
	Wait(1)

	// ポートレートリリース
	Portrait_Close(-1)
	Portrait_Unload(-1)

	CallFunc("system:camera_reset")

	SetFlag( TF_LOADING_TIPS_OFF, 1 )	//NowLoading 時の Tips 表示をカット

	StopBGM(30)
//	SetFlag(SF_NOCHANGEBGM, 1)
	
	LoadArg("map/mp6201m/mp6201m.arg")
	
	EventCue("mp6201m:SubEV_Past_02_Rearrive2")
	
	ResetStopFlag(STOPFLAG_EVENT)

//終了処理ここまで----------------------------------------------------
}
//	================================================
//	【王都アイギアス：西の橋を見る】
//	================================================
function "SubEV_04_Look_Bridge"
{
	//▼第四部～第五部中
	//　　mp6201 -534.63f	954.17f	10.19f	101.75f付近に来るとイベント。

//開始処理ここから----------------------------------------------------

	CallFunc("system:event_begin")

	//イベント開始前情報の保存
	SaveEventState()
	SaveCamera()

	//パーティ状態のリセット
	CallFunc("system:party_reset")

	//環境の初期化・不要なものを隠す
	ClearDebris()
	ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
	ResetChrPos((CHRTYPE_NPC | REMOVE_POS))

	//キャラ初期状態の設定
	SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("ADOL",-532.77f,954.98f,10.44f)
	Turn("ADOL",97.58f,360.0f)
	ChangeAnimation( "ADOL" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	SetChrInfoFlag( "ADOL" , INFOFLAG_NOCHRATARI)
	LookReset( "ADOL" )

	SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("LAXIA",-532.68f,955.94f,10.44f)
	Turn("LAXIA",97.97f,360.0f)
	ChangeAnimation( "LAXIA" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("LAXIA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("LAXIA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	SetChrInfoFlag( "LAXIA" , INFOFLAG_NOCHRATARI)
	LookReset( "LAXIA" )

	SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("SAHAD",-532.88f,952.52f,10.50f)
	Turn("SAHAD",97.97f,360.0f)
	ChangeAnimation( "SAHAD" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("SAHAD",SUBMOT_EXT1,ANI_E_LOOKC,1)
	SetChrInfoFlag( "SAHAD" , INFOFLAG_NOCHRATARI)
	LookReset( "SAHAD" )

	SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("RICOTTA",-533.09f,953.71f,10.43f)
	Turn("RICOTTA",98.20f,360.0f)
	ChangeAnimation( "RICOTTA" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("RICOTTA",SUBMOT_EXT1,ANI_E_LOOKC,1)
	SetChrInfoFlag( "RICOTTA" , INFOFLAG_NOCHRATARI)
	LookReset( "RICOTTA" )

	SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
	SetChrPos("HUMMEL",-531.81f,953.47f,10.62f)
	Turn("HUMMEL",97.98f,360.0f)
	ChangeAnimation( "HUMMEL" , "ANI_WAIT", -1 , 1 )
	ChangeSubAnimation("HUMMEL",SUBMOT_EYE,ANI_E_WAIT,1)
	ChangeSubAnimation("HUMMEL",SUBMOT_MOUTH,ANI_M_WAIT,1)
	ChangeSubAnimation("HUMMEL",SUBMOT_EXT1,ANI_E_LOOKC,1)
	LookReset( "HUMMEL" )
	SetChrInfoFlag( "HUMMEL" , INFOFLAG_NOCHRATARI)

	if( FLAG[SF_DANA_JOINOK] )					// ダーナがいる
	{
		SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("DANA",-531.75f,955.32f,10.58f)
		Turn("DANA",97.98f,360.0f)
		ChangeAnimation( "DANA" , "ANI_WAIT", -1 , 1 )
		ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_WAIT,1)
		ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
		ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)
		LookReset( "DANA" )
		SetChrInfoFlag( "DANA" , INFOFLAG_NOCHRATARI)
	}

	//BGM設定◆
	//PlayBGM( BGM_FIELD_101 , XX )

	//カメラ設定
	MoveCameraAt(0, -548.743f, 957.745f, 17.328f, 0)	// 注視点
	ChangeCameraDistance(0, 7.000f, 0)		// 基本距離
	ChangeCameraElevation(0, 13.390f, 0)	// 基本仰角
	RotateCamera(0, 102.160f, 0)				// 角度
	ChangeCameraPers(0, 60.000f, 0)			// 視野角
	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
	RollCamera(0, 0.0f, 0)				// ロール回転

	// 被写界深度の設定
	SetDoF(0, LERP_LINEAR, 5.000, 200.000 ,1.000 ,0.700 ,0.500)
	// グレアの設定
	SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)

	//スキップ許可
	SetSkipScript("mp6201:SubEV_04_Look_Bridge_ED")

//開始処理ここまで-----------------------------------------------
	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, -540.243f, 954.401f, 11.870f, 140)		// 注視点
	ExecuteCmd(1001, ChangeCameraElevation, INTERPOLATE_SPHERE, 15.690f, 140)		// 基本仰角
	ExecuteCmd(1002, RotateCamera, INTERPOLATE_SPHERE, 76.298f, 140)		// 角度

	FadeIn(FADE_BLACK,FADE_NORMAL)
	WaitFade()

	//　　カメラを動かし、崩落した橋の前にいるアドルたちを映す。
	//　　（ダーナは居る場合・居ない場合がある）

	WaitThread(1000)
	WaitThread(1001)
	WaitThread(1002)

	CrossFade(FADE_FAST)
//	MoveCameraAt(0, -536.144f, 954.268f, 11.622f, 0)	// 注視点
//	ChangeCameraDistance(0, 7.000f, 0)		// 基本距離
//	ChangeCameraElevation(0, 13.390f, 0)	// 基本仰角
//	RotateCamera(0, 90.231f, 0)				// 角度
//	ChangeCameraPers(0, 60.000f, 0)			// 視野角
//	SetCameraZPlane(0.500f, 900.000f)			// ZPlane
//	RollCamera(0, 0.0f, 0)				// ロール回転
//
//	ExecuteCmd(1000, MoveCameraAt, INTERPOLATE_SPHERE, -536.144f, 954.268f, 11.176f, 60)		// 注視点
//	ExecuteCmd(1001, RotateCamera, INTERPOLATE_SPHERE, 90.231f, 60)		// 角度
	MoveCameraAt( 0 , -536.144f , 954.268f , 11.176f , 0 )	// 注視点
	ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
	ChangeCameraElevation( 0 , 13.390f , 0 )	// 基本仰角
	RotateCamera( 0 , 90.231f , 0 )				// 角度
	ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
	SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
	RollCamera( 0 , 0.0f , 0 )				// ロール回転
	// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。

	Wait(FADE_FAST)

//	WaitThread(1000)
//	WaitThread(1001)

	ChangeAnimation("SAHAD", "ANI_EV_BORI", -1, 1)
	TalkPopup("SAHAD",0,0,0,0,0)
	{
		"#000e#000mお？　こりゃあ"
		"通れそうにねーな……"
	}
	WaitPrompt()
	WaitCloseWindow()

	//	"LAXIA"
	HeadYes("LAXIA", 1, 25)
	TalkPopup("LAXIA",0,0,0,0,0)
	{
		"#000e#000mええ、崩落した建物で"
		"橋が落ちてしまったようですね。"
	}
	WaitPrompt()
	WaitCloseWindow()

	//────────────────────
	//	⇒ダーナが居ない
	if( !FLAG[SF_DANA_JOINOK] )					// ダーナがいる
	{
		LookChr("LAXIA", "ADOL")
		ChangeAnimation("LAXIA", "ANI_EV_TEBURI", -1, 1)
		TalkPopup("LAXIA",0,0,0,0,0)
		{
			"#000e#000mアドル、ここは諦めましょう。"
		}
		WaitPrompt()
		WaitCloseWindow()
	//	⇒ダーナが居る
	}
	else
	{
		LookChr("DANA", "ADOL")
		ChangeAnimation("DANA", "ANI_EV_TEBURI", -1, 1)
		TalkPopup("DANA",0,0,0,0,0)
		{
			"#000e#000mうん……\p"
			"アドルさん、ここを進むのは"
			"諦めるしかなさそうだね。"
		}
		WaitPrompt()
		WaitCloseWindow()
	}
	//────────────────────

	//　　アドル頷く。
	HeadYes("ADOL" , 1 , 25)
	Wait(40)

	FadeOut(FADE_BLACK,FADE_FAST)
	WaitFade()

//終了処理ここから----------------------------------------------------
	CallFunc("mp6201:SubEV_04_Look_Bridge_ED")
}
function "SubEV_04_Look_Bridge_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")	

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ処理
	SetFlag( GF_SUBEV_04_6201_LOOK_BRIDGE, 1 )	// 【王都アイギアス：西の橋を見る】

	CallFunc("mp6201:init")

	//イベント後の再配置
	SetChrPos("LEADER", -526.96f, 953.32f, 11.01f)
	Turn("LEADER", 105.79f, 360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	//MoveCameraAt( 0 , 0.0f , 0.0f , 0.0f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 0.0f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 0.0f , 0 )		// 基本仰角
	//RotateCamera( 0 , 0.0f , 0 )				// 角度
	//ChangeCameraPers( 0 , 0.0f , 0 )			// 視野角
	//SetCameraZPlane( 0 , 0.0f )					// ZPlane
	//RollCamera( 0 , 0.0f , 0 )					// ロール回転

	RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK,FADE_FAST)
	//WaitFade()
//終了処理ここまで----------------------------------------------------
}


////////////////////////////////////////////////////////////////////////////////

//■ストッパー・ＬＰセクション

////////////////////////////////////////////////////////////////////////////////

//	================================================
//	【ストッパー：王都東の竜人扉】
//	================================================
function "LP_6201_EastDoor"
{
	//▼常時
	//　　閉じた扉にＬＰを仕掛ける

	//────────────────────
	//	⇒ダーナが居ない場合
	if( !FLAG[SF_DANA_JOINOK] )					// ダーナがいる
	{
	//開始処理ここから----------------------------------------------------
		SetStopFlag(STOPFLAG_SIMPLEEVENT2)
		ResetStopFlag(STOPFLAG_NOCHARACLIP)
		SaveCamera()
		
		ResetMotion( "PARTYALL" , 0 )
		StopEffect(-1,PARTYALL,1)
		StopEmotion( "PARTYALL" )
		ResetMoveVec("PARTYALL")
	//開始処理ここまで-----------------------------------------------
	
		TurnToChr( LEADER , this , 7.5f )
		Wait(10)
	
		//	テキスト
		TalkPopup(UNDEF,0,3,STOPPER_PPOSX,STOPPER_PPOSY,0)
		{
			"#7Cレリーフが刻まれた扉は、固く閉ざされている。\p"
			"#7Cどれほど力を込めても開きそうにない。"
		}
		WaitPrompt()
		WaitCloseWindow()
	
		//　　操作許可を戻す
	
	//終了処理ここから----------------------------------------------------
		CrossFade(FADE_CROSS)
		SetStopFlag(STOPFLAG_NOCHARACLIP)
		
		//イベント後の再配置
		//SetChrPos("LEADER",0.00f,0.00f,0.00f)
		//Turn("LEADER",0.00f,360.0f)
		ResetPartyPos()
		ResetFollowPoint()
		//Wait(1) //処理待ち用
		
		RestoreCamera(0,0)
		ResetCameraObserver(0)
		ResetCameraZPlane()
		Wait(FADE_CROSS)
		
		ResetStopFlag(STOPFLAG_SIMPLEEVENT2)
	//終了処理ここまで----------------------------------------------------
	}
	//	⇒ダーナが居る場合
	else
	{
		//　　クロスフェードで扉の前にアドルたちを再配置する。
		//　　ダーナが扉の正面に立つ。
	
	//開始処理ここから----------------------------------------------------
		CrossFade(FADE_FAST)
	
		//CallFunc("system:event_begin")
		SetStopFlag(STOPFLAG_EVENT)
		ResetStopFlag(STOPFLAG_NOCHARACLIP)
		SetStopFlag(STOPFLAG_NOCHARACLIP)
	
		//イベント開始前情報の保存
		SaveEventState()
		SaveCamera()
	
		//パーティ状態のリセット
		CallFunc("system:party_reset")
	
		//環境の初期化・不要なものを隠す
		ClearDebris()
		ResetChrPos((CHRTYPE_MONS | REMOVE_POS))
		ResetChrPos((CHRTYPE_NPC | REMOVE_POS))
	
		//キャラ初期状態の設定
		SetChrWork("ADOL", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("ADOL",-284.26f,1140.23f,11.09f)
		Turn("ADOL",-143.90f,360.0f)
		ChangeAnimation( "ADOL" , "ANI_WAIT", -1 , 1 )
		ChangeSubAnimation("ADOL",SUBMOT_EYE,ANI_E_WAIT,1)
		ChangeSubAnimation("ADOL",SUBMOT_MOUTH,ANI_M_WAIT,1)
		ChangeSubAnimation("ADOL",SUBMOT_EXT1,ANI_E_LOOKC,1)
		LookReset( "ADOL" )
		SetChrInfoFlag( "ADOL" , INFOFLAG_NOCHRATARI)
	
		SetChrWork("DANA", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("DANA",-283.32f,1141.48f,11.09f)
		Turn("DANA",-142.15f,360.0f)
		ChangeAnimation( "DANA" , "ANI_WAIT", -1 , 1 )
		ChangeSubAnimation("DANA",SUBMOT_EYE,ANI_E_WAIT,1)
		ChangeSubAnimation("DANA",SUBMOT_MOUTH,ANI_M_WAIT,1)
		ChangeSubAnimation("DANA",SUBMOT_EXT1,ANI_E_LOOKC,1)
		LookReset( "DANA" )
		SetChrInfoFlag( "DANA" , INFOFLAG_NOCHRATARI)
	
		SetChrWork("LAXIA", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("LAXIA",-285.19f,1141.06f,11.09f)
		Turn("LAXIA",-112.28f,360.0f)
		ChangeAnimation( "LAXIA" , "ANI_WAIT", -1 , 1 )
		ChangeSubAnimation("LAXIA",SUBMOT_EYE,ANI_E_WAIT,1)
		ChangeSubAnimation("LAXIA",SUBMOT_MOUTH,ANI_M_WAIT,1)
		ChangeSubAnimation("LAXIA",SUBMOT_EXT1,ANI_E_LOOKC,1)
		LookReset( "LAXIA" )
		SetChrInfoFlag( "LAXIA" , INFOFLAG_NOCHRATARI)
	
		SetChrWork("SAHAD", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("SAHAD",-285.58f,1139.78f,11.09f)
		Turn("SAHAD",-137.45f,360.0f)
		ChangeAnimation( "SAHAD" , "ANI_WAIT", -1 , 1 )
		ChangeSubAnimation("SAHAD",SUBMOT_EYE,ANI_E_WAIT,1)
		ChangeSubAnimation("SAHAD",SUBMOT_MOUTH,ANI_M_WAIT,1)
		ChangeSubAnimation("SAHAD",SUBMOT_EXT1,ANI_E_LOOKC,1)
		LookReset( "SAHAD" )
		SetChrInfoFlag( "SAHAD" , INFOFLAG_NOCHRATARI)
	
		SetChrWork("RICOTTA", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("RICOTTA",-283.08f,1139.60f,11.09f)
		Turn("RICOTTA",173.44f,360.0f)
		ChangeAnimation( "RICOTTA" , "ANI_WAIT", -1 , 1 )
		ChangeSubAnimation("RICOTTA",SUBMOT_EYE,ANI_E_WAIT,1)
		ChangeSubAnimation("RICOTTA",SUBMOT_MOUTH,ANI_M_WAIT,1)
		ChangeSubAnimation("RICOTTA",SUBMOT_EXT1,ANI_E_LOOKC,1)
		LookReset( "RICOTTA" )
		SetChrInfoFlag( "RICOTTA" , INFOFLAG_NOCHRATARI)
	
		SetChrWork("HUMMEL", CWK_DEFAULT_SKIPNODE_OFF, 1)
		SetChrPos("HUMMEL",-284.01f,1138.91f,11.09f)
		Turn("HUMMEL",-165.83f,360.0f)
		ChangeAnimation( "HUMMEL" , "ANI_WAIT", -1 , 1 )
		ChangeSubAnimation("HUMMEL",SUBMOT_EYE,ANI_E_WAIT,1)
		ChangeSubAnimation("HUMMEL",SUBMOT_MOUTH,ANI_M_WAIT,1)
		ChangeSubAnimation("HUMMEL",SUBMOT_EXT1,ANI_E_LOOKC,1)
		LookReset( "HUMMEL" )
		SetChrInfoFlag( "HUMMEL" , INFOFLAG_NOCHRATARI)
	
	
		//カメラ設定
		MoveCameraAt( 0 , -282.749f , 1142.200f , 13.682f , 0 )	// 注視点
		ChangeCameraDistance( 0 , 7.000f , 0 )		// 基本距離
		ChangeCameraElevation( 0 , 0.515f , 0 )	// 基本仰角
		RotateCamera( 0 , 347.338f , 0 )				// 角度
		ChangeCameraPers( 0 , 60.000f , 0 )			// 視野角
		SetCameraZPlane( 0.500f , 900.000f )			// ZPlane
		RollCamera( 0 , 0.0f , 0 )				// ロール回転
		// ResetCameraZPlane()	// イベント終了時に呼び出して下さい。マップ側の設定に戻します。
	
		// 被写界深度の設定
		SetDoF(0, LERP_LINEAR, 1.000, 96.000 ,1.000 ,0.700 ,0.500)
		// グレアの設定
		SetGlare(0, LERP_LINEAR, 0.700, 1.300 ,1.000 ,1.000 ,0.600 ,0.000 ,1.000)
	
		//スキップ許可
		SetSkipScript("mp6201:LP_6201_EastDoor_ED")
	
		Wait(FADE_FAST)
	//開始処理ここまで-----------------------------------------------
	
		//────────────────────
		//	⇒ＧＦで１回のみ
		if( !FLAG[GF_SUBEV_ST_DOOR_1STTALK] )	//【ストッパー：山門屋上東の竜人扉】【ストッパー：山門屋上東の竜人扉】ＧＦ初回
		{
			TalkPopup("DANA",0,0,0,0,0)
			{
				"#000e#000mこれは、理力でしか動かない理封門だね。"
				"門2行目"
			}
			WaitPrompt()
			WaitCloseWindow()
		
			TalkPopup("LAXIA",0,0,0,0,0)
			{
				"#000e#000mなるほど……重要な施設などに"
				"使われていたようですね。"
			}
			WaitPrompt()
			WaitCloseWindow()
		
			TalkPopup("DANA",0,0,0,0,0)
			{
				"#000e#000mうん、そんな所かな。\p"
				"ちょっと待ってね、"
				"私なら開けられるはずだから。"
			}
			WaitPrompt()
			WaitCloseWindow()
		}
		//────────────────────
	
		//　　ダーナ、祈りモーションなどで
		//　　理力をまとう。
		ChangeAnimation( "DANA", "ANI_EV_PRAY_S", -1, 1 )
		WaitAnimation2( "DANA" , -1, 1, "ANI_EV_PRAY_S",  0)
		ChrEffect2( "DANA" , 3900600 , "Bone_root", "", 0 , 0 , 0 , 0.0f,0.0f,0, 1.0f, 1.0f)	//オーラ（ループ）
		PlaySE(SE_DANA_STOPPER, 70, 0, 0, 0, 1.0f, 0)
		Wait(30)
	
		//　　扉が光って反応し、開く。	// ◆未対応
	
		MapAnime("dragon_gate_all_A2" , "close_open" )		//東大橋の門
		PlaySE(SE_GIM_DOOR_ROCK,150,1,0,200,0.3f,0)	//gimse
		Wait(120)	//SE
		StopSE(SE_GIM_DOOR_ROCK,1000)	//gimse
		PlaySE(SE_GIM_DOOR_ROCK_STOP,100,0,0,0,1.0f,0)	//gimse
		Wait(30)	//SE
	
		//────────────────────
		//	⇒ＧＦで１回のみ
		if( !FLAG[GF_SUBEV_ST_DOOR_1STTALK] )	//【ストッパー：山門屋上東の竜人扉】【ストッパー：山門屋上東の竜人扉】ＧＦ初回
		{
			StopEffect( 3900600, ALL, 1)	// 理力エフェクト停止
			ChangeAnimation( "DANA", "ANI_EV_PRAY_E", -1, 1 )
			WaitAnimation2( "DANA" , -1, 1, "ANI_EV_PRAY_E",  0)
			Turn("DANA",36.65f,8.0f)
		
			TalkPopup("DANA",0,0,0,0,0)
			{
				"#000e#000m上手くいったみたいだね。\p"
				"アドルさん、先へ進もう！"
			}
			WaitPrompt()
			WaitCloseWindow()
		
		//	//　　アドル頷く。
		//	HeadYes("ADOL" , 1 , 25)
		//	Wait(35)
		}
		//────────────────────
	
		//　　暗転を挟んで操作許可。
		//　　以降扉は開いた状態になる。
		FadeOut(FADE_BLACK, FADE_FAST)
		WaitFade()
	
	//終了処理ここから----------------------------------------------------
		CallFunc("mp6201:LP_6201_EastDoor_ED")
	}
	//────────────────────
}
function "LP_6201_EastDoor_ED"
{
	//終了処理はスキップ禁止
	SetSkipScript("")

	//イベント前のキャラ情報を復帰
	RestoreEventState()

	//隠したものを復帰。
	ResetChrPos((CHRTYPE_MONS | RESET_POS | RESET_AISTATE))

	//キャラモーション初期化
	CallFunc("system:reset_chrmot_ALL")
	StopEffect( 3900600, ALL, 1)	// 理力エフェクト停止

	//パーティキャラを解放
	ReleaseEventPartyChr()

	//マップパラメーターリセット
	ResetMapParam(-1)

	//フラグ立て・アイテム入手
	SetFlag( GF_SUBEV_ST_6201_DOOR_OPEN, 1 )	// 【ストッパー：王都東の竜人扉】扉を開いた
	SetFlag( GF_SUBEV_ST_DOOR_1STTALK, 1 )		// 【ストッパー：山門屋上東の竜人扉】【ストッパー：山門屋上東の竜人扉】ＧＦ初回

	CallFunc("mp6201:init")

	//イベント後の再配置
	SetChrPos("LEADER",-283.32f,1141.48f,11.09f)
	Turn("LEADER",-142.15f,360.0f)
	ResetPartyPos()
	ResetFollowPoint()
	//Wait(1) //処理待ち用

	//カメラ位置復帰
	//MoveCameraAt( 0 , 0.0f , 0.0f , 0.0f , 0 )	// 注視点
	//ChangeCameraDistance( 0 , 0.0f , 0 )		// 基本距離
	//ChangeCameraElevation( 0 , 0.0f , 0 )		// 基本仰角
	//RotateCamera( 0 , 0.0f , 0 )				// 角度
	//ChangeCameraPers( 0 , 0.0f , 0 )			// 視野角
	//SetCameraZPlane( 0 , 0.0f )					// ZPlane
	//RollCamera( 0 , 0.0f , 0 )					// ロール回転

	RestoreCamera(0, 0)		//※上記カメラ位置を指定する場合は不要
	CallFunc("system:camera_reset")

	ResetStopFlag(STOPFLAG_EVENT)

	FadeIn(FADE_BLACK, FADE_FAST)
	//WaitFade()

//終了処理ここまで----------------------------------------------------
}


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// ■クノス
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// クノス01_1を倒した
function "knos01_1"
{
	SetFlag(GF_MP6201_KNOS01, (FLAG[GF_MP6201_KNOS01] | 0x01))
	// マーカー解除＆壁撤去
	CallFunc("mp6201:EV_DELKNOS_01")
}

// クノス発見⇒マーカー設定
function "EV_FOUNDKNOS"
{
	// マーカー・フラグセット
	SetFlag(GF_MP6201_FOUNDKNOS, 1)
	SetMapMarker(SMI_HIVE, PAGE_F032, MARKER_HIVE_6201, -450, 914, 11, -450, 914, MARKER_HIVE_6201, MN_F_MP6201,0)

	// イベントボックス撤去
	SetEventParam("evb2_KNOS", -100000.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f)
}

// クノス01破壊⇒壁撤去＆マーカー解除
function "EV_DELKNOS_01"
{
	MapDelProp("wall1", MNP_GROUND)
	DelMapMarker(SMI_HIVE, PAGE_F032, MARKER_HIVE_6201, -450, 914)
}




